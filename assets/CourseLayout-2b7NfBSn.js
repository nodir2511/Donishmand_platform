import{c as A,b as P,S as B,r as f,j as e,L as x,M as D,C as w,X as F,d as H}from"./index-CGqczOZw.js";import{H as R}from"./home-C2QZHNeX.js";import{B as U,F as y}from"./file-text-Dmczy5Z9.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=A("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),S=({subjectId:s,lang:l})=>{var j;const m=P(),a=D[s],d=((j=B[s])==null?void 0:j[l])||s,c=m.pathname.split("/"),h=c[c.indexOf("section")+1],p=c[c.indexOf("topic")+1],g=c[c.indexOf("lesson")+1],[k,C]=f.useState(()=>h?{[h]:!0}:{}),[z,T]=f.useState(()=>p?{[p]:!0}:{}),$=t=>{C(i=>({...i,[t]:!i[t]}))},L=(t,i)=>{i.preventDefault(),i.stopPropagation(),T(o=>({...o,[t]:!o[t]}))};if(!a)return null;const u=t=>l==="tj"&&t.titleTj?t.titleTj:t.title;return e.jsxs("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5",children:[e.jsxs(x,{to:"/",className:"flex items-center gap-2 text-gaming-textMuted hover:text-white text-sm mb-3 transition-colors",children:[e.jsx(R,{size:14}),e.jsx("span",{children:l==="ru"?"Главная":"Асосӣ"})]}),e.jsxs(x,{to:`/subject/${s}`,className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary",children:e.jsx(U,{size:20})}),e.jsx("span",{className:"font-bold text-lg text-white truncate",children:d})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:a.sections.map((t,i)=>{const o=h===t.id,b=k[t.id]||o;return e.jsxs("div",{className:"mb-1",children:[e.jsxs("button",{onClick:()=>$(t.id),className:`w-full flex items-center gap-2 p-2.5 rounded-xl text-left transition-all group ${o?"bg-gaming-primary/20 text-white":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("span",{className:`transition-transform ${b?"rotate-90":""}`,children:e.jsx(w,{size:16})}),e.jsxs("span",{className:"font-semibold text-sm truncate",children:[i+1,". ",u(t)]})]}),b&&e.jsx("div",{className:"ml-4 mt-1 space-y-0.5 border-l border-white/5 pl-3",children:t.topics.map((n,E)=>{const v=p===n.id,N=z[n.id]||v||g;return e.jsxs("div",{children:[e.jsxs(x,{to:`/subject/${s}/section/${t.id}/topic/${n.id}`,className:`w-full flex items-center gap-2 p-2 rounded-lg text-left text-sm transition-all group ${v&&!g?"bg-gaming-accent/20 text-gaming-accent":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("button",{onClick:r=>L(n.id,r),className:`transition-transform ${N?"rotate-90":""}`,children:e.jsx(w,{size:14})}),e.jsx(y,{size:14,className:"opacity-50 shrink-0"}),e.jsxs("span",{className:"truncate",children:[i+1,".",E+1,". ",u(n)]})]}),N&&e.jsx("div",{className:"ml-5 mt-0.5 space-y-0.5 border-l border-white/5 pl-2",children:n.lessons.map((r,M)=>{const O=g===r.id;return e.jsxs(x,{to:`/lesson/${r.id}`,className:`flex items-center gap-2 p-1.5 rounded-lg text-xs transition-all ${O?"bg-gaming-pink/20 text-gaming-pink font-semibold":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:[r.type==="video"?e.jsx(_,{size:12}):e.jsx(y,{size:12}),e.jsxs("span",{className:"truncate",children:[M+1,". ",u(r)]})]},r.id)})})]},n.id)})})]},t.id)})})]})},Y=({subjectId:s,lang:l,children:m})=>{const[a,d]=f.useState(!1);return e.jsxs("div",{className:"flex min-h-[calc(100vh-6rem)]",children:[e.jsx("div",{className:"hidden lg:block sticky top-24 h-[calc(100vh-6rem)]",children:e.jsx(S,{subjectId:s,lang:l})}),a&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>d(!1)}),e.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(S,{subjectId:s,lang:l})}),e.jsxs("main",{className:"flex-1 p-6 overflow-x-hidden",children:[e.jsx("button",{onClick:()=>d(!a),className:"lg:hidden fixed bottom-6 left-6 z-30 w-14 h-14 rounded-full bg-gaming-primary text-white flex items-center justify-center shadow-xl shadow-gaming-primary/30",children:a?e.jsx(F,{size:24}):e.jsx(H,{size:24})}),m]})]})};export{Y as C,_ as P};
