import{e as B,u as D,f as F,S as H,r as p,j as e,L as R,d,C as w,X as J,M as U}from"./index-CrMD2eKm.js";import{u as X,B as _,F as y,S as q}from"./SyllabusContext-BFdS8Iuu.js";import{H as G}from"./home-Te0i9fN5.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=B("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),S=({subjectId:t})=>{var j;const{i18n:x}=D(),a=x.resolvedLanguage||"ru",o=F(),{subjectData:f,loading:k}=X(),z=((j=H[t])==null?void 0:j[a])||t,l=o.pathname.split("/"),m=l[l.indexOf("section")+1],g=l[l.indexOf("topic")+1],h=l[l.indexOf("lesson")+1],[C,T]=p.useState(()=>m?{[m]:!0}:{}),[$,L]=p.useState(()=>g?{[g]:!0}:{}),E=s=>{T(i=>({...i,[s]:!i[s]}))},M=(s,i)=>{i.preventDefault(),i.stopPropagation(),L(c=>({...c,[s]:!c[s]}))};if(k)return e.jsx("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex items-center justify-center",children:e.jsx(R,{size:24,className:"text-gaming-primary animate-spin"})});if(!f)return null;const u=s=>a==="tj"&&s.titleTj?s.titleTj:s.title;return e.jsxs("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5",children:[e.jsxs(d,{to:"/",className:"flex items-center gap-2 text-gaming-textMuted hover:text-white text-sm mb-3 transition-colors",children:[e.jsx(G,{size:14}),e.jsx("span",{children:a==="ru"?"Главная":"Асосӣ"})]}),e.jsxs(d,{to:`/subject/${t}`,className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary",children:e.jsx(_,{size:20})}),e.jsx("span",{className:"font-bold text-lg text-white truncate",children:z})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:f.sections.map((s,i)=>{const c=m===s.id,b=C[s.id]||c;return e.jsxs("div",{className:"mb-1",children:[e.jsxs("button",{onClick:()=>E(s.id),className:`w-full flex items-center gap-2 p-2.5 rounded-xl text-left transition-all group ${c?"bg-gaming-primary/20 text-white":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("span",{className:`transition-transform ${b?"rotate-90":""}`,children:e.jsx(w,{size:16})}),e.jsxs("span",{className:"font-semibold text-sm truncate",children:[i+1,". ",u(s)]})]}),b&&e.jsx("div",{className:"ml-4 mt-1 space-y-0.5 border-l border-white/5 pl-3",children:s.topics.map((n,P)=>{const v=g===n.id,N=$[n.id]||v||h;return e.jsxs("div",{children:[e.jsxs(d,{to:`/subject/${t}/section/${s.id}/topic/${n.id}`,className:`w-full flex items-center gap-2 p-2 rounded-lg text-left text-sm transition-all group ${v&&!h?"bg-gaming-accent/20 text-gaming-accent":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("button",{onClick:r=>M(n.id,r),className:`transition-transform ${N?"rotate-90":""}`,children:e.jsx(w,{size:14})}),e.jsx(y,{size:14,className:"opacity-50 shrink-0"}),e.jsxs("span",{className:"truncate",children:[i+1,".",P+1,". ",u(n)]})]}),N&&e.jsx("div",{className:"ml-5 mt-0.5 space-y-0.5 border-l border-white/5 pl-2",children:n.lessons.map((r,O)=>{const A=h===r.id;return e.jsxs(d,{to:`/lesson/${r.id}`,className:`flex items-center gap-2 p-1.5 rounded-lg text-xs transition-all ${A?"bg-gaming-pink/20 text-gaming-pink font-semibold":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:[r.type==="video"?e.jsx(K,{size:12}):e.jsx(y,{size:12}),e.jsxs("span",{className:"truncate",children:[O+1,". ",u(r)]})]},r.id)})})]},n.id)})})]},s.id)})})]})},Y=({subjectId:t,children:x})=>{const[a,o]=p.useState(!1);return e.jsx(q,{subjectId:t,children:e.jsxs("div",{className:"flex min-h-[calc(100vh-6rem)]",children:[e.jsx("div",{className:"hidden lg:block sticky top-24 h-[calc(100vh-6rem)]",children:e.jsx(S,{subjectId:t})}),a&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>o(!1)}),e.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(S,{subjectId:t})}),e.jsxs("main",{className:"flex-1 p-6 overflow-x-hidden",children:[e.jsx("button",{onClick:()=>o(!a),className:"lg:hidden fixed bottom-6 left-6 z-30 w-14 h-14 rounded-full bg-gaming-primary text-white flex items-center justify-center shadow-xl shadow-gaming-primary/30",children:a?e.jsx(J,{size:24}):e.jsx(U,{size:24})}),x]})]})})};export{Y as C,K as P};
