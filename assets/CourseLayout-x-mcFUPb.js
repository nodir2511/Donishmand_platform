import{j as e}from"./editor-8tw8cCTw.js";import{c as B,r as p,L as d}from"./vendor-DfgOC3sD.js";import{S as D}from"./index-YN3naZQP.js";import{u as F,S as H}from"./SyllabusContext-DSvaRxe3.js";import{u as R,k as J,H as U,o as X,g as w,F as y,P as _,X as q,M as G}from"./ui-DOqj-4Eh.js";const S=({subjectId:t})=>{var j;const{i18n:x}=R(),i=x.resolvedLanguage||"ru",c=B(),{subjectData:f,loading:k}=F(),z=((j=D[t])==null?void 0:j[i])||t,l=c.pathname.split("/"),m=l[l.indexOf("section")+1],g=l[l.indexOf("topic")+1],h=l[l.indexOf("lesson")+1],[T,$]=p.useState(()=>m?{[m]:!0}:{}),[C,E]=p.useState(()=>g?{[g]:!0}:{}),L=s=>{$(a=>({...a,[s]:!a[s]}))},M=(s,a)=>{a.preventDefault(),a.stopPropagation(),E(o=>({...o,[s]:!o[s]}))};if(k)return e.jsx("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex items-center justify-center",children:e.jsx(J,{size:24,className:"text-gaming-primary animate-spin"})});if(!f)return null;const u=s=>i==="tj"&&s.titleTj?s.titleTj:s.title;return e.jsxs("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-white/5",children:[e.jsxs(d,{to:"/",className:"flex items-center gap-2 text-gaming-textMuted hover:text-white text-sm mb-3 transition-colors",children:[e.jsx(U,{size:14}),e.jsx("span",{children:i==="ru"?"Главная":"Асосӣ"})]}),e.jsxs(d,{to:`/subject/${t}`,className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary",children:e.jsx(X,{size:20})}),e.jsx("span",{className:"font-bold text-lg text-white truncate",children:z})]})]}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:f.sections.map((s,a)=>{const o=m===s.id,b=T[s.id]||o;return e.jsxs("div",{className:"mb-1",children:[e.jsxs("button",{onClick:()=>L(s.id),className:`w-full flex items-center gap-2 p-2.5 rounded-xl text-left transition-all group ${o?"bg-gaming-primary/20 text-white":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("span",{className:`transition-transform ${b?"rotate-90":""}`,children:e.jsx(w,{size:16})}),e.jsxs("span",{className:"font-semibold text-sm truncate",children:[a+1,". ",u(s)]})]}),b&&e.jsx("div",{className:"ml-4 mt-1 space-y-0.5 border-l border-white/5 pl-3",children:s.topics.map((r,O)=>{const v=g===r.id,N=C[r.id]||v||h;return e.jsxs("div",{children:[e.jsxs(d,{to:`/subject/${t}/section/${s.id}/topic/${r.id}`,className:`w-full flex items-center gap-2 p-2 rounded-lg text-left text-sm transition-all group ${v&&!h?"bg-gaming-accent/20 text-gaming-accent":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[e.jsx("button",{onClick:n=>M(r.id,n),className:`transition-transform ${N?"rotate-90":""}`,children:e.jsx(w,{size:14})}),e.jsx(y,{size:14,className:"opacity-50 shrink-0"}),e.jsxs("span",{className:"truncate",children:[a+1,".",O+1,". ",u(r)]})]}),N&&e.jsx("div",{className:"ml-5 mt-0.5 space-y-0.5 border-l border-white/5 pl-2",children:r.lessons.map((n,P)=>{const A=h===n.id;return e.jsxs(d,{to:`/lesson/${n.id}`,className:`flex items-center gap-2 p-1.5 rounded-lg text-xs transition-all ${A?"bg-gaming-pink/20 text-gaming-pink font-semibold":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:[n.type==="video"?e.jsx(_,{size:12}):e.jsx(y,{size:12}),e.jsxs("span",{className:"truncate",children:[P+1,". ",u(n)]})]},n.id)})})]},r.id)})})]},s.id)})})]})},Z=({subjectId:t,children:x})=>{const[i,c]=p.useState(!1);return e.jsx(H,{subjectId:t,children:e.jsxs("div",{className:"flex min-h-[calc(100vh-6rem)]",children:[e.jsx("div",{className:"hidden lg:block sticky top-24 h-[calc(100vh-6rem)]",children:e.jsx(S,{subjectId:t})}),i&&e.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>c(!1)}),e.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out ${i?"translate-x-0":"-translate-x-full"}`,children:e.jsx(S,{subjectId:t})}),e.jsxs("main",{className:"flex-1 p-6 overflow-x-hidden",children:[e.jsx("button",{onClick:()=>c(!i),className:"lg:hidden fixed bottom-6 left-6 z-30 w-14 h-14 rounded-full bg-gaming-primary text-white flex items-center justify-center shadow-xl shadow-gaming-primary/30",children:i?e.jsx(q,{size:24}):e.jsx(G,{size:24})}),x]})]})})};export{Z as C};
