const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SlidesViewer-DHf_izyL.js","assets/editor-8tw8cCTw.js","assets/vendor-DfgOC3sD.js","assets/ui-DOqj-4Eh.js","assets/TestViewer-jrAOW-7Q.js","assets/index-DtKwPHMP.js","assets/supabase-CQnWzhEg.js","assets/index-DyYqTywm.css","assets/CourseLayout-C10EU-zn.js","assets/SyllabusContext-BoaOMks1.js","assets/syllabusService-vM0591ed.js","assets/katex-G9EdgA5J.js","assets/TestTeacherView-CZ8w47dA.js"])))=>i.map(i=>d[i]);
import{u as Qe,_ as de}from"./index-DtKwPHMP.js";import{j as e}from"./editor-8tw8cCTw.js";import{f as Ge,u as Ze,r as b,R as B}from"./vendor-DfgOC3sD.js";import{C as es}from"./CourseLayout-C10EU-zn.js";import{s as $e}from"./syllabusService-vM0591ed.js";import{k as Re}from"./katex-G9EdgA5J.js";import{u as ss,k as Ie,V as Ve,F as Ee,p as U,q as Le,j as y,r as Pe,R as ts,t as is,E as ae,v as rs,w as A,g as ns}from"./ui-DOqj-4Eh.js";const ls=s=>{if(!s||typeof s!="string")return s;let S=s.replace(/\$\$([^$]+?)\$\$/g,(x,l)=>{try{return Re.renderToString(l.trim(),{displayMode:!0,throwOnError:!1,output:"html"})}catch(v){return console.warn("Ошибка рендеринга KaTeX:",v),x}});return S=S.replace(/\$([^$]+?)\$/g,(x,l)=>{try{return Re.renderToString(l.trim(),{displayMode:!1,throwOnError:!1,output:"html"})}catch(v){return console.warn("Ошибка рендеринга KaTeX:",v),x}}),S},os=B.lazy(()=>de(()=>import("./SlidesViewer-DHf_izyL.js"),__vite__mapDeps([0,1,2,3]))),as=B.lazy(()=>de(()=>import("./TestViewer-jrAOW-7Q.js"),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11]))),ds=B.lazy(()=>de(()=>import("./TestTeacherView-CZ8w47dA.js"),__vite__mapDeps([12,1,2,3,5,6,7,8,9,10,11]))),I=(s,S)=>`progress_${s}_${S}`,cs=()=>{var fe,je,we,ve,ye,Ne,_e,ke,Te,Se,ze,Ce,Me;const{t:s,i18n:S}=ss(),x=S.resolvedLanguage||"ru",{lessonId:l}=Ge(),v=Ze(),Ae=80,[X,Y]=b.useState(!0),[z,ce]=b.useState(null),[i,V]=b.useState(()=>({videoWatched:localStorage.getItem(I(l,"video"))==="true",textRead:localStorage.getItem(I(l,"text"))==="true",slidesViewed:JSON.parse(localStorage.getItem(I(l,"slides"))||"[]"),testHistory:JSON.parse(localStorage.getItem(`test_history_${l}`)||"[]")})),[E,H]=b.useState("video"),[Q,W]=b.useState(!1),[G,Z]=b.useState(!1),[He,ee]=b.useState(!1),{isTeacher:We,isAdmin:De}=Qe(),a=We||De;b.useEffect(()=>{(async()=>{var r;Y(!0);try{const n=await $e.getLesson(l,x);if(!n){ce(null),Y(!1);return}const _=n.subject;let P=null;if(_){const g=await $e.getStructure(_);if(g&&g.sections)for(let d=0;d<g.sections.length;d++){const p=g.sections[d];if(p.topics){for(let k=0;k<p.topics.length;k++){const w=p.topics[k];if(!w.lessons)continue;const R=w.lessons.findIndex(T=>T.id===l);if(R!==-1){P={lesson:{...n,...w.lessons[R],content:n.content},topic:w,section:p,subjectKey:_,lessonIndex:R,topicIndex:k,sectionIndex:d};break}}if(P)break}}}if(ce(P||{lesson:n,subjectKey:_}),!a){const{data:g}=await supabase.auth.getUser();if((r=g==null?void 0:g.user)!=null&&r.id){const{data:d}=await supabase.from("user_lesson_progress").select("*").eq("lesson_id",l).eq("user_id",g.user.id).single(),{data:p}=await supabase.from("user_test_results").select("*").eq("lesson_id",l).eq("user_id",g.user.id);(d||p)&&V(k=>{var R;const w={...k};if(d&&(d.video_watched&&(w.videoWatched=!0),d.text_read&&(w.textRead=!0),d.slides_viewed_count>0&&((R=n.content)!=null&&R.slidesRu))){const T=x==="tj"?n.content.slidesTj:n.content.slidesRu,le=Math.min(d.slides_viewed_count,d.total_slides||(T==null?void 0:T.length)||0),oe=(T||[]).slice(0,le).map(u=>u.id);w.slidesViewed=[...new Set([...k.slidesViewed,...oe])]}if(p&&p.length>0){const T=p.map(u=>({score:u.score,correct:u.correct_count,total:u.total_questions,timestamp:new Date(u.created_at).getTime(),passed:u.is_passed})),le=[...k.testHistory,...T],oe=Object.values(le.reduce((u,J)=>{const Ye=Math.round(J.timestamp/1e3);return u[Ye]=J,u},{}));w.testHistory=oe.sort((u,J)=>u.timestamp-J.timestamp)}return w})}}}catch(n){console.error("Error fetching lesson:",n)}finally{Y(!1)}})()},[l,x,a]);const m=((fe=z==null?void 0:z.lesson)==null?void 0:fe.content)||{},C=x==="tj"?((je=m.video)==null?void 0:je.urlTj)||((we=m.video)==null?void 0:we.url):((ve=m.video)==null?void 0:ve.url)||((ye=m.video)==null?void 0:ye.urlTj),f=!!C,j=!!((Ne=m.text)!=null&&Ne.bodyRu||(_e=m.text)!=null&&_e.bodyTj),D=x==="tj"?m.slidesTj||[]:m.slidesRu||[],h=D.length>0,se=((Te=(ke=m.test)==null?void 0:ke.questions)==null?void 0:Te.length)>0,Oe=f||j||h,xe=((Se=m.test)==null?void 0:Se.questions)||[],o=b.useMemo(()=>{if(!i.testHistory||i.testHistory.length===0)return null;const t=i.testHistory.length,r=Math.max(...i.testHistory.map(d=>d.score)),n=i.testHistory.reduce((d,p)=>d+p.score,0)/t,_=Math.round(100-n),P=i.testHistory[i.testHistory.length-1].timestamp,g=r>=Ae;return{totalAttempts:t,bestScore:r,avgErrorRate:_,lastAttemptAt:P,isPassed:g}},[i.testHistory]),M=D.length,O=i.slidesViewed.length,N=M>0?O>=M:!0,qe=!f||i.videoWatched,Fe=!j||i.textRead,te=a||qe&&Fe&&(!h||N),ie=[f,j,h,se].filter(Boolean).length;let $=0;f&&i.videoWatched&&$++,j&&i.textRead&&$++,h&&N&&$++,se&&(o!=null&&o.isPassed)&&$++;const me=ie>0?Math.round($/ie*100):0;b.useEffect(()=>{!X&&z&&(f?H("video"):j?H("text"):h&&H("slides"))},[X,f,j,h]);const re=async t=>{var r;if(!a)try{const{data:n}=await supabase.auth.getUser();if(!((r=n==null?void 0:n.user)!=null&&r.id))return;await supabase.from("user_lesson_progress").upsert({user_id:n.user.id,lesson_id:l,...t,updated_at:new Date},{onConflict:"user_id,lesson_id"})}catch(n){console.error("Failed to sync progress:",n)}},q=()=>{a||i.videoWatched||(localStorage.setItem(I(l,"video"),"true"),V(t=>({...t,videoWatched:!0})),re({video_watched:!0}))},ge=()=>{a||i.textRead||(localStorage.setItem(I(l,"text"),"true"),V(t=>({...t,textRead:!0})),re({text_read:!0}))},ue=t=>{if(a)return;const r=[...new Set([...i.slidesViewed,t])];localStorage.setItem(I(l,"slides"),JSON.stringify(r)),V(n=>({...n,slidesViewed:r})),re({slides_viewed_count:r.length,total_slides:M})},Ke=()=>{te?ee(!0):Z(!0)},Je=t=>{const r=JSON.parse(localStorage.getItem(`test_history_${l}`)||"[]");V(n=>({...n,testHistory:r}))};if(b.useEffect(()=>{const t=r=>{r.key==="Escape"&&(G&&Z(!1),Q&&W(!1))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[G,Q]),X)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:e.jsx(Ie,{size:40,className:"text-gaming-primary animate-spin"})});if(!z)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white bg-gaming-bg",children:[e.jsx("h2",{className:"text-2xl mb-4",children:s("lesson.notFound")}),e.jsx("button",{onClick:()=>v(-1),className:"text-gaming-primary hover:underline",children:s("lesson.back")})]});const{lesson:Ue,topic:c,section:F,subjectKey:ne,lessonIndex:K,sectionIndex:Be,topicIndex:Xe}=z,he=t=>x==="tj"&&t.titleTj?t.titleTj:t.title,pe=(ze=c==null?void 0:c.lessons)==null?void 0:ze[K-1],be=(Ce=c==null?void 0:c.lessons)==null?void 0:Ce[K+1],L=[];return f&&L.push({id:"video",icon:Ve,label:"lesson.video",complete:i.videoWatched}),j&&L.push({id:"text",icon:Ee,label:"lesson.text",complete:i.textRead}),h&&L.push({id:"slides",icon:U,label:"lesson.slides",complete:N}),e.jsxs(es,{subjectId:ne,children:[e.jsxs("div",{className:"max-w-4xl",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>{ne&&(F!=null&&F.id)&&(c!=null&&c.id)?v(`/subject/${ne}/section/${F.id}/topic/${c.id}`):v(-1)},className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-gaming-textMuted hover:text-white transition-all mb-4 group w-fit",children:[e.jsx(Le,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:s("lesson.backToTopic")})]}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gaming-textMuted mb-1",children:[s("lesson.lesson")," ",K+1," / ",((Me=c==null?void 0:c.lessons)==null?void 0:Me.length)||0]}),e.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-pink",children:[K+1,". ",he(Ue)]}),c&&e.jsx("p",{className:"text-gaming-textMuted flex items-center gap-2 text-sm",children:e.jsxs("span",{children:[Be+1,".",Xe+1,". ",he(c)]})})]}),a&&e.jsx("div",{className:"px-3 py-1 bg-gaming-pink text-white text-xs font-bold rounded-full uppercase tracking-wider animate-pulse",children:s("lesson.teacherMode")})]})]}),!a&&e.jsxs("div",{className:"mb-8 bg-gradient-to-br from-gaming-primary/20 to-gaming-pink/20 backdrop-blur-xl border border-white/10 rounded-2xl p-6 relative overflow-hidden",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg mb-1",children:s("lesson.progress")}),e.jsxs("p",{className:"text-gaming-textMuted text-sm",children:[$," / ",ie," ",s("lesson.stepsCompleted")]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-3xl font-bold text-gaming-primary",children:[me,"%"]})})]}),e.jsx("div",{className:"w-full h-3 bg-black/30 rounded-full mb-6 overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink transition-all duration-1000 ease-out",style:{width:`${me}%`}})}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[f&&e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${i.videoWatched?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i.videoWatched?"bg-green-500/20":"bg-white/10"}`,children:i.videoWatched?e.jsx(y,{size:20}):e.jsx(Ve,{size:20})}),e.jsx("span",{className:"font-medium text-sm",children:s("lesson.video")})]}),j&&e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${i.textRead?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${i.textRead?"bg-green-500/20":"bg-white/10"}`,children:i.textRead?e.jsx(y,{size:20}):e.jsx(Ee,{size:20})}),e.jsx("span",{className:"font-medium text-sm",children:s("lesson.text")})]}),h&&e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${N?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N?"bg-green-500/20":"bg-white/10"}`,children:N?e.jsx(y,{size:20}):e.jsx(U,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:s("lesson.slides")}),e.jsxs("span",{className:"text-xs opacity-70",children:[O,"/",M]})]})]}),se&&e.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${o!=null&&o.isPassed?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${o!=null&&o.isPassed?"bg-green-500/20":"bg-white/10"}`,children:o!=null&&o.isPassed?e.jsx(y,{size:20}):e.jsx(Pe,{size:20})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"font-medium text-sm",children:s("lesson.test")}),o&&e.jsxs("span",{className:"text-xs font-bold",children:[o.bestScore,"%"]})]})]})]})]}),o&&e.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[e.jsx(ts,{size:18,className:"text-gaming-gold"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:s("lesson.attempts")}),e.jsx("div",{className:"font-bold text-white",children:o.totalAttempts})]})]}),e.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[e.jsx(is,{size:18,className:"text-gaming-primary"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:s("lesson.lastAttempt")}),e.jsx("div",{className:"font-bold text-white",children:o.lastAttemptAt?new Intl.DateTimeFormat(x==="tj"?"tg-TJ":"ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(new Date(o.lastAttemptAt)):"-"})]})]})]})]}),Oe?e.jsxs(e.Fragment,{children:[L.length>0&&e.jsx("div",{className:"flex gap-4 mb-6 border-b border-white/5 overflow-x-auto",children:L.map(t=>{const r=t.icon;return e.jsxs("button",{onClick:()=>H(t.id),className:`pb-3 px-2 text-base font-semibold transition-all relative flex items-center gap-2 whitespace-nowrap ${E===t.id?"text-white":"text-gaming-textMuted hover:text-white"}`,children:[e.jsx(r,{size:18}),s(t.label),t.complete&&!a&&e.jsx(y,{size:14,className:"text-green-400"}),E===t.id&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gaming-pink rounded-t-full shadow-[0_0_10px_rgba(236,72,153,0.5)]"})]},t.id)})}),e.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-6 mb-6 shadow-xl overflow-hidden relative group",children:[e.jsx("div",{className:"absolute -left-20 -top-20 w-64 h-64 bg-gaming-pink/5 rounded-full blur-3xl group-hover:bg-gaming-pink/10 transition-all duration-700"}),e.jsxs("div",{className:"relative z-10",children:[E==="video"&&f&&e.jsxs("div",{className:"aspect-video bg-black/60 rounded-xl flex flex-col items-center justify-center border border-white/10 shadow-inner overflow-hidden relative",children:[C.includes("youtube")||C.includes("youtu.be")?(()=>{const t=C.match(/(?:youtu\.be\/|youtube\.com\/(?:.*v=|.*\/|.*embed\/))([^&?]*)/),r=t?t[1]:null;return r?e.jsx("iframe",{src:`https://www.youtube.com/embed/${r}`,className:"w-full h-full",title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:q}):e.jsxs("div",{className:"text-white text-center p-4",children:[e.jsx("p",{children:"Не удалось загрузить видео"}),e.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-gaming-primary hover:underline mt-2 inline-block",children:"Открыть на YouTube"})]})})():e.jsx("video",{src:C,controls:!0,className:"w-full h-full",onEnded:q,onPlay:()=>setTimeout(q,3e4)}),!i.videoWatched&&!a&&e.jsxs("button",{onClick:q,className:"absolute bottom-4 right-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[e.jsx(ae,{size:16}),s("lesson.markAsWatched")]})]}),E==="text"&&j&&e.jsxs("div",{className:"prose prose-invert max-w-none prose-p:text-gaming-textMuted prose-headings:text-white prose-li:text-gaming-textMuted",onScroll:t=>{const{scrollTop:r,scrollHeight:n,clientHeight:_}=t.target;r+_>=n-50&&ge()},children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:ls(x==="tj"&&m.text.bodyTj||m.text.bodyRu)}}),!i.textRead&&!a&&e.jsxs("button",{onClick:ge,className:"mt-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[e.jsx(ae,{size:16}),s("lesson.markAsRead")]})]}),E==="slides"&&h&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-gaming-textMuted",children:[O," / ",M," ",s("lesson.slidesCount")]}),e.jsxs("button",{onClick:()=>W(!0),className:"flex items-center gap-2 px-4 py-2 bg-gaming-gold/20 text-gaming-gold rounded-xl hover:bg-gaming-gold/30 transition-colors",children:[e.jsx(U,{size:18}),s("lesson.openPresentation")]})]}),e.jsx("div",{className:"flex flex-col gap-6",children:D.map((t,r)=>e.jsxs("button",{onClick:()=>{ue(t.id),W(!0)},className:"relative w-full rounded-2xl overflow-hidden border border-white/5 hover:border-gaming-gold/30 transition-all group shadow-lg",children:[e.jsx("img",{src:t.imageUrl,alt:`Slide ${r+1}`,className:"w-full h-auto object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm",children:e.jsx("div",{className:"bg-black/60 p-3 rounded-full border border-white/20 transform scale-90 group-hover:scale-100 transition-transform",children:e.jsx(U,{size:24,className:"text-white"})})}),e.jsx("div",{className:"absolute top-4 left-4 bg-black/60 backdrop-blur px-3 py-1 rounded-full text-white font-bold text-sm border border-white/10",children:r+1}),(i.slidesViewed.includes(t.id)||a)&&e.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg animate-in fade-in zoom-in",children:e.jsx(y,{size:16,className:"text-white"})})]},t.id))})]})]})]})]}):e.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-8 mb-6 text-center",children:[e.jsx(rs,{size:48,className:"mx-auto mb-4 text-gaming-primary opacity-50"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:s("lesson.testing")}),e.jsx("p",{className:"text-gaming-textMuted mb-4",children:s("lesson.onlyTest")})]}),G&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-gaming-card/95 backdrop-blur-xl rounded-2xl border border-red-500/30 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-red-400 mb-4",children:[e.jsx(A,{size:24}),e.jsx("h3",{className:"text-lg font-semibold",children:s("lesson.reviewMaterialsTitle")})]}),e.jsx("p",{className:"text-gaming-textMuted mb-4",children:s("lesson.reviewMaterialsText")}),e.jsxs("ul",{className:"space-y-2 mb-6",children:[f&&e.jsxs("li",{className:`flex items-center gap-2 ${i.videoWatched?"text-green-400":"text-red-400"}`,children:[i.videoWatched?e.jsx(y,{size:16}):e.jsx(A,{size:16}),s("lesson.video")]}),j&&e.jsxs("li",{className:`flex items-center gap-2 ${i.textRead?"text-green-400":"text-red-400"}`,children:[i.textRead?e.jsx(y,{size:16}):e.jsx(A,{size:16}),s("lesson.text")]}),h&&e.jsxs("li",{className:`flex items-center gap-2 ${N?"text-green-400":"text-red-400"}`,children:[N?e.jsx(y,{size:16}):e.jsx(A,{size:16}),s("lesson.slides")," (",O,"/",M,")"]})]}),e.jsx("button",{onClick:()=>Z(!1),className:"w-full px-4 py-3 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors",children:s("lesson.understood")})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex gap-2",children:[pe&&e.jsxs("button",{onClick:()=>v(`/lesson/${pe.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[e.jsx(Le,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:s("lesson.prev")})]}),be&&e.jsxs("button",{onClick:()=>v(`/lesson/${be.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[e.jsx("span",{className:"hidden sm:inline",children:s("lesson.next")}),e.jsx(ns,{size:16})]})]}),e.jsxs("button",{onClick:Ke,className:`group font-bold py-3 px-8 rounded-xl flex items-center gap-2 transition-all transform hover:scale-[1.02] active:scale-95 shadow-lg border border-white/10 ${te?a?"bg-gaming-pink hover:bg-gaming-pink/80 text-white shadow-gaming-pink/25":"bg-gaming-primary hover:bg-gaming-primary/80 text-white shadow-gaming-primary/25":"bg-gaming-card/60 text-gaming-textMuted cursor-not-allowed"}`,children:[a?e.jsx(ae,{size:20}):e.jsx(Pe,{size:20}),e.jsx("span",{children:s(a?"lesson.viewTest":"lesson.takeTest")}),!te&&e.jsx(A,{size:16,className:"text-yellow-400"})]})]})]}),e.jsxs(B.Suspense,{fallback:e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-md",children:e.jsx(Ie,{size:40,className:"text-gaming-primary animate-spin"})}),children:[Q&&h&&e.jsx(os,{slides:D,lessonId:l,onClose:()=>W(!1),onSlideView:ue}),He&&(a?e.jsx(ds,{questions:xe,lang:x,onClose:()=>ee(!1)}):e.jsx(as,{questions:xe,lessonId:l,lang:x,onClose:()=>ee(!1),onComplete:Je}))]})]})},js=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"}));export{js as L,ls as r};
