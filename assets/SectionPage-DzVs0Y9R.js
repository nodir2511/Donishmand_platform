import{u as f,a as v,M as b,j as e,L as N,A as w}from"./index-CGqczOZw.js";import{C as y}from"./CourseLayout-2b7NfBSn.js";import{g}from"./progressHelpers-CJ7J7Gvk.js";import{F as h}from"./file-text-Dmczy5Z9.js";import"./home-C2QZHNeX.js";const T=({lang:s,t:L,userRole:u})=>{const{subjectId:a,sectionId:o}=f(),p=v(),i=b[a],n=i==null?void 0:i.sections.find(t=>t.id===o),d=u==="teacher",x=(i==null?void 0:i.sections.findIndex(t=>t.id===o))??-1;if(!n)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white",children:[e.jsx("h2",{className:"text-2xl mb-4",children:s==="ru"?"Раздел не найден":"Бахш ёфт нашуд"}),e.jsx("button",{onClick:()=>p(`/subject/${a}`),className:"text-gaming-primary hover:underline",children:s==="ru"?"К предмету":"Ба фан"})]});const m=t=>s==="tj"&&t.titleTj?t.titleTj:t.title;return e.jsx(y,{subjectId:a,lang:s,children:e.jsxs("div",{className:"max-w-5xl",children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-primary",children:[x+1,". ",m(n)]}),e.jsxs("p",{className:"text-gaming-textMuted mb-8",children:[n.topics.length," ",s==="ru"?"тем":"мавзӯъ"]}),(()=>{const t=n.topics.flatMap(l=>l.lessons.map(c=>c.id)),r=g(t);return r&&!d?e.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gaming-accent/10 to-gaming-blue/10 rounded-2xl border border-white/5 flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-gaming-accent/20 rounded-full text-gaming-accent",children:e.jsx(h,{size:32})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:[r.avgErrorRate,"%"]}),e.jsx("div",{className:"text-gaming-textMuted text-sm",children:s==="ru"?"Средний % ошибок по разделу":"Миёна % хатогиҳо дар бахш"}),e.jsx("div",{className:"text-xs text-gaming-textMuted mt-1 opacity-70",children:s==="ru"?`На основе ${r.completedLessons} пройденных уроков`:`Дар асоси ${r.completedLessons} дарсҳои гузашта`})]})]}):null})(),e.jsx("div",{className:"space-y-4",children:n.topics.map((t,r)=>{const l=t.lessons.map(j=>j.id),c=g(l);return e.jsxs(N,{to:`/subject/${a}/section/${o}/topic/${t.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-accent/50 transition-all duration-300 hover:bg-gaming-card/60",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-accent/10 flex items-center justify-center text-gaming-accent group-hover:scale-110 transition-transform",children:e.jsx(h,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-accent transition-colors truncate",children:[x+1,".",r+1,". ",m(t)]}),e.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[t.lessons.length," ",s==="ru"?"уроков":"дарс"]})]}),c&&!d&&e.jsxs("div",{className:"mr-2 text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[c.avgErrorRate,"%"]}),e.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:s==="ru"?"ошибок":"хато"})]}),e.jsx(w,{className:"text-white/20 group-hover:text-gaming-accent transition-colors shrink-0"})]},t.id)})})]})})};export{T as default};
