import{j as e}from"./editor-8tw8cCTw.js";import{f as b,u as N,L as v}from"./vendor-DfgOC3sD.js";import{u as w,S as y}from"./index-DtKwPHMP.js";import{C as k}from"./CourseLayout-C10EU-zn.js";import{g as C}from"./progressHelpers-CJ7J7Gvk.js";import{u as M}from"./SyllabusContext-BoaOMks1.js";import{u,k as S,n as T,o as h,A as L}from"./ui-DOqj-4Eh.js";import"./supabase-CQnWzhEg.js";import"./syllabusService-vM0591ed.js";const A=({subjectId:d,subjectName:o,isTeacher:l,navigate:a})=>{const{t,i18n:c}=u(),i=c.resolvedLanguage||"ru",{subjectData:r,loading:n}=M();if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-[40vh]",children:e.jsx(S,{size:40,className:"text-gaming-primary animate-spin"})});if(!r)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[40vh] text-white",children:[e.jsx("h2",{className:"text-2xl mb-4",children:t("subjectNotFound")}),e.jsx("button",{onClick:()=>a("/"),className:"text-gaming-primary hover:underline",children:t("backToMain")})]});const p=s=>i==="tj"&&s.titleTj?s.titleTj:s.title;return e.jsxs("div",{className:"max-w-5xl",children:[e.jsx("h1",{className:"text-4xl font-bold mb-2 text-white",children:o}),e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsxs("button",{onClick:()=>a("/"),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-gaming-textMuted hover:text-white transition-all group w-fit",children:[e.jsx(T,{size:18,className:"group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-sm font-medium",children:t("backToMain")})]}),e.jsx("p",{className:"text-gaming-textMuted text-lg",children:t("selectSection")})]}),e.jsx("div",{className:"space-y-4",children:r.sections.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[30vh] text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gaming-primary/10 flex items-center justify-center mb-4",children:e.jsx(h,{size:36,className:"text-gaming-primary"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:t("contentDeveloping")}),e.jsx("p",{className:"text-gaming-textMuted max-w-md",children:t("contentComingSoon")})]}):r.sections.map((s,j)=>{const f=s.topics.flatMap(m=>m.lessons.map(x=>x.id)),g=C(f);return e.jsxs(v,{to:`/subject/${d}/section/${s.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-primary/50 transition-all duration-300 hover:bg-gaming-card/60",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary group-hover:scale-110 transition-transform",children:e.jsx(h,{size:24})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-primary transition-colors truncate",children:[j+1,". ",p(s)]}),e.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[s.topics.length," ",t("themesCount")," • ",s.topics.reduce((m,x)=>m+x.lessons.length,0)," ",t("lessonsCount")]})]}),g&&!l&&e.jsxs("div",{className:"mr-2 text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[g.avgErrorRate,"%"]}),e.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:i==="ru"?"ошибок":"хато"})]}),e.jsx(L,{className:"text-white/20 group-hover:text-gaming-primary transition-colors shrink-0"})]},s.id)})})]})},J=()=>{var n;const{t:d,i18n:o}=u(),l=o.resolvedLanguage||"ru",{subjectId:a}=b(),t=N(),{isTeacher:c,isAdmin:i}=w(),r=((n=y[a])==null?void 0:n[l])||a;return e.jsx(k,{subjectId:a,children:e.jsx(A,{subjectId:a,subjectName:r,isTeacher:c||i,navigate:t})})};export{J as default};
