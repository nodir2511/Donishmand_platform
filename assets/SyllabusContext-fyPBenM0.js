import{j as f}from"./editor-f5jKbLka.js";import{r as e}from"./vendor-DfgOC3sD.js";import{s as l}from"./index-D66Skuuy.js";const n=e.createContext(null),v=t=>{l.invalidateCache(t)},h=({subjectId:t,children:u})=>{const[c,o]=e.useState(null),[i,s]=e.useState(!0);return e.useEffect(()=>{let r=!0;return t?(async()=>{s(!0);try{const a=await l.getStructure(t);r&&o(a||{sections:[]})}catch(a){console.error(`Ошибка загрузки структуры предмета "${t}":`,a),r&&o({sections:[]})}finally{r&&s(!1)}})():s(!1),()=>{r=!1}},[t]),f.jsx(n.Provider,{value:{subjectData:c,loading:i,subjectId:t},children:u})},p=()=>{const t=e.useContext(n);if(t===null)throw new Error("useSyllabus должен использоваться внутри SyllabusProvider");return t};export{h as S,v as i,p as u};
