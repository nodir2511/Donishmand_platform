const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SubjectPage-Bn6X43jw.js","assets/editor-B4b3M6em.js","assets/vendor-DfgOC3sD.js","assets/ui-DAjowxi7.js","assets/CourseLayout-Dh6LNldK.js","assets/SyllabusContext-Dagywe6x.js","assets/syllabusService-D4e_wSTL.js","assets/progressHelpers-CJ7J7Gvk.js","assets/supabase-CQnWzhEg.js","assets/SectionPage-BPhPxrEm.js","assets/TopicPage-uWXanPS2.js","assets/LessonPage-BILyJH2f.js","assets/katex-G9EdgA5J.js","assets/CreatorPage-C712W82Q.js","assets/useDebounce-DE7P2URC.js","assets/AdminPage-C-EFDqMu.js","assets/branchService-Bbm_QgMG.js","assets/AuthPage-9G_9Juby.js","assets/ClassesPage-DzHHTW_9.js","assets/ClassDetailsPage-6gWuS0fX.js","assets/ProfilePage-BsBHTRyu.js","assets/NotFoundPage-CjXasYqX.js","assets/browser-ponyfill-DPU6vdVN.js"])))=>i.map(i=>d[i]);
import{j as r}from"./editor-B4b3M6em.js";import{a as Pe,r as w,u as Ee,c as F,L as O,N as z,R as N,B as Ce,d as Le,e as k}from"./vendor-DfgOC3sD.js";import{c as me}from"./supabase-CQnWzhEg.js";import{u as A,S as ge,C as Te,U as Ie,L as ee,X as Ae,M as Re,A as De,a as he,b as fe,c as $,d as qe,G as Me,e as Ue,B as ze,f as W,g as $e,h as He,i as Fe,j as Xe,k as Be,l as Ve}from"./ui-DAjowxi7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&e(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var G={},te=Pe;G.createRoot=te.createRoot,G.hydrateRoot=te.hydrateRoot;const We="modulepreload",Ge=function(o){return"/Donishmand_platform/"+o},ne={},P=function(t,n,e){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=Ge(c),c in ne)return;ne[c]=!0;const g=c.endsWith(".css"),d=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":We,g||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),g)return new Promise((f,p)=>{m.addEventListener("load",f),m.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},pe="https://holeptxxbmpmhlkgzpoa.supabase.co",xe="sb_publishable_p6Y6Ff7daOq0qNRUwD_aWQ_a14jcoFg",T=me(pe,xe),Ke={getItem:()=>null,setItem:()=>{},removeItem:()=>{}},Qt=me(pe,xe,{auth:{storageKey:"sb-admin-create-user",storage:Ke,persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),be=w.createContext({}),X=()=>w.useContext(be),Je=()=>{Object.keys(localStorage).forEach(o=>{o.startsWith("sb-")&&localStorage.removeItem(o)}),Object.keys(sessionStorage).forEach(o=>{o.startsWith("sb-")&&sessionStorage.removeItem(o)})},Qe=({children:o})=>{var S;const n=(()=>{try{const h=localStorage.getItem("sb-profile-cache");if(h){let b;try{b=JSON.parse(h)}catch(_){return console.warn("⚠️ Ошибка парсинга кеша профиля, кеш будет сброшен",_),localStorage.removeItem("sb-profile-cache"),{user:null,profile:null,permissions:[],loading:!0}}if(Date.now()-b.timestamp<864e5)return{user:{id:b.userId},profile:b.profile,permissions:b.permissions||[],loading:!1}}}catch(h){console.error("Error reading initial cache",h)}return{user:null,profile:null,permissions:[],loading:!0}})(),[e,i]=w.useState(n.user),[s,a]=w.useState(n.profile),[l,c]=w.useState(n.permissions),[g,d]=w.useState(n.loading),m=w.useRef(!1),f=w.useRef(((S=n.user)==null?void 0:S.id)||null),p=async h=>{if(!h)return null;const b=(u,v=5e3)=>Promise.race([u,new Promise((y,C)=>setTimeout(()=>C(new Error("TIMEOUT")),v))]),_=async u=>{let v=[];if((u==null?void 0:u.role)==="teacher"){const{data:y}=await T.from("subject_permissions").select("subject_id, can_edit").eq("user_id",h.id);v=y||[]}c(v);try{u&&localStorage.setItem("sb-profile-cache",JSON.stringify({profile:u,permissions:v,userId:h.id,timestamp:Date.now()}))}catch(y){console.error("Ошибка сохранения кеша:",y)}return u};try{try{let{data:u,error:v}=await b(T.rpc("get_my_profile"),5e3);if(u&&u.length>0?u=u[0]:!v&&(!u||u.length===0)&&(u=null),u&&!v)return await _(u)}catch{}try{const{data:u,error:v}=await b(T.from("profiles").select("*").eq("id",h.id).maybeSingle(),1e4);if(u&&!v)return await _(u);v&&console.error("Ошибка прямого запроса:",v)}catch(u){console.error("Таймаут прямого запроса:",u)}}catch(u){console.error("Ошибка загрузки профиля (Global):",u)}return null};w.useEffect(()=>{let h=!0,b=!1;(async()=>{try{const{data:{session:y}}=await T.auth.getSession();if(y!=null&&y.user){f.current===y.user.id||h&&d(!0),h&&(i(y.user),f.current=y.user.id);const Z=await p(y.user);h&&a(Z)}else h&&(i(null),f.current=null,a(null),c([]))}catch(y){console.error("Ошибка при инициализации auth:",y)}finally{h&&(b=!0,d(!1))}})();const{data:{subscription:u}}=T.auth.onAuthStateChange(async(y,C)=>{if(!m.current&&h){if(y==="SIGNED_OUT")i(null),f.current=null,a(null),c([]),d(!1);else if((y==="SIGNED_IN"||y==="TOKEN_REFRESHED")&&(C==null?void 0:C.user)&&C.user.id!==f.current){if(b&&f.current===C.user.id)return;d(!0),i(C.user),f.current=C.user.id;const Oe=await p(C.user);h&&(a(Oe),d(!1))}}}),v=setTimeout(()=>{h&&d(y=>y&&(console.warn("⚠️ Сработала логика безопасного таймаута"),!1))},1e4);return()=>{h=!1,u.unsubscribe(),clearTimeout(v)}},[]);const x={user:e,profile:s,permissions:l,loading:g,signOut:async()=>{Je(),i(null),a(null);try{await Promise.race([T.auth.signOut(),new Promise(h=>setTimeout(h,2e3))])}catch(h){console.error("SignOut error (ignored):",h)}window.location.href="/Donishmand_platform/"},updateSelectedSubjects:async h=>{if(!e)return!1;try{const{error:b}=await T.from("profiles").update({selected_subjects:h}).eq("id",e.id);if(b)throw b;a(_=>({..._,selected_subjects:h}));try{const _=localStorage.getItem("sb-profile-cache");if(_){const u=JSON.parse(_);u.profile={...u.profile,selected_subjects:h},localStorage.setItem("sb-profile-cache",JSON.stringify(u))}}catch{}return!0}catch(b){return console.error("Ошибка при обновлении выбранных предметов:",b),!1}},isAuthenticated:!!e,isTeacher:(s==null?void 0:s.role)==="teacher",isAdmin:(s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="super_admin",isSuperAdmin:(s==null?void 0:s.role)==="super_admin",setSkipAuthChange:h=>{m.current=h},canEditSubject:h=>(s==null?void 0:s.role)==="super_admin"?!0:(s==null?void 0:s.role)==="teacher"?l.some(b=>b.subject_id===h&&b.can_edit):!1,canViewSubject:h=>(s==null?void 0:s.role)==="super_admin"||(s==null?void 0:s.role)==="admin"?!0:(s==null?void 0:s.role)==="teacher"?(s==null?void 0:s.subject)===h:!0};return r.jsx(be.Provider,{value:x,children:o})},Ye=()=>{var _;const{t:o,i18n:t}=A(),{user:n,profile:e,signOut:i,permissions:s}=X(),a=Ee(),l=F(),[c,g]=w.useState(!1),[d,m]=w.useState(!1),[f,p]=w.useState(!1),j=w.useRef(null);w.useEffect(()=>{const u=()=>m(window.scrollY>20);window.addEventListener("scroll",u);const v=y=>{j.current&&!j.current.contains(y.target)&&p(!1)};return document.addEventListener("mousedown",v),()=>{window.removeEventListener("scroll",u),document.removeEventListener("mousedown",v)}},[]);const E=()=>{const u=t.resolvedLanguage==="ru"?"tj":"ru";t.changeLanguage(u)},x=async()=>{await i(),a("/"),p(!1),g(!1)},S=t.resolvedLanguage||"ru",h=e!=null&&e.full_name?e.full_name.split(" ").map(u=>u[0]).join("").substring(0,2).toUpperCase():((_=n==null?void 0:n.email)==null?void 0:_[0].toUpperCase())||"U",b=u=>{switch(u){case"super_admin":return o("profilePage.roleSuperAdmin");case"admin":return o("profilePage.roleAdmin");case"teacher":return o("profilePage.roleTeacher");default:return o("studentRole")}};return r.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${d?"bg-gaming-bg/80 backdrop-blur-xl border-b border-white/5 py-3":"bg-transparent py-6"}`,children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs(O,{to:"/",className:"flex items-center gap-3 group cursor-pointer",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gaming-primary to-gaming-pink rounded-xl flex items-center justify-center shadow-lg shadow-gaming-primary/20 group-hover:scale-105 transition-transform duration-300",children:r.jsx(ge,{className:"text-white w-6 h-6"})}),r.jsx("span",{className:"font-bold text-2xl tracking-tight text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-gaming-primary/80 transition-all",children:"Donishmand"})]}),r.jsxs("div",{className:"hidden md:flex items-center bg-white/5 backdrop-blur-md rounded-full border border-white/5 p-1.5 shadow-sm",children:[r.jsxs("button",{onClick:()=>{var u;l.pathname!=="/"?a({pathname:"/",hash:"#courses-section"}):(u=document.getElementById("courses-section"))==null||u.scrollIntoView({behavior:"smooth"})},className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[o("navCourses"),r.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),r.jsxs(O,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[o("navAbout"),r.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),n&&r.jsxs(O,{to:"/classes",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group border-l border-white/10 ml-2 pl-6",children:[(e==null?void 0:e.role)==="student"?"Мои классы":"Классы",r.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-purple -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),((e==null?void 0:e.role)==="super_admin"||(e==null?void 0:e.role)==="teacher"&&(s==null?void 0:s.some(u=>u.can_edit)))&&r.jsxs(O,{to:"/creator",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[o("navCreator"),r.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin")&&r.jsxs(O,{to:"/admin",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[o("navAdmin"),r.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-red-500 -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),r.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),r.jsx("button",{onClick:E,className:"px-3 py-1.5 text-xs font-bold bg-white/5 rounded-full text-white hover:bg-gaming-primary hover:text-white transition-colors uppercase ring-1 ring-white/10",children:S})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"hidden md:block",children:n?r.jsxs("div",{className:"relative",ref:j,children:[r.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-3 pl-1 pr-3 py-1 bg-white/5 hover:bg-white/10 border border-white/5 rounded-full transition-all group",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-gaming-primary to-gaming-purple flex items-center justify-center text-white font-bold text-sm shadow-inner",children:h}),r.jsxs("div",{className:"text-left hidden lg:block",children:[r.jsx("div",{className:"text-xs font-bold text-white leading-none mb-0.5",children:(e==null?void 0:e.full_name)||n.email}),r.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider leading-none",children:b(e==null?void 0:e.role)})]}),r.jsx(Te,{size:14,className:`text-gaming-textMuted transition-transform ${f?"rotate-180":""}`})]}),f&&r.jsxs("div",{className:"absolute top-full right-0 mt-2 w-56 bg-gaming-card border border-white/10 rounded-xl shadow-2xl py-2 animate-fade-in-up origin-top-right backdrop-blur-xl",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-white/5 lg:hidden",children:[r.jsx("p",{className:"text-sm font-bold text-white truncate",children:(e==null?void 0:e.full_name)||n.email}),r.jsx("p",{className:"text-xs text-gaming-textMuted mt-0.5 uppercase tracking-wider",children:b(e==null?void 0:e.role)})]}),r.jsxs("div",{className:"py-1",children:[r.jsxs("button",{onClick:()=>{a("/profile"),p(!1)},className:"w-full text-left px-4 py-2.5 text-sm text-gaming-textMuted hover:text-white hover:bg-white/5 flex items-center gap-2 transition-colors",children:[r.jsx(Ie,{size:16}),o("profile")]}),r.jsxs("button",{onClick:x,className:"w-full text-left px-4 py-2.5 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 flex items-center gap-2 transition-colors",children:[r.jsx(ee,{size:16}),o("logout")]})]})]})]}):r.jsx(O,{to:"/login",className:"bg-gradient-to-r from-gaming-primary to-gaming-pink text-white px-6 py-2.5 rounded-full font-medium text-sm transition-all shadow-lg shadow-gaming-primary/25 hover:shadow-gaming-pink/25 hover:scale-105 active:scale-95 inline-block",children:o("navLogin")})}),r.jsx("button",{onClick:()=>g(!c),className:"md:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:c?r.jsx(Ae,{}):r.jsx(Re,{})})]})]})}),c&&r.jsx("div",{className:"absolute top-full left-0 right-0 bg-gaming-card border-b border-white/5 p-4 shadow-xl md:hidden glass-panel",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[n&&r.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-white/5 rounded-xl border border-white/5",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-gaming-primary to-gaming-purple flex items-center justify-center text-white font-bold shadow-inner",children:h}),r.jsxs("div",{className:"overflow-hidden",children:[r.jsx("div",{className:"font-bold text-white truncate",children:(e==null?void 0:e.full_name)||n.email}),r.jsx("div",{className:"text-xs text-gaming-textMuted uppercase tracking-wider",children:b(e==null?void 0:e.role)})]})]}),r.jsx("button",{onClick:()=>{var u;g(!1),l.pathname!=="/"?a({pathname:"/",hash:"#courses-section"}):(u=document.getElementById("courses-section"))==null||u.scrollIntoView({behavior:"smooth"})},className:"text-left font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:o("navCourses")}),r.jsx(O,{to:"/",onClick:()=>g(!1),className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:o("navAbout")}),n&&r.jsx(O,{to:"/classes",onClick:()=>g(!1),className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors border-l-2 border-gaming-purple ml-2",children:(e==null?void 0:e.role)==="student"?"Мои классы":"Классы"}),((e==null?void 0:e.role)==="super_admin"||(e==null?void 0:e.role)==="teacher"&&(s==null?void 0:s.some(u=>u.can_edit)))&&r.jsx(O,{to:"/creator",onClick:()=>g(!1),className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:o("navCreator")}),((e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="super_admin")&&r.jsx(O,{to:"/admin",onClick:()=>g(!1),className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:o("navAdmin")}),r.jsxs("div",{className:"border-t border-white/5 pt-4 flex items-center justify-between px-4",children:[r.jsx("button",{onClick:E,className:"px-3 py-1 bg-white/5 text-white rounded-md text-xs font-bold uppercase ring-1 ring-white/10",children:S}),n?r.jsxs("button",{onClick:x,className:"text-sm font-medium text-red-400 flex items-center gap-2",children:[r.jsx(ee,{size:16}),o("logout")]}):r.jsx(O,{to:"/login",onClick:()=>g(!1),className:"text-sm font-medium text-gaming-primary",children:o("navLogin")})]})]})})]})},Ze=()=>{const{t:o}=A();return r.jsxs("footer",{className:"relative bg-gaming-bg border-t border-white/5 py-12 mt-20",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gaming-primary/5 to-transparent pointer-events-none"}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center relative z-10",children:r.jsx("p",{className:"text-gaming-textMuted text-sm font-medium",children:o("footerText")})})]})},et=()=>{const{t:o}=A();return r.jsxs("div",{className:"relative w-full overflow-hidden pt-36 pb-20 lg:pt-48 lg:pb-32",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-gaming-primary/20 rounded-full blur-[150px] pointer-events-none translate-x-1/3 -translate-y-1/3 animate-pulse-slow"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-gaming-pink/10 rounded-full blur-[120px] pointer-events-none -translate-x-1/3 translate-y-1/3 animate-pulse-slow"}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center z-10",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md shadow-sm text-gaming-accent text-sm font-medium mb-8 animate-fade-in-up",children:[r.jsx(ge,{size:16,className:"text-gaming-gold"}),r.jsx("span",{className:"tracking-wide uppercase text-[11px] font-bold",children:o("badge")})]}),r.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-[1.1] animate-fade-in-up delay-[100ms] drop-shadow-2xl",children:r.jsx("span",{dangerouslySetInnerHTML:{__html:o("heroTitle")}})}),r.jsx("p",{className:"text-lg md:text-xl text-gaming-textMuted mb-12 max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-[200ms]",children:o("heroSubtitle")}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center items-center w-full animate-fade-in-up delay-[300ms]",children:[r.jsxs("button",{onClick:()=>{var t;return(t=document.getElementById("courses-section"))==null?void 0:t.scrollIntoView({behavior:"smooth"})},className:"group relative bg-gaming-primary hover:bg-gaming-primary/90 text-white px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-gaming-primary/25 flex items-center justify-center gap-2 text-lg overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),r.jsx("span",{children:o("ctaStart")}),r.jsx(De,{size:20,className:"text-gaming-gold group-hover:translate-x-1 transition-transform"})]}),r.jsx("button",{onClick:()=>{var t;return(t=document.getElementById("courses-section"))==null?void 0:t.scrollIntoView({behavior:"smooth"})},className:"group bg-transparent hover:bg-white/5 text-white border border-white/10 px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 text-lg backdrop-blur-sm",children:o("ctaCatalog")})]}),r.jsx("div",{className:"absolute top-1/2 left-10 hidden lg:block animate-float opacity-30",children:r.jsx(he,{size:80,className:"text-gaming-accent rotate-12 drop-shadow-[0_0_15px_rgba(0,224,255,0.5)]"})}),r.jsx("div",{className:"absolute top-1/3 right-10 hidden lg:block animate-float opacity-30",style:{animationDelay:"2s"},children:r.jsx(fe,{size:80,className:"text-gaming-pink -rotate-12 drop-shadow-[0_0_15px_rgba(255,73,219,0.5)]"})})]})]})},Y={"tj-lang":{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:W},lit:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:W},math:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:he},phys:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:fe},chem:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:ze},bio:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:Ue},geo:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:Me},hist:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:qe},eng:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:$},ger:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:$},fra:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:$},ara:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:$}},ye={"tj-lang":{ru:"Таджикский язык",tj:"Забони Тоҷикӣ"},math:{ru:"Математика",tj:"Математика"},phys:{ru:"Физика",tj:"Физика"},chem:{ru:"Химия",tj:"Химия"},geo:{ru:"География",tj:"География"},hist:{ru:"История",tj:"Таърих"},lit:{ru:"Литература",tj:"Адабиёт"},bio:{ru:"Биология",tj:"Биология"},eng:{ru:"Английский",tj:"Забони Англисӣ"},ger:{ru:"Немецкий",tj:"Забони Немисӣ"},fra:{ru:"Французский",tj:"Забони Франсавӣ"},ara:{ru:"Арабский",tj:"Забони Арабӣ"}},B=[{id:1,titleRu:"Естественный и тех.",titleTj:"Табиӣ ва техникӣ",subjects:["tj-lang","math","phys","chem"]},{id:2,titleRu:"Экономика и Гео.",titleTj:"Иқтисод ва География",subjects:["tj-lang","math","geo","eng","fra","ger","ara"]},{id:3,titleRu:"Филология и Искусство",titleTj:"Филология ва Санъат",subjects:["tj-lang","hist","lit","eng","fra","ger","ara"]},{id:4,titleRu:"Общество и Право",titleTj:"Ҷомеашиносӣ ва Ҳуқуқ",subjects:["tj-lang","hist","eng","fra","ger","ara"]},{id:5,titleRu:"Медицина и Биология",titleTj:"Тиб ва Биология",subjects:["tj-lang","bio","chem","phys"]}],K=Object.keys(Y),tt=({subjectId:o})=>{const{i18n:t}=A(),n=t.resolvedLanguage||"ru",e=Y[o],i=ye[o][n],s=e.icon;return r.jsxs(O,{to:`/subject/${o}`,className:"block group relative bg-gaming-card rounded-3xl p-6 border border-white/5 hover:border-gaming-primary/30 shadow-lg shadow-black/20 hover:shadow-gaming-primary/10 transition-all duration-500 hover:-translate-y-2 cursor-pointer overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/0 via-gaming-primary/0 to-gaming-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),r.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-6",children:[r.jsx("div",{className:`w-14 h-14 rounded-2xl ${e.bg} flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:r.jsx(s,{size:28,className:e.color})}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-white/40 group-hover:bg-gaming-primary group-hover:text-white transition-all duration-300",children:r.jsx($e,{size:16})})]}),r.jsx("h3",{className:"relative z-10 text-xl font-bold text-white mb-4 leading-tight group-hover:text-gaming-accent transition-colors",children:i}),r.jsx("div",{className:"relative z-10 w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink rounded-full",style:{width:"0%"}})})]})},nt=()=>{const{i18n:o}=A(),{updateSelectedSubjects:t,profile:n}=X(),[e,i]=w.useState([]),[s,a]=w.useState(!1),l=o.resolvedLanguage||"ru",c=d=>{i(m=>m.includes(d)?m.filter(f=>f!==d):[...m,d])},g=async()=>{e.length!==0&&(a(!0),await t(e),a(!1))};return r.jsxs("div",{className:"min-h-[80vh] flex flex-col items-center justify-center p-6 text-center animate-fade-in",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gaming-primary/20 flex items-center justify-center mb-6 ring-2 ring-gaming-primary/50 shadow-lg shadow-gaming-primary/30",children:r.jsx(W,{className:"text-gaming-primary w-8 h-8"})}),r.jsxs("h1",{className:"text-4xl md:text-5xl font-heading font-bold text-white mb-4 drop-shadow-lg",children:["Добро пожаловать, ",(n==null?void 0:n.full_name)||"Ученик","!"]}),r.jsx("p",{className:"text-xl text-gray-300 mb-12 max-w-2xl",children:"Давайте настроим платформу под вас. Выберите предметы, которые вы планируете изучать:"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 w-full max-w-5xl mb-12",children:K.map(d=>{var j;const m=Y[d];if(!m)return null;const f=m.icon,p=e.includes(d);return r.jsxs("div",{onClick:()=>c(d),className:`relative cursor-pointer rounded-2xl p-6 flex flex-col items-center gap-4 transition-all duration-300 border-2
                                ${p?"bg-gaming-card/80 border-gaming-primary shadow-lg shadow-gaming-primary/20 scale-105":"bg-black/30 border-white/5 hover:bg-white/5 hover:border-white/20"}
                            `,children:[r.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center transition-transform ${p?"scale-110":""} ${m.bg}`,children:r.jsx(f,{size:28,className:m.color})}),r.jsx("span",{className:"font-medium text-white text-center",children:((j=ye[d])==null?void 0:j[l])||d}),r.jsx("div",{className:`absolute top-4 right-4 transition-all duration-300 ${p?"opacity-100 transform scale-100":"opacity-0 transform scale-50"}`,children:r.jsx(He,{className:"text-gaming-primary w-6 h-6"})})]},d)})}),r.jsx("button",{onClick:g,disabled:e.length===0||s,className:`
                    px-12 py-4 rounded-xl font-bold text-lg flex items-center gap-3 transition-all duration-300 shadow-xl
                    ${e.length>0?"bg-gaming-primary text-white hover:bg-gaming-primary-hover hover:scale-105 shadow-gaming-primary/30":"bg-white/5 text-gray-500 cursor-not-allowed border border-white/5"}
                `,children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Сохранение..."]}):r.jsxs(r.Fragment,{children:["Продолжить ",r.jsx(Fe,{size:20})]})}),r.jsx("p",{className:"mt-4 text-sm text-gray-500 max-w-md",children:"В будущем вы сможете добавить или изменить список предметов через администратора."})]})},rt=()=>{const{t:o,i18n:t}=A(),[n,e]=w.useState(0),i=t.resolvedLanguage||"ru",{profile:s}=X(),a=F();w.useEffect(()=>{a.hash==="#courses-section"&&setTimeout(()=>{var x;(x=document.getElementById("courses-section"))==null||x.scrollIntoView({behavior:"smooth"})},100)},[a]);const c=(()=>{if((s==null?void 0:s.role)==="super_admin"||(s==null?void 0:s.role)==="admin"){if(n===0)return K;const S=B.find(h=>h.id===n);return S?S.subjects:[]}if((s==null?void 0:s.role)==="teacher"&&(s!=null&&s.subject))return[s.subject];if(s!=null&&s.selected_subjects&&s.selected_subjects.length>0)return s.selected_subjects;if(n===0)return K;const x=B.find(S=>S.id===n);return x?x.subjects:[]})(),g=(s==null?void 0:s.role)==="student"||!(s!=null&&s.role),d=(s==null?void 0:s.selected_subjects)&&s.selected_subjects.length>0,m=(s==null?void 0:s.role)==="teacher";(s==null?void 0:s.role)==="admin"||(s==null||s.role);const f=!s,p=()=>{if(m&&(s!=null&&s.subject))return o("allSubjects");if(g&&d)return"Мои предметы";if(n===0)return o("allSubjects");const x=B.find(S=>S.id===n);return`${o("cluster")} ${n}: ${i==="ru"?x==null?void 0:x.titleRu:x==null?void 0:x.titleTj}`},j=f,E=f;return!f&&g&&!d?r.jsx("main",{className:"relative",children:r.jsx(nt,{})}):r.jsxs("main",{className:"relative",children:[E&&r.jsx(et,{}),j&&r.jsx(ClusterSelect,{activeClusterId:n,setActiveClusterId:e}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 min-h-[600px] mt-10",children:[r.jsx("div",{className:"flex items-end justify-between mb-8 px-2",children:r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight drop-shadow-lg",children:p()}),r.jsx("p",{className:"text-gaming-textMuted mt-2 text-lg",children:o("popularSubtitle")})]})}),c.length>0?r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",children:c.map((x,S)=>r.jsx(tt,{subjectId:x},`${n}-${x}-${S}`))}):r.jsx("div",{className:"text-center py-20 bg-white/5 rounded-3xl border border-white/10",children:r.jsx("p",{className:"text-white/60 text-lg",children:"Нет доступных предметов"})})]})]})},M=({children:o,requireTeacher:t=!1,requireAdmin:n=!1,requireSuperAdmin:e=!1})=>{const{user:i,profile:s,loading:a}=X(),l=F();return a?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:r.jsx(Xe,{size:40,className:"text-gaming-primary animate-spin"})}):i?e&&(s==null?void 0:s.role)!=="super_admin"?r.jsx(z,{to:"/",replace:!0}):n&&(s==null?void 0:s.role)!=="admin"&&(s==null?void 0:s.role)!=="super_admin"?r.jsx(z,{to:"/",replace:!0}):t&&(s==null?void 0:s.role)!=="teacher"&&(s==null?void 0:s.role)!=="admin"&&(s==null?void 0:s.role)!=="super_admin"?r.jsx(z,{to:"/",replace:!0}):o:r.jsx(z,{to:"/login",state:{from:l},replace:!0})},ot=N.lazy(()=>P(()=>import("./SubjectPage-Bn6X43jw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),st=N.lazy(()=>P(()=>import("./SectionPage-BPhPxrEm.js"),__vite__mapDeps([9,1,2,3,4,5,6,7,8]))),it=N.lazy(()=>P(()=>import("./TopicPage-uWXanPS2.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8]))),at=N.lazy(()=>P(()=>import("./LessonPage-BILyJH2f.js").then(o=>o.L),__vite__mapDeps([11,1,2,3,4,5,6,12]))),lt=N.lazy(()=>P(()=>import("./CreatorPage-C712W82Q.js").then(o=>o.C),__vite__mapDeps([13,1,2,3,6,5,14]))),ct=N.lazy(()=>P(()=>import("./AdminPage-C-EFDqMu.js"),__vite__mapDeps([15,1,2,3,16,14,8]))),ut=N.lazy(()=>P(()=>import("./AuthPage-9G_9Juby.js"),__vite__mapDeps([17,1,2,3,8]))),dt=N.lazy(()=>P(()=>import("./ClassesPage-DzHHTW_9.js"),__vite__mapDeps([18,1,2,3,16,8]))),mt=N.lazy(()=>P(()=>import("./ClassDetailsPage-6gWuS0fX.js"),__vite__mapDeps([19,1,2,3,16,14,6,8]))),gt=N.lazy(()=>P(()=>import("./ProfilePage-BsBHTRyu.js"),__vite__mapDeps([20,1,2,3,8]))),ht=N.lazy(()=>P(()=>import("./NotFoundPage-CjXasYqX.js"),__vite__mapDeps([21,1,2,3]))),ft=()=>r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-gaming-primary/30 border-t-gaming-primary rounded-full animate-spin"}),r.jsx("span",{className:"text-gaming-textMuted text-sm",children:"Загрузка..."})]})});function pt(){const{i18n:o}=A(),t=F();return N.useEffect(()=>{window.scrollTo(0,0)},[t.pathname]),r.jsxs("div",{className:"min-h-screen bg-gaming-bg font-sans text-white selection:bg-gaming-pink/30 selection:text-white overflow-hidden flex flex-col",children:[r.jsx(Ye,{}),r.jsx("main",{className:"flex-grow pt-24",children:r.jsx(w.Suspense,{fallback:r.jsx(ft,{}),children:r.jsxs(Le,{children:[r.jsx(k,{path:"/",element:r.jsx(rt,{})}),r.jsx(k,{path:"/subject/:subjectId",element:r.jsx(ot,{})}),r.jsx(k,{path:"/subject/:subjectId/section/:sectionId",element:r.jsx(st,{})}),r.jsx(k,{path:"/subject/:subjectId/section/:sectionId/topic/:topicId",element:r.jsx(it,{})}),r.jsx(k,{path:"/lesson/:lessonId",element:r.jsx(at,{})}),r.jsx(k,{path:"/creator",element:r.jsx(M,{allowedRoles:["teacher","admin","super_admin"],children:r.jsx(lt,{})})}),r.jsx(k,{path:"/admin",element:r.jsx(M,{allowedRoles:["admin","super_admin"],children:r.jsx(ct,{})})}),r.jsx(k,{path:"/classes",element:r.jsx(M,{children:r.jsx(dt,{})})}),r.jsx(k,{path:"/classes/:classId",element:r.jsx(M,{children:r.jsx(mt,{})})}),r.jsx(k,{path:"/login",element:r.jsx(ut,{})}),r.jsx(k,{path:"/profile",element:r.jsx(M,{children:r.jsx(gt,{})})}),r.jsx(k,{path:"*",element:r.jsx(ht,{})})]})})}),r.jsx(Ze,{})]})}function xt(){return r.jsx(Qe,{children:r.jsx(Ce,{basename:"/Donishmand_platform/",children:r.jsx(pt,{})})})}const{slice:bt,forEach:yt}=[];function wt(o){return yt.call(bt.call(arguments,1),t=>{if(t)for(const n in t)o[n]===void 0&&(o[n]=t[n])}),o}function vt(o){return typeof o!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(o))}const re=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,jt=function(o,t){const e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(t);let s=`${o}=${i}`;if(e.maxAge>0){const a=e.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(e.domain){if(!re.test(e.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${e.domain}`}if(e.path){if(!re.test(e.path))throw new TypeError("option path is invalid");s+=`; Path=${e.path}`}if(e.expires){if(typeof e.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${e.expires.toUTCString()}`}if(e.httpOnly&&(s+="; HttpOnly"),e.secure&&(s+="; Secure"),e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return e.partitioned&&(s+="; Partitioned"),s},oe={create(o,t,n,e){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),e&&(i.domain=e),document.cookie=jt(o,t,i)},read(o){const t=`${o}=`,n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(o,t){this.create(o,"",-1,t)}};var St={name:"cookie",lookup(o){let{lookupCookie:t}=o;if(t&&typeof document<"u")return oe.read(t)||void 0},cacheUserLanguage(o,t){let{lookupCookie:n,cookieMinutes:e,cookieDomain:i,cookieOptions:s}=t;n&&typeof document<"u"&&oe.create(n,o,e,i,s)}},_t={name:"querystring",lookup(o){var e;let{lookupQuerystring:t}=o,n;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((e=window.location.hash)==null?void 0:e.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const a=i.substring(1).split("&");for(let l=0;l<a.length;l++){const c=a[l].indexOf("=");c>0&&a[l].substring(0,c)===t&&(n=a[l].substring(c+1))}}return n}},Nt={name:"hash",lookup(o){var i;let{lookupHash:t,lookupFromHashIndex:n}=o,e;if(typeof window<"u"){const{hash:s}=window.location;if(s&&s.length>2){const a=s.substring(1);if(t){const l=a.split("&");for(let c=0;c<l.length;c++){const g=l[c].indexOf("=");g>0&&l[c].substring(0,g)===t&&(e=l[c].substring(g+1))}}if(e)return e;if(!e&&n>-1){const l=s.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?(i=l[typeof n=="number"?n:0])==null?void 0:i.replace("/",""):void 0}}}return e}};let R=null;const se=()=>{if(R!==null)return R;try{if(R=typeof window<"u"&&window.localStorage!==null,!R)return!1;const o="i18next.translate.boo";window.localStorage.setItem(o,"foo"),window.localStorage.removeItem(o)}catch{R=!1}return R};var kt={name:"localStorage",lookup(o){let{lookupLocalStorage:t}=o;if(t&&se())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(o,t){let{lookupLocalStorage:n}=t;n&&se()&&window.localStorage.setItem(n,o)}};let D=null;const ie=()=>{if(D!==null)return D;try{if(D=typeof window<"u"&&window.sessionStorage!==null,!D)return!1;const o="i18next.translate.boo";window.sessionStorage.setItem(o,"foo"),window.sessionStorage.removeItem(o)}catch{D=!1}return D};var Ot={name:"sessionStorage",lookup(o){let{lookupSessionStorage:t}=o;if(t&&ie())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(o,t){let{lookupSessionStorage:n}=t;n&&ie()&&window.sessionStorage.setItem(n,o)}},Pt={name:"navigator",lookup(o){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:e,language:i}=navigator;if(n)for(let s=0;s<n.length;s++)t.push(n[s]);e&&t.push(e),i&&t.push(i)}return t.length>0?t:void 0}},Et={name:"htmlTag",lookup(o){let{htmlTag:t}=o,n;const e=t||(typeof document<"u"?document.documentElement:null);return e&&typeof e.getAttribute=="function"&&(n=e.getAttribute("lang")),n}},Ct={name:"path",lookup(o){var i;let{lookupFromPathIndex:t}=o;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(i=n[typeof t=="number"?t:0])==null?void 0:i.replace("/",""):void 0}},Lt={name:"subdomain",lookup(o){var i,s;let{lookupFromSubdomainIndex:t}=o;const n=typeof t=="number"?t+1:1,e=typeof window<"u"&&((s=(i=window.location)==null?void 0:i.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(e)return e[n]}};let we=!1;try{document.cookie,we=!0}catch{}const ve=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];we||ve.splice(1,1);const Tt=()=>({order:ve,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:o=>o});class je{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=wt(n,this.options||{},Tt()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=e,this.addDetector(St),this.addDetector(_t),this.addDetector(kt),this.addDetector(Ot),this.addDetector(Pt),this.addDetector(Et),this.addDetector(Ct),this.addDetector(Lt),this.addDetector(Nt)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(e=>{if(this.detectors[e]){let i=this.detectors[e].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(e=>e!=null&&!vt(e)).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(e=>{this.detectors[e]&&this.detectors[e].cacheUserLanguage(t,this.options)}))}}je.type="languageDetector";function J(o){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(o)}function Se(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":J(XMLHttpRequest))==="object"}function It(o){return!!o&&typeof o.then=="function"}function At(o){return It(o)?o:Promise.resolve(o)}function ae(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,e)}return n}function le(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ae(Object(n),!0).forEach(function(e){Rt(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function Rt(o,t,n){return(t=Dt(t))in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function Dt(o){var t=qt(o,"string");return I(t)=="symbol"?t:t+""}function qt(o,t){if(I(o)!="object"||!o)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var e=n.call(o,t);if(I(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(o)}function I(o){"@babel/helpers - typeof";return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(o)}var L=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?L=global.fetch:typeof window<"u"&&window.fetch&&(L=window.fetch);var U;Se()&&(typeof global<"u"&&global.XMLHttpRequest?U=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(U=window.XMLHttpRequest));var H;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?H=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(H=window.ActiveXObject));typeof L!="function"&&(L=void 0);if(!L&&!U&&!H)try{P(()=>import("./browser-ponyfill-DPU6vdVN.js").then(o=>o.b),__vite__mapDeps([22,2])).then(function(o){L=o.default}).catch(function(){})}catch{}var Q=function(t,n){if(n&&I(n)==="object"){var e="";for(var i in n)e+="&"+encodeURIComponent(i)+"="+encodeURIComponent(n[i]);if(!e)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+e.slice(1)}return t},ce=function(t,n,e,i){var s=function(c){if(!c.ok)return e(c.statusText||"Error",{status:c.status});c.text().then(function(g){e(null,{status:c.status,data:g})}).catch(e)};if(i){var a=i(t,n);if(a instanceof Promise){a.then(s).catch(e);return}}typeof fetch=="function"?fetch(t,n).then(s).catch(e):L(t,n).then(s).catch(e)},ue=!1,Mt=function(t,n,e,i){t.queryStringParams&&(n=Q(n,t.queryStringParams));var s=le({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),e&&(s["Content-Type"]="application/json");var a=typeof t.requestOptions=="function"?t.requestOptions(e):t.requestOptions,l=le({method:e?"POST":"GET",body:e?t.stringify(e):void 0,headers:s},ue?{}:a),c=typeof t.alternateFetch=="function"&&t.alternateFetch.length>=1?t.alternateFetch:void 0;try{ce(n,l,i,c)}catch(g){if(!a||Object.keys(a).length===0||!g.message||g.message.indexOf("not implemented")<0)return i(g);try{Object.keys(a).forEach(function(d){delete l[d]}),ce(n,l,i,c),ue=!0}catch(d){i(d)}}},Ut=function(t,n,e,i){e&&I(e)==="object"&&(e=Q("",e).slice(1)),t.queryStringParams&&(n=Q(n,t.queryStringParams));try{var s=U?new U:new H("MSXML2.XMLHTTP.3.0");s.open(e?"POST":"GET",n,1),t.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!t.withCredentials,e&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var a=t.customHeaders;if(a=typeof a=="function"?a():a,a)for(var l in a)s.setRequestHeader(l,a[l]);s.onreadystatechange=function(){s.readyState>3&&i(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(e)}catch(c){console&&console.log(c)}},zt=function(t,n,e,i){if(typeof e=="function"&&(i=e,e=void 0),i=i||function(){},L&&n.indexOf("file:")!==0)return Mt(t,n,e,i);if(Se()||typeof ActiveXObject=="function")return Ut(t,n,e,i);i(new Error("No fetch and no xhr implementation found!"))};function q(o){"@babel/helpers - typeof";return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(o)}function de(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,e)}return n}function V(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?de(Object(n),!0).forEach(function(e){_e(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function $t(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function Ht(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,Ne(e.key),e)}}function Ft(o,t,n){return t&&Ht(o.prototype,t),Object.defineProperty(o,"prototype",{writable:!1}),o}function _e(o,t,n){return(t=Ne(t))in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function Ne(o){var t=Xt(o,"string");return q(t)=="symbol"?t:t+""}function Xt(o,t){if(q(o)!="object"||!o)return o;var n=o[Symbol.toPrimitive];if(n!==void 0){var e=n.call(o,t);if(q(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(o)}var Bt=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,e,i){return _e({},e,i||"")},parseLoadPayload:function(n,e){},request:zt,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},ke=function(){function o(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};$t(this,o),this.services=t,this.options=n,this.allOptions=e,this.type="backend",this.init(t,n,e)}return Ft(o,[{key:"init",value:function(n){var e=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=V(V(V({},Bt()),this.options||{}),i),this.allOptions=s,this.services&&this.options.reloadInterval){var a=setInterval(function(){return e.reload()},this.options.reloadInterval);q(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(n,e,i){this._readAny(n,n,e,e,i)}},{key:"read",value:function(n,e,i){this._readAny([n],n,[e],e,i)}},{key:"_readAny",value:function(n,e,i,s,a){var l=this,c=this.options.loadPath;typeof this.options.loadPath=="function"&&(c=this.options.loadPath(n,i)),c=At(c),c.then(function(g){if(!g)return a(null,{});var d=l.services.interpolator.interpolate(g,{lng:n.join("+"),ns:i.join("+")});l.loadUrl(d,a,e,s)})}},{key:"loadUrl",value:function(n,e,i,s){var a=this,l=typeof i=="string"?[i]:i,c=typeof s=="string"?[s]:s,g=this.options.parseLoadPayload(l,c);this.options.request(this.options,n,g,function(d,m){if(m&&(m.status>=500&&m.status<600||!m.status))return e("failed loading "+n+"; status code: "+m.status,!0);if(m&&m.status>=400&&m.status<500)return e("failed loading "+n+"; status code: "+m.status,!1);if(!m&&d&&d.message){var f=d.message.toLowerCase(),p=["failed","fetch","network","load"].find(function(x){return f.indexOf(x)>-1});if(p)return e("failed loading "+n+": "+d.message,!0)}if(d)return e(d,!1);var j,E;try{typeof m.data=="string"?j=a.options.parse(m.data,i,s):j=m.data}catch{E="failed parsing "+n+" to json"}if(E)return e(E,!1);e(null,j)})}},{key:"create",value:function(n,e,i,s,a){var l=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var c=this.options.parsePayload(e,i,s),g=0,d=[],m=[];n.forEach(function(f){var p=l.options.addPath;typeof l.options.addPath=="function"&&(p=l.options.addPath(f,e));var j=l.services.interpolator.interpolate(p,{lng:f,ns:e});l.options.request(l.options,j,c,function(E,x){g+=1,d.push(E),m.push(x),g===n.length&&typeof a=="function"&&a(d,m)})})}}},{key:"reload",value:function(){var n=this,e=this.services,i=e.backendConnector,s=e.languageUtils,a=e.logger,l=i.language;if(!(l&&l.toLowerCase()==="cimode")){var c=[],g=function(m){var f=s.toResolveHierarchy(m);f.forEach(function(p){c.indexOf(p)<0&&c.push(p)})};g(l),this.allOptions.preload&&this.allOptions.preload.forEach(function(d){return g(d)}),c.forEach(function(d){n.allOptions.ns.forEach(function(m){i.read(d,m,"read",null,null,function(f,p){f&&a.warn("loading namespace ".concat(m," for language ").concat(d," failed"),f),!f&&p&&a.log("loaded namespace ".concat(m," for language ").concat(d),p),i.loaded("".concat(d,"|").concat(m),f,p)})})})}}}])}();ke.type="backend";Be.use(ke).use(je).use(Ve).init({fallbackLng:"ru",debug:!1,interpolation:{escapeValue:!1},backend:{loadPath:"/Donishmand_platform/locales/{{lng}}/translation.json?v="+new Date().getTime()},detection:{order:["localStorage","navigator"],caches:["localStorage"]},react:{useSuspense:!1}});class Vt extends N.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Global Error Caught:",t,n),this.setState({errorInfo:n})}render(){return this.state.hasError?r.jsxs("div",{style:{padding:"2rem",backgroundColor:"#1a1a2e",color:"#fff",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontFamily:"sans-serif"},children:[r.jsx("h1",{style:{color:"#ff49db",marginBottom:"1rem"},children:"Что-то пошло не так :("}),r.jsx("p",{style:{marginBottom:"2rem",opacity:.8},children:"Произошла ошибка при отрисовке приложения."}),r.jsxs("div",{style:{padding:"1rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",maxWidth:"800px",width:"100%",overflow:"auto",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[r.jsx("code",{style:{color:"#ff7eb3",display:"block",marginBottom:"0.5rem"},children:this.state.error&&this.state.error.toString()}),r.jsx("pre",{style:{fontSize:"0.8rem",opacity:.6,whiteSpace:"pre-wrap"},children:this.state.errorInfo&&this.state.errorInfo.componentStack})]}),r.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"2rem",padding:"0.75rem 2rem",backgroundColor:"#7c3aed",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontSize:"1rem",fontWeight:"bold"},children:"Перезагрузить страницу"}),r.jsx("button",{onClick:()=>{localStorage.clear(),window.location.reload()},style:{marginTop:"1rem",padding:"0.75rem 2rem",backgroundColor:"transparent",color:"#e2e8f0",border:"1px solid #4a5568",borderRadius:"0.5rem",cursor:"pointer",fontSize:"0.9rem"},children:"Сбросить кэш и перезагрузить"})]}):this.props.children}}G.createRoot(document.getElementById("root")).render(r.jsx(N.StrictMode,{children:r.jsx(Vt,{children:r.jsx(xt,{})})}));export{K as A,B as C,ye as S,P as _,Qt as a,T as s,X as u};
