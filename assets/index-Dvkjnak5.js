(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function uw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dw={exports:{}},Ad={},hw={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rl=Symbol.for("react.element"),PC=Symbol.for("react.portal"),DC=Symbol.for("react.fragment"),LC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),zC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),UC=Symbol.for("react.forward_ref"),FC=Symbol.for("react.suspense"),HC=Symbol.for("react.memo"),VC=Symbol.for("react.lazy"),Ry=Symbol.iterator;function WC(t){return t===null||typeof t!="object"?null:(t=Ry&&t[Ry]||t["@@iterator"],typeof t=="function"?t:null)}var fw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pw=Object.assign,mw={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||fw}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gw(){}gw.prototype=Oo.prototype;function Im(t,e,n){this.props=t,this.context=e,this.refs=mw,this.updater=n||fw}var Pm=Im.prototype=new gw;Pm.constructor=Im;pw(Pm,Oo.prototype);Pm.isPureReactComponent=!0;var Ay=Array.isArray,yw=Object.prototype.hasOwnProperty,Dm={current:null},vw={key:!0,ref:!0,__self:!0,__source:!0};function xw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yw.call(e,r)&&!vw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Rl,type:t,key:i,ref:o,props:s,_owner:Dm.current}}function KC(t,e){return{$$typeof:Rl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Lm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Rl}function qC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var My=/\/+/g;function jh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qC(""+t.key):e.toString(36)}function Pc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Rl:case PC:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jh(o,0):r,Ay(s)?(n="",t!=null&&(n=t.replace(My,"$&/")+"/"),Pc(s,e,n,"",function(c){return c})):s!=null&&(Lm(s)&&(s=KC(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(My,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ay(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+jh(i,a);o+=Pc(i,e,n,l,s)}else if(l=WC(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+jh(i,a++),o+=Pc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Kl(t,e,n){if(t==null)return t;var r=[],s=0;return Pc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Dc={transition:null},GC={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Dc,ReactCurrentOwner:Dm};function ww(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Kl,forEach:function(t,e,n){Kl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Kl(t,function(){e++}),e},toArray:function(t){return Kl(t,function(e){return e})||[]},only:function(t){if(!Lm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Oo;he.Fragment=DC;he.Profiler=$C;he.PureComponent=Im;he.StrictMode=LC;he.Suspense=FC;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;he.act=ww;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=pw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Dm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)yw.call(e,l)&&!vw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Rl,type:t.type,key:s,ref:i,props:r,_owner:o}};he.createContext=function(t){return t={$$typeof:BC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zC,_context:t},t.Consumer=t};he.createElement=xw;he.createFactory=function(t){var e=xw.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:UC,render:t}};he.isValidElement=Lm;he.lazy=function(t){return{$$typeof:VC,_payload:{_status:-1,_result:t},_init:JC}};he.memo=function(t,e){return{$$typeof:HC,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Dc.transition;Dc.transition={};try{t()}finally{Dc.transition=e}};he.unstable_act=ww;he.useCallback=function(t,e){return zt.current.useCallback(t,e)};he.useContext=function(t){return zt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};he.useEffect=function(t,e){return zt.current.useEffect(t,e)};he.useId=function(){return zt.current.useId()};he.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return zt.current.useMemo(t,e)};he.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};he.useRef=function(t){return zt.current.useRef(t)};he.useState=function(t){return zt.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return zt.current.useTransition()};he.version="18.3.1";hw.exports=he;var b=hw.exports;const ve=uw(b);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YC=b,QC=Symbol.for("react.element"),XC=Symbol.for("react.fragment"),ZC=Object.prototype.hasOwnProperty,eT=YC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tT={key:!0,ref:!0,__self:!0,__source:!0};function bw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ZC.call(e,r)&&!tT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:QC,type:t,key:i,ref:o,props:s,_owner:eT.current}}Ad.Fragment=XC;Ad.jsx=bw;Ad.jsxs=bw;dw.exports=Ad;var h=dw.exports,Wf={},kw={exports:{}},dn={},Sw={exports:{}},Ew={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,F){var K=L.length;L.push(F);e:for(;0<K;){var se=K-1>>>1,G=L[se];if(0<s(G,F))L[se]=F,L[K]=G,K=se;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var F=L[0],K=L.pop();if(K!==F){L[0]=K;e:for(var se=0,G=L.length,Ce=G>>>1;se<Ce;){var je=2*(se+1)-1,St=L[je],Te=je+1,fn=L[Te];if(0>s(St,K))Te<G&&0>s(fn,St)?(L[se]=fn,L[Te]=K,se=Te):(L[se]=St,L[je]=K,se=je);else if(Te<G&&0>s(fn,K))L[se]=fn,L[Te]=K,se=Te;else break e}}return F}function s(L,F){var K=L.sortIndex-F.sortIndex;return K!==0?K:L.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=L)r(c),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(c)}}function k(L){if(y=!1,w(L),!m)if(n(l)!==null)m=!0,I(S);else{var F=n(c);F!==null&&B(k,F.startTime-L)}}function S(L,F){m=!1,y&&(y=!1,g(N),N=-1),p=!0;var K=f;try{for(w(F),d=n(l);d!==null&&(!(d.expirationTime>F)||L&&!R());){var se=d.callback;if(typeof se=="function"){d.callback=null,f=d.priorityLevel;var G=se(d.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?d.callback=G:d===n(l)&&r(l),w(F)}else r(l);d=n(l)}if(d!==null)var Ce=!0;else{var je=n(c);je!==null&&B(k,je.startTime-F),Ce=!1}return Ce}finally{d=null,f=K,p=!1}}var C=!1,E=null,N=-1,A=5,P=-1;function R(){return!(t.unstable_now()-P<A)}function _(){if(E!==null){var L=t.unstable_now();P=L;var F=!0;try{F=E(!0,L)}finally{F?T():(C=!1,E=null)}}else C=!1}var T;if(typeof x=="function")T=function(){x(_)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,j=O.port2;O.port1.onmessage=_,T=function(){j.postMessage(null)}}else T=function(){v(_,0)};function I(L){E=L,C||(C=!0,T())}function B(L,F){N=v(function(){L(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(S))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var K=f;f=F;try{return L()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var K=f;f=L;try{return F()}finally{f=K}},t.unstable_scheduleCallback=function(L,F,K){var se=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?se+K:se):K=se,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=K+G,L={id:u++,callback:F,priorityLevel:L,startTime:K,expirationTime:G,sortIndex:-1},K>se?(L.sortIndex=K,e(c,L),n(l)===null&&L===n(c)&&(y?(g(N),N=-1):y=!0,B(k,K-se))):(L.sortIndex=G,e(l,L),m||p||(m=!0,I(S))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var F=f;return function(){var K=f;f=F;try{return L.apply(this,arguments)}finally{f=K}}}})(Ew);Sw.exports=Ew;var nT=Sw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT=b,un=nT;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cw=new Set,Fa={};function Ci(t,e){vo(t,e),vo(t+"Capture",e)}function vo(t,e){for(Fa[t]=e,t=0;t<e.length;t++)Cw.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kf=Object.prototype.hasOwnProperty,sT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Oy={},Iy={};function iT(t){return Kf.call(Iy,t)?!0:Kf.call(Oy,t)?!1:sT.test(t)?Iy[t]=!0:(Oy[t]=!0,!1)}function oT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aT(t,e,n,r){if(e===null||typeof e>"u"||oT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $m=/[\-:]([a-z])/g;function zm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($m,zm);kt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($m,zm);kt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($m,zm);kt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});kt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bm(t,e,n,r){var s=kt.hasOwnProperty(e)?kt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aT(e,n,s,r)&&(n=null),r||s===null?iT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ir=rT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),Ki=Symbol.for("react.portal"),qi=Symbol.for("react.fragment"),Um=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),Tw=Symbol.for("react.provider"),Nw=Symbol.for("react.context"),Fm=Symbol.for("react.forward_ref"),Jf=Symbol.for("react.suspense"),Gf=Symbol.for("react.suspense_list"),Hm=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),_w=Symbol.for("react.offscreen"),Py=Symbol.iterator;function qo(t){return t===null||typeof t!="object"?null:(t=Py&&t[Py]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Rh;function aa(t){if(Rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rh=e&&e[1]||""}return`
`+Rh+t}var Ah=!1;function Mh(t,e){if(!t||Ah)return"";Ah=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ah=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?aa(t):""}function lT(t){switch(t.tag){case 5:return aa(t.type);case 16:return aa("Lazy");case 13:return aa("Suspense");case 19:return aa("SuspenseList");case 0:case 2:case 15:return t=Mh(t.type,!1),t;case 11:return t=Mh(t.type.render,!1),t;case 1:return t=Mh(t.type,!0),t;default:return""}}function Yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qi:return"Fragment";case Ki:return"Portal";case qf:return"Profiler";case Um:return"StrictMode";case Jf:return"Suspense";case Gf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nw:return(t.displayName||"Context")+".Consumer";case Tw:return(t._context.displayName||"Context")+".Provider";case Fm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hm:return e=t.displayName||null,e!==null?e:Yf(t.type)||"Memo";case Kr:e=t._payload,t=t._init;try{return Yf(t(e))}catch{}}return null}function cT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yf(e);case 8:return e===Um?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uT(t){var e=jw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Jl(t){t._valueTracker||(t._valueTracker=uT(t))}function Rw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qf(t,e){var n=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Dy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Es(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Aw(t,e){e=e.checked,e!=null&&Bm(t,"checked",e,!1)}function Xf(t,e){Aw(t,e);var n=Es(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Zf(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Zf(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var la=Array.isArray;function oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Es(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ep(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(la(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Es(n)}}function Mw(t,e){var n=Es(e.value),r=Es(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ow(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ow(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,Iw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ya={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dT=["Webkit","ms","Moz","O"];Object.keys(ya).forEach(function(t){dT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ya[e]=ya[t]})});function Pw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ya.hasOwnProperty(t)&&ya[t]?(""+e).trim():e+"px"}function Dw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Pw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var hT=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function np(t,e){if(e){if(hT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function rp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sp=null;function Vm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ip=null,ao=null,lo=null;function By(t){if(t=Ol(t)){if(typeof ip!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Dd(e),ip(t.stateNode,t.type,e))}}function Lw(t){ao?lo?lo.push(t):lo=[t]:ao=t}function $w(){if(ao){var t=ao,e=lo;if(lo=ao=null,By(t),e)for(t=0;t<e.length;t++)By(e[t])}}function zw(t,e){return t(e)}function Bw(){}var Oh=!1;function Uw(t,e,n){if(Oh)return t(e,n);Oh=!0;try{return zw(t,e,n)}finally{Oh=!1,(ao!==null||lo!==null)&&(Bw(),$w())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var r=Dd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var op=!1;if(jr)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){op=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{op=!1}function fT(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var va=!1,ou=null,au=!1,ap=null,pT={onError:function(t){va=!0,ou=t}};function mT(t,e,n,r,s,i,o,a,l){va=!1,ou=null,fT.apply(pT,arguments)}function gT(t,e,n,r,s,i,o,a,l){if(mT.apply(this,arguments),va){if(va){var c=ou;va=!1,ou=null}else throw Error(z(198));au||(au=!0,ap=c)}}function Ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Fw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uy(t){if(Ti(t)!==t)throw Error(z(188))}function yT(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uy(s),t;if(i===r)return Uy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Hw(t){return t=yT(t),t!==null?Vw(t):null}function Vw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vw(t);if(e!==null)return e;t=t.sibling}return null}var Ww=un.unstable_scheduleCallback,Fy=un.unstable_cancelCallback,vT=un.unstable_shouldYield,xT=un.unstable_requestPaint,Je=un.unstable_now,wT=un.unstable_getCurrentPriorityLevel,Wm=un.unstable_ImmediatePriority,Kw=un.unstable_UserBlockingPriority,lu=un.unstable_NormalPriority,bT=un.unstable_LowPriority,qw=un.unstable_IdlePriority,Md=null,or=null;function kT(t){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Md,t,void 0,(t.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:CT,ST=Math.log,ET=Math.LN2;function CT(t){return t>>>=0,t===0?32:31-(ST(t)/ET|0)|0}var Yl=64,Ql=4194304;function ca(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=ca(a):(i&=o,i!==0&&(r=ca(i)))}else o=n&~s,o!==0?r=ca(o):i!==0&&(r=ca(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vn(e),s=1<<n,r|=t[n],e&=~s;return r}function TT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Vn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=TT(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function lp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jw(){var t=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),t}function Ih(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Al(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vn(e),t[e]=n}function _T(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Km(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var xe=0;function Gw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yw,qm,Qw,Xw,Zw,cp=!1,Xl=[],hs=null,fs=null,ps=null,Wa=new Map,Ka=new Map,Zr=[],jT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":Wa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(e.pointerId)}}function Go(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ol(e),e!==null&&qm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RT(t,e,n,r,s){switch(e){case"focusin":return hs=Go(hs,t,e,n,r,s),!0;case"dragenter":return fs=Go(fs,t,e,n,r,s),!0;case"mouseover":return ps=Go(ps,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wa.set(i,Go(Wa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,Go(Ka.get(i)||null,t,e,n,r,s)),!0}return!1}function eb(t){var e=Ys(t.target);if(e!==null){var n=Ti(e);if(n!==null){if(e=n.tag,e===13){if(e=Fw(n),e!==null){t.blockedOn=e,Zw(t.priority,function(){Qw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=up(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sp=r,n.target.dispatchEvent(r),sp=null}else return e=Ol(n),e!==null&&qm(e),t.blockedOn=n,!1;e.shift()}return!0}function Vy(t,e,n){Lc(t)&&n.delete(e)}function AT(){cp=!1,hs!==null&&Lc(hs)&&(hs=null),fs!==null&&Lc(fs)&&(fs=null),ps!==null&&Lc(ps)&&(ps=null),Wa.forEach(Vy),Ka.forEach(Vy)}function Yo(t,e){t.blockedOn===e&&(t.blockedOn=null,cp||(cp=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,AT)))}function qa(t){function e(s){return Yo(s,t)}if(0<Xl.length){Yo(Xl[0],t);for(var n=1;n<Xl.length;n++){var r=Xl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hs!==null&&Yo(hs,t),fs!==null&&Yo(fs,t),ps!==null&&Yo(ps,t),Wa.forEach(e),Ka.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)eb(n),n.blockedOn===null&&Zr.shift()}var co=Ir.ReactCurrentBatchConfig,uu=!0;function MT(t,e,n,r){var s=xe,i=co.transition;co.transition=null;try{xe=1,Jm(t,e,n,r)}finally{xe=s,co.transition=i}}function OT(t,e,n,r){var s=xe,i=co.transition;co.transition=null;try{xe=4,Jm(t,e,n,r)}finally{xe=s,co.transition=i}}function Jm(t,e,n,r){if(uu){var s=up(t,e,n,r);if(s===null)Vh(t,e,r,du,n),Hy(t,r);else if(RT(s,t,e,n,r))r.stopPropagation();else if(Hy(t,r),e&4&&-1<jT.indexOf(t)){for(;s!==null;){var i=Ol(s);if(i!==null&&Yw(i),i=up(t,e,n,r),i===null&&Vh(t,e,r,du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vh(t,e,r,null,n)}}var du=null;function up(t,e,n,r){if(du=null,t=Vm(r),t=Ys(t),t!==null)if(e=Ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Fw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return du=t,null}function tb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wT()){case Wm:return 1;case Kw:return 4;case lu:case bT:return 16;case qw:return 536870912;default:return 16}default:return 16}}var ss=null,Gm=null,$c=null;function nb(){if($c)return $c;var t,e=Gm,n=e.length,r,s="value"in ss?ss.value:ss.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return $c=s.slice(t,1<r?1-r:void 0)}function zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zl(){return!0}function Wy(){return!1}function hn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Zl:Wy,this.isPropagationStopped=Wy,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),e}var Io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ym=hn(Io),Ml=Ue({},Io,{view:0,detail:0}),IT=hn(Ml),Ph,Dh,Qo,Od=Ue({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Qo&&(Qo&&t.type==="mousemove"?(Ph=t.screenX-Qo.screenX,Dh=t.screenY-Qo.screenY):Dh=Ph=0,Qo=t),Ph)},movementY:function(t){return"movementY"in t?t.movementY:Dh}}),Ky=hn(Od),PT=Ue({},Od,{dataTransfer:0}),DT=hn(PT),LT=Ue({},Ml,{relatedTarget:0}),Lh=hn(LT),$T=Ue({},Io,{animationName:0,elapsedTime:0,pseudoElement:0}),zT=hn($T),BT=Ue({},Io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UT=hn(BT),FT=Ue({},Io,{data:0}),qy=hn(FT),HT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=WT[t])?!!e[t]:!1}function Qm(){return KT}var qT=Ue({},Ml,{key:function(t){if(t.key){var e=HT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qm,charCode:function(t){return t.type==="keypress"?zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JT=hn(qT),GT=Ue({},Od,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jy=hn(GT),YT=Ue({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qm}),QT=hn(YT),XT=Ue({},Io,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZT=hn(XT),eN=Ue({},Od,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),tN=hn(eN),nN=[9,13,27,32],Xm=jr&&"CompositionEvent"in window,xa=null;jr&&"documentMode"in document&&(xa=document.documentMode);var rN=jr&&"TextEvent"in window&&!xa,rb=jr&&(!Xm||xa&&8<xa&&11>=xa),Gy=" ",Yy=!1;function sb(t,e){switch(t){case"keyup":return nN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ib(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function sN(t,e){switch(t){case"compositionend":return ib(e);case"keypress":return e.which!==32?null:(Yy=!0,Gy);case"textInput":return t=e.data,t===Gy&&Yy?null:t;default:return null}}function iN(t,e){if(Ji)return t==="compositionend"||!Xm&&sb(t,e)?(t=nb(),$c=Gm=ss=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rb&&e.locale!=="ko"?null:e.data;default:return null}}var oN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oN[t.type]:e==="textarea"}function ob(t,e,n,r){Lw(r),e=hu(e,"onChange"),0<e.length&&(n=new Ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wa=null,Ja=null;function aN(t){yb(t,0)}function Id(t){var e=Qi(t);if(Rw(e))return t}function lN(t,e){if(t==="change")return e}var ab=!1;if(jr){var $h;if(jr){var zh="oninput"in document;if(!zh){var Xy=document.createElement("div");Xy.setAttribute("oninput","return;"),zh=typeof Xy.oninput=="function"}$h=zh}else $h=!1;ab=$h&&(!document.documentMode||9<document.documentMode)}function Zy(){wa&&(wa.detachEvent("onpropertychange",lb),Ja=wa=null)}function lb(t){if(t.propertyName==="value"&&Id(Ja)){var e=[];ob(e,Ja,t,Vm(t)),Uw(aN,e)}}function cN(t,e,n){t==="focusin"?(Zy(),wa=e,Ja=n,wa.attachEvent("onpropertychange",lb)):t==="focusout"&&Zy()}function uN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Id(Ja)}function dN(t,e){if(t==="click")return Id(e)}function hN(t,e){if(t==="input"||t==="change")return Id(e)}function fN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:fN;function Ga(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kf.call(e,s)||!qn(t[s],e[s]))return!1}return!0}function e0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function t0(t,e){var n=e0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=e0(n)}}function cb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ub(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function Zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function pN(t){var e=ub(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cb(n.ownerDocument.documentElement,n)){if(r!==null&&Zm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=t0(n,i);var o=t0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mN=jr&&"documentMode"in document&&11>=document.documentMode,Gi=null,dp=null,ba=null,hp=!1;function n0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hp||Gi==null||Gi!==iu(r)||(r=Gi,"selectionStart"in r&&Zm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ba&&Ga(ba,r)||(ba=r,r=hu(dp,"onSelect"),0<r.length&&(e=new Ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gi)))}function ec(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yi={animationend:ec("Animation","AnimationEnd"),animationiteration:ec("Animation","AnimationIteration"),animationstart:ec("Animation","AnimationStart"),transitionend:ec("Transition","TransitionEnd")},Bh={},db={};jr&&(db=document.createElement("div").style,"AnimationEvent"in window||(delete Yi.animationend.animation,delete Yi.animationiteration.animation,delete Yi.animationstart.animation),"TransitionEvent"in window||delete Yi.transitionend.transition);function Pd(t){if(Bh[t])return Bh[t];if(!Yi[t])return t;var e=Yi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in db)return Bh[t]=e[n];return t}var hb=Pd("animationend"),fb=Pd("animationiteration"),pb=Pd("animationstart"),mb=Pd("transitionend"),gb=new Map,r0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){gb.set(t,e),Ci(e,[t])}for(var Uh=0;Uh<r0.length;Uh++){var Fh=r0[Uh],gN=Fh.toLowerCase(),yN=Fh[0].toUpperCase()+Fh.slice(1);As(gN,"on"+yN)}As(hb,"onAnimationEnd");As(fb,"onAnimationIteration");As(pb,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(mb,"onTransitionEnd");vo("onMouseEnter",["mouseout","mouseover"]);vo("onMouseLeave",["mouseout","mouseover"]);vo("onPointerEnter",["pointerout","pointerover"]);vo("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function s0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,gT(r,e,void 0,t),t.currentTarget=null}function yb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;s0(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;s0(s,a,c),i=l}}}if(au)throw t=ap,au=!1,ap=null,t}function Re(t,e){var n=e[yp];n===void 0&&(n=e[yp]=new Set);var r=t+"__bubble";n.has(r)||(vb(e,t,2,!1),n.add(r))}function Hh(t,e,n){var r=0;e&&(r|=4),vb(n,t,r,e)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Ya(t){if(!t[tc]){t[tc]=!0,Cw.forEach(function(n){n!=="selectionchange"&&(vN.has(n)||Hh(n,!1,t),Hh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[tc]||(e[tc]=!0,Hh("selectionchange",!1,e))}}function vb(t,e,n,r){switch(tb(e)){case 1:var s=MT;break;case 4:s=OT;break;default:s=Jm}n=s.bind(null,e,n,t),s=void 0,!op||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ys(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Uw(function(){var c=i,u=Vm(n),d=[];e:{var f=gb.get(t);if(f!==void 0){var p=Ym,m=t;switch(t){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":p=JT;break;case"focusin":m="focus",p=Lh;break;case"focusout":m="blur",p=Lh;break;case"beforeblur":case"afterblur":p=Lh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=DT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=QT;break;case hb:case fb:case pb:p=zT;break;case mb:p=ZT;break;case"scroll":p=IT;break;case"wheel":p=tN;break;case"copy":case"cut":case"paste":p=UT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Jy}var y=(e&4)!==0,v=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var x=c,w;x!==null;){w=x;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,g!==null&&(k=Va(x,g),k!=null&&y.push(Qa(x,k,w)))),v)break;x=x.return}0<y.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==sp&&(m=n.relatedTarget||n.fromElement)&&(Ys(m)||m[Rr]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Ys(m):null,m!==null&&(v=Ti(m),m!==v||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=Ky,k="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=Jy,k="onPointerLeave",g="onPointerEnter",x="pointer"),v=p==null?f:Qi(p),w=m==null?f:Qi(m),f=new y(k,x+"leave",p,n,u),f.target=v,f.relatedTarget=w,k=null,Ys(u)===c&&(y=new y(g,x+"enter",m,n,u),y.target=w,y.relatedTarget=v,k=y),v=k,p&&m)t:{for(y=p,g=m,x=0,w=y;w;w=Ri(w))x++;for(w=0,k=g;k;k=Ri(k))w++;for(;0<x-w;)y=Ri(y),x--;for(;0<w-x;)g=Ri(g),w--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ri(y),g=Ri(g)}y=null}else y=null;p!==null&&i0(d,f,p,y,!1),m!==null&&v!==null&&i0(d,v,m,y,!0)}}e:{if(f=c?Qi(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var S=lN;else if(Qy(f))if(ab)S=hN;else{S=uN;var C=cN}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=dN);if(S&&(S=S(t,c))){ob(d,S,n,u);break e}C&&C(t,f,c),t==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Zf(f,"number",f.value)}switch(C=c?Qi(c):window,t){case"focusin":(Qy(C)||C.contentEditable==="true")&&(Gi=C,dp=c,ba=null);break;case"focusout":ba=dp=Gi=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,n0(d,n,u);break;case"selectionchange":if(mN)break;case"keydown":case"keyup":n0(d,n,u)}var E;if(Xm)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Ji?sb(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(rb&&n.locale!=="ko"&&(Ji||N!=="onCompositionStart"?N==="onCompositionEnd"&&Ji&&(E=nb()):(ss=u,Gm="value"in ss?ss.value:ss.textContent,Ji=!0)),C=hu(c,N),0<C.length&&(N=new qy(N,t,null,n,u),d.push({event:N,listeners:C}),E?N.data=E:(E=ib(n),E!==null&&(N.data=E)))),(E=rN?sN(t,n):iN(t,n))&&(c=hu(c,"onBeforeInput"),0<c.length&&(u=new qy("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}yb(d,e)})}function Qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Va(t,n),i!=null&&r.unshift(Qa(t,i,s)),i=Va(t,e),i!=null&&r.push(Qa(t,i,s))),t=t.return}return r}function Ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function i0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Va(n,i),l!=null&&o.unshift(Qa(n,l,a))):s||(l=Va(n,i),l!=null&&o.push(Qa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xN=/\r\n?/g,wN=/\u0000|\uFFFD/g;function o0(t){return(typeof t=="string"?t:""+t).replace(xN,`
`).replace(wN,"")}function nc(t,e,n){if(e=o0(e),o0(t)!==e&&n)throw Error(z(425))}function fu(){}var fp=null,pp=null;function mp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gp=typeof setTimeout=="function"?setTimeout:void 0,bN=typeof clearTimeout=="function"?clearTimeout:void 0,a0=typeof Promise=="function"?Promise:void 0,kN=typeof queueMicrotask=="function"?queueMicrotask:typeof a0<"u"?function(t){return a0.resolve(null).then(t).catch(SN)}:gp;function SN(t){setTimeout(function(){throw t})}function Wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),qa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);qa(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function l0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Po=Math.random().toString(36).slice(2),ir="__reactFiber$"+Po,Xa="__reactProps$"+Po,Rr="__reactContainer$"+Po,yp="__reactEvents$"+Po,EN="__reactListeners$"+Po,CN="__reactHandles$"+Po;function Ys(t){var e=t[ir];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[ir]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=l0(t);t!==null;){if(n=t[ir])return n;t=l0(t)}return e}t=n,n=t.parentNode}return null}function Ol(t){return t=t[ir]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Dd(t){return t[Xa]||null}var vp=[],Xi=-1;function Ms(t){return{current:t}}function Me(t){0>Xi||(t.current=vp[Xi],vp[Xi]=null,Xi--)}function _e(t,e){Xi++,vp[Xi]=t.current,t.current=e}var Cs={},jt=Ms(Cs),Kt=Ms(!1),pi=Cs;function xo(t,e){var n=t.type.contextTypes;if(!n)return Cs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function qt(t){return t=t.childContextTypes,t!=null}function pu(){Me(Kt),Me(jt)}function c0(t,e,n){if(jt.current!==Cs)throw Error(z(168));_e(jt,e),_e(Kt,n)}function xb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,cT(t)||"Unknown",s));return Ue({},n,r)}function mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cs,pi=jt.current,_e(jt,t),_e(Kt,Kt.current),!0}function u0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=xb(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,Me(Kt),Me(jt),_e(jt,t)):Me(Kt),_e(Kt,n)}var br=null,Ld=!1,Kh=!1;function wb(t){br===null?br=[t]:br.push(t)}function TN(t){Ld=!0,wb(t)}function Os(){if(!Kh&&br!==null){Kh=!0;var t=0,e=xe;try{var n=br;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Ld=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),Ww(Wm,Os),s}finally{xe=e,Kh=!1}}return null}var Zi=[],eo=0,gu=null,yu=0,wn=[],bn=0,mi=null,kr=1,Sr="";function Vs(t,e){Zi[eo++]=yu,Zi[eo++]=gu,gu=t,yu=e}function bb(t,e,n){wn[bn++]=kr,wn[bn++]=Sr,wn[bn++]=mi,mi=t;var r=kr;t=Sr;var s=32-Vn(r)-1;r&=~(1<<s),n+=1;var i=32-Vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,kr=1<<32-Vn(e)+s|n<<s|r,Sr=i+t}else kr=1<<i|n<<s|r,Sr=t}function eg(t){t.return!==null&&(Vs(t,1),bb(t,1,0))}function tg(t){for(;t===gu;)gu=Zi[--eo],Zi[eo]=null,yu=Zi[--eo],Zi[eo]=null;for(;t===mi;)mi=wn[--bn],wn[bn]=null,Sr=wn[--bn],wn[bn]=null,kr=wn[--bn],wn[bn]=null}var ln=null,an=null,Oe=!1,Un=null;function kb(t,e){var n=Sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function d0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,an=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,an=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=mi!==null?{id:kr,overflow:Sr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,an=null,!0):!1;default:return!1}}function xp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wp(t){if(Oe){var e=an;if(e){var n=e;if(!d0(t,e)){if(xp(t))throw Error(z(418));e=ms(n.nextSibling);var r=ln;e&&d0(t,e)?kb(r,n):(t.flags=t.flags&-4097|2,Oe=!1,ln=t)}}else{if(xp(t))throw Error(z(418));t.flags=t.flags&-4097|2,Oe=!1,ln=t}}}function h0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function rc(t){if(t!==ln)return!1;if(!Oe)return h0(t),Oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!mp(t.type,t.memoizedProps)),e&&(e=an)){if(xp(t))throw Sb(),Error(z(418));for(;e;)kb(t,e),e=ms(e.nextSibling)}if(h0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){an=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}an=null}}else an=ln?ms(t.stateNode.nextSibling):null;return!0}function Sb(){for(var t=an;t;)t=ms(t.nextSibling)}function wo(){an=ln=null,Oe=!1}function ng(t){Un===null?Un=[t]:Un.push(t)}var NN=Ir.ReactCurrentBatchConfig;function Xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function sc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function f0(t){var e=t._init;return e(t._payload)}function Eb(t){function e(g,x){if(t){var w=g.deletions;w===null?(g.deletions=[x],g.flags|=16):w.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function s(g,x){return g=xs(g,x),g.index=0,g.sibling=null,g}function i(g,x,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<x?(g.flags|=2,x):w):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,x,w,k){return x===null||x.tag!==6?(x=Zh(w,g.mode,k),x.return=g,x):(x=s(x,w),x.return=g,x)}function l(g,x,w,k){var S=w.type;return S===qi?u(g,x,w.props.children,k,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&f0(S)===x.type)?(k=s(x,w.props),k.ref=Xo(g,x,w),k.return=g,k):(k=Kc(w.type,w.key,w.props,null,g.mode,k),k.ref=Xo(g,x,w),k.return=g,k)}function c(g,x,w,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=ef(w,g.mode,k),x.return=g,x):(x=s(x,w.children||[]),x.return=g,x)}function u(g,x,w,k,S){return x===null||x.tag!==7?(x=ai(w,g.mode,k,S),x.return=g,x):(x=s(x,w),x.return=g,x)}function d(g,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Zh(""+x,g.mode,w),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ql:return w=Kc(x.type,x.key,x.props,null,g.mode,w),w.ref=Xo(g,null,x),w.return=g,w;case Ki:return x=ef(x,g.mode,w),x.return=g,x;case Kr:var k=x._init;return d(g,k(x._payload),w)}if(la(x)||qo(x))return x=ai(x,g.mode,w,null),x.return=g,x;sc(g,x)}return null}function f(g,x,w,k){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:a(g,x,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ql:return w.key===S?l(g,x,w,k):null;case Ki:return w.key===S?c(g,x,w,k):null;case Kr:return S=w._init,f(g,x,S(w._payload),k)}if(la(w)||qo(w))return S!==null?null:u(g,x,w,k,null);sc(g,w)}return null}function p(g,x,w,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(w)||null,a(x,g,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ql:return g=g.get(k.key===null?w:k.key)||null,l(x,g,k,S);case Ki:return g=g.get(k.key===null?w:k.key)||null,c(x,g,k,S);case Kr:var C=k._init;return p(g,x,w,C(k._payload),S)}if(la(k)||qo(k))return g=g.get(w)||null,u(x,g,k,S,null);sc(x,k)}return null}function m(g,x,w,k){for(var S=null,C=null,E=x,N=x=0,A=null;E!==null&&N<w.length;N++){E.index>N?(A=E,E=null):A=E.sibling;var P=f(g,E,w[N],k);if(P===null){E===null&&(E=A);break}t&&E&&P.alternate===null&&e(g,E),x=i(P,x,N),C===null?S=P:C.sibling=P,C=P,E=A}if(N===w.length)return n(g,E),Oe&&Vs(g,N),S;if(E===null){for(;N<w.length;N++)E=d(g,w[N],k),E!==null&&(x=i(E,x,N),C===null?S=E:C.sibling=E,C=E);return Oe&&Vs(g,N),S}for(E=r(g,E);N<w.length;N++)A=p(E,g,N,w[N],k),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?N:A.key),x=i(A,x,N),C===null?S=A:C.sibling=A,C=A);return t&&E.forEach(function(R){return e(g,R)}),Oe&&Vs(g,N),S}function y(g,x,w,k){var S=qo(w);if(typeof S!="function")throw Error(z(150));if(w=S.call(w),w==null)throw Error(z(151));for(var C=S=null,E=x,N=x=0,A=null,P=w.next();E!==null&&!P.done;N++,P=w.next()){E.index>N?(A=E,E=null):A=E.sibling;var R=f(g,E,P.value,k);if(R===null){E===null&&(E=A);break}t&&E&&R.alternate===null&&e(g,E),x=i(R,x,N),C===null?S=R:C.sibling=R,C=R,E=A}if(P.done)return n(g,E),Oe&&Vs(g,N),S;if(E===null){for(;!P.done;N++,P=w.next())P=d(g,P.value,k),P!==null&&(x=i(P,x,N),C===null?S=P:C.sibling=P,C=P);return Oe&&Vs(g,N),S}for(E=r(g,E);!P.done;N++,P=w.next())P=p(E,g,N,P.value,k),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?N:P.key),x=i(P,x,N),C===null?S=P:C.sibling=P,C=P);return t&&E.forEach(function(_){return e(g,_)}),Oe&&Vs(g,N),S}function v(g,x,w,k){if(typeof w=="object"&&w!==null&&w.type===qi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ql:e:{for(var S=w.key,C=x;C!==null;){if(C.key===S){if(S=w.type,S===qi){if(C.tag===7){n(g,C.sibling),x=s(C,w.props.children),x.return=g,g=x;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Kr&&f0(S)===C.type){n(g,C.sibling),x=s(C,w.props),x.ref=Xo(g,C,w),x.return=g,g=x;break e}n(g,C);break}else e(g,C);C=C.sibling}w.type===qi?(x=ai(w.props.children,g.mode,k,w.key),x.return=g,g=x):(k=Kc(w.type,w.key,w.props,null,g.mode,k),k.ref=Xo(g,x,w),k.return=g,g=k)}return o(g);case Ki:e:{for(C=w.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(g,x.sibling),x=s(x,w.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=ef(w,g.mode,k),x.return=g,g=x}return o(g);case Kr:return C=w._init,v(g,x,C(w._payload),k)}if(la(w))return m(g,x,w,k);if(qo(w))return y(g,x,w,k);sc(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(g,x.sibling),x=s(x,w),x.return=g,g=x):(n(g,x),x=Zh(w,g.mode,k),x.return=g,g=x),o(g)):n(g,x)}return v}var bo=Eb(!0),Cb=Eb(!1),vu=Ms(null),xu=null,to=null,rg=null;function sg(){rg=to=xu=null}function ig(t){var e=vu.current;Me(vu),t._currentValue=e}function bp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uo(t,e){xu=t,rg=to=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wt=!0),t.firstContext=null)}function Nn(t){var e=t._currentValue;if(rg!==t)if(t={context:t,memoizedValue:e,next:null},to===null){if(xu===null)throw Error(z(308));to=t,xu.dependencies={lanes:0,firstContext:t}}else to=to.next=t;return e}var Qs=null;function og(t){Qs===null?Qs=[t]:Qs.push(t)}function Tb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,og(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ar(t,r)}function Ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function ag(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ar(t,n)}return s=r.interleaved,s===null?(e.next=e,og(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ar(t,n)}function Bc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Km(t,n)}}function p0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wu(t,e,n,r){var s=t.updateQueue;qr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(f=e,p=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Ue({},d,f);break e;case 2:qr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);yi|=o,t.lanes=o,t.memoizedState=d}}function m0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Il={},ar=Ms(Il),Za=Ms(Il),el=Ms(Il);function Xs(t){if(t===Il)throw Error(z(174));return t}function lg(t,e){switch(_e(el,e),_e(Za,t),_e(ar,Il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tp(e,t)}Me(ar),_e(ar,e)}function ko(){Me(ar),Me(Za),Me(el)}function _b(t){Xs(el.current);var e=Xs(ar.current),n=tp(e,t.type);e!==n&&(_e(Za,t),_e(ar,n))}function cg(t){Za.current===t&&(Me(ar),Me(Za))}var Le=Ms(0);function bu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qh=[];function ug(){for(var t=0;t<qh.length;t++)qh[t]._workInProgressVersionPrimary=null;qh.length=0}var Uc=Ir.ReactCurrentDispatcher,Jh=Ir.ReactCurrentBatchConfig,gi=0,ze=null,nt=null,ot=null,ku=!1,ka=!1,tl=0,_N=0;function Ct(){throw Error(z(321))}function dg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qn(t[n],e[n]))return!1;return!0}function hg(t,e,n,r,s,i){if(gi=i,ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uc.current=t===null||t.memoizedState===null?MN:ON,t=n(r,s),ka){i=0;do{if(ka=!1,tl=0,25<=i)throw Error(z(301));i+=1,ot=nt=null,e.updateQueue=null,Uc.current=IN,t=n(r,s)}while(ka)}if(Uc.current=Su,e=nt!==null&&nt.next!==null,gi=0,ot=nt=ze=null,ku=!1,e)throw Error(z(300));return t}function fg(){var t=tl!==0;return tl=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?ze.memoizedState=ot=t:ot=ot.next=t,ot}function _n(){if(nt===null){var t=ze.alternate;t=t!==null?t.memoizedState:null}else t=nt.next;var e=ot===null?ze.memoizedState:ot.next;if(e!==null)ot=e,nt=t;else{if(t===null)throw Error(z(310));nt=t,t={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?ze.memoizedState=ot=t:ot=ot.next=t}return ot}function nl(t,e){return typeof e=="function"?e(t):e}function Gh(t){var e=_n(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((gi&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ze.lanes|=u,yi|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,qn(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,ze.lanes|=i,yi|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yh(t){var e=_n(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);qn(i,e.memoizedState)||(Wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jb(){}function Rb(t,e){var n=ze,r=_n(),s=e(),i=!qn(r.memoizedState,s);if(i&&(r.memoizedState=s,Wt=!0),r=r.queue,pg(Ob.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ot!==null&&ot.memoizedState.tag&1){if(n.flags|=2048,rl(9,Mb.bind(null,n,r,s,e),void 0,null),ut===null)throw Error(z(349));gi&30||Ab(n,e,s)}return s}function Ab(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mb(t,e,n,r){e.value=n,e.getSnapshot=r,Ib(e)&&Pb(t)}function Ob(t,e,n){return n(function(){Ib(e)&&Pb(t)})}function Ib(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qn(t,n)}catch{return!0}}function Pb(t){var e=Ar(t,1);e!==null&&Wn(e,t,1,-1)}function g0(t){var e=tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:t},e.queue=t,t=t.dispatch=AN.bind(null,ze,t),[e.memoizedState,t]}function rl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ze.updateQueue,e===null?(e={lastEffect:null,stores:null},ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Db(){return _n().memoizedState}function Fc(t,e,n,r){var s=tr();ze.flags|=t,s.memoizedState=rl(1|e,n,void 0,r===void 0?null:r)}function $d(t,e,n,r){var s=_n();r=r===void 0?null:r;var i=void 0;if(nt!==null){var o=nt.memoizedState;if(i=o.destroy,r!==null&&dg(r,o.deps)){s.memoizedState=rl(e,n,i,r);return}}ze.flags|=t,s.memoizedState=rl(1|e,n,i,r)}function y0(t,e){return Fc(8390656,8,t,e)}function pg(t,e){return $d(2048,8,t,e)}function Lb(t,e){return $d(4,2,t,e)}function $b(t,e){return $d(4,4,t,e)}function zb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bb(t,e,n){return n=n!=null?n.concat([t]):null,$d(4,4,zb.bind(null,e,t),n)}function mg(){}function Ub(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Fb(t,e){var n=_n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hb(t,e,n){return gi&21?(qn(n,e)||(n=Jw(),ze.lanes|=n,yi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wt=!0),t.memoizedState=n)}function jN(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Jh.transition;Jh.transition={};try{t(!1),e()}finally{xe=n,Jh.transition=r}}function Vb(){return _n().memoizedState}function RN(t,e,n){var r=vs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wb(t))Kb(e,n);else if(n=Tb(t,e,n,r),n!==null){var s=Dt();Wn(n,t,r,s),qb(n,e,r)}}function AN(t,e,n){var r=vs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wb(t))Kb(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,qn(a,o)){var l=e.interleaved;l===null?(s.next=s,og(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Tb(t,e,s,r),n!==null&&(s=Dt(),Wn(n,t,r,s),qb(n,e,r))}}function Wb(t){var e=t.alternate;return t===ze||e!==null&&e===ze}function Kb(t,e){ka=ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Km(t,n)}}var Su={readContext:Nn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},MN={readContext:Nn,useCallback:function(t,e){return tr().memoizedState=[t,e===void 0?null:e],t},useContext:Nn,useEffect:y0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Fc(4194308,4,zb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Fc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Fc(4,2,t,e)},useMemo:function(t,e){var n=tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=RN.bind(null,ze,t),[r.memoizedState,t]},useRef:function(t){var e=tr();return t={current:t},e.memoizedState=t},useState:g0,useDebugValue:mg,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=g0(!1),e=t[0];return t=jN.bind(null,t[1]),tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ze,s=tr();if(Oe){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ut===null)throw Error(z(349));gi&30||Ab(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,y0(Ob.bind(null,r,i,t),[t]),r.flags|=2048,rl(9,Mb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=tr(),e=ut.identifierPrefix;if(Oe){var n=Sr,r=kr;n=(r&~(1<<32-Vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_N++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ON={readContext:Nn,useCallback:Ub,useContext:Nn,useEffect:pg,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:$b,useMemo:Fb,useReducer:Gh,useRef:Db,useState:function(){return Gh(nl)},useDebugValue:mg,useDeferredValue:function(t){var e=_n();return Hb(e,nt.memoizedState,t)},useTransition:function(){var t=Gh(nl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:jb,useSyncExternalStore:Rb,useId:Vb,unstable_isNewReconciler:!1},IN={readContext:Nn,useCallback:Ub,useContext:Nn,useEffect:pg,useImperativeHandle:Bb,useInsertionEffect:Lb,useLayoutEffect:$b,useMemo:Fb,useReducer:Yh,useRef:Db,useState:function(){return Yh(nl)},useDebugValue:mg,useDeferredValue:function(t){var e=_n();return nt===null?e.memoizedState=t:Hb(e,nt.memoizedState,t)},useTransition:function(){var t=Yh(nl)[0],e=_n().memoizedState;return[t,e]},useMutableSource:jb,useSyncExternalStore:Rb,useId:Vb,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zd={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=vs(t),i=Cr(r,s);i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Wn(e,t,s,r),Bc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),s=vs(t),i=Cr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=gs(t,i,s),e!==null&&(Wn(e,t,s,r),Bc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=vs(t),s=Cr(n,r);s.tag=2,e!=null&&(s.callback=e),e=gs(t,s,r),e!==null&&(Wn(e,t,r,n),Bc(e,t,r))}};function v0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ga(n,r)||!Ga(s,i):!0}function Jb(t,e,n){var r=!1,s=Cs,i=e.contextType;return typeof i=="object"&&i!==null?i=Nn(i):(s=qt(e)?pi:jt.current,r=e.contextTypes,i=(r=r!=null)?xo(t,s):Cs),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function x0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zd.enqueueReplaceState(e,e.state,null)}function Sp(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ag(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nn(i):(i=qt(e)?pi:jt.current,s.context=xo(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(kp(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zd.enqueueReplaceState(s,s.state,null),wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function So(t,e){try{var n="",r=e;do n+=lT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Qh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ep(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PN=typeof WeakMap=="function"?WeakMap:Map;function Gb(t,e,n){n=Cr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cu||(Cu=!0,Ip=r),Ep(t,e)},n}function Yb(t,e,n){n=Cr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ep(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ep(t,e),typeof r!="function"&&(ys===null?ys=new Set([this]):ys.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=GN.bind(null,t,e,n),e.then(t,t))}function b0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cr(-1,1),e.tag=2,gs(n,e,1))),n.lanes|=1),t)}var DN=Ir.ReactCurrentOwner,Wt=!1;function It(t,e,n,r){e.child=t===null?Cb(e,null,n,r):bo(e,t.child,n,r)}function S0(t,e,n,r,s){n=n.render;var i=e.ref;return uo(e,s),r=hg(t,e,n,r,i,s),n=fg(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Oe&&n&&eg(e),e.flags|=1,It(t,e,r,s),e.child)}function E0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sg(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Qb(t,e,i,r,s)):(t=Kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ga,n(o,r)&&t.ref===e.ref)return Mr(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function Qb(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ga(i,r)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,Mr(t,e,s)}return Cp(t,e,n,r,s)}function Xb(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(ro,rn),rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(ro,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(ro,rn),rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(ro,rn),rn|=r;return It(t,e,s,n),e.child}function Zb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Cp(t,e,n,r,s){var i=qt(n)?pi:jt.current;return i=xo(e,i),uo(e,s),n=hg(t,e,n,r,i,s),r=fg(),t!==null&&!Wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mr(t,e,s)):(Oe&&r&&eg(e),e.flags|=1,It(t,e,n,s),e.child)}function C0(t,e,n,r,s){if(qt(n)){var i=!0;mu(e)}else i=!1;if(uo(e,s),e.stateNode===null)Hc(t,e),Jb(e,n,r),Sp(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Nn(c):(c=qt(n)?pi:jt.current,c=xo(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&x0(e,o,r,c),qr=!1;var f=e.memoizedState;o.state=f,wu(e,r,o,s),l=e.memoizedState,a!==r||f!==l||Kt.current||qr?(typeof u=="function"&&(kp(e,n,u,r),l=e.memoizedState),(a=qr||v0(e,n,a,r,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Nb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ln(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Nn(l):(l=qt(n)?pi:jt.current,l=xo(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&x0(e,o,r,l),qr=!1,f=e.memoizedState,o.state=f,wu(e,r,o,s);var m=e.memoizedState;a!==d||f!==m||Kt.current||qr?(typeof p=="function"&&(kp(e,n,p,r),m=e.memoizedState),(c=qr||v0(e,n,c,r,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Tp(t,e,n,r,i,s)}function Tp(t,e,n,r,s,i){Zb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&u0(e,n,!1),Mr(t,e,i);r=e.stateNode,DN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=bo(e,t.child,null,i),e.child=bo(e,null,a,i)):It(t,e,a,i),e.memoizedState=r.state,s&&u0(e,n,!0),e.child}function e1(t){var e=t.stateNode;e.pendingContext?c0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&c0(t,e.context,!1),lg(t,e.containerInfo)}function T0(t,e,n,r,s){return wo(),ng(s),e.flags|=256,It(t,e,n,r),e.child}var Np={dehydrated:null,treeContext:null,retryLane:0};function _p(t){return{baseLanes:t,cachePool:null,transitions:null}}function t1(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Le,s&1),t===null)return wp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Fd(o,r,0,null),t=ai(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_p(n),e.memoizedState=Np,t):gg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return LN(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xs(a,i):(i=ai(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_p(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Np,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gg(t,e){return e=Fd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ic(t,e,n,r){return r!==null&&ng(r),bo(e,t.child,null,n),t=gg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Qh(Error(z(422))),ic(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Fd({mode:"visible",children:r.children},s,0,null),i=ai(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&bo(e,t.child,null,o),e.child.memoizedState=_p(o),e.memoizedState=Np,i);if(!(e.mode&1))return ic(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(z(419)),r=Qh(i,r,void 0),ic(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wt||a){if(r=ut,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ar(t,s),Wn(r,t,s,-1))}return kg(),r=Qh(Error(z(421))),ic(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=YN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,an=ms(s.nextSibling),ln=e,Oe=!0,Un=null,t!==null&&(wn[bn++]=kr,wn[bn++]=Sr,wn[bn++]=mi,kr=t.id,Sr=t.overflow,mi=e),e=gg(e,r.children),e.flags|=4096,e)}function N0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bp(t.return,e,n)}function Xh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function n1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(It(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,n,e);else if(t.tag===19)N0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&bu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Xh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&bu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Xh(e,!0,n,null,i);break;case"together":Xh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $N(t,e,n){switch(e.tag){case 3:e1(e),wo();break;case 5:_b(e);break;case 1:qt(e.type)&&mu(e);break;case 4:lg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(vu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?t1(t,e,n):(_e(Le,Le.current&1),t=Mr(t,e,n),t!==null?t.sibling:null);_e(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return n1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,Xb(t,e,n)}return Mr(t,e,n)}var r1,jp,s1,i1;r1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jp=function(){};s1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Xs(ar.current);var i=null;switch(n){case"input":s=Qf(t,s),r=Qf(t,r),i=[];break;case"select":s=Ue({},s,{value:void 0}),r=Ue({},r,{value:void 0}),i=[];break;case"textarea":s=ep(t,s),r=ep(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fu)}np(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fa.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fa.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Re("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};i1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Zo(t,e){if(!Oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zN(t,e,n){var r=e.pendingProps;switch(tg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return qt(e.type)&&pu(),Tt(e),null;case 3:return r=e.stateNode,ko(),Me(Kt),Me(jt),ug(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(Lp(Un),Un=null))),jp(t,e),Tt(e),null;case 5:cg(e);var s=Xs(el.current);if(n=e.type,t!==null&&e.stateNode!=null)s1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Tt(e),null}if(t=Xs(ar.current),rc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ir]=e,r[Xa]=i,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<ua.length;s++)Re(ua[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Dy(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":$y(r,i),Re("invalid",r)}np(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&nc(r.textContent,a,t),s=["children",""+a]):Fa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":Jl(r),Ly(r,i,!0);break;case"textarea":Jl(r),zy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ow(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ir]=e,t[Xa]=r,r1(t,e,!1,!1),e.stateNode=t;e:{switch(o=rp(n,r),n){case"dialog":Re("cancel",t),Re("close",t),s=r;break;case"iframe":case"object":case"embed":Re("load",t),s=r;break;case"video":case"audio":for(s=0;s<ua.length;s++)Re(ua[s],t);s=r;break;case"source":Re("error",t),s=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),s=r;break;case"details":Re("toggle",t),s=r;break;case"input":Dy(t,r),s=Qf(t,r),Re("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ue({},r,{value:void 0}),Re("invalid",t);break;case"textarea":$y(t,r),s=ep(t,r),Re("invalid",t);break;default:s=r}np(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Dw(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Iw(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ha(t,l):typeof l=="number"&&Ha(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fa.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Re("scroll",t):l!=null&&Bm(t,i,l,o))}switch(n){case"input":Jl(t),Ly(t,r,!1);break;case"textarea":Jl(t),zy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Es(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Tt(e),null;case 6:if(t&&e.stateNode!=null)i1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Xs(el.current),Xs(ar.current),rc(e)){if(r=e.stateNode,n=e.memoizedProps,r[ir]=e,(i=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:nc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ir]=e,e.stateNode=r}return Tt(e),null;case 13:if(Me(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oe&&an!==null&&e.mode&1&&!(e.flags&128))Sb(),wo(),e.flags|=98560,i=!1;else if(i=rc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[ir]=e}else wo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),i=!1}else Un!==null&&(Lp(Un),Un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?st===0&&(st=3):kg())),e.updateQueue!==null&&(e.flags|=4),Tt(e),null);case 4:return ko(),jp(t,e),t===null&&Ya(e.stateNode.containerInfo),Tt(e),null;case 10:return ig(e.type._context),Tt(e),null;case 17:return qt(e.type)&&pu(),Tt(e),null;case 19:if(Me(Le),i=e.memoizedState,i===null)return Tt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Zo(i,!1);else{if(st!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bu(t),o!==null){for(e.flags|=128,Zo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>Eo&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304)}else{if(!r)if(t=bu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Zo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Oe)return Tt(e),null}else 2*Je()-i.renderingStartTime>Eo&&n!==1073741824&&(e.flags|=128,r=!0,Zo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Le.current,_e(Le,r?n&1|2:n&1),e):(Tt(e),null);case 22:case 23:return bg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function BN(t,e){switch(tg(e),e.tag){case 1:return qt(e.type)&&pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ko(),Me(Kt),Me(jt),ug(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cg(e),null;case 13:if(Me(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));wo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Me(Le),null;case 4:return ko(),null;case 10:return ig(e.type._context),null;case 22:case 23:return bg(),null;case 24:return null;default:return null}}var oc=!1,_t=!1,UN=typeof WeakSet=="function"?WeakSet:Set,V=null;function no(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ke(t,e,r)}else n.current=null}function Rp(t,e,n){try{n()}catch(r){Ke(t,e,r)}}var _0=!1;function FN(t,e){if(fp=uu,t=ub(),Zm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===s&&(a=o),f===i&&++u===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pp={focusedElem:t,selectionRange:n},uu=!1,V=e;V!==null;)if(e=V,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,V=t;else for(;V!==null;){e=V;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,v=m.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ln(e.type,y),v);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){Ke(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,V=t;break}V=e.return}return m=_0,_0=!1,m}function Sa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rp(e,n,i)}s=s.next}while(s!==r)}}function Bd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ap(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o1(t){var e=t.alternate;e!==null&&(t.alternate=null,o1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ir],delete e[Xa],delete e[yp],delete e[EN],delete e[CN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a1(t){return t.tag===5||t.tag===3||t.tag===4}function j0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mp(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fu));else if(r!==4&&(t=t.child,t!==null))for(Mp(t,e,n),t=t.sibling;t!==null;)Mp(t,e,n),t=t.sibling}function Op(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Op(t,e,n),t=t.sibling;t!==null;)Op(t,e,n),t=t.sibling}var mt=null,zn=!1;function Fr(t,e,n){for(n=n.child;n!==null;)l1(t,e,n),n=n.sibling}function l1(t,e,n){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Md,n)}catch{}switch(n.tag){case 5:_t||no(n,e);case 6:var r=mt,s=zn;mt=null,Fr(t,e,n),mt=r,zn=s,mt!==null&&(zn?(t=mt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):mt.removeChild(n.stateNode));break;case 18:mt!==null&&(zn?(t=mt,n=n.stateNode,t.nodeType===8?Wh(t.parentNode,n):t.nodeType===1&&Wh(t,n),qa(t)):Wh(mt,n.stateNode));break;case 4:r=mt,s=zn,mt=n.stateNode.containerInfo,zn=!0,Fr(t,e,n),mt=r,zn=s;break;case 0:case 11:case 14:case 15:if(!_t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rp(n,e,o),s=s.next}while(s!==r)}Fr(t,e,n);break;case 1:if(!_t&&(no(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ke(n,e,a)}Fr(t,e,n);break;case 21:Fr(t,e,n);break;case 22:n.mode&1?(_t=(r=_t)||n.memoizedState!==null,Fr(t,e,n),_t=r):Fr(t,e,n);break;default:Fr(t,e,n)}}function R0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UN),e.forEach(function(r){var s=QN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,zn=!1;break e;case 3:mt=a.stateNode.containerInfo,zn=!0;break e;case 4:mt=a.stateNode.containerInfo,zn=!0;break e}a=a.return}if(mt===null)throw Error(z(160));l1(i,o,s),mt=null,zn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Ke(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)c1(e,t),e=e.sibling}function c1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),er(t),r&4){try{Sa(3,t,t.return),Bd(3,t)}catch(y){Ke(t,t.return,y)}try{Sa(5,t,t.return)}catch(y){Ke(t,t.return,y)}}break;case 1:In(e,t),er(t),r&512&&n!==null&&no(n,n.return);break;case 5:if(In(e,t),er(t),r&512&&n!==null&&no(n,n.return),t.flags&32){var s=t.stateNode;try{Ha(s,"")}catch(y){Ke(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Aw(s,i),rp(a,o);var c=rp(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?Dw(s,d):u==="dangerouslySetInnerHTML"?Iw(s,d):u==="children"?Ha(s,d):Bm(s,u,d,c)}switch(a){case"input":Xf(s,i);break;case"textarea":Mw(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?oo(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?oo(s,!!i.multiple,i.defaultValue,!0):oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Xa]=i}catch(y){Ke(t,t.return,y)}}break;case 6:if(In(e,t),er(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Ke(t,t.return,y)}}break;case 3:if(In(e,t),er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{qa(e.containerInfo)}catch(y){Ke(t,t.return,y)}break;case 4:In(e,t),er(t);break;case 13:In(e,t),er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xg=Je())),r&4&&R0(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(_t=(c=_t)||u,In(e,t),_t=c):In(e,t),er(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(V=t,u=t.child;u!==null;){for(d=V=u;V!==null;){switch(f=V,p=f.child,f.tag){case 0:case 11:case 14:case 15:Sa(4,f,f.return);break;case 1:no(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Ke(r,n,y)}}break;case 5:no(f,f.return);break;case 22:if(f.memoizedState!==null){M0(d);continue}}p!==null?(p.return=f,V=p):M0(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Pw("display",o))}catch(y){Ke(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Ke(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:In(e,t),er(t),r&4&&R0(t);break;case 21:break;default:In(e,t),er(t)}}function er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a1(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ha(s,""),r.flags&=-33);var i=j0(t);Op(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=j0(t);Mp(t,a,o);break;default:throw Error(z(161))}}catch(l){Ke(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HN(t,e,n){V=t,u1(t)}function u1(t,e,n){for(var r=(t.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||oc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||_t;a=oc;var c=_t;if(oc=o,(_t=l)&&!c)for(V=s;V!==null;)o=V,l=o.child,o.tag===22&&o.memoizedState!==null?O0(s):l!==null?(l.return=o,V=l):O0(s);for(;i!==null;)V=i,u1(i),i=i.sibling;V=s,oc=a,_t=c}A0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):A0(t)}}function A0(t){for(;V!==null;){var e=V;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_t||Bd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!_t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&m0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}m0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&qa(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}_t||e.flags&512&&Ap(e)}catch(f){Ke(e,e.return,f)}}if(e===t){V=null;break}if(n=e.sibling,n!==null){n.return=e.return,V=n;break}V=e.return}}function M0(t){for(;V!==null;){var e=V;if(e===t){V=null;break}var n=e.sibling;if(n!==null){n.return=e.return,V=n;break}V=e.return}}function O0(t){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bd(4,e)}catch(l){Ke(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Ke(e,s,l)}}var i=e.return;try{Ap(e)}catch(l){Ke(e,i,l)}break;case 5:var o=e.return;try{Ap(e)}catch(l){Ke(e,o,l)}}}catch(l){Ke(e,e.return,l)}if(e===t){V=null;break}var a=e.sibling;if(a!==null){a.return=e.return,V=a;break}V=e.return}}var VN=Math.ceil,Eu=Ir.ReactCurrentDispatcher,yg=Ir.ReactCurrentOwner,En=Ir.ReactCurrentBatchConfig,ge=0,ut=null,Qe=null,bt=0,rn=0,ro=Ms(0),st=0,sl=null,yi=0,Ud=0,vg=0,Ea=null,Ht=null,xg=0,Eo=1/0,vr=null,Cu=!1,Ip=null,ys=null,ac=!1,is=null,Tu=0,Ca=0,Pp=null,Vc=-1,Wc=0;function Dt(){return ge&6?Je():Vc!==-1?Vc:Vc=Je()}function vs(t){return t.mode&1?ge&2&&bt!==0?bt&-bt:NN.transition!==null?(Wc===0&&(Wc=Jw()),Wc):(t=xe,t!==0||(t=window.event,t=t===void 0?16:tb(t.type)),t):1}function Wn(t,e,n,r){if(50<Ca)throw Ca=0,Pp=null,Error(z(185));Al(t,n,r),(!(ge&2)||t!==ut)&&(t===ut&&(!(ge&2)&&(Ud|=n),st===4&&es(t,bt)),Jt(t,r),n===1&&ge===0&&!(e.mode&1)&&(Eo=Je()+500,Ld&&Os()))}function Jt(t,e){var n=t.callbackNode;NT(t,e);var r=cu(t,t===ut?bt:0);if(r===0)n!==null&&Fy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Fy(n),e===1)t.tag===0?TN(I0.bind(null,t)):wb(I0.bind(null,t)),kN(function(){!(ge&6)&&Os()}),n=null;else{switch(Gw(r)){case 1:n=Wm;break;case 4:n=Kw;break;case 16:n=lu;break;case 536870912:n=qw;break;default:n=lu}n=v1(n,d1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d1(t,e){if(Vc=-1,Wc=0,ge&6)throw Error(z(327));var n=t.callbackNode;if(ho()&&t.callbackNode!==n)return null;var r=cu(t,t===ut?bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nu(t,r);else{e=r;var s=ge;ge|=2;var i=f1();(ut!==t||bt!==e)&&(vr=null,Eo=Je()+500,oi(t,e));do try{qN();break}catch(a){h1(t,a)}while(!0);sg(),Eu.current=i,ge=s,Qe!==null?e=0:(ut=null,bt=0,e=st)}if(e!==0){if(e===2&&(s=lp(t),s!==0&&(r=s,e=Dp(t,s))),e===1)throw n=sl,oi(t,0),es(t,r),Jt(t,Je()),n;if(e===6)es(t,r);else{if(s=t.current.alternate,!(r&30)&&!WN(s)&&(e=Nu(t,r),e===2&&(i=lp(t),i!==0&&(r=i,e=Dp(t,i))),e===1))throw n=sl,oi(t,0),es(t,r),Jt(t,Je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Ws(t,Ht,vr);break;case 3:if(es(t,r),(r&130023424)===r&&(e=xg+500-Je(),10<e)){if(cu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gp(Ws.bind(null,t,Ht,vr),e);break}Ws(t,Ht,vr);break;case 4:if(es(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VN(r/1960))-r,10<r){t.timeoutHandle=gp(Ws.bind(null,t,Ht,vr),r);break}Ws(t,Ht,vr);break;case 5:Ws(t,Ht,vr);break;default:throw Error(z(329))}}}return Jt(t,Je()),t.callbackNode===n?d1.bind(null,t):null}function Dp(t,e){var n=Ea;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Nu(t,e),t!==2&&(e=Ht,Ht=n,e!==null&&Lp(e)),t}function Lp(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function WN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!qn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function es(t,e){for(e&=~vg,e&=~Ud,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vn(e),r=1<<n;t[n]=-1,e&=~r}}function I0(t){if(ge&6)throw Error(z(327));ho();var e=cu(t,0);if(!(e&1))return Jt(t,Je()),null;var n=Nu(t,e);if(t.tag!==0&&n===2){var r=lp(t);r!==0&&(e=r,n=Dp(t,r))}if(n===1)throw n=sl,oi(t,0),es(t,e),Jt(t,Je()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,Ht,vr),Jt(t,Je()),null}function wg(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(Eo=Je()+500,Ld&&Os())}}function vi(t){is!==null&&is.tag===0&&!(ge&6)&&ho();var e=ge;ge|=1;var n=En.transition,r=xe;try{if(En.transition=null,xe=1,t)return t()}finally{xe=r,En.transition=n,ge=e,!(ge&6)&&Os()}}function bg(){rn=ro.current,Me(ro)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bN(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(tg(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pu();break;case 3:ko(),Me(Kt),Me(jt),ug();break;case 5:cg(r);break;case 4:ko();break;case 13:Me(Le);break;case 19:Me(Le);break;case 10:ig(r.type._context);break;case 22:case 23:bg()}n=n.return}if(ut=t,Qe=t=xs(t.current,null),bt=rn=e,st=0,sl=null,vg=Ud=yi=0,Ht=Ea=null,Qs!==null){for(e=0;e<Qs.length;e++)if(n=Qs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qs=null}return t}function h1(t,e){do{var n=Qe;try{if(sg(),Uc.current=Su,ku){for(var r=ze.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ku=!1}if(gi=0,ot=nt=ze=null,ka=!1,tl=0,yg.current=null,n===null||n.return===null){st=1,sl=e,Qe=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=bt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=b0(o);if(p!==null){p.flags&=-257,k0(p,o,a,i,e),p.mode&1&&w0(i,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){w0(i,c,e),kg();break e}l=Error(z(426))}}else if(Oe&&a.mode&1){var v=b0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),k0(v,o,a,i,e),ng(So(l,a));break e}}i=l=So(l,a),st!==4&&(st=2),Ea===null?Ea=[i]:Ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Gb(i,l,e);p0(i,g);break e;case 1:a=l;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ys===null||!ys.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Yb(i,a,e);p0(i,k);break e}}i=i.return}while(i!==null)}m1(n)}catch(S){e=S,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function f1(){var t=Eu.current;return Eu.current=Su,t===null?Su:t}function kg(){(st===0||st===3||st===2)&&(st=4),ut===null||!(yi&268435455)&&!(Ud&268435455)||es(ut,bt)}function Nu(t,e){var n=ge;ge|=2;var r=f1();(ut!==t||bt!==e)&&(vr=null,oi(t,e));do try{KN();break}catch(s){h1(t,s)}while(!0);if(sg(),ge=n,Eu.current=r,Qe!==null)throw Error(z(261));return ut=null,bt=0,st}function KN(){for(;Qe!==null;)p1(Qe)}function qN(){for(;Qe!==null&&!vT();)p1(Qe)}function p1(t){var e=y1(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?m1(t):Qe=e,yg.current=null}function m1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BN(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{st=6,Qe=null;return}}else if(n=zN(n,e,rn),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);st===0&&(st=5)}function Ws(t,e,n){var r=xe,s=En.transition;try{En.transition=null,xe=1,JN(t,e,n,r)}finally{En.transition=s,xe=r}return null}function JN(t,e,n,r){do ho();while(is!==null);if(ge&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(_T(t,i),t===ut&&(Qe=ut=null,bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ac||(ac=!0,v1(lu,function(){return ho(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=En.transition,En.transition=null;var o=xe;xe=1;var a=ge;ge|=4,yg.current=null,FN(t,n),c1(n,t),pN(pp),uu=!!fp,pp=fp=null,t.current=n,HN(n),xT(),ge=a,xe=o,En.transition=i}else t.current=n;if(ac&&(ac=!1,is=t,Tu=s),i=t.pendingLanes,i===0&&(ys=null),kT(n.stateNode),Jt(t,Je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cu)throw Cu=!1,t=Ip,Ip=null,t;return Tu&1&&t.tag!==0&&ho(),i=t.pendingLanes,i&1?t===Pp?Ca++:(Ca=0,Pp=t):Ca=0,Os(),null}function ho(){if(is!==null){var t=Gw(Tu),e=En.transition,n=xe;try{if(En.transition=null,xe=16>t?16:t,is===null)var r=!1;else{if(t=is,is=null,Tu=0,ge&6)throw Error(z(331));var s=ge;for(ge|=4,V=t.current;V!==null;){var i=V,o=i.child;if(V.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(V=c;V!==null;){var u=V;switch(u.tag){case 0:case 11:case 15:Sa(8,u,i)}var d=u.child;if(d!==null)d.return=u,V=d;else for(;V!==null;){u=V;var f=u.sibling,p=u.return;if(o1(u),u===c){V=null;break}if(f!==null){f.return=p,V=f;break}V=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}V=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,V=o;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Sa(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,V=g;break e}V=i.return}}var x=t.current;for(V=x;V!==null;){o=V;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,V=w;else e:for(o=x;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bd(9,a)}}catch(S){Ke(a,a.return,S)}if(a===o){V=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,V=k;break e}V=a.return}}if(ge=s,Os(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Md,t)}catch{}r=!0}return r}finally{xe=n,En.transition=e}}return!1}function P0(t,e,n){e=So(n,e),e=Gb(t,e,1),t=gs(t,e,1),e=Dt(),t!==null&&(Al(t,1,e),Jt(t,e))}function Ke(t,e,n){if(t.tag===3)P0(t,t,n);else for(;e!==null;){if(e.tag===3){P0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ys===null||!ys.has(r))){t=So(n,t),t=Yb(e,t,1),e=gs(e,t,1),t=Dt(),e!==null&&(Al(e,1,t),Jt(e,t));break}}e=e.return}}function GN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(bt&n)===n&&(st===4||st===3&&(bt&130023424)===bt&&500>Je()-xg?oi(t,0):vg|=n),Jt(t,e)}function g1(t,e){e===0&&(t.mode&1?(e=Ql,Ql<<=1,!(Ql&130023424)&&(Ql=4194304)):e=1);var n=Dt();t=Ar(t,e),t!==null&&(Al(t,e,n),Jt(t,n))}function YN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g1(t,n)}function QN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),g1(t,n)}var y1;y1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wt=!1,$N(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Oe&&e.flags&1048576&&bb(e,yu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hc(t,e),t=e.pendingProps;var s=xo(e,jt.current);uo(e,n),s=hg(null,e,r,t,s,n);var i=fg();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,qt(r)?(i=!0,mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ag(e),s.updater=zd,e.stateNode=s,s._reactInternals=e,Sp(e,r,t,n),e=Tp(null,e,r,!0,i,n)):(e.tag=0,Oe&&i&&eg(e),It(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=ZN(r),t=Ln(r,t),s){case 0:e=Cp(null,e,r,t,n);break e;case 1:e=C0(null,e,r,t,n);break e;case 11:e=S0(null,e,r,t,n);break e;case 14:e=E0(null,e,r,Ln(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),Cp(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),C0(t,e,r,s,n);case 3:e:{if(e1(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Nb(t,e),wu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=So(Error(z(423)),e),e=T0(t,e,r,n,s);break e}else if(r!==s){s=So(Error(z(424)),e),e=T0(t,e,r,n,s);break e}else for(an=ms(e.stateNode.containerInfo.firstChild),ln=e,Oe=!0,Un=null,n=Cb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wo(),r===s){e=Mr(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return _b(e),t===null&&wp(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,mp(r,s)?o=null:i!==null&&mp(r,i)&&(e.flags|=32),Zb(t,e),It(t,e,o,n),e.child;case 6:return t===null&&wp(e),null;case 13:return t1(t,e,n);case 4:return lg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=bo(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),S0(t,e,r,s,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(vu,r._currentValue),r._currentValue=o,i!==null)if(qn(i.value,o)){if(i.children===s.children&&!Kt.current){e=Mr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Cr(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),bp(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),bp(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}It(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,uo(e,n),s=Nn(s),r=r(s),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,s=Ln(r,e.pendingProps),s=Ln(r.type,s),E0(t,e,r,s,n);case 15:return Qb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),Hc(t,e),e.tag=1,qt(r)?(t=!0,mu(e)):t=!1,uo(e,n),Jb(e,r,s),Sp(e,r,s,n),Tp(null,e,r,!0,t,n);case 19:return n1(t,e,n);case 22:return Xb(t,e,n)}throw Error(z(156,e.tag))};function v1(t,e){return Ww(t,e)}function XN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,e,n,r){return new XN(t,e,n,r)}function Sg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZN(t){if(typeof t=="function")return Sg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Fm)return 11;if(t===Hm)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=Sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Sg(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qi:return ai(n.children,s,i,e);case Um:o=8,s|=8;break;case qf:return t=Sn(12,n,e,s|2),t.elementType=qf,t.lanes=i,t;case Jf:return t=Sn(13,n,e,s),t.elementType=Jf,t.lanes=i,t;case Gf:return t=Sn(19,n,e,s),t.elementType=Gf,t.lanes=i,t;case _w:return Fd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tw:o=10;break e;case Nw:o=9;break e;case Fm:o=11;break e;case Hm:o=14;break e;case Kr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Sn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ai(t,e,n,r){return t=Sn(7,t,r,e),t.lanes=n,t}function Fd(t,e,n,r){return t=Sn(22,t,r,e),t.elementType=_w,t.lanes=n,t.stateNode={isHidden:!1},t}function Zh(t,e,n){return t=Sn(6,t,null,e),t.lanes=n,t}function ef(t,e,n){return e=Sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Eg(t,e,n,r,s,i,o,a,l){return t=new e_(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Sn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ag(i),t}function t_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ki,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function x1(t){if(!t)return Cs;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(qt(n))return xb(t,n,e)}return e}function w1(t,e,n,r,s,i,o,a,l){return t=Eg(n,r,!0,t,s,i,o,a,l),t.context=x1(null),n=t.current,r=Dt(),s=vs(n),i=Cr(r,s),i.callback=e??null,gs(n,i,s),t.current.lanes=s,Al(t,s,r),Jt(t,r),t}function Hd(t,e,n,r){var s=e.current,i=Dt(),o=vs(s);return n=x1(n),e.context===null?e.context=n:e.pendingContext=n,e=Cr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gs(s,e,o),t!==null&&(Wn(t,s,o,i),Bc(t,s,o)),o}function _u(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cg(t,e){D0(t,e),(t=t.alternate)&&D0(t,e)}function n_(){return null}var b1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tg(t){this._internalRoot=t}Vd.prototype.render=Tg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Hd(t,e,null,null)};Vd.prototype.unmount=Tg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vi(function(){Hd(null,t,null,null)}),e[Rr]=null}};function Vd(t){this._internalRoot=t}Vd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Xw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&eb(t)}};function Ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L0(){}function r_(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=_u(o);i.call(c)}}var o=w1(e,r,t,0,null,!1,!1,"",L0);return t._reactRootContainer=o,t[Rr]=o.current,Ya(t.nodeType===8?t.parentNode:t),vi(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=_u(l);a.call(c)}}var l=Eg(t,0,!1,null,null,!1,!1,"",L0);return t._reactRootContainer=l,t[Rr]=l.current,Ya(t.nodeType===8?t.parentNode:t),vi(function(){Hd(e,l,n,r)}),l}function Kd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=_u(o);a.call(l)}}Hd(e,o,t,s)}else o=r_(n,e,t,s,r);return _u(o)}Yw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ca(e.pendingLanes);n!==0&&(Km(e,n|1),Jt(e,Je()),!(ge&6)&&(Eo=Je()+500,Os()))}break;case 13:vi(function(){var r=Ar(t,1);if(r!==null){var s=Dt();Wn(r,t,1,s)}}),Cg(t,1)}};qm=function(t){if(t.tag===13){var e=Ar(t,134217728);if(e!==null){var n=Dt();Wn(e,t,134217728,n)}Cg(t,134217728)}};Qw=function(t){if(t.tag===13){var e=vs(t),n=Ar(t,e);if(n!==null){var r=Dt();Wn(n,t,e,r)}Cg(t,e)}};Xw=function(){return xe};Zw=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};ip=function(t,e,n){switch(e){case"input":if(Xf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Dd(r);if(!s)throw Error(z(90));Rw(r),Xf(r,s)}}}break;case"textarea":Mw(t,n);break;case"select":e=n.value,e!=null&&oo(t,!!n.multiple,e,!1)}};zw=wg;Bw=vi;var s_={usingClientEntryPoint:!1,Events:[Ol,Qi,Dd,Lw,$w,wg]},ea={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i_={bundleType:ea.bundleType,version:ea.version,rendererPackageName:ea.rendererPackageName,rendererConfig:ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ir.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Hw(t),t===null?null:t.stateNode},findFiberByHostInstance:ea.findFiberByHostInstance||n_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Md=lc.inject(i_),or=lc}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s_;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ng(e))throw Error(z(200));return t_(t,e,null,n)};dn.createRoot=function(t,e){if(!Ng(t))throw Error(z(299));var n=!1,r="",s=b1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Eg(t,1,!1,null,null,n,!1,r,s),t[Rr]=e.current,Ya(t.nodeType===8?t.parentNode:t),new Tg(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Hw(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return vi(t)};dn.hydrate=function(t,e,n){if(!Wd(e))throw Error(z(200));return Kd(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!Ng(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=b1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w1(e,null,t,1,n??null,s,!1,i,o),t[Rr]=e.current,Ya(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vd(e)};dn.render=function(t,e,n){if(!Wd(e))throw Error(z(200));return Kd(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!Wd(t))throw Error(z(40));return t._reactRootContainer?(vi(function(){Kd(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};dn.unstable_batchedUpdates=wg;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Wd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Kd(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function k1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k1)}catch(t){console.error(t)}}k1(),kw.exports=dn;var Zs=kw.exports;const o_=uw(Zs);var $0=Zs;Wf.createRoot=$0.createRoot,Wf.hydrateRoot=$0.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var z0="popstate";function a_(t={}){function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return $p("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:il(s)}return c_(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l_(){return Math.random().toString(36).substring(2,10)}function B0(t,e){return{usr:t.state,key:t.key,idx:e}}function $p(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Do(e):e,state:n,key:e&&e.key||r||l_()}}function il({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Do(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function c_(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a="POP",l=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let v=u(),g=v==null?null:v-c;c=v,l&&l({action:a,location:y.location,delta:g})}function f(v,g){a="PUSH";let x=$p(y.location,v,g);c=u()+1;let w=B0(x,c),k=y.createHref(x);try{o.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&l&&l({action:a,location:y.location,delta:1})}function p(v,g){a="REPLACE";let x=$p(y.location,v,g);c=u();let w=B0(x,c),k=y.createHref(x);o.replaceState(w,"",k),i&&l&&l({action:a,location:y.location,delta:0})}function m(v){return u_(v)}let y={get action(){return a},get location(){return t(s,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(z0,d),l=v,()=>{s.removeEventListener(z0,d),l=null}},createHref(v){return e(s,v)},createURL:m,encodeLocation(v){let g=m(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:p,go(v){return o.go(v)}};return y}function u_(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Be(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:il(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function S1(t,e,n="/"){return d_(t,e,n,!1)}function d_(t,e,n,r){let s=typeof e=="string"?Do(e):e,i=Or(s.pathname||"/",n);if(i==null)return null;let o=E1(t);h_(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=S_(i);a=b_(o[l],c,r)}return a}function E1(t,e=[],n=[],r="",s=!1){let i=(o,a,l=s,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;Be(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let d=Tr([r,u.relativePath]),f=n.concat(u);o.children&&o.children.length>0&&(Be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),E1(o.children,e,f,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:x_(d,o.index),routesMeta:f})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let c of C1(o.path))i(o,a,!0,c)}),e}function C1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=C1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function h_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:w_(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var f_=/^:[\w-]+$/,p_=3,m_=2,g_=1,y_=10,v_=-2,U0=t=>t==="*";function x_(t,e){let n=t.split("/"),r=n.length;return n.some(U0)&&(r+=v_),e&&(r+=m_),n.filter(s=>!U0(s)).reduce((s,i)=>s+(f_.test(i)?p_:i===""?g_:y_),r)}function w_(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function b_(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=ju({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=ju({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Tr([i,d.pathname]),pathnameBase:N_(Tr([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Tr([i,d.pathnameBase]))}return o}function ju(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k_(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,{paramName:u,isOptional:d},f)=>{if(u==="*"){let m=a[f]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return d&&!p?c[u]=void 0:c[u]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function k_(t,e=!1,n=!0){lr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function S_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Or(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var E_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function C_(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Do(t):t,i;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?i=F0(n.substring(1),"/"):i=F0(n,e)):i=e,{pathname:i,search:__(r),hash:j_(s)}}function F0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function tf(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T_(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function T1(t){let e=T_(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function N1(t,e,n,r=!1){let s;typeof t=="string"?s=Do(t):(s={...t},Be(!s.pathname||!s.pathname.includes("?"),tf("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),tf("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),tf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;s.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=C_(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}var Tr=t=>t.join("/").replace(/\/\/+/g,"/"),N_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),__=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,j_=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,R_=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function A_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function M_(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var _1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function j1(t,e){let n=t;if(typeof n!="string"||!E_.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(_1)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),a=Or(o.pathname,e);o.origin===i.origin&&a!=null?n=a+o.search+o.hash:s=!0}catch{lr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var R1=["POST","PUT","PATCH","DELETE"];new Set(R1);var O_=["GET",...R1];new Set(O_);var Lo=b.createContext(null);Lo.displayName="DataRouter";var qd=b.createContext(null);qd.displayName="DataRouterState";var I_=b.createContext(!1),A1=b.createContext({isTransitioning:!1});A1.displayName="ViewTransition";var P_=b.createContext(new Map);P_.displayName="Fetchers";var D_=b.createContext(null);D_.displayName="Await";var Rn=b.createContext(null);Rn.displayName="Navigation";var Pl=b.createContext(null);Pl.displayName="Location";var hr=b.createContext({outlet:null,matches:[],isDataRoute:!1});hr.displayName="Route";var _g=b.createContext(null);_g.displayName="RouteError";var M1="REACT_ROUTER_ERROR",L_="REDIRECT",$_="ROUTE_ERROR_RESPONSE";function z_(t){if(t.startsWith(`${M1}:${L_}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function B_(t){if(t.startsWith(`${M1}:${$_}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new R_(e.status,e.statusText,e.data)}catch{}}function U_(t,{relative:e}={}){Be(Dl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=b.useContext(Rn),{hash:s,pathname:i,search:o}=Ll(t,{relative:e}),a=i;return n!=="/"&&(a=i==="/"?n:Tr([n,i])),r.createHref({pathname:a,search:o,hash:s})}function Dl(){return b.useContext(Pl)!=null}function Pr(){return Be(Dl(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(Pl).location}var O1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function I1(t){b.useContext(Rn).static||b.useLayoutEffect(t)}function $o(){let{isDataRoute:t}=b.useContext(hr);return t?ej():F_()}function F_(){Be(Dl(),"useNavigate() may be used only in the context of a <Router> component.");let t=b.useContext(Lo),{basename:e,navigator:n}=b.useContext(Rn),{matches:r}=b.useContext(hr),{pathname:s}=Pr(),i=JSON.stringify(T1(r)),o=b.useRef(!1);return I1(()=>{o.current=!0}),b.useCallback((l,c={})=>{if(lr(o.current,O1),!o.current)return;if(typeof l=="number"){n.go(l);return}let u=N1(l,JSON.parse(i),s,c.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Tr([e,u.pathname])),(c.replace?n.replace:n.push)(u,c.state,c)},[e,n,i,s,t])}b.createContext(null);function Jd(){let{matches:t}=b.useContext(hr),e=t[t.length-1];return e?e.params:{}}function Ll(t,{relative:e}={}){let{matches:n}=b.useContext(hr),{pathname:r}=Pr(),s=JSON.stringify(T1(n));return b.useMemo(()=>N1(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function H_(t,e){return P1(t,e)}function P1(t,e,n,r,s){var x;Be(Dl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=b.useContext(Rn),{matches:o}=b.useContext(hr),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";L1(c,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let f=Pr(),p;if(e){let w=typeof e=="string"?Do(e):e;Be(u==="/"||((x=w.pathname)==null?void 0:x.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),p=w}else p=f;let m=p.pathname||"/",y=m;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=S1(t,{pathname:y});lr(d||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),lr(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=J_(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Tr([u,i.encodeLocation?i.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Tr([u,i.encodeLocation?i.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),o,n,r,s);return e&&g?b.createElement(Pl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},g):g}function V_(){let t=Z_(),e=A_(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:i},"ErrorBoundary")," or"," ",b.createElement("code",{style:i},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,o)}var W_=b.createElement(V_,null),D1=class extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=B_(t.digest);n&&(t=n)}let e=t!==void 0?b.createElement(hr.Provider,{value:this.props.routeContext},b.createElement(_g.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?b.createElement(K_,{error:t},e):e}};D1.contextType=I_;var nf=new WeakMap;function K_({children:t,error:e}){let{basename:n}=b.useContext(Rn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=z_(e.digest);if(r){let s=nf.get(e);if(s)throw s;let i=j1(r.location,n);if(_1&&!nf.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw nf.set(e,o),o}return b.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function q_({routeContext:t,match:e,children:n}){let r=b.useContext(Lo);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),b.createElement(hr.Provider,{value:t},n)}function J_(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let u=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);Be(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let a=!1,l=-1;if(n)for(let u=0;u<i.length;u++){let d=i[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:p}=n,m=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let c=n&&r?(u,d)=>{var f,p;r(u,{location:n.location,params:((p=(f=n.matches)==null?void 0:f[0])==null?void 0:p.params)??{},unstable_pattern:M_(n.matches),errorInfo:d})}:void 0;return i.reduceRight((u,d,f)=>{let p,m=!1,y=null,v=null;n&&(p=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||W_,a&&(l<0&&f===0?(L1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===f&&(m=!0,v=d.route.hydrateFallbackElement||null)));let g=e.concat(i.slice(0,f+1)),x=()=>{let w;return p?w=y:m?w=v:d.route.Component?w=b.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,b.createElement(q_,{match:d,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:w})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(D1,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:x(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:c}):x()},null)}function jg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G_(t){let e=b.useContext(Lo);return Be(e,jg(t)),e}function Y_(t){let e=b.useContext(qd);return Be(e,jg(t)),e}function Q_(t){let e=b.useContext(hr);return Be(e,jg(t)),e}function Rg(t){let e=Q_(t),n=e.matches[e.matches.length-1];return Be(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function X_(){return Rg("useRouteId")}function Z_(){var r;let t=b.useContext(_g),e=Y_("useRouteError"),n=Rg("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function ej(){let{router:t}=G_("useNavigate"),e=Rg("useNavigate"),n=b.useRef(!1);return I1(()=>{n.current=!0}),b.useCallback(async(s,i={})=>{lr(n.current,O1),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var H0={};function L1(t,e,n){!e&&!H0[t]&&(H0[t]=!0,lr(!1,n))}b.memo(tj);function tj({routes:t,future:e,state:n,onError:r}){return P1(t,void 0,n,r,e)}function Vr(t){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nj({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){Be(!Dl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof n=="string"&&(n=Do(n));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:p="default"}=n,m=b.useMemo(()=>{let y=Or(c,a);return y==null?null:{location:{pathname:y,search:u,hash:d,state:f,key:p},navigationType:r}},[a,c,u,d,f,p,r]);return lr(m!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:b.createElement(Rn.Provider,{value:l},b.createElement(Pl.Provider,{children:e,value:m}))}function rj({children:t,location:e}){return H_(zp(t),e)}function zp(t,e=[]){let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,zp(r.props.children,i));return}Be(r.type===Vr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zp(r.props.children,i)),n.push(o)}),n}var qc="get",Jc="application/x-www-form-urlencoded";function Gd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function sj(t){return Gd(t)&&t.tagName.toLowerCase()==="button"}function ij(t){return Gd(t)&&t.tagName.toLowerCase()==="form"}function oj(t){return Gd(t)&&t.tagName.toLowerCase()==="input"}function aj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lj(t,e){return t.button===0&&(!e||e==="_self")&&!aj(t)}var cc=null;function cj(){if(cc===null)try{new FormData(document.createElement("form"),0),cc=!1}catch{cc=!0}return cc}var uj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rf(t){return t!=null&&!uj.has(t)?(lr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jc}"`),null):t}function dj(t,e){let n,r,s,i,o;if(ij(t)){let a=t.getAttribute("action");r=a?Or(a,e):null,n=t.getAttribute("method")||qc,s=rf(t.getAttribute("enctype"))||Jc,i=new FormData(t)}else if(sj(t)||oj(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?Or(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||qc,s=rf(t.getAttribute("formenctype"))||rf(a.getAttribute("enctype"))||Jc,i=new FormData(a,t),!cj()){let{name:c,type:u,value:d}=t;if(u==="image"){let f=c?`${c}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else c&&i.append(c,d)}}else{if(Gd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qc,r=null,s=Jc,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ag(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hj(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Or(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function fj(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pj(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mj(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await fj(i,n);return o.links?o.links():[]}return[]}));return xj(r.flat(1).filter(pj).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function V0(t,e,n,r,s,i){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var u;return n[c].pathname!==l.pathname||((u=n[c].route.path)==null?void 0:u.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):i==="data"?e.filter((l,c)=>{var d;let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function gj(t,e,{includeHydrateFallback:n}={}){return yj(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function yj(t){return[...new Set(t)]}function vj(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function xj(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(vj(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function $1(){let t=b.useContext(Lo);return Ag(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function wj(){let t=b.useContext(qd);return Ag(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Mg=b.createContext(void 0);Mg.displayName="FrameworkContext";function z1(){let t=b.useContext(Mg);return Ag(t,"You must render this element inside a <HydratedRouter> element"),t}function bj(t,e){let n=b.useContext(Mg),[r,s]=b.useState(!1),[i,o]=b.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:u,onTouchStart:d}=e,f=b.useRef(null);b.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=g=>{g.forEach(x=>{o(x.isIntersecting)})},v=new IntersectionObserver(y,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[t]),b.useEffect(()=>{if(r){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[r]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,f,{}]:[i,f,{onFocus:ta(a,p),onBlur:ta(l,m),onMouseEnter:ta(c,p),onMouseLeave:ta(u,m),onTouchStart:ta(d,p)}]:[!1,f,{}]}function ta(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function kj({page:t,...e}){let{router:n}=$1(),r=b.useMemo(()=>S1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?b.createElement(Ej,{page:t,matches:r,...e}):null}function Sj(t){let{manifest:e,routeModules:n}=z1(),[r,s]=b.useState([]);return b.useEffect(()=>{let i=!1;return mj(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function Ej({page:t,matches:e,...n}){let r=Pr(),{future:s,manifest:i,routeModules:o}=z1(),{basename:a}=$1(),{loaderData:l,matches:c}=wj(),u=b.useMemo(()=>V0(t,e,c,i,r,"data"),[t,e,c,i,r]),d=b.useMemo(()=>V0(t,e,c,i,r,"assets"),[t,e,c,i,r]),f=b.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let y=new Set,v=!1;if(e.forEach(x=>{var k;let w=i.routes[x.route.id];!w||!w.hasLoader||(!u.some(S=>S.route.id===x.route.id)&&x.route.id in l&&((k=o[x.route.id])!=null&&k.shouldRevalidate)||w.hasClientLoader?v=!0:y.add(x.route.id))}),y.size===0)return[];let g=hj(t,a,s.unstable_trailingSlashAwareDataRequests,"data");return v&&y.size>0&&g.searchParams.set("_routes",e.filter(x=>y.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[a,s.unstable_trailingSlashAwareDataRequests,l,r,i,u,e,t,o]),p=b.useMemo(()=>gj(d,i),[d,i]),m=Sj(d);return b.createElement(b.Fragment,null,f.map(y=>b.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),p.map(y=>b.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),m.map(({key:y,link:v})=>b.createElement("link",{key:y,nonce:n.nonce,...v,crossOrigin:v.crossOrigin??n.crossOrigin})))}function Cj(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Tj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Tj&&(window.__reactRouterVersion="7.13.0")}catch{}function Nj({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=b.useRef();s.current==null&&(s.current=a_({window:r,v5Compat:!0}));let i=s.current,[o,a]=b.useState({action:i.action,location:i.location}),l=b.useCallback(c=>{n===!1?a(c):b.startTransition(()=>a(c))},[n]);return b.useLayoutEffect(()=>i.listen(l),[i,l]),b.createElement(nj,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var B1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=b.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m){let{basename:y,unstable_useTransitions:v}=b.useContext(Rn),g=typeof c=="string"&&B1.test(c),x=j1(c,y);c=x.to;let w=U_(c,{relative:s}),[k,S,C]=bj(r,p),E=Aj(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,viewTransition:d,unstable_defaultShouldRevalidate:f,unstable_useTransitions:v});function N(P){e&&e(P),P.defaultPrevented||E(P)}let A=b.createElement("a",{...p,...C,href:x.absoluteURL||w,onClick:x.isExternal||i?e:N,ref:Cj(m,S),target:l,"data-discover":!g&&n==="render"?"true":void 0});return k&&!g?b.createElement(b.Fragment,null,A,b.createElement(kj,{page:w})):A});Ye.displayName="Link";var _j=b.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...c},u){let d=Ll(o,{relative:c.relative}),f=Pr(),p=b.useContext(qd),{navigator:m,basename:y}=b.useContext(Rn),v=p!=null&&Dj(d)&&a===!0,g=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,x=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(x=x.toLowerCase(),w=w?w.toLowerCase():null,g=g.toLowerCase()),w&&y&&(w=Or(w,y)||w);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=x===g||!s&&x.startsWith(g)&&x.charAt(k)==="/",C=w!=null&&(w===g||!s&&w.startsWith(g)&&w.charAt(g.length)==="/"),E={isActive:S,isPending:C,isTransitioning:v},N=S?e:void 0,A;typeof r=="function"?A=r(E):A=[r,S?"active":null,C?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof i=="function"?i(E):i;return b.createElement(Ye,{...c,"aria-current":N,className:A,ref:u,style:P,to:o,viewTransition:a},typeof l=="function"?l(E):l)});_j.displayName="NavLink";var jj=b.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=qc,action:a,onSubmit:l,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f,...p},m)=>{let{unstable_useTransitions:y}=b.useContext(Rn),v=Ij(),g=Pj(a,{relative:c}),x=o.toLowerCase()==="get"?"get":"post",w=typeof a=="string"&&B1.test(a),k=S=>{if(l&&l(S),S.defaultPrevented)return;S.preventDefault();let C=S.nativeEvent.submitter,E=(C==null?void 0:C.getAttribute("formmethod"))||o,N=()=>v(C||S.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:s,state:i,relative:c,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:f});y&&n!==!1?b.startTransition(()=>N()):N()};return b.createElement("form",{ref:m,method:x,action:g,onSubmit:r?l:k,...p,"data-discover":!w&&t==="render"?"true":void 0})});jj.displayName="Form";function Rj(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U1(t){let e=b.useContext(Lo);return Be(e,Rj(t)),e}function Aj(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let c=$o(),u=Pr(),d=Ll(t,{relative:i});return b.useCallback(f=>{if(lj(f,e)){f.preventDefault();let p=n!==void 0?n:il(u)===il(d),m=()=>c(t,{replace:p,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a});l?b.startTransition(()=>m()):m()}},[u,c,d,n,r,e,t,s,i,o,a,l])}var Mj=0,Oj=()=>`__${String(++Mj)}__`;function Ij(){let{router:t}=U1("useSubmit"),{basename:e}=b.useContext(Rn),n=X_(),r=t.fetch,s=t.navigate;return b.useCallback(async(i,o={})=>{let{action:a,method:l,encType:c,formData:u,body:d}=dj(i,e);if(o.navigate===!1){let f=o.fetcherKey||Oj();await r(f,n,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:d,formMethod:o.method||l,formEncType:o.encType||c,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:u,body:d,formMethod:o.method||l,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function Pj(t,{relative:e}={}){let{basename:n}=b.useContext(Rn),r=b.useContext(hr);Be(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ll(t||".",{relative:e})},o=Pr();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(u=>u==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Tr([n,i.pathname])),il(i)}function Dj(t,{relative:e}={}){let n=b.useContext(A1);Be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=U1("useViewTransitionState"),s=Ll(t,{relative:e});if(!n.isTransitioning)return!1;let i=Or(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Or(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ju(s.pathname,o)!=null||ju(s.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),W=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...c},u)=>b.createElement("svg",{ref:u,...Lj,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${$j(t)}`,a].join(" "),...c},[...e.map(([d,f])=>b.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=W("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=W("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=W("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=W("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=W("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=W("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=W("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=W("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=W("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=W("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=W("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=W("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=W("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V1=W("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=W("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=W("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=W("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ol=W("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=W("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=W("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=W("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=W("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=W("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=W("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=W("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=W("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=W("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=W("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=W("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=W("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=W("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e2=W("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=W("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t2=W("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=W("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r2=W("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=W("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=W("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=W("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=W("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=W("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o2=W("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=W("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=W("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ru=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=W("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=W("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=W("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=W("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=W("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=W("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=W("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d2=W("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h2=W("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f2=W("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p2=W("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ll=W("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=W("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m2=({lang:t,setLang:e,t:n})=>{const[r,s]=b.useState(!1),[i,o]=b.useState(!1);b.useEffect(()=>{const l=()=>o(window.scrollY>20);return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const a=()=>e(l=>l==="ru"?"tj":"ru");return h.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${i?"bg-gaming-bg/80 backdrop-blur-xl border-b border-white/5 py-3":"bg-transparent py-6"}`,children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs(Ye,{to:"/",className:"flex items-center gap-3 group cursor-pointer",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gaming-primary to-gaming-pink rounded-xl flex items-center justify-center shadow-lg shadow-gaming-primary/20 group-hover:scale-105 transition-transform duration-300",children:h.jsx(yt,{className:"text-white w-6 h-6"})}),h.jsx("span",{className:"font-bold text-2xl tracking-tight text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-gaming-primary/80 transition-all",children:"Donishmand"})]}),h.jsxs("div",{className:"hidden md:flex items-center bg-white/5 backdrop-blur-md rounded-full border border-white/5 p-1.5 shadow-sm",children:[h.jsxs(Ye,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[n.navCourses,h.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),h.jsxs(Ye,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[n.navLibrary,h.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),h.jsxs(Ye,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[n.navAbout,h.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),h.jsxs(Ye,{to:"/creator",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[n.navCreator,h.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),h.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),h.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs font-bold bg-white/5 rounded-full text-white hover:bg-gaming-primary hover:text-white transition-colors uppercase ring-1 ring-white/10",children:t})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"hidden md:block",children:h.jsx("button",{className:"bg-gradient-to-r from-gaming-primary to-gaming-pink text-white px-6 py-2.5 rounded-full font-medium text-sm transition-all shadow-lg shadow-gaming-primary/25 hover:shadow-gaming-pink/25 hover:scale-105 active:scale-95",children:n.navLogin})}),h.jsx("button",{onClick:()=>s(!r),className:"md:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:r?h.jsx(Ns,{}):h.jsx(q1,{})})]})]})}),r&&h.jsx("div",{className:"absolute top-full left-0 right-0 bg-gaming-card border-b border-white/5 p-4 shadow-xl md:hidden glass-panel",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx(Ye,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:n.navCourses}),h.jsx(Ye,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:n.navLibrary}),h.jsx(Ye,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:n.navAbout}),h.jsx(Ye,{to:"/creator",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:n.navCreator}),h.jsxs("div",{className:"border-t border-white/5 pt-4 flex items-center justify-between px-4",children:[h.jsx("button",{onClick:a,className:"px-3 py-1 bg-white/5 text-white rounded-md text-xs font-bold uppercase ring-1 ring-white/10",children:t}),h.jsx("button",{className:"text-sm font-medium text-gaming-primary",children:n.navLogin})]})]})})]})},g2=({t})=>h.jsxs("footer",{className:"relative bg-gaming-bg border-t border-white/5 py-12 mt-20",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gaming-primary/5 to-transparent pointer-events-none"}),h.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center relative z-10",children:h.jsx("p",{className:"text-gaming-textMuted text-sm font-medium",children:t.footerText})})]}),y2=({lang:t,t:e})=>h.jsxs("div",{className:"relative w-full overflow-hidden pt-36 pb-20 lg:pt-48 lg:pb-32",children:[h.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-gaming-primary/20 rounded-full blur-[150px] pointer-events-none translate-x-1/3 -translate-y-1/3 animate-pulse-slow"}),h.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-gaming-pink/10 rounded-full blur-[120px] pointer-events-none -translate-x-1/3 translate-y-1/3 animate-pulse-slow"}),h.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center z-10",children:[h.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md shadow-sm text-gaming-accent text-sm font-medium mb-8 animate-fade-in-up",children:[h.jsx(yt,{size:16,className:"text-gaming-gold"}),h.jsx("span",{className:"tracking-wide uppercase text-[11px] font-bold",children:e.badge})]}),h.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-[1.1] animate-fade-in-up delay-[100ms] drop-shadow-2xl",children:e.heroTitle}),h.jsx("p",{className:"text-lg md:text-xl text-gaming-textMuted mb-12 max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-[200ms]",children:e.heroSubtitle}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center items-center w-full animate-fade-in-up delay-[300ms]",children:[h.jsxs("button",{className:"group relative bg-gaming-primary hover:bg-gaming-primary/90 text-white px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-gaming-primary/25 flex items-center justify-center gap-2 text-lg overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),h.jsx("span",{children:e.ctaStart}),h.jsx(Yd,{size:20,className:"text-gaming-gold group-hover:translate-x-1 transition-transform"})]}),h.jsx("button",{className:"group bg-transparent hover:bg-white/5 text-white border border-white/10 px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 text-lg backdrop-blur-sm",children:e.ctaCatalog})]}),h.jsx("div",{className:"absolute top-1/2 left-10 hidden lg:block animate-float opacity-30",children:h.jsx(V1,{size:80,className:"text-gaming-accent rotate-12 drop-shadow-[0_0_15px_rgba(0,224,255,0.5)]"})}),h.jsx("div",{className:"absolute top-1/3 right-10 hidden lg:block animate-float opacity-30",style:{animationDelay:"2s"},children:h.jsx(H1,{size:80,className:"text-gaming-pink -rotate-12 drop-shadow-[0_0_15px_rgba(255,73,219,0.5)]"})})]})]}),v2={ru:{heroTitle:h.jsxs(h.Fragment,{children:[",  ",h.jsx("span",{className:"text-gradient",children:" "})]}),heroSubtitle:"     .  5 ,      .",ctaStart:" ",ctaCatalog:" ",badge:"  ",popularTitle:" ",popularSubtitle:"      ",lessons:"",cluster:"",allSubjects:" ",footerText:" 2026 Donishmand Platform. .",navCourses:"",navLibrary:"",navAbout:" ",navLogin:"",navCreator:"",errorTitle:"  ",errorSubtitle:",     . ,   ,    .",errorHome:" ",errorBack:" "},tj:{heroTitle:h.jsxs(h.Fragment,{children:[",   ",h.jsx("span",{className:"text-gradient",children:" "})]}),heroSubtitle:"     .  5 ,       .",ctaStart:" ",ctaCatalog:" ",badge:"  ",popularTitle:" ",popularSubtitle:"       ",lessons:"",cluster:"",allSubjects:" ",footerText:" 2026 Donishmand Platform. .",navCourses:"",navLibrary:"",navAbout:"  ",navLogin:" ",navCreator:"",errorTitle:"  ",errorSubtitle:"  ,       . ,   ,     .",errorHome:"  ",errorBack:" "}},Y1={"tj-lang":{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:W0},lit:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:W0},math:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:V1},phys:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:H1},chem:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:Wj},bio:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:r2},geo:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:Bp},hist:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:c2},eng:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:uc},ger:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:uc},fra:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:uc},ara:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:uc}},Zd={"tj-lang":{ru:" ",tj:" "},math:{ru:"",tj:""},phys:{ru:"",tj:""},chem:{ru:"",tj:""},geo:{ru:"",tj:""},hist:{ru:"",tj:""},lit:{ru:"",tj:""},bio:{ru:"",tj:""},eng:{ru:"",tj:" "},ger:{ru:"",tj:" "},fra:{ru:"",tj:" "},ara:{ru:"",tj:" "}},Q1=[{id:1,titleRu:"  .",titleTj:"  ",subjects:["tj-lang","math","phys","chem"]},{id:2,titleRu:"  .",titleTj:"  ",subjects:["tj-lang","math","geo","eng","fra","ger","ara"]},{id:3,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","hist","lit","eng","fra","ger","ara"]},{id:4,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","hist","eng","fra","ger","ara"]},{id:5,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","bio","chem","phys"]}],Up=Object.keys(Y1),x2=({activeClusterId:t,setActiveClusterId:e,lang:n,t:r})=>h.jsx("div",{className:"sticky top-20 z-30 transition-all mt-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4",children:h.jsx("div",{className:"glass-panel rounded-2xl p-2 overflow-x-auto no-scrollbar",children:h.jsxs("div",{className:"flex space-x-1 min-w-max",children:[h.jsxs("button",{onClick:()=>e(0),className:`
                px-4 py-2.5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 border
                ${t===0?"bg-gaming-card border-gaming-primary/50 text-white shadow-lg shadow-gaming-primary/10":"border-transparent text-gaming-textMuted hover:text-white hover:bg-white/5"}
              `,children:[h.jsx(n2,{size:18,className:t===0?"text-gaming-accent":""}),r.allSubjects]}),h.jsx("div",{className:"w-px h-8 bg-white/10 mx-2 self-center"}),Q1.map(s=>h.jsxs("button",{onClick:()=>e(s.id),className:`
                  px-4 py-2.5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 border
                  ${t===s.id?"bg-gaming-card border-gaming-primary/50 text-white shadow-lg shadow-gaming-primary/10":"border-transparent text-gaming-textMuted hover:text-white hover:bg-white/5"}
                `,children:[h.jsx("span",{className:`
                  flex items-center justify-center w-5 h-5 rounded-md text-[10px] font-bold transition-colors
                  ${t===s.id?"bg-gaming-primary text-white":"bg-white/10 text-white/50"}
                `,children:s.id}),n==="ru"?s.titleRu:s.titleTj]},s.id))]})})})}),xi={"tj-lang":{sections:[{id:"sec1",title:"",topics:[{id:"top1",title:" ",lessons:[{id:"les1",title:"   ",type:"video"},{id:"les2",title:"",type:"text"}]},{id:"top2",title:"",lessons:[{id:"les3",title:" ",type:"video"}]}]},{id:"sec2",title:"",topics:[{id:"top3",title:"",lessons:[{id:"les4",title:" ",type:"text"}]}]}]},math:{sections:[{id:"math_sec1",title:"",topics:[{id:"math_top1",title:"",lessons:[{id:"math_les1",title:" ",type:"video"}]}]}]},chem:{sections:[{id:"chem_sec1",title:" ",titleTj:" ",topics:[{id:"chem_top1",title:"  ",titleTj:"  ",lessons:[{id:"chem_les1",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les2",title:" ",titleTj:" ",type:"text"}]},{id:"chem_top2",title:" ",titleTj:" ",lessons:[{id:"chem_les3",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les4",title:" ",titleTj:" ",type:"text"}]}]},{id:"chem_sec2",title:" ",titleTj:" ",topics:[{id:"chem_top3",title:"  ",titleTj:"  ",lessons:[{id:"chem_les5",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les6",title:"  ",titleTj:"  ",type:"text"}]},{id:"chem_top4",title:"  ",titleTj:"  ",lessons:[{id:"chem_les7",title:" ",titleTj:" ",type:"video"}]}]},{id:"chem_sec3",title:" ",titleTj:" ",topics:[{id:"chem_top5",title:"  ",titleTj:"  ",lessons:[{id:"chem_les8",title:"",titleTj:"",type:"video"},{id:"chem_les9",title:"  ",titleTj:"  ",type:"text"}]}]}]}},w2=({subjectId:t,lang:e,t:n})=>{const r=Y1[t],s=Zd[t][e],i=r.icon,o=xi[t],a=(o==null?void 0:o.sections.reduce((l,c)=>l+c.topics.reduce((u,d)=>u+d.lessons.length,0),0))||0;return h.jsxs(Ye,{to:`/subject/${t}`,className:"block group relative bg-gaming-card rounded-3xl p-6 border border-white/5 hover:border-gaming-primary/30 shadow-lg shadow-black/20 hover:shadow-gaming-primary/10 transition-all duration-500 hover:-translate-y-2 cursor-pointer overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/0 via-gaming-primary/0 to-gaming-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),h.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-6",children:[h.jsx("div",{className:`w-14 h-14 rounded-2xl ${r.bg} flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:h.jsx(i,{size:28,className:r.color})}),h.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-white/40 group-hover:bg-gaming-primary group-hover:text-white transition-all duration-300",children:h.jsx(Ts,{size:16})})]}),h.jsx("h3",{className:"relative z-10 text-xl font-bold text-white mb-2 leading-tight group-hover:text-gaming-accent transition-colors",children:s}),h.jsx("div",{className:"relative z-10 flex items-center gap-3 text-sm font-medium text-gaming-textMuted mb-4",children:h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx(a2,{size:14,className:"fill-gaming-primary text-gaming-primary"})," ",a," ",n.lessons]})}),h.jsx("div",{className:"relative z-10 w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink w-1/3 rounded-full"})})]})},b2=({lang:t,t:e,setLang:n,userRole:r,setUserRole:s})=>{const[i,o]=b.useState(0);let a=[],l="";if(i===0)a=Up,l=e.allSubjects;else{const c=Q1.find(u=>u.id===i);a=c?c.subjects:[],l=`${e.cluster} ${i}: ${t==="ru"?c.titleRu:c.titleTj}`}return h.jsxs("main",{className:"relative",children:[h.jsxs("div",{className:"absolute top-24 right-4 z-40 bg-black/60 backdrop-blur-md p-1.5 rounded-xl border border-white/10 flex gap-1 shadow-2xl",children:[h.jsx("button",{onClick:()=>s("student"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${r==="student"?"bg-gaming-primary text-white shadow-lg":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:t==="ru"?"":""}),h.jsx("button",{onClick:()=>s("teacher"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${r==="teacher"?"bg-gaming-pink text-white shadow-lg":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:t==="ru"?"":""})]}),h.jsx(y2,{lang:t,t:e}),h.jsx(x2,{activeClusterId:i,setActiveClusterId:o,lang:t,t:e}),h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 min-h-[600px] mt-10",children:[h.jsx("div",{className:"flex items-end justify-between mb-8 px-2",children:h.jsxs("div",{children:[h.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight drop-shadow-lg",children:l}),h.jsx("p",{className:"text-gaming-textMuted mt-2 text-lg",children:e.popularSubtitle})]})}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",children:a.map((c,u)=>h.jsx(w2,{subjectId:c,lang:t,t:e},`${i}-${c}-${u}`))})]})]})},J0=({subjectId:t,lang:e})=>{var v;const n=Pr(),r=xi[t],s=((v=Zd[t])==null?void 0:v[e])||t,i=n.pathname.split("/"),o=i[i.indexOf("section")+1],a=i[i.indexOf("topic")+1],l=i[i.indexOf("lesson")+1],[c,u]=b.useState(()=>o?{[o]:!0}:{}),[d,f]=b.useState(()=>a?{[a]:!0}:{}),p=g=>{u(x=>({...x,[g]:!x[g]}))},m=(g,x)=>{x.preventDefault(),x.stopPropagation(),f(w=>({...w,[g]:!w[g]}))};if(!r)return null;const y=g=>e==="tj"&&g.titleTj?g.titleTj:g.title;return h.jsxs("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"p-4 border-b border-white/5",children:[h.jsxs(Ye,{to:"/",className:"flex items-center gap-2 text-gaming-textMuted hover:text-white text-sm mb-3 transition-colors",children:[h.jsx(W1,{size:14}),h.jsx("span",{children:e==="ru"?"":""})]}),h.jsxs(Ye,{to:`/subject/${t}`,className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary",children:h.jsx(Og,{size:20})}),h.jsx("span",{className:"font-bold text-lg text-white truncate",children:s})]})]}),h.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:r.sections.map((g,x)=>{const w=o===g.id,k=c[g.id]||w;return h.jsxs("div",{className:"mb-1",children:[h.jsxs("button",{onClick:()=>p(g.id),className:`w-full flex items-center gap-2 p-2.5 rounded-xl text-left transition-all group ${w?"bg-gaming-primary/20 text-white":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[h.jsx("span",{className:`transition-transform ${k?"rotate-90":""}`,children:h.jsx(Ts,{size:16})}),h.jsxs("span",{className:"font-semibold text-sm truncate",children:[x+1,". ",y(g)]})]}),k&&h.jsx("div",{className:"ml-4 mt-1 space-y-0.5 border-l border-white/5 pl-3",children:g.topics.map((S,C)=>{const E=a===S.id,N=d[S.id]||E||l;return h.jsxs("div",{children:[h.jsxs(Ye,{to:`/subject/${t}/section/${g.id}/topic/${S.id}`,className:`w-full flex items-center gap-2 p-2 rounded-lg text-left text-sm transition-all group ${E&&!l?"bg-gaming-accent/20 text-gaming-accent":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[h.jsx("button",{onClick:A=>m(S.id,A),className:`transition-transform ${N?"rotate-90":""}`,children:h.jsx(Ts,{size:14})}),h.jsx(jn,{size:14,className:"opacity-50 shrink-0"}),h.jsxs("span",{className:"truncate",children:[x+1,".",C+1,". ",y(S)]})]}),N&&h.jsx("div",{className:"ml-5 mt-0.5 space-y-0.5 border-l border-white/5 pl-2",children:S.lessons.map((A,P)=>{const R=l===A.id;return h.jsxs(Ye,{to:`/lesson/${A.id}`,className:`flex items-center gap-2 p-1.5 rounded-lg text-xs transition-all ${R?"bg-gaming-pink/20 text-gaming-pink font-semibold":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:[A.type==="video"?h.jsx(J1,{size:12}):h.jsx(jn,{size:12}),h.jsxs("span",{className:"truncate",children:[P+1,". ",y(A)]})]},A.id)})})]},S.id)})})]},g.id)})})]})},eh=({subjectId:t,lang:e,children:n})=>{const[r,s]=b.useState(!1);return h.jsxs("div",{className:"flex min-h-[calc(100vh-6rem)]",children:[h.jsx("div",{className:"hidden lg:block sticky top-24 h-[calc(100vh-6rem)]",children:h.jsx(J0,{subjectId:t,lang:e})}),r&&h.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>s(!1)}),h.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out ${r?"translate-x-0":"-translate-x-full"}`,children:h.jsx(J0,{subjectId:t,lang:e})}),h.jsxs("main",{className:"flex-1 p-6 overflow-x-hidden",children:[h.jsx("button",{onClick:()=>s(!r),className:"lg:hidden fixed bottom-6 left-6 z-30 w-14 h-14 rounded-full bg-gaming-primary text-white flex items-center justify-center shadow-xl shadow-gaming-primary/30",children:r?h.jsx(Ns,{size:24}):h.jsx(q1,{size:24})}),n]})]})},X1=t=>{try{const e=JSON.parse(localStorage.getItem(`test_history_${t}`)||"[]");if(!e||e.length===0)return null;const n=e.length,r=Math.max(...e.map(a=>a.score)),s=e.reduce((a,l)=>a+l.score,0)/n,i=Math.round(100-s),o=e[e.length-1].timestamp;return{totalAttempts:n,bestScore:r,avgErrorRate:i,avgScore:s,lastAttemptAt:o}}catch(e){return console.error("Error parsing lesson stats:",e),null}},Au=t=>{if(!t||t.length===0)return null;let e=0,n=0;if(t.forEach(i=>{const o=X1(i);o&&(e+=o.avgScore,n++)}),n===0)return null;const r=e/n,s=Math.round(100-r);return{completedLessons:n,totalLessons:t.length,avgErrorRate:s}};function th(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function k2(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}const S2=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Pg extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class E2 extends Pg{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class G0 extends Pg{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Y0 extends Pg{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Fp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Fp||(Fp={}));class C2{constructor(e,{headers:n={},customFetch:r,region:s=Fp.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=S2(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return k2(this,arguments,void 0,function*(n,r={}){var s;let i,o;try{const{headers:a,method:l,body:c,signal:u,timeout:d}=r;let f={},{region:p}=r;p||(p=this.region);const m=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let y;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(f["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(f["Content-Type"]="application/json",y=JSON.stringify(c)):c&&typeof c!="string"&&!(typeof Blob<"u"&&c instanceof Blob)&&!(c instanceof ArrayBuffer)&&!(typeof FormData<"u"&&c instanceof FormData)?y=JSON.stringify(c):y=c;let v=u;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),u?(v=o.signal,u.addEventListener("abort",()=>o.abort())):v=o.signal);const g=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:y,signal:v}).catch(S=>{throw new E2(S)}),x=g.headers.get("x-relay-error");if(x&&x==="true")throw new G0(g);if(!g.ok)throw new Y0(g);let w=((s=g.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return w==="application/json"?k=yield g.json():w==="application/octet-stream"||w==="application/pdf"?k=yield g.blob():w==="text/event-stream"?k=g:w==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof Y0||a instanceof G0?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var T2=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},N2=class{constructor(t){var e,n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,c=i.status,u=i.statusText;if(i.ok){var d,f;if(n.method!=="HEAD"){var p;const g=await i.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((p=n.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}const y=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),v=(f=i.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");y&&v&&v.length>1&&(l=parseInt(v[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,c=406,u="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,c=200,u="OK")}catch{i.status===404&&y===""?(c=204,u="No Content"):o={message:y}}if(o&&n.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,c=200,u="OK"),o&&n.shouldThrowOnError)throw new T2(o)}return{error:o,data:a,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="",l="",c="";const u=i==null?void 0:i.cause;if(u){var d,f,p,m;const g=(d=u==null?void 0:u.message)!==null&&d!==void 0?d:"",x=(f=u==null?void 0:u.code)!==null&&f!==void 0?f:"";a=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(m=u==null?void 0:u.name)!==null&&m!==void 0?m:"Error"}: ${g}`,x&&(a+=` (${x})`),u!=null&&u.stack&&(a+=`
${u.stack}`)}else{var y;a=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}const v=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(c="",l="Request was aborted (timeout or manual cancellation)",v>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${v} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((u==null?void 0:u.name)==="HeadersOverflowError"||(u==null?void 0:u.code)==="UND_ERR_HEADERS_OVERFLOW")&&(c="",l="HTTP headers exceeded server limits (typically 16KB)",v>this.urlLengthLimit&&(l+=`. Your request URL is ${v} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:l,code:c},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},_2=class extends N2{select(t){let e=!1;const n=(t??"*").split("").map(r=>/\s/.test(r)&&!e?"":(r==='"'&&(e=!e),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:r,referencedTable:s=r}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"offset":`${r}.offset`,i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:r=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,n?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const Q0=new RegExp("[,()]");var Bi=class extends _2{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Q0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(r=>typeof r=="string"&&Q0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const i=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},j2=class{constructor(t,{headers:e={},schema:n,fetch:r,urlLengthLimit:s=8e3}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=r,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:n=!1,count:r}=e??{},s=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!i?"":(c==='"'&&(i=!i),c)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),r&&l.append("Prefer",`count=${r}`),new Bi({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:n=!0}={}){var r;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),n||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);i.searchParams.set("columns",l.join(","))}}return new Bi({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:r,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),r&&l.append("Prefer",`count=${r}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);a.searchParams.set("columns",u.join(","))}}return new Bi({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var n;const r="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new Bi({method:r,url:s,headers:i,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const n="DELETE",{url:r,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new Bi({method:n,url:r,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function cl(t){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cl(t)}function R2(t,e){if(cl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function A2(t){var e=R2(t,"string");return cl(e)=="symbol"?e:e+""}function M2(t,e,n){return(e=A2(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function hc(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X0(Object(n),!0).forEach(function(r){M2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var O2=class Z1{constructor(e,{headers:n={},schema:r,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(n),this.schemaName=r,this.urlLengthLimit=o;const a=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(l,c)=>{const u=new AbortController,d=setTimeout(()=>u.abort(),i),f=c==null?void 0:c.signal;if(f){if(f.aborted)return clearTimeout(d),a(l,c);const p=()=>{clearTimeout(d),u.abort()};return f.addEventListener("abort",p,{once:!0}),a(l,hc(hc({},c),{},{signal:u.signal})).finally(()=>{clearTimeout(d),f.removeEventListener("abort",p)})}return a(l,hc(hc({},c),{},{signal:u.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new j2(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new Z1(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;const u=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(u)),d=r&&Object.values(n).some(u);d?(a="POST",c=n):r||s?(a=r?"HEAD":"GET",Object.entries(n).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",c=n);const f=new Headers(this.headers);return d?f.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&f.set("Prefer",`count=${i}`),new Bi({method:a,url:l,headers:f,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class I2{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const r=n.versions;if(r&&r.node){const s=r.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const P2="2.95.3",D2=`realtime-js/${P2}`,L2="1.0.0",ek="2.0.0",Z0=ek,Hp=1e4,$2=1e3,z2=100;var Jr;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Jr||(Jr={}));var et;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(et||(et={}));var Bn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Bn||(Bn={}));var Vp;(function(t){t.websocket="websocket"})(Vp||(Vp={}));var qs;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(qs||(qs={}));class B2{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var n,r;const s=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,n,r){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",c=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`userEvent length ${c.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let m=new DataView(p),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,l.length),m.setUint8(y++,a.length),m.setUint8(y++,o.length),m.setUint8(y++,c.length),m.setUint8(y++,d.length),m.setUint8(y++,n),Array.from(l,g=>m.setUint8(y++,g.charCodeAt(0))),Array.from(a,g=>m.setUint8(y++,g.charCodeAt(0))),Array.from(o,g=>m.setUint8(y++,g.charCodeAt(0))),Array.from(c,g=>m.setUint8(y++,g.charCodeAt(0))),Array.from(d,g=>m.setUint8(y++,g.charCodeAt(0)));var v=new Uint8Array(p.byteLength+r.byteLength);return v.set(new Uint8Array(p),0),v.set(new Uint8Array(r),p.byteLength),v.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[s,i,o,a,l]=r;return n({join_ref:s,ref:i,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),s=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,s)}}_decodeUserBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+s));l=l+s;const u=r.decode(e.slice(l,l+i));l=l+i;const d=r.decode(e.slice(l,l+o));l=l+o;const f=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(r.decode(f)):f,m={type:this.BROADCAST_EVENT,event:u,payload:p};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class tk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ne;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ne||(Ne={}));const ev=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=U2(o,t,e,s),i),{}):{}},U2=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?nk(i,o):Wp(o)},nk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return W2(e,n)}switch(t){case Ne.bool:return F2(e);case Ne.float4:case Ne.float8:case Ne.int2:case Ne.int4:case Ne.int8:case Ne.numeric:case Ne.oid:return H2(e);case Ne.json:case Ne.jsonb:return V2(e);case Ne.timestamp:return K2(e);case Ne.abstime:case Ne.date:case Ne.daterange:case Ne.int4range:case Ne.int8range:case Ne.money:case Ne.reltime:case Ne.text:case Ne.time:case Ne.timestamptz:case Ne.timetz:case Ne.tsrange:case Ne.tstzrange:return Wp(e);default:return Wp(e)}},Wp=t=>t,F2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},H2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},V2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},W2=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>nk(e,a))}return t},K2=t=>typeof t=="string"?t.replace(" ","T"):t,rk=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class sf{constructor(e,n,r={},s=Hp){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var tv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(tv||(tv={}));class Na{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Na.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Na.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Na.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=i[c];if(d){const f=u.map(v=>v.presence_ref),p=d.map(v=>v.presence_ref),m=u.filter(v=>p.indexOf(v.presence_ref)<0),y=d.filter(v=>f.indexOf(v.presence_ref)<0);m.length>0&&(a[c]=m),y.length>0&&(l[c]=y)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const d=e[a].map(p=>p.presence_ref),f=u.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(nv||(nv={}));var _a;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_a||(_a={}));var xr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xr||(xr={}));class so{constructor(e,n={config:{}},r){var s,i;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=et.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new sf(this,Bn.join,this.params,this.timeout),this.rejoinTimer=new tk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=et.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=et.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=et.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Na(this),this.broadcastEndpointURL=rk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==et.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[_a.PRESENCE]&&this.bindings[_a.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(xr.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(xr.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(xr.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,v=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,g=[];for(let x=0;x<v;x++){const w=y[x],{filter:{event:k,schema:S,table:C,filter:E}}=w,N=p&&p[x];if(N&&N.event===k&&so.isFilterValueEqual(N.schema,S)&&so.isFilterValueEqual(N.table,C)&&so.isFilterValueEqual(N.filter,E))g.push(Object.assign(Object.assign({},w),{id:N.id}));else{this.unsubscribe(),this.state=et.errored,e==null||e(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,e&&e(xr.SUBSCRIBED);return}}).receive("error",p=>{this.state=et.errored,e==null||e(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===et.joined&&e===_a.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;if(n==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=et.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new sf(this,Bn.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=et.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new sf(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>z2){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Bn;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,y,v;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((v=(y=p.filter)===null||y===void 0?void 0:y.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,y,v,g,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const k=p.id,S=(m=p.filter)===null||m===void 0?void 0:m.event;return k&&((y=n.ids)===null||y===void 0?void 0:y.includes(k))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const k=(x=(g=p==null?void 0:p.filter)===null||g===void 0?void 0:g.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return k==="*"||k===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:v,commit_timestamp:g,type:x,errors:w}=m;f=Object.assign(Object.assign({},{schema:y,table:v,commit_timestamp:g,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(m))}p.callback(f,r)})}_isClosed(){return this.state===et.closed}_isJoined(){return this.state===et.joined}_isJoining(){return this.state===et.joining}_isLeaving(){return this.state===et.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&so.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Bn.close,{},e)}_onError(e){this._on(Bn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=et.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ev(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ev(e.columns,e.old_record)),n}}const of=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},q2=[1e3,2e3,5e3,1e4],J2=1e4,G2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Y2{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hp,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=of,this.ref=0,this.reconnectTimer=null,this.vsn=Z0,this.logger=of,this.conn=null,this.sendBuffer=[],this.serializer=new B2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Vp.websocket}`,this.httpEndpoint=rk(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=I2.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return n==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Jr.connecting:return qs.Connecting;case Jr.open:return qs.Open;case Jr.closing:return qs.Closing;default:return qs.Closed}}isConnected(){return this.connectionState()===qs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new so(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($2,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const c=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",c)}catch(u){this.log("error","error in heartbeat callback",u)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:s,payload:i,ref:o}=n,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${a}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Jr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Jr.open||this.conn.readyState===Jr.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Bn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([G2],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,r=!1;if(e)n=e,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const i={access_token:n,version:D2};n&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Bn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,i,o,a,l,c,u,d,f,p;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Hp,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:fc.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:of,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Z0,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:m=>q2[m-1]||J2,this.vsn){case L2:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(m,y)=>y(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case ek:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ul=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Q2(t,e,n){const r=new URL(e,t);if(n)for(const[s,i]of Object.entries(n))i!==void 0&&r.searchParams.set(s,i);return r.toString()}async function X2(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function Z2(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:s,body:i,headers:o}){const a=Q2(t.baseUrl,r,s),l=await X2(t.auth),c=await e(a,{method:n,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),u=await c.text(),d=(c.headers.get("content-type")||"").includes("application/json"),f=d&&u?JSON.parse(u):u;if(!c.ok){const p=d?f:void 0,m=p==null?void 0:p.error;throw new ul((m==null?void 0:m.message)??`Request failed with status ${c.status}`,{status:c.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:c.status,headers:c.headers,data:f}}}}function pc(t){return t.join("")}var eR=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:pc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pc(t.namespace)}`}),!0}catch(e){if(e instanceof ul&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ul&&n.status===409)return;throw n}}};function Ai(t){return t.join("")}var tR=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ai(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ul&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ul&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},nR=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=Z2({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new eR(this.client,e),this.tableOps=new tR(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},nh=class extends Error{constructor(t,e="storage",n,r){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function rh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var mc=class extends nh{constructor(t,e,n,r="storage"){super(t,r,e,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sk=class extends nh{constructor(t,e,n="storage"){super(t,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const rR=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),sR=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Kp=t=>{if(Array.isArray(t))return t.map(n=>Kp(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Kp(r)}),e},iR=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function dl(t){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(t)}function oR(t,e){if(dl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aR(t){var e=oR(t,"string");return dl(e)=="symbol"?e:e+""}function lR(t,e,n){return(e=aR(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rv(Object(n),!0).forEach(function(r){lR(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const sv=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},cR=async(t,e,n,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new mc(sv(o),i,a,r))}).catch(()=>{if(r==="vectors"){const o=i+"";e(new mc(s.statusText||`HTTP ${i} error`,i,o,r))}else{const o=i+"";e(new mc(s.statusText||`HTTP ${i} error`,i,o,r))}});else{const o=i+"";e(new mc(s.statusText||`HTTP ${i} error`,i,o,r))}}else e(new sk(sv(t),t,r))},uR=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!r?te(te({},s),n):(sR(r)?(s.headers=te({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),te(te({},s),n))};async function ra(t,e,n,r,s,i,o){return new Promise((a,l)=>{t(n,uR(e,r,s,i)).then(c=>{if(!c.ok)throw c;if(r!=null&&r.noResolveJson)return c;if(o==="vectors"){const u=c.headers.get("content-type");if(c.headers.get("content-length")==="0"||c.status===204)return{};if(!u||!u.includes("application/json"))return{}}return c.json()}).then(c=>a(c)).catch(c=>cR(c,l,r,o))})}function ik(t="storage"){return{get:async(e,n,r,s)=>ra(e,"GET",n,r,s,void 0,t),post:async(e,n,r,s,i)=>ra(e,"POST",n,s,i,r,t),put:async(e,n,r,s,i)=>ra(e,"PUT",n,s,i,r,t),head:async(e,n,r,s)=>ra(e,"HEAD",n,te(te({},r),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,n,r,s,i)=>ra(e,"DELETE",n,s,i,r,t)}}const dR=ik("storage"),{get:hl,post:$n,put:qp,head:hR,remove:Dg}=dR,sn=ik("vectors");var zo=class{constructor(t,e={},n,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=rR(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(rh(n))return{data:null,error:n};throw n}}},fR=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rh(e))return{data:null,error:e};throw e}}};let ok;ok=Symbol.toStringTag;var pR=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[ok]="BlobDownloadBuilder",this.promise=null}asStream(){return new fR(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(rh(e))return{data:null,error:e};throw e}}};const mR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var gR=class extends zo{constructor(t,e={},n,r){super(t,e,r,"storage"),this.bucketId=n}async uploadOrUpdate(t,e,n,r){var s=this;return s.handleOperation(async()=>{let i;const o=te(te({},iv),r);let a=te(te({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),r!=null&&r.headers&&(a=te(te({},a),r.headers));const c=s._removeEmptyFolders(e),u=s._getFinalPath(c),d=await(t=="PUT"?qp:$n)(s.fetch,`${s.url}/object/${u}`,i,te({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:c,id:d.Id,fullPath:d.Key}})}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,r){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),s.handleOperation(async()=>{let l;const c=te({upsert:iv.upsert},r),u=te(te({},s.headers),{"x-upsert":String(c.upsert)});return typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType),{path:i,fullPath:(await qp(s.fetch,a.toString(),l,{headers:u})).Key}})}async createSignedUploadUrl(t,e){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(t);const s=te({},n.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await $n(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(n.url+i.url),a=o.searchParams.get("token");if(!a)throw new nh("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var r=this;return r.handleOperation(async()=>await $n(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers}))}async copy(t,e,n){var r=this;return r.handleOperation(async()=>({path:(await $n(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,e,n){var r=this;return r.handleOperation(async()=>{let s=r._getFinalPath(t),i=await $n(r.fetch,`${r.url}/object/sign/${s}`,te({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:r.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,n){var r=this;return r.handleOperation(async()=>{const s=await $n(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:e,paths:t},{headers:r.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s.map(o=>te(te({},o),{},{signedUrl:o.signedURL?encodeURI(`${r.url}${o.signedURL}${i}`):null}))})}download(t,e,n){const r=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=s?`?${s}`:"",o=this._getFinalPath(t),a=()=>hl(this.fetch,`${this.url}/${r}/${o}${i}`,{headers:this.headers,noResolveJson:!0},n);return new pR(a,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);return e.handleOperation(async()=>Kp(await hl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await hR(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(rh(r)&&r instanceof sk){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,e){const n=this._getFinalPath(t),r=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&r.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&r.push(o);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await Dg(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,n){var r=this;return r.handleOperation(async()=>{const s=te(te(te({},mR),e),{},{prefix:t||""});return await $n(r.fetch,`${r.url}/object/list/${r.bucketId}`,s,{headers:r.headers},n)})}async listV2(t,e){var n=this;return n.handleOperation(async()=>{const r=te({},t);return await $n(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const yR="2.95.3",$l={"X-Client-Info":`storage-js/${yR}`};var vR=class extends zo{constructor(t,e={},n,r){const s=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=te(te({},$l),e);super(i,o,n,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(t);return await hl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await hl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var n=this;return n.handleOperation(async()=>await $n(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(t,e){var n=this;return n.handleOperation(async()=>await qp(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await $n(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Dg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},xR=class extends zo{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=te(te({},$l),e);super(r,s,n,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await $n(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const r=n.toString(),s=r?`${e.url}/bucket?${r}`:`${e.url}/bucket`;return await hl(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Dg(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!iR(t))throw new nh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new nR({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(r)throw l;return{data:null,error:l}}}}})}},wR=class extends zo{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=te(te({},$l),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var n=this;return n.handleOperation(async()=>await sn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var n=this;return n.handleOperation(async()=>await sn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{})}},bR=class extends zo{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=te(te({},$l),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},kR=class extends zo{constructor(t,e={},n){const r=t.replace(/\/$/,""),s=te(te({},$l),{},{"Content-Type":"application/json"},e);super(r,s,n,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await sn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},SR=class extends kR{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new ER(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},ER=class extends wR{constructor(t,e,n,r){super(t,e,r),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new CR(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},CR=class extends bR{constructor(t,e,n,r,s){super(t,e,s),this.vectorBucketName=n,this.indexName=r}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,te(te({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},TR=class extends vR{constructor(t,e={},n,r){super(t,e,n,r)}from(t){return new gR(this.url,this.headers,t,this.fetch)}get vectors(){return new SR(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new xR(this.url+"/iceberg",this.headers,this.fetch)}};const ak="2.95.3",Ui=30*1e3,Jp=3,af=Jp*Ui,NR="http://localhost:9999",_R="supabase.auth.token",jR={"X-Client-Info":`gotrue-js/${ak}`},Gp="X-Supabase-Api-Version",lk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},RR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,AR=10*60*1e3;class fl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Y(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class MR extends fl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function OR(t){return Y(t)&&t.name==="AuthApiError"}class Js extends fl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Dr extends fl{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class nn extends Dr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function lf(t){return Y(t)&&t.name==="AuthSessionMissingError"}class Mi extends Dr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gc extends Dr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class yc extends Dr{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IR(t){return Y(t)&&t.name==="AuthImplicitGrantRedirectError"}class ov extends Dr{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class PR extends Dr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Yp extends Dr{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function cf(t){return Y(t)&&t.name==="AuthRetryableFetchError"}class av extends Dr{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Qp extends Dr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lv=` 	
\r=`.split(""),DR=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<lv.length;e+=1)t[lv[e].charCodeAt(0)]=-2;for(let e=0;e<Mu.length;e+=1)t[Mu[e].charCodeAt(0)]=e;return t})();function cv(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mu[r]),e.queuedBits-=6}}function ck(t,e,n){const r=DR[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uv(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{zR(o,r,n)};for(let o=0;o<t.length;o+=1)ck(t.charCodeAt(o),s,i);return e.join("")}function LR(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function $R(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}LR(r,e)}}function zR(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function fo(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ck(t.charCodeAt(s),n,r);return new Uint8Array(e)}function BR(t){const e=[];return $R(t,n=>e.push(n)),new Uint8Array(e)}function ei(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>cv(s,n,r)),cv(null,n,r),e.join("")}function UR(t){return Math.round(Date.now()/1e3)+t}function FR(){return Symbol("auth-callback")}const pt=()=>typeof window<"u"&&typeof document<"u",Us={tested:!1,writable:!1},uk=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Us.tested)return Us.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Us.tested=!0,Us.writable=!0}catch{Us.tested=!0,Us.writable=!1}return Us.writable};function HR(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const dk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),VR=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Fi=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Fs=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ft=async(t,e)=>{await t.removeItem(e)};class sh{constructor(){this.promise=new sh.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}sh.promiseConstructor=Promise;function vc(t){const e=t.split(".");if(e.length!==3)throw new Qp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!RR.test(e[r]))throw new Qp("JWT not in base64url format");return{header:JSON.parse(uv(e[0])),payload:JSON.parse(uv(e[1])),signature:fo(e[2]),raw:{header:e[0],payload:e[1]}}}async function WR(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function KR(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function qR(t){return("0"+t.toString(16)).substr(-2)}function JR(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,qR).join("")}async function GR(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function YR(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await GR(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Oi(t,e,n=!1){const r=JR();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await Fi(t,`${e}-code-verifier`,s);const i=await YR(r);return[i,r===i?"plain":"s256"]}const QR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function XR(t){const e=t.headers.get(Gp);if(!e||!e.match(QR))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ZR(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function eA(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const tA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ii(t){if(!tA.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function uf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nA(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function dv(t){return JSON.parse(JSON.stringify(t))}const Ks=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),rA=[502,503,504];async function hv(t){var e;if(!VR(t))throw new Yp(Ks(t),0);if(rA.includes(t.status))throw new Yp(Ks(t),t.status);let n;try{n=await t.json()}catch(i){throw new Js(Ks(i),i)}let r;const s=XR(t);if(s&&s.getTime()>=lk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new av(Ks(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new nn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new av(Ks(n),t.status,n.weak_password.reasons);throw new MR(Ks(n),t.status||500,r)}const sA=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ee(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Gp]||(i[Gp]=lk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await iA(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function iA(t,e,n,r,s,i){const o=sA(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Yp(Ks(l),0)}if(a.ok||await hv(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await hv(l)}}function Pn(t){var e;let n=null;lA(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=UR(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function fv(t){const e=Pn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function ts(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function oA(t){return{data:t,error:null}}function aA(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=th(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function pv(t){return t}function lA(t){return t.access_token&&t.refresh_token&&t.expires_in}const df=["global","local","others"];class cA{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=dk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=df[0]){if(df.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${df.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Y(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ts})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=th(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:aA,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Y(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ts})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pv});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Y(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ii(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ts})}catch(n){if(Y(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ii(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ts})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ii(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ts})}catch(r){if(Y(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ii(e.userId);try{const{data:n,error:r}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ii(e.userId),Ii(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ee(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:pv});if(u.error)throw u.error;const d=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(m.split(";")[1].split("=")[1]);c[`${v}Page`]=y}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(Y(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ee(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ee(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Y(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ee(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Y(n))return{data:null,error:n};throw n}}}function mv(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Pi={debug:!!(globalThis&&uk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class uA extends hk{}async function dA(t,e,n){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Pi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new uA(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Pi.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function hA(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fk(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function fA(t){return parseInt(t,16)}function pA(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function mA(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:d,version:f}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=fk(t.address),m=u?`${u}://${r}`:r,y=t.statement?`${t.statement}
`:"",v=`${m} wants you to sign in with your Ethereum account:
${p}

${y}`;let g=`URI: ${d}
Version: ${f}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(g+=`
Expiration Time: ${s.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),l&&(g+=`
Request ID: ${l}`),c){let x=`
Resources:`;for(const w of c){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);x+=`
- ${w}`}g+=x}return`${v}
${g}`}class Ge extends Error{constructor({message:e,code:n,cause:r,name:s}){var i;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=s??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Ou extends Ge{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function gA({error:t,options:e}){var n,r,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Ge({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Ge({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Ge({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Ge({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Ge({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Ge({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(pk(o)){if(i.rp.id!==o)return new Ge({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ge({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function yA({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Ge({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Ge({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(pk(r)){if(n.rpId!==r)return new Ge({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Ge({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Ge({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Ge({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class vA{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const xA=new vA;function wA(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=th(t,["challenge","user","excludeCredentials"]),i=fo(e).buffer,o=Object.assign(Object.assign({},n),{id:fo(n.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:fo(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function bA(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=th(t,["challenge","allowCredentials"]),s=fo(e).buffer,i=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:fo(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function kA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ei(new Uint8Array(t.response.attestationObject)),clientDataJSON:ei(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function SA(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ei(new Uint8Array(s.authenticatorData)),clientDataJSON:ei(new Uint8Array(s.clientDataJSON)),signature:ei(new Uint8Array(s.signature)),userHandle:s.userHandle?ei(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function pk(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function gv(){var t,e;return!!(pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function EA(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ou("Browser returned unexpected credential type",e)}:{data:null,error:new Ou("Empty credential response",e)}}catch(e){return{data:null,error:gA({error:e,options:t})}}}async function CA(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ou("Browser returned unexpected credential type",e)}:{data:null,error:new Ou("Empty credential response",e)}}catch(e){return{data:null,error:yA({error:e,options:t})}}}const TA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},NA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Iu(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(e(o)){const a=r[i];e(a)?r[i]=Iu(a,o):r[i]=Iu(o)}else r[i]=o}return r}function _A(t,e){return Iu(TA,t,e||{})}function jA(t,e){return Iu(NA,t,e||{})}class RA{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},i){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:l};const c=s??xA.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:u}=a.webauthn.credential_options.publicKey;if(!u.name){const d=r;if(d)u.name=`${u.id}:${d}`;else{const p=(await this.client.getUser()).data.user,m=((o=p==null?void 0:p.user_metadata)===null||o===void 0?void 0:o.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";u.name=`${u.id}:${m}`}}u.displayName||(u.displayName=u.name)}switch(a.webauthn.type){case"create":{const u=_A(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await EA({publicKey:u,signal:c});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=jA(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await CA(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(a){return Y(a)?{data:null,error:a}:{data:null,error:new Js("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new fl("rpId is required for WebAuthn authentication")};try{if(!gv())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new Js("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!n)return{data:null,error:new fl("rpId is required for WebAuthn registration")};try{if(!gv())return{data:null,error:new Js("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return Y(o)?{data:null,error:o}:{data:null,error:new Js("Unexpected error in register",o)}}}}hA();const AA={url:NR,storageKey:_R,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function yv(t,e,n){return await n()}const Di={};class pl{get jwks(){var e,n;return(n=(e=Di[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Di[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},AA),e);if(this.storageKey=i.storageKey,this.instanceID=(n=pl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,pl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&pt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cA({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=dk(i.fetch),this.lock=i.lock||yv,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&pt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=dA:this.lock=yv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new RA(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:uk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mv(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=mv(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ak}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(pt()&&(n=HR(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),pt()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),IR(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Y(n)?this._returnResult({error:n}):this._returnResult({error:new Js("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Pn}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(Y(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:u,password:d,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Oi(this.storage,this.storageKey)),i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:d,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:Pn})}else if("phone"in e){const{phone:u,password:d,options:f}=e;i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Pn})}else throw new gc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await ft(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fv})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:fv})}else throw new gc("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const i=new Mi;return this._returnResult({data:{user:null,session:null},error:i})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,i,o,a,l,c,u,d,f;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:v,statement:g,options:x}=e;let w;if(pt())if(typeof v=="object")w=v;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const k=new URL((n=x==null?void 0:x.url)!==null&&n!==void 0?n:window.location.href),S=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const C=fk(S[0]);let E=(r=x==null?void 0:x.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!E){const A=await w.request({method:"eth_chainId"});E=fA(A)}const N={domain:k.host,address:C,statement:g,uri:k.href,version:"1",chainId:E,nonce:(s=x==null?void 0:x.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=mA(N),m=await w.request({method:"personal_sign",params:[pA(p),C]})}try{const{data:y,error:v}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Pn});if(v)throw v;if(!y||!y.session||!y.user){const g=new Mi;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(Y(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var n,r,s,i,o,a,l,c,u,d,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:v,wallet:g,statement:x,options:w}=e;let k;if(pt())if(typeof g=="object")k=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))k=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const S=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const C=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),x?{statement:x}:null));let E;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")E=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)E=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)m=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${S.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const C=await k.signMessage(new TextEncoder().encode(m),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=C}}try{const{data:v,error:g}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ei(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Pn});if(g)throw g;if(!v||!v.session||!v.user){const x=new Mi;return this._returnResult({data:{user:null,session:null},error:x})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(Y(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async _exchangeCodeForSession(e){const n=await Fs(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{if(!r&&this.flowType==="pkce")throw new PR;const{data:i,error:o}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Pn});if(await ft(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new Mi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Pn}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const u=new Mi;return this._returnResult({data:{user:null,session:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Oi(this.storage,this.storageKey));const{error:d}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new gc("You must provide either an email or phone number.")}catch(a){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Pn});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Oi(this.storage,this.storageKey));const c=await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:oA});return!((i=c.data)===null||i===void 0)&&i.url&&pt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new nn;const{error:s}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Y(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await ee(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await ee(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new gc("You must provide either an email or phone number and a type")}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Fs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<af:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Fs(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=uf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=nA(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ts}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nn}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ts})})}catch(n){if(Y(n))return lf(n)&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new nn;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Oi(this.storage,this.storageKey));const{data:c,error:u}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:ts});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new nn;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=vc(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(n){if(Y(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new nn;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Y(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!pt())throw new yc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new yc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ov("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ov("No code detected.");const{data:x,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new yc("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(a);let f=u+d;l&&(f=parseInt(l));const p=f-u;p*1e3<=Ui&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=f-d;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:y,error:v}=await this._getUser(i);if(v)throw v;const g={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:f,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:g,redirectType:e.type},error:null})}catch(r){if(Y(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Fs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i&&!lf(i))return this._returnResult({error:i});const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(OR(a)&&(a.status===404||a.status===401||a.status===403)||lf(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ft(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=FR(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Oi(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:d,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return pt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Y(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:i}}=n;if(s)throw s;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,d=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Pn}),{data:f,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Mi}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(await ft(this.storage,`${this.storageKey}-code-verifier`),Y(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await KR(async s=>(s>0&&await WR(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Pn})),(s,i)=>{const o=200*Math.pow(2,s);return i&&cf(i)&&Date.now()+o-r<Ui})}catch(r){if(this._debug(n,"error",r),Y(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),pt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Fs(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Fs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fi(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:uf()}else if(s&&!s.user&&!s.user){const o=await Fs(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await ft(this.storage,this.storageKey+"-user"),await Fi(this.storage,this.storageKey,s)):s.user=uf()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<af;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${af}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),cf(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new nn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new sh;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new nn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Y(i)){const o={data:null,error:i};return cf(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ft(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fi(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const i=dv(s);await Fi(this.storage,this.storageKey,i)}else{const s=dv(n);await Fi(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ft(this.storage,this.storageKey),await ft(this.storage,this.storageKey+"-code-verifier"),await ft(this.storage,this.storageKey+"-user"),this.userStorage&&await ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ui);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Ui);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ui}ms, refresh threshold is ${Jp} ticks`),s<=Jp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Oi(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?this._returnResult({data:null,error:i}):await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?kA(e.webauthn.credential_response):SA(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return this._returnResult({data:null,error:i});const o=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:wA(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:bA(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,r,s,i;if(e)try{const{payload:p}=vc(e);let m=null;p.aal&&(m=p.aal);let y=m;const{data:{user:v},error:g}=await this.getUser(e);if(g)return this._returnResult({data:null,error:g});((r=(n=v==null?void 0:v.factors)===null||n===void 0?void 0:n.filter(k=>k.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(y="aal2");const w=p.amr||[];return{data:{currentLevel:m,nextLevel:y,currentAuthenticationMethods:w},error:null}}catch(p){if(Y(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=vc(o.access_token);let c=null;l.aal&&(c=l.aal);let u=c;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(u="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ee(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new nn})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new nn});const o=await ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:i}=r;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new nn});const o=await ee(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await ee(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new nn})})}catch(e){if(Y(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?(await ee(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new nn})})}catch(n){if(Y(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+AR>s)return r;const{data:i,error:o}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=vc(r);n!=null&&n.allowExpired||ZR(i.exp);const c=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=eA(s.alg),d=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,o,BR(`${a}.${l}`)))throw new Qp("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Y(r))return this._returnResult({data:null,error:r});throw r}}}pl.nextInstanceID={};const MA=pl,OA="2.95.3";let da="";typeof Deno<"u"?da="deno":typeof document<"u"?da="web":typeof navigator<"u"&&navigator.product==="ReactNative"?da="react-native":da="node";const IA={"X-Client-Info":`supabase-js-${da}/${OA}`},PA={headers:IA},DA={schema:"public"},LA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$A={};function ml(t){"@babel/helpers - typeof";return ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ml(t)}function zA(t,e){if(ml(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ml(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BA(t){var e=zA(t,"string");return ml(e)=="symbol"?e:e+""}function UA(t,e,n){return(e=BA(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function We(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vv(Object(n),!0).forEach(function(r){UA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vv(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const FA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),HA=()=>Headers,VA=(t,e,n)=>{const r=FA(n),s=HA();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,We(We({},o),{},{headers:c}))}};function WA(t){return t.endsWith("/")?t:t+"/"}function KA(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:d}=e,f={db:We(We({},l),s),auth:We(We({},c),i),realtime:We(We({},u),o),storage:{},global:We(We(We({},d),a),{},{headers:We(We({},(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function qA(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(WA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var JA=class extends MA{constructor(t){super(t)}},GA=class{constructor(t,e,n){var r,s;this.supabaseUrl=t,this.supabaseKey=e;const i=qA(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:DA,realtime:$A,auth:We(We({},LA),{},{storageKey:o}),global:PA},l=KA(n??{},a);if(this.storageKey=(r=l.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(u,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var c;this.auth=this._initSupabaseAuthClient((c=l.auth)!==null&&c!==void 0?c:{},this.headers,l.global.fetch)}this.fetch=VA(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(We({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(u=>this.realtime.setAuth(u)).catch(u=>console.warn("Failed to set initial Realtime auth token:",u)),this.rest=new O2(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new TR(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new C2(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(e=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new JA({url:this.authUrl.href,headers:We(We({},f),u),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:r,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Y2(this.realtimeUrl.href,We(We({},t),{},{params:We(We({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const YA=(t,e,n)=>new GA(t,e,n);function QA(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}QA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XA="https://holeptxxbmpmhlkgzpoa.supabase.co",ZA="sb_publishable_p6Y6Ff7daOq0qNRUwD_aWQ_a14jcoFg",ls=YA(XA,ZA),ti={async saveStructure(t,e){const n=e.sections.map(s=>({id:s.id,title:s.title,titleTj:s.titleTj,topics:s.topics.map(i=>({id:i.id,title:i.title,titleTj:i.titleTj,lessons:i.lessons.map(o=>({id:o.id,title:o.title,titleTj:o.titleTj,type:o.type}))}))})),{error:r}=await ls.from("subject_syllabus").upsert({subject:t,data:{sections:n},updated_at:new Date},{onConflict:"subject"});if(r)throw console.error("  :",r),r;return!0},async getStructure(t){const{data:e,error:n}=await ls.from("subject_syllabus").select("data").eq("subject",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return e.data},async saveLesson(t,e){const{error:n}=await ls.from("lessons").upsert({id:t.id,title_ru:t.title,title_tj:t.titleTj,subject:e,content_ru:t.content,is_published:!0,updated_at:new Date},{onConflict:"id"});if(n)throw n;return!0},async getLesson(t){const{data:e,error:n}=await ls.from("lessons").select("*").eq("id",t).single();if(n){if(n.code==="PGRST116")return null;throw n}return{id:e.id,title:e.title_ru,titleTj:e.title_tj,content:e.content_ru,subject:e.subject}}},eM=({lang:t,t:e,userRole:n})=>{var f;const{subjectId:r}=Jd(),s=$o(),[i,o]=b.useState(null),[a,l]=b.useState(!0),c=n==="teacher",u=((f=Zd[r])==null?void 0:f[t])||r;if(b.useEffect(()=>{(async()=>{l(!0);try{const m=await ti.getStructure(r);if(m)o(m);else{console.warn(`No structure found in Supabase for ${r}, using Mock data`);const y=xi[r];y&&o(y)}}catch(m){console.error("Error fetching subject data:",m)}finally{l(!1)}})()},[r]),a)return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:h.jsx(tt,{size:40,className:"text-gaming-primary animate-spin"})});if(!i)return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white bg-gaming-bg",children:[h.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),h.jsx("button",{onClick:()=>s("/"),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const d=p=>t==="tj"&&p.titleTj?p.titleTj:p.title;return h.jsx(eh,{subjectId:r,lang:t,children:h.jsxs("div",{className:"max-w-5xl",children:[h.jsx("h1",{className:"text-4xl font-bold mb-2 text-white",children:u}),h.jsx("p",{className:"text-gaming-textMuted text-lg mb-8",children:t==="ru"?"   ":"    "}),h.jsx("div",{className:"space-y-4",children:i.sections.map((p,m)=>{const y=p.topics.flatMap(g=>g.lessons.map(x=>x.id)),v=Au(y);return h.jsxs(Ye,{to:`/subject/${r}/section/${p.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-primary/50 transition-all duration-300 hover:bg-gaming-card/60",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary group-hover:scale-110 transition-transform",children:h.jsx(Og,{size:24})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-primary transition-colors truncate",children:[m+1,". ",d(p)]}),h.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[p.topics.length," ",t==="ru"?"":"","  ",p.topics.reduce((g,x)=>g+x.lessons.length,0)," ",t==="ru"?"":""]})]}),v&&!c&&h.jsxs("div",{className:"mr-2 text-right",children:[h.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[v.avgErrorRate,"%"]}),h.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),h.jsx(Yd,{className:"text-white/20 group-hover:text-gaming-primary transition-colors shrink-0"})]},p.id)})})]})})},tM=({lang:t,t:e,userRole:n})=>{const{subjectId:r,sectionId:s}=Jd(),i=$o(),o=xi[r],a=o==null?void 0:o.sections.find(d=>d.id===s),l=n==="teacher",c=(o==null?void 0:o.sections.findIndex(d=>d.id===s))??-1;if(!a)return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white",children:[h.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),h.jsx("button",{onClick:()=>i(`/subject/${r}`),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const u=d=>t==="tj"&&d.titleTj?d.titleTj:d.title;return h.jsx(eh,{subjectId:r,lang:t,children:h.jsxs("div",{className:"max-w-5xl",children:[h.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-primary",children:[c+1,". ",u(a)]}),h.jsxs("p",{className:"text-gaming-textMuted mb-8",children:[a.topics.length," ",t==="ru"?"":""]}),(()=>{const d=a.topics.flatMap(p=>p.lessons.map(m=>m.id)),f=Au(d);return f&&!l?h.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gaming-accent/10 to-gaming-blue/10 rounded-2xl border border-white/5 flex items-center gap-6",children:[h.jsx("div",{className:"p-4 bg-gaming-accent/20 rounded-full text-gaming-accent",children:h.jsx(jn,{size:32})}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:[f.avgErrorRate,"%"]}),h.jsx("div",{className:"text-gaming-textMuted text-sm",children:t==="ru"?" %   ":" %   "}),h.jsx("div",{className:"text-xs text-gaming-textMuted mt-1 opacity-70",children:t==="ru"?`  ${f.completedLessons}  `:`  ${f.completedLessons}  `})]})]}):null})(),h.jsx("div",{className:"space-y-4",children:a.topics.map((d,f)=>{const p=d.lessons.map(y=>y.id),m=Au(p);return h.jsxs(Ye,{to:`/subject/${r}/section/${s}/topic/${d.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-accent/50 transition-all duration-300 hover:bg-gaming-card/60",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-accent/10 flex items-center justify-center text-gaming-accent group-hover:scale-110 transition-transform",children:h.jsx(jn,{size:24})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-accent transition-colors truncate",children:[c+1,".",f+1,". ",u(d)]}),h.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[d.lessons.length," ",t==="ru"?"":""]})]}),m&&!l&&h.jsxs("div",{className:"mr-2 text-right",children:[h.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[m.avgErrorRate,"%"]}),h.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),h.jsx(Yd,{className:"text-white/20 group-hover:text-gaming-accent transition-colors shrink-0"})]},d.id)})})]})})},nM=({lang:t,t:e,userRole:n})=>{const{subjectId:r,sectionId:s,topicId:i}=Jd(),o=$o(),a=xi[r],l=a==null?void 0:a.sections.find(m=>m.id===s),c=n==="teacher",u=(a==null?void 0:a.sections.findIndex(m=>m.id===s))??-1,d=l==null?void 0:l.topics.find(m=>m.id===i),f=(l==null?void 0:l.topics.findIndex(m=>m.id===i))??-1;if(!d)return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white",children:[h.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),h.jsx("button",{onClick:()=>o(`/subject/${r}/section/${s}`),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const p=m=>t==="tj"&&m.titleTj?m.titleTj:m.title;return h.jsx(eh,{subjectId:r,lang:t,children:h.jsxs("div",{className:"max-w-5xl",children:[h.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-accent",children:[u+1,".",f+1,". ",p(d)]}),h.jsxs("p",{className:"text-gaming-textMuted mb-8",children:[d.lessons.length," ",t==="ru"?"":""]}),(()=>{const m=Au(d.lessons.map(y=>y.id));return m&&!c?h.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gaming-primary/10 to-gaming-purple/10 rounded-2xl border border-white/5 flex items-center gap-6",children:[h.jsx("div",{className:"p-4 bg-gaming-primary/20 rounded-full text-gaming-primary",children:h.jsx(jn,{size:32})}),h.jsxs("div",{children:[h.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:[m.avgErrorRate,"%"]}),h.jsx("div",{className:"text-gaming-textMuted text-sm",children:t==="ru"?" %   ":" %   "}),h.jsx("div",{className:"text-xs text-gaming-textMuted mt-1 opacity-70",children:t==="ru"?`  ${m.completedLessons}  `:`  ${m.completedLessons}  `})]})]}):null})(),h.jsx("div",{className:"space-y-4",children:d.lessons.map((m,y)=>{const v=X1(m.id);return h.jsxs(Ye,{to:`/lesson/${m.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-pink/50 transition-all duration-300 hover:bg-gaming-card/60",children:[h.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-pink/10 flex items-center justify-center text-gaming-pink group-hover:scale-110 transition-transform",children:m.type==="video"?h.jsx(J1,{size:24}):h.jsx(jn,{size:24})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-pink transition-colors truncate",children:[y+1,". ",p(m)]}),h.jsx("span",{className:"uppercase text-[10px] font-bold bg-white/5 border border-white/10 px-2 py-0.5 rounded text-gaming-textMuted tracking-wider",children:m.type==="video"?"":t==="ru"?"":""})]}),v&&!c&&h.jsxs("div",{className:"mr-2 text-right",children:[h.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[v.avgErrorRate,"%"]}),h.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),h.jsx(Yd,{className:"text-white/20 group-hover:text-gaming-pink transition-colors shrink-0"})]},m.id)})})]})})},rM=({slides:t,lessonId:e,lang:n,onClose:r,onSlideView:s})=>{const i=ve.useRef(null),[o,a]=b.useState(0),[l,c]=b.useState(!1),[u,d]=b.useState(()=>{const E=localStorage.getItem(`viewed_slides_${e}`);return E?JSON.parse(E):[]}),f=t[o];b.useEffect(()=>{if(f&&!u.includes(f.id)){const E=[...u,f.id];d(E),localStorage.setItem(`viewed_slides_${e}`,JSON.stringify(E)),s&&s(f.id)}},[o,f,u,e,s]);const p=b.useCallback(E=>{E.key==="ArrowLeft"||E.key==="ArrowUp"?a(N=>N>0?N-1:N):E.key==="ArrowRight"||E.key==="ArrowDown"||E.key===" "?a(N=>N<t.length-1?N+1:N):E.key==="Escape"?l?c(!1):r():(E.key==="f"||E.key==="F")&&c(N=>!N)},[t.length,l,r]);b.useEffect(()=>(window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)),[p]),b.useEffect(()=>{const E=()=>{c(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",E),i.current&&i.current.requestFullscreen().catch(N=>{console.log("Auto-fullscreen blocked:",N)}),()=>{document.removeEventListener("fullscreenchange",E),document.fullscreenElement&&document.exitFullscreen().catch(N=>console.log("Exit fullscreen error:",N))}},[]);const[m,y]=b.useState(null),v=E=>{y(E.touches[0].clientX)},g=E=>{if(!m)return;const N=E.changedTouches[0].clientX,A=m-N;Math.abs(A)>50&&(A>0&&o<t.length-1?a(P=>P+1):A<0&&o>0&&a(P=>P-1)),y(null)},x=()=>a(E=>E>0?E-1:E),w=()=>a(E=>E<t.length-1?E+1:E),k=()=>{var E;document.fullscreenElement?document.exitFullscreen().catch(N=>console.log(N)):(E=i.current)==null||E.requestFullscreen().catch(N=>console.log(N))},S=l?"fixed inset-0 z-[100] bg-black":"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",C=l?"w-full h-full flex items-center justify-center":"w-full max-w-5xl max-h-[80vh] flex items-center justify-center";return h.jsxs("div",{ref:i,className:S,onTouchStart:v,onTouchEnd:g,children:[!l&&h.jsxs("div",{className:"absolute top-4 left-4 right-4 flex items-center justify-between z-10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-white/70 text-sm",children:[o+1," / ",t.length]}),u.includes(f==null?void 0:f.id)&&h.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:[h.jsx(Dn,{size:12}),n==="ru"?"":" "]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:k,className:"p-2 text-white/70 hover:text-white transition-colors rounded-lg hover:bg-white/10",title:"Fullscreen (F)",children:h.jsx(i2,{size:20})}),h.jsx("button",{onClick:r,className:"p-2 text-white/70 hover:text-white transition-colors rounded-lg hover:bg-white/10",children:h.jsx(Ns,{size:24})})]})]}),l&&h.jsx("div",{className:"absolute top-4 right-4 z-10",children:h.jsx("button",{onClick:r,className:"p-2 text-white/50 hover:text-white transition-colors",children:h.jsx(Ns,{size:24})})}),h.jsx("div",{className:C,children:f&&h.jsx("img",{src:f.imageUrl,alt:n==="tj"&&f.captionTj||f.captionRu,className:l?"max-w-full max-h-full object-contain":"max-w-full max-h-[70vh] object-contain rounded-lg"})}),!l&&f&&(f.captionRu||f.captionTj)&&h.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 max-w-2xl text-center",children:h.jsx("p",{className:"text-white/90 text-lg bg-black/50 px-6 py-3 rounded-xl backdrop-blur-sm",children:n==="tj"&&f.captionTj||f.captionRu})}),h.jsx("button",{onClick:x,disabled:o===0,className:`absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full transition-all ${o===0?"text-white/20 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"}`,children:h.jsx(Qd,{size:32})}),h.jsx("button",{onClick:w,disabled:o===t.length-1,className:`absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full transition-all ${o===t.length-1?"text-white/20 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"}`,children:h.jsx(Ts,{size:32})}),h.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-2",children:t.map((E,N)=>h.jsx("button",{onClick:()=>a(N),className:`w-2 h-2 rounded-full transition-all ${N===o?"bg-white w-4":u.includes(E.id)?"bg-green-500/70 hover:bg-green-500":"bg-white/30 hover:bg-white/50"}`},E.id))}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:h.jsx("div",{className:"h-full bg-gaming-primary transition-all duration-300",style:{width:`${(o+1)/t.length*100}%`}})})]})},xc=t=>{const e=[...t];for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e},hf=80,sM=({questions:t,lessonId:e,lang:n,onClose:r,onComplete:s})=>{const[i,o]=b.useState(0),[a,l]=b.useState({}),[c,u]=b.useState(!1),[d,f]=b.useState(0),[p,m]=b.useState(!0);ve.useEffect(()=>{const R=()=>{const T=document.hasFocus()&&!document.hidden;m(T)};window.addEventListener("focus",R),window.addEventListener("blur",R),document.addEventListener("visibilitychange",R);const _=setInterval(R,300);return()=>{window.removeEventListener("focus",R),window.removeEventListener("blur",R),document.removeEventListener("visibilitychange",R),clearInterval(_)}},[]);const y=b.useMemo(()=>t?xc(t).slice(0,10).map(T=>T.type==="multiple_choice"?{...T,options:xc(T.options)}:T.type==="matching"?{...T,leftItems:xc(T.leftItems),rightItems:xc(T.rightItems)}:T):[],[t,d]),v=y[i],g=y.length,x=(R,_)=>{l(T=>({...T,[R]:_}))},w=()=>{i<g-1&&o(R=>R+1)},k=()=>{i>0&&o(R=>R-1)},[S,C]=b.useState(null),E=()=>{let R=0;const _=y.map(F=>{const K=a[F.id];let se=!1;if(F.type==="multiple_choice")se=K===F.correctId;else if(F.type==="matching")se=Object.entries(F.correctMatches).every(([G,Ce])=>(K==null?void 0:K[G])===Ce);else if(F.type==="numeric"){const G=F.digits.join("");se=K===G}return se&&R++,{question:F,userAnswer:K,isCorrect:se}}),T=Math.round(R/g*100),O=T>=hf,j=`test_history_${e}`,I=JSON.parse(localStorage.getItem(j)||"[]"),B={score:T,correct:R,total:g,timestamp:Date.now(),passed:O},L=[...I,B];if(localStorage.setItem(j,JSON.stringify(L)),localStorage.setItem(`test_result_${e}`,JSON.stringify(B)),O){const F=parseInt(localStorage.getItem("user_coins")||"0");localStorage.setItem("user_coins",(F+1).toString())}C({correct:R,total:g,score:T,isPassed:O,details:_}),u(!0)},N=()=>{o(0),l({}),C(null),u(!1),f(R=>R+1)},A=R=>n==="tj"&&R.textTj||R.textRu,P=R=>n==="tj"&&R.textTj||R.textRu;return!t||t.length===0?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"bg-gaming-card/95 rounded-2xl p-8 text-center max-w-md",children:[h.jsx(dc,{size:48,className:"mx-auto mb-4 text-red-400"}),h.jsx("h3",{className:"text-xl font-bold mb-2",children:n==="ru"?" ":" "}),h.jsx("p",{className:"text-gaming-textMuted mb-4",children:n==="ru"?"    ":"   "}),h.jsx("button",{onClick:r,className:"px-6 py-2 bg-gaming-primary text-white rounded-xl",children:n==="ru"?"":""})]})}):c&&S?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 overflow-y-auto",children:h.jsxs("div",{className:"w-full max-w-2xl bg-gaming-card/95 rounded-3xl border border-white/10 my-8",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 text-center relative overflow-hidden",children:[S.isPassed?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute inset-0 bg-green-500/10"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-yellow-400 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(250,204,21,0.6)] animate-bounce",children:h.jsx("div",{className:"w-20 h-20 border-4 border-yellow-600 rounded-full flex items-center justify-center bg-yellow-300",children:h.jsx("span",{className:"text-4xl font-bold text-yellow-700",children:"$"})})}),h.jsx("h2",{className:"text-3xl font-bold mb-2 text-green-400",children:n==="ru"?" !":"  !"}),h.jsx("p",{className:"text-green-300/80 mb-2",children:n==="ru"?"+1   ":"+1   "})]})]}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute inset-0 bg-red-500/10"}),h.jsxs("div",{className:"relative z-10",children:[h.jsx(dc,{size:64,className:"mx-auto mb-4 text-red-500"}),h.jsx("h2",{className:"text-3xl font-bold mb-2 text-red-400",children:n==="ru"?"  ":"  "}),h.jsx("p",{className:"text-red-300/80 mb-2",children:n==="ru"?`   ${hf}%`:`   ${hf}% `})]})]}),h.jsxs("div",{className:`text-5xl font-bold mb-2 relative z-10 ${S.isPassed?"text-green-400":"text-red-400"}`,children:[S.score,"%"]}),h.jsxs("p",{className:"text-gaming-textMuted relative z-10",children:[S.correct," / ",S.total," ",n==="ru"?" ":" "]})]}),h.jsx("div",{className:"p-6 max-h-[50vh] overflow-y-auto space-y-4",children:S.details.map((R,_)=>h.jsx("div",{className:`p-4 rounded-xl border ${R.isCorrect?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:h.jsxs("div",{className:"flex items-start gap-3",children:[R.isCorrect?h.jsx(li,{className:"text-green-400 mt-1",size:20}):h.jsx(dc,{className:"text-red-400 mt-1",size:20}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"font-medium mb-1 flex gap-1",children:[h.jsxs("span",{children:[_+1,"."]}),h.jsx("div",{dangerouslySetInnerHTML:{__html:A(R.question)},className:"[&>p]:inline [&>p]:m-0"})]}),!R.isCorrect&&R.question.type==="multiple_choice"&&h.jsxs("div",{className:"text-sm text-green-400 flex flex-wrap gap-1",children:[h.jsx("span",{children:n==="ru"?" : ":" : "}),h.jsx("span",{className:"font-semibold",children:P(R.question.options.find(T=>T.id===R.question.correctId))})]})]})]})},R.question.id))}),h.jsxs("div",{className:"p-6 border-t border-white/10 flex gap-4 justify-center",children:[h.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-6 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20",children:[h.jsx(G1,{size:18}),n==="ru"?" ":" "]}),S.isPassed&&h.jsxs("button",{onClick:()=>{s&&s(S),r()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 shadow-[0_0_15px_rgba(22,163,74,0.5)]",children:[h.jsx(li,{size:18}),n==="ru"?" ":" "]})]})]})}):h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 select-none",onContextMenu:R=>R.preventDefault(),style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},children:[!p&&h.jsx("div",{className:"fixed inset-0 z-[100] backdrop-blur-3xl flex items-center justify-center bg-black/90 cursor-not-allowed",onClick:R=>R.stopPropagation(),children:h.jsxs("div",{className:"text-center p-6",children:[h.jsx(dc,{size:64,className:"mx-auto mb-4 text-red-500 animate-pulse"}),h.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:n==="ru"?"  !":"  !"}),h.jsx("p",{className:"text-white/80",children:n==="ru"?"    ":"       "})]})}),h.jsxs("div",{className:`w-full max-w-2xl bg-gaming-card/95 rounded-3xl border border-white/10 overflow-hidden relative transition-all duration-300 ${p?"":"opacity-0 pointer-events-none"}`,children:[h.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden opacity-[0.03] flex flex-wrap content-center justify-center gap-8 rotate-12 scale-150",children:Array.from({length:20}).map((R,_)=>h.jsx("div",{className:"text-2xl font-black text-white whitespace-nowrap",children:"DONISHMAND PLATFORM"},_))}),h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 relative z-10",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("span",{className:"text-lg font-semibold",children:[n==="ru"?"":""," ",i+1," / ",g]}),h.jsx("div",{className:"flex gap-1",children:y.map((R,_)=>{var T;return h.jsx("div",{className:`w-2 h-2 rounded-full ${_===i?"bg-gaming-primary":a[(T=y[_])==null?void 0:T.id]?"bg-green-500":"bg-white/20"}`},_)})})]}),h.jsx("button",{onClick:r,className:"p-2 text-gaming-textMuted hover:text-white",children:h.jsx(Ns,{size:24})})]}),h.jsxs("div",{className:"p-6 relative z-10",children:[h.jsx("div",{className:"text-xl font-medium mb-6 prose prose-invert max-w-none [&>p]:inline [&>p]:m-0",dangerouslySetInnerHTML:{__html:A(v)}}),v.image&&h.jsx("div",{className:"mb-6 rounded-xl overflow-hidden border border-white/10 bg-black/20 flex justify-center",children:h.jsx("img",{src:v.image,alt:"Question",className:"max-w-full max-h-[400px] object-contain"})}),v.type==="multiple_choice"&&h.jsx("div",{className:"space-y-3",children:v.options.map((R,_)=>{const T=a[v.id]===R.id;return h.jsxs("button",{onClick:()=>x(v.id,R.id),className:`w-full flex items-center gap-4 p-4 rounded-xl border transition-all text-left ${T?"bg-gaming-primary/20 border-gaming-primary":"bg-white/5 border-white/10 hover:bg-white/10"}`,children:[h.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0 ${T?"bg-gaming-primary text-white":"bg-white/10"}`,children:String.fromCharCode(65+_)}),h.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[h.jsx("span",{children:P(R)}),R.image&&h.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-[200px]",children:h.jsx("img",{src:R.image,alt:"Option",className:"w-full h-auto object-cover"})})]})]},R.id)})}),v.type==="matching"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4 border-b border-white/10",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-xs font-bold text-gaming-pink uppercase tracking-wider mb-2",children:n==="ru"?" 1":" 1"}),v.leftItems.map((R,_)=>h.jsxs("div",{className:"text-sm flex gap-2 items-start",children:[h.jsxs("span",{className:"font-bold text-gaming-pink min-w-[20px] pt-1",children:[String.fromCharCode(65+_),")"]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{className:"text-gaming-textMuted leading-tight",children:P(R)}),R.image&&h.jsx("img",{src:R.image,alt:"Item",className:"w-24 h-24 object-cover rounded-lg border border-white/10"})]})]},R.id))]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-xs font-bold text-gaming-accent uppercase tracking-wider mb-2",children:n==="ru"?" 2":" 2"}),v.rightItems.map((R,_)=>h.jsxs("div",{className:"text-sm flex gap-2 items-start",children:[h.jsxs("span",{className:"font-bold text-gaming-accent min-w-[20px] pt-1",children:[_+1,")"]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{className:"text-gaming-textMuted leading-tight",children:P(R)}),R.image&&h.jsx("img",{src:R.image,alt:"Item",className:"w-24 h-24 object-cover rounded-lg border border-white/10"})]})]},R.id))]})]}),h.jsx("p",{className:"text-sm text-gaming-textMuted text-center",children:n==="ru"?"   :":"    :"}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"overflow-x-auto max-w-full pb-2",children:h.jsxs("table",{className:"border-separate border-spacing-1",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{className:"w-8"}),v.rightItems.map((R,_)=>h.jsx("th",{className:"text-center font-bold text-gaming-accent text-sm p-1",children:_+1},R.id))]})}),h.jsx("tbody",{children:v.leftItems.map((R,_)=>h.jsxs("tr",{children:[h.jsx("td",{className:"text-center font-bold text-gaming-pink text-sm p-1",children:String.fromCharCode(65+_)}),v.rightItems.map(T=>{var j;const O=((j=a[v.id])==null?void 0:j[R.id])===T.id;return h.jsx("td",{className:"text-center p-0.5",children:h.jsx("button",{onClick:()=>x(v.id,{...a[v.id]||{},[R.id]:T.id}),className:`w-8 h-8 rounded-full border-2 transition-all flex items-center justify-center
                                                                        ${O?"bg-gaming-primary border-gaming-primary":"bg-white/5 border-white/20 hover:border-white/40"}`,children:O&&h.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})},T.id)})]},R.id))})]})})})]}),v.type==="numeric"&&h.jsxs("div",{className:"space-y-4",children:[h.jsx("p",{className:"text-sm text-gaming-textMuted",children:n==="ru"?" :":"  :"}),h.jsxs("div",{className:"flex items-center justify-center gap-2",children:[[0,1,2,3].map(R=>h.jsx("input",{type:"text",maxLength:1,value:(a[v.id]||"")[R]||"",onChange:_=>{const T=_.target.value;if(T&&!/^\d$/.test(T))return;const j=(a[v.id]||"").split("");if(j[R]=T,x(v.id,j.join("")),T&&R<3){const I=_.target.nextElementSibling;I&&I.focus()}},className:"w-14 h-14 text-center text-2xl font-bold bg-gaming-bg/50 border-2 border-white/20 rounded-lg text-white focus:outline-none focus:border-gaming-primary"},R)),v.unit&&h.jsx("span",{className:"text-xl text-gaming-textMuted ml-2",children:v.unit})]})]})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-white/10 relative z-10",children:[h.jsxs("button",{onClick:k,disabled:i===0,className:`flex items-center gap-2 px-4 py-2 rounded-xl ${i===0?"text-white/30 cursor-not-allowed":"text-white hover:bg-white/10"}`,children:[h.jsx(Qd,{size:18}),n==="ru"?"":""]}),i===g-1?h.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-6 py-2 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80",children:[h.jsx(li,{size:18}),n==="ru"?" ":" "]}):h.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 text-white hover:bg-white/10 rounded-xl",children:[n==="ru"?"":"",h.jsx(Ts,{size:18})]})]})]})]})},iM=({questions:t,lang:e,onClose:n})=>{const[r,s]=b.useState(!1),[i,o]=b.useState({});if(!t||t.length===0)return null;const a=d=>{o(f=>({...f,[d]:!f[d]}))},l=()=>{const d=!r;s(d);const f={};t.forEach(p=>f[p.id]=d),o(f)},c=d=>e==="tj"&&d.textTj||d.textRu,u=d=>e==="tj"&&d.textTj||d.textRu;return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 overflow-y-auto",children:h.jsxs("div",{className:"w-full max-w-4xl bg-gaming-card/95 rounded-3xl border border-white/10 my-8 shadow-2xl flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 shrink-0",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:e==="ru"?" :  ":" :  "}),h.jsxs("p",{className:"text-gaming-textMuted text-sm",children:[t.length," ",e==="ru"?"":""]})]}),h.jsx("button",{onClick:n,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:h.jsx(Ns,{size:24})})]}),h.jsx("div",{className:"p-4 bg-black/20 border-b border-white/5 flex justify-between items-center shrink-0",children:h.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${r?"bg-gaming-primary text-white":"bg-white/10 text-gaming-textMuted hover:text-white"}`,children:[r?h.jsx(K0,{size:18}):h.jsx(Ta,{size:18}),r?e==="ru"?"  ":"  ":e==="ru"?"  ":"  "]})}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:t.map((d,f)=>{const p=i[d.id];return h.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/5",children:[h.jsxs("div",{className:"flex justify-between items-start gap-4 mb-4",children:[h.jsxs("div",{className:"flex gap-3",children:[h.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gaming-pink/10 text-gaming-pink rounded-lg flex items-center justify-center font-bold text-sm border border-gaming-pink/20",children:f+1}),h.jsx("div",{className:"text-lg font-medium text-white pt-1 prose prose-invert max-w-none [&>p]:inline [&>p]:m-0",dangerouslySetInnerHTML:{__html:c(d)}}),d.image&&h.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-md",children:h.jsx("img",{src:d.image,alt:"Question",className:"w-full h-auto object-cover"})})]}),h.jsx("button",{onClick:()=>a(d.id),className:`p-2 rounded-lg transition-colors ${p?"text-gaming-primary bg-gaming-primary/10":"text-gaming-textMuted hover:bg-white/5"}`,title:e==="ru"?"/ ":" / ",children:p?h.jsx(K0,{size:20}):h.jsx(Ta,{size:20})})]}),h.jsxs("div",{className:"transition-all duration-300",children:[d.type==="multiple_choice"&&h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pl-11",children:d.options.map((m,y)=>{const g=m.id===d.correctId&&p;return h.jsxs("div",{className:`p-3 rounded-xl border flex items-center gap-3 transition-all duration-300 ${g?"bg-green-500/10 border-green-500/30 text-green-400 font-bold":"bg-black/20 border-white/5 text-gaming-textMuted"}`,children:[h.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs transition-colors ${g?"bg-green-500 text-white":"bg-white/10"}`,children:String.fromCharCode(65+y)}),h.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[h.jsx("span",{children:u(m)}),m.image&&h.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-[150px]",children:h.jsx("img",{src:m.image,alt:"Option",className:"w-full h-auto object-cover"})})]}),g&&h.jsx(li,{size:16,className:"ml-auto animate-in zoom-in duration-300 shrink-0"})]},m.id)})}),d.type==="matching"&&h.jsxs("div",{className:"pl-11 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gaming-textMuted uppercase mb-2",children:e==="ru"?"":""}),d.leftItems.map((m,y)=>h.jsxs("div",{className:"mb-2 text-sm flex gap-2 items-start",children:[h.jsxs("span",{className:"text-gaming-pink font-bold mt-0.5",children:[String.fromCharCode(65+y),")"]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{className:"text-white/80",children:u(m)}),m.image&&h.jsx("img",{src:m.image,alt:"Item",className:"w-16 h-16 object-cover rounded-md border border-white/10"})]})]},m.id))]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs text-gaming-textMuted uppercase mb-2",children:e==="ru"?"":""}),d.rightItems.map((m,y)=>h.jsxs("div",{className:"mb-2 text-sm flex gap-2 items-start",children:[h.jsxs("span",{className:"text-gaming-accent font-bold mt-0.5",children:[y+1,")"]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("span",{className:"text-white/80",children:u(m)}),m.image&&h.jsx("img",{src:m.image,alt:"Item",className:"w-16 h-16 object-cover rounded-md border border-white/10"})]})]},m.id))]})]}),p&&h.jsxs("div",{className:"p-4 bg-green-500/5 border border-green-500/20 rounded-xl animate-in fade-in slide-in-from-top-2 duration-300",children:[h.jsx("p",{className:"text-sm text-green-400 font-bold mb-2",children:e==="ru"?" :":" :"}),h.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(d.correctMatches).map(([m,y])=>{const v=d.leftItems.findIndex(x=>x.id===m),g=d.rightItems.findIndex(x=>x.id===y);return h.jsxs("span",{className:"px-2 py-1 bg-green-500/10 rounded border border-green-500/20 text-sm",children:[String.fromCharCode(65+v),"  ",g+1]},m)})})]})]}),d.type==="numeric"&&h.jsx("div",{className:"pl-11",children:h.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-green-500/5 border border-white/5 rounded-xl transition-all duration-300",children:[h.jsx("span",{className:"text-sm text-gaming-textMuted",children:e==="ru"?":":":"}),h.jsx("span",{className:`text-xl font-bold tracking-widest transition-all duration-300 ${p?"text-green-400":"text-white/20"}`,children:p?d.digits.join(""):"****"}),d.unit&&h.jsx("span",{className:"text-gaming-textMuted",children:d.unit}),p&&h.jsx(li,{size:16,className:"text-green-400 animate-in zoom-in"})]})})]})]},d.id)})})]})})},Li=(t,e)=>`progress_${t}_${e}`,oM=({lang:t,t:e,userRole:n})=>{var en,zr,Yn,zs,Br,Bs,ji,Qn,He;const{lessonId:r}=Jd(),s=$o(),i=80,[o,a]=b.useState(!0),[l,c]=b.useState(null),[u,d]=b.useState(()=>({videoWatched:localStorage.getItem(Li(r,"video"))==="true",textRead:localStorage.getItem(Li(r,"text"))==="true",slidesViewed:JSON.parse(localStorage.getItem(Li(r,"slides"))||"[]"),testHistory:JSON.parse(localStorage.getItem(`test_history_${r}`)||"[]")})),[f,p]=b.useState("video"),[m,y]=b.useState(!1),[v,g]=b.useState(!1),[x,w]=b.useState(!1),k=n==="teacher";b.useEffect(()=>{(async()=>{a(!0);try{const ke=await ti.getLesson(r);if(!ke){c(null),a(!1);return}const Pe=ke.subject;let mn=null;if(Pe){const Xn=await ti.getStructure(Pe);if(Xn&&Xn.sections)for(let Zn=0;Zn<Xn.sections.length;Zn++){const Ot=Xn.sections[Zn];for(let On=0;On<Ot.topics.length;On++){const M=Ot.topics[On],H=M.lessons.findIndex(ie=>ie.id===r);if(H!==-1){mn={lesson:{...ke,...M.lessons[H],content:ke.content},topic:M,section:Ot,subjectKey:Pe,lessonIndex:H,topicIndex:On,sectionIndex:Zn};break}}if(mn)break}}c(mn||{lesson:ke,subjectKey:Pe})}catch(ke){console.error("Error fetching lesson:",ke)}finally{a(!1)}})()},[r]);const S=((en=l==null?void 0:l.lesson)==null?void 0:en.content)||{},C=!!((zr=S.video)!=null&&zr.url),E=!!((Yn=S.text)!=null&&Yn.bodyRu||(zs=S.text)!=null&&zs.bodyTj),N=t==="tj"?S.slidesTj||[]:S.slidesRu||[],A=N.length>0,P=((Bs=(Br=S.test)==null?void 0:Br.questions)==null?void 0:Bs.length)>0,R=C||E||A,_=((ji=S.test)==null?void 0:ji.questions)||[],T=b.useMemo(()=>{if(!u.testHistory||u.testHistory.length===0)return null;const de=u.testHistory.length,ke=Math.max(...u.testHistory.map(Ot=>Ot.score)),Pe=u.testHistory.reduce((Ot,On)=>Ot+On.score,0)/de,mn=Math.round(100-Pe),Xn=u.testHistory[u.testHistory.length-1].timestamp,Zn=ke>=i;return{totalAttempts:de,bestScore:ke,avgErrorRate:mn,lastAttemptAt:Xn,isPassed:Zn}},[u.testHistory]),O=N.length,j=u.slidesViewed.length,I=O>0?j>=O:!0,B=!C||u.videoWatched,L=!E||u.textRead,K=k||B&&L&&(!A||I),se=[C,E,A,P].filter(Boolean).length;let G=0;C&&u.videoWatched&&G++,E&&u.textRead&&G++,A&&I&&G++,P&&(T!=null&&T.isPassed)&&G++;const Ce=se>0?Math.round(G/se*100):0;b.useEffect(()=>{!o&&l&&(C?p("video"):E?p("text"):A&&p("slides"))},[o,C,E,A]);const je=()=>{k||(localStorage.setItem(Li(r,"video"),"true"),d(de=>({...de,videoWatched:!0})))},St=()=>{k||u.textRead||(localStorage.setItem(Li(r,"text"),"true"),d(de=>({...de,textRead:!0})))},Te=de=>{if(k)return;const ke=[...new Set([...u.slidesViewed,de])];localStorage.setItem(Li(r,"slides"),JSON.stringify(ke)),d(Pe=>({...Pe,slidesViewed:ke}))},fn=()=>{K?w(!0):g(!0)},An=de=>{console.log("Test completed:",de);const ke=JSON.parse(localStorage.getItem(`test_history_${r}`)||"[]");d(Pe=>({...Pe,testHistory:ke}))};if(o)return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:h.jsx(tt,{size:40,className:"text-gaming-primary animate-spin"})});if(!l)return h.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white bg-gaming-bg",children:[h.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),h.jsx("button",{onClick:()=>s(-1),className:"text-gaming-primary hover:underline",children:t==="ru"?"":""})]});const{lesson:Mt,topic:ue,section:$r,subjectKey:Ut,lessonIndex:Xt,sectionIndex:Zt,topicIndex:Gn}=l,pn=de=>t==="tj"&&de.titleTj?de.titleTj:de.title,Ls=(Qn=ue==null?void 0:ue.lessons)==null?void 0:Qn[Xt-1],$s=(He=ue==null?void 0:ue.lessons)==null?void 0:He[Xt+1],Mn=[];return C&&Mn.push({id:"video",icon:ll,label:{ru:"",tj:""},complete:u.videoWatched}),E&&Mn.push({id:"text",icon:jn,label:{ru:"",tj:""},complete:u.textRead}),A&&Mn.push({id:"slides",icon:as,label:{ru:"",tj:""},complete:I}),h.jsxs(eh,{subjectId:Ut,lang:t,children:[h.jsxs("div",{className:"max-w-4xl",children:[h.jsx("header",{className:"mb-6",children:h.jsxs("div",{className:"flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsxs("p",{className:"text-sm text-gaming-textMuted mb-1",children:[t==="ru"?"":""," ",Xt+1," / ",ue.lessons.length]}),h.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-pink",children:[Xt+1,". ",pn(Mt)]}),h.jsx("p",{className:"text-gaming-textMuted flex items-center gap-2 text-sm",children:h.jsxs("span",{children:[Zt+1,".",Gn+1,". ",pn(ue)]})})]}),k&&h.jsx("div",{className:"px-3 py-1 bg-gaming-pink text-white text-xs font-bold rounded-full uppercase tracking-wider animate-pulse",children:t==="ru"?" ":" "})]})}),!k&&h.jsxs("div",{className:"mb-8 bg-gradient-to-br from-gaming-primary/20 to-gaming-pink/20 backdrop-blur-xl border border-white/10 rounded-2xl p-6 relative overflow-hidden",children:[h.jsxs("div",{className:"relative z-10",children:[h.jsxs("div",{className:"flex justify-between items-end mb-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-bold text-lg mb-1",children:t==="ru"?" ":" "}),h.jsxs("p",{className:"text-gaming-textMuted text-sm",children:[G," / ",se," ",t==="ru"?" ":"  "]})]}),h.jsx("div",{className:"text-right",children:h.jsxs("div",{className:"text-3xl font-bold text-gaming-primary",children:[Ce,"%"]})})]}),h.jsx("div",{className:"w-full h-3 bg-black/30 rounded-full mb-6 overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink transition-all duration-1000 ease-out",style:{width:`${Ce}%`}})}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[C&&h.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${u.videoWatched?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u.videoWatched?"bg-green-500/20":"bg-white/10"}`,children:u.videoWatched?h.jsx(Dn,{size:20}):h.jsx(ll,{size:20})}),h.jsx("span",{className:"font-medium text-sm",children:""})]}),E&&h.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${u.textRead?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u.textRead?"bg-green-500/20":"bg-white/10"}`,children:u.textRead?h.jsx(Dn,{size:20}):h.jsx(jn,{size:20})}),h.jsx("span",{className:"font-medium text-sm",children:t==="ru"?"":""})]}),A&&h.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${I?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${I?"bg-green-500/20":"bg-white/10"}`,children:I?h.jsx(Dn,{size:20}):h.jsx(as,{size:20})}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"font-medium text-sm",children:t==="ru"?"":""}),h.jsxs("span",{className:"text-xs opacity-70",children:[j,"/",O]})]})]}),P&&h.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${T!=null&&T.isPassed?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${T!=null&&T.isPassed?"bg-green-500/20":"bg-white/10"}`,children:T!=null&&T.isPassed?h.jsx(Dn,{size:20}):h.jsx(li,{size:20})}),h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("span",{className:"font-medium text-sm",children:""}),T&&h.jsxs("span",{className:"text-xs font-bold",children:[T.bestScore,"%"]})]})]})]})]}),T&&h.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex flex-wrap gap-4",children:[h.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[h.jsx(G1,{size:18,className:"text-gaming-gold"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:t==="ru"?"":""}),h.jsx("div",{className:"font-bold text-white",children:T.totalAttempts})]})]}),h.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[h.jsx(qj,{size:18,className:"text-gaming-primary"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:t==="ru"?"":""}),h.jsx("div",{className:"font-bold text-white",children:T.lastAttemptAt?new Intl.DateTimeFormat(t==="tj"?"tg-TJ":"ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(new Date(T.lastAttemptAt)):"-"})]})]})]})]}),R?h.jsxs(h.Fragment,{children:[Mn.length>0&&h.jsx("div",{className:"flex gap-4 mb-6 border-b border-white/5 overflow-x-auto",children:Mn.map(de=>{const ke=de.icon;return h.jsxs("button",{onClick:()=>p(de.id),className:`pb-3 px-2 text-base font-semibold transition-all relative flex items-center gap-2 whitespace-nowrap ${f===de.id?"text-white":"text-gaming-textMuted hover:text-white"}`,children:[h.jsx(ke,{size:18}),de.label[t],de.complete&&!k&&h.jsx(Dn,{size:14,className:"text-green-400"}),f===de.id&&h.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gaming-pink rounded-t-full shadow-[0_0_10px_rgba(236,72,153,0.5)]"})]},de.id)})}),h.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-6 mb-6 shadow-xl overflow-hidden relative group",children:[h.jsx("div",{className:"absolute -left-20 -top-20 w-64 h-64 bg-gaming-pink/5 rounded-full blur-3xl group-hover:bg-gaming-pink/10 transition-all duration-700"}),h.jsxs("div",{className:"relative z-10",children:[f==="video"&&C&&h.jsxs("div",{className:"aspect-video bg-black/60 rounded-xl flex flex-col items-center justify-center border border-white/10 shadow-inner overflow-hidden relative",children:[S.video.url.includes("youtube")||S.video.url.includes("youtu.be")?h.jsx("iframe",{src:S.video.url.replace("watch?v=","embed/"),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:je}):h.jsx("video",{src:S.video.url,controls:!0,className:"w-full h-full",onEnded:je,onPlay:()=>setTimeout(je,3e4)}),!u.videoWatched&&!k&&h.jsxs("button",{onClick:je,className:"absolute bottom-4 right-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[h.jsx(Ta,{size:16}),t==="ru"?"  ":"   "]})]}),f==="text"&&E&&h.jsxs("div",{className:"prose prose-invert max-w-none prose-p:text-gaming-textMuted prose-headings:text-white prose-li:text-gaming-textMuted",onScroll:de=>{const{scrollTop:ke,scrollHeight:Pe,clientHeight:mn}=de.target;ke+mn>=Pe-50&&St()},children:[h.jsx("div",{dangerouslySetInnerHTML:{__html:t==="tj"&&S.text.bodyTj||S.text.bodyRu}}),!u.textRead&&!k&&h.jsxs("button",{onClick:St,className:"mt-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[h.jsx(Ta,{size:16}),t==="ru"?"  ":"   "]})]}),f==="slides"&&A&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("p",{className:"text-gaming-textMuted",children:[j," / ",O," ",t==="ru"?" ":"  "]}),h.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gaming-gold/20 text-gaming-gold rounded-xl hover:bg-gaming-gold/30 transition-colors",children:[h.jsx(as,{size:18}),t==="ru"?" ":" "]})]}),h.jsx("div",{className:"flex flex-col gap-6",children:N.map((de,ke)=>h.jsxs("button",{onClick:()=>{Te(de.id),y(!0)},className:"relative w-full rounded-2xl overflow-hidden border border-white/5 hover:border-gaming-gold/30 transition-all group shadow-lg",children:[h.jsx("img",{src:de.imageUrl,alt:`Slide ${ke+1}`,className:"w-full h-auto object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm",children:h.jsx("div",{className:"bg-black/60 p-3 rounded-full border border-white/20 transform scale-90 group-hover:scale-100 transition-transform",children:h.jsx(as,{size:24,className:"text-white"})})}),h.jsx("div",{className:"absolute top-4 left-4 bg-black/60 backdrop-blur px-3 py-1 rounded-full text-white font-bold text-sm border border-white/10",children:ke+1}),(u.slidesViewed.includes(de.id)||k)&&h.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg animate-in fade-in zoom-in",children:h.jsx(Dn,{size:16,className:"text-white"})})]},de.id))})]})]})]})]}):h.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-8 mb-6 text-center",children:[h.jsx(ol,{size:48,className:"mx-auto mb-4 text-gaming-primary opacity-50"}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:t==="ru"?"":""}),h.jsx("p",{className:"text-gaming-textMuted mb-4",children:t==="ru"?"    .":"    ."})]}),v&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"w-full max-w-md bg-gaming-card/95 backdrop-blur-xl rounded-2xl border border-red-500/30 p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 text-red-400 mb-4",children:[h.jsx(na,{size:24}),h.jsx("h3",{className:"text-lg font-semibold",children:t==="ru"?" ":" "})]}),h.jsx("p",{className:"text-gaming-textMuted mb-4",children:t==="ru"?"       :":"        :"}),h.jsxs("ul",{className:"space-y-2 mb-6",children:[C&&h.jsxs("li",{className:`flex items-center gap-2 ${u.videoWatched?"text-green-400":"text-red-400"}`,children:[u.videoWatched?h.jsx(Dn,{size:16}):h.jsx(na,{size:16}),""]}),E&&h.jsxs("li",{className:`flex items-center gap-2 ${u.textRead?"text-green-400":"text-red-400"}`,children:[u.textRead?h.jsx(Dn,{size:16}):h.jsx(na,{size:16}),t==="ru"?"":""]}),A&&h.jsxs("li",{className:`flex items-center gap-2 ${I?"text-green-400":"text-red-400"}`,children:[I?h.jsx(Dn,{size:16}):h.jsx(na,{size:16}),t==="ru"?` (${j}/${O})`:` (${j}/${O})`]})]}),h.jsx("button",{onClick:()=>g(!1),className:"w-full px-4 py-3 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors",children:t==="ru"?"":""})]})}),h.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[h.jsxs("div",{className:"flex gap-2",children:[Ls&&h.jsxs("button",{onClick:()=>s(`/lesson/${Ls.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[h.jsx(Qd,{size:16}),h.jsx("span",{className:"hidden sm:inline",children:t==="ru"?"":""})]}),$s&&h.jsxs("button",{onClick:()=>s(`/lesson/${$s.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[h.jsx("span",{className:"hidden sm:inline",children:t==="ru"?"":""}),h.jsx(Ts,{size:16})]})]}),h.jsxs("button",{onClick:fn,className:`group font-bold py-3 px-8 rounded-xl flex items-center gap-2 transition-all transform hover:scale-[1.02] active:scale-95 shadow-lg border border-white/10 ${K?k?"bg-gaming-pink hover:bg-gaming-pink/80 text-white shadow-gaming-pink/25":"bg-gaming-primary hover:bg-gaming-primary/80 text-white shadow-gaming-primary/25":"bg-gaming-card/60 text-gaming-textMuted cursor-not-allowed"}`,children:[k?h.jsx(Ta,{size:20}):h.jsx(li,{size:20}),h.jsx("span",{children:k?t==="ru"?" ":" ":t==="ru"?" ":" "}),!K&&h.jsx(na,{size:16,className:"text-yellow-400"})]})]})]}),m&&A&&h.jsx(rM,{slides:N,lessonId:r,lang:t,onClose:()=>y(!1),onSlideView:Te}),x&&(k?h.jsx(iM,{questions:_,lang:t,onClose:()=>w(!1)}):h.jsx(sM,{questions:_,lessonId:r,lang:t,onClose:()=>w(!1),onComplete:An}))]})};function aM(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const ih=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bo(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Lg(t){return"nodeType"in t}function Yt(t){var e,n;return t?Bo(t)?t:Lg(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function $g(t){const{Document:e}=Yt(t);return t instanceof e}function zl(t){return Bo(t)?!1:t instanceof Yt(t).HTMLElement}function mk(t){return t instanceof Yt(t).SVGElement}function Uo(t){return t?Bo(t)?t.document:Lg(t)?$g(t)?t:zl(t)||mk(t)?t.ownerDocument:document:document:document}const cr=ih?b.useLayoutEffect:b.useEffect;function zg(t){const e=b.useRef(t);return cr(()=>{e.current=t}),b.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function lM(){const t=b.useRef(null),e=b.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=b.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function gl(t,e){e===void 0&&(e=[t]);const n=b.useRef(t);return cr(()=>{n.current!==t&&(n.current=t)},e),n}function Bl(t,e){const n=b.useRef();return b.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Pu(t){const e=zg(t),n=b.useRef(null),r=b.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Xp(t){const e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}let ff={};function Ul(t,e){return b.useMemo(()=>{if(e)return e;const n=ff[t]==null?0:ff[t]+1;return ff[t]=n,t+"-"+n},[t,e])}function gk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,c]of a){const u=i[l];u!=null&&(i[l]=u+t*c)}return i},{...e})}}const po=gk(1),yl=gk(-1);function cM(t){return"clientX"in t&&"clientY"in t}function Bg(t){if(!t)return!1;const{KeyboardEvent:e}=Yt(t.target);return e&&t instanceof e}function uM(t){if(!t)return!1;const{TouchEvent:e}=Yt(t.target);return e&&t instanceof e}function Zp(t){if(uM(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return cM(t)?{x:t.clientX,y:t.clientY}:null}const _s=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[_s.Translate.toString(t),_s.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),xv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function dM(t){return t.matches(xv)?t:t.querySelector(xv)}const hM={display:"none"};function fM(t){let{id:e,value:n}=t;return ve.createElement("div",{id:e,style:hM},n)}function pM(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ve.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function mM(){const[t,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const yk=b.createContext(null);function gM(t){const e=b.useContext(yk);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function yM(){const[t]=b.useState(()=>new Set),e=b.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[b.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const vM={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},xM={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function wM(t){let{announcements:e=xM,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=vM}=t;const{announce:i,announcement:o}=mM(),a=Ul("DndLiveRegion"),[l,c]=b.useState(!1);if(b.useEffect(()=>{c(!0)},[]),gM(b.useMemo(()=>({onDragStart(d){let{active:f}=d;i(e.onDragStart({active:f}))},onDragMove(d){let{active:f,over:p}=d;e.onDragMove&&i(e.onDragMove({active:f,over:p}))},onDragOver(d){let{active:f,over:p}=d;i(e.onDragOver({active:f,over:p}))},onDragEnd(d){let{active:f,over:p}=d;i(e.onDragEnd({active:f,over:p}))},onDragCancel(d){let{active:f,over:p}=d;i(e.onDragCancel({active:f,over:p}))}}),[i,e])),!l)return null;const u=ve.createElement(ve.Fragment,null,ve.createElement(fM,{id:r,value:s.draggable}),ve.createElement(pM,{id:a,announcement:o}));return n?Zs.createPortal(u,n):u}var rt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(rt||(rt={}));function Du(){}function Lu(t,e){return b.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function vk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Jn=Object.freeze({x:0,y:0});function xk(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function wk(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function bM(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function wv(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function bk(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function bv(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const kk=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=bv(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=xk(bv(l),s);i.push({id:a,data:{droppableContainer:o,value:c}})}}return i.sort(wk)},kM=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=wv(e),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=wv(l),u=s.reduce((f,p,m)=>f+xk(c[m],p),0),d=Number((u/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:d}})}}return i.sort(wk)};function SM(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,c=t.width*t.height,u=o*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const EM=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=SM(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(bM)};function CM(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function Sk(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Jn}function TM(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const NM=TM(1);function _M(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function jM(t,e,n){const r=_M(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),c=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=s?t.width/s:t.width,d=i?t.height/i:t.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const RM={ignoreTransform:!1};function Fo(t,e){e===void 0&&(e=RM);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=Yt(t).getComputedStyle(t);c&&(n=jM(n,c,u))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function kv(t){return Fo(t,{ignoreTransform:!0})}function AM(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function MM(t,e){return e===void 0&&(e=Yt(t).getComputedStyle(t)),e.position==="fixed"}function OM(t,e){e===void 0&&(e=Yt(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function oh(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if($g(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!zl(s)||mk(s)||n.includes(s))return n;const i=Yt(t).getComputedStyle(s);return s!==t&&OM(s,i)&&n.push(s),MM(s,i)?n:r(s.parentNode)}return t?r(t):n}function Ek(t){const[e]=oh(t,1);return e??null}function pf(t){return!ih||!t?null:Bo(t)?t:Lg(t)?$g(t)||t===Uo(t).scrollingElement?window:zl(t)?t:null:null}function Ck(t){return Bo(t)?t.scrollX:t.scrollLeft}function Tk(t){return Bo(t)?t.scrollY:t.scrollTop}function em(t){return{x:Ck(t),y:Tk(t)}}var at;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(at||(at={}));function Nk(t){return!ih||!t?!1:t===document.scrollingElement}function _k(t){const e={x:0,y:0},n=Nk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const IM={x:.2,y:.2};function PM(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=IM);const{isTop:c,isBottom:u,isLeft:d,isRight:f}=_k(t),p={x:0,y:0},m={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!c&&i<=e.top+y.height?(p.y=at.Backward,m.y=r*Math.abs((e.top+y.height-i)/y.height)):!u&&l>=e.bottom-y.height&&(p.y=at.Forward,m.y=r*Math.abs((e.bottom-y.height-l)/y.height)),!f&&a>=e.right-y.width?(p.x=at.Forward,m.x=r*Math.abs((e.right-y.width-a)/y.width)):!d&&o<=e.left+y.width&&(p.x=at.Backward,m.x=r*Math.abs((e.left+y.width-o)/y.width)),{direction:p,speed:m}}function DM(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function jk(t){return t.reduce((e,n)=>po(e,em(n)),Jn)}function LM(t){return t.reduce((e,n)=>e+Ck(n),0)}function $M(t){return t.reduce((e,n)=>e+Tk(n),0)}function zM(t,e){if(e===void 0&&(e=Fo),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Ek(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const BM=[["x",["left","right"],LM],["y",["top","bottom"],$M]];class Ug{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=oh(n),s=jk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of BM)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=s[i]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ja{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function UM(t){const{EventTarget:e}=Yt(t);return t instanceof e?t:Uo(t)}function mf(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var vn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(vn||(vn={}));function Sv(t){t.preventDefault()}function FM(t){t.stopPropagation()}var pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(pe||(pe={}));const Rk={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},HM=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case pe.Right:return{...n,x:n.x+25};case pe.Left:return{...n,x:n.x-25};case pe.Down:return{...n,y:n.y+25};case pe.Up:return{...n,y:n.y-25}}};class ah{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ja(Uo(n)),this.windowListeners=new ja(Yt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vn.Resize,this.handleCancel),this.windowListeners.add(vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&zM(r),n(Jn)}handleKeyDown(e){if(Bg(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Rk,coordinateGetter:o=HM,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Jn;this.referenceCoordinates||(this.referenceCoordinates=u);const d=o(e,{active:n,context:r.current,currentCoordinates:u});if(d){const f=yl(d,u),p={x:0,y:0},{scrollableAncestors:m}=r.current;for(const y of m){const v=e.code,{isTop:g,isRight:x,isLeft:w,isBottom:k,maxScroll:S,minScroll:C}=_k(y),E=DM(y),N={x:Math.min(v===pe.Right?E.right-E.width/2:E.right,Math.max(v===pe.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(v===pe.Down?E.bottom-E.height/2:E.bottom,Math.max(v===pe.Down?E.top:E.top+E.height/2,d.y))},A=v===pe.Right&&!x||v===pe.Left&&!w,P=v===pe.Down&&!k||v===pe.Up&&!g;if(A&&N.x!==d.x){const R=y.scrollLeft+f.x,_=v===pe.Right&&R<=S.x||v===pe.Left&&R>=C.x;if(_&&!f.y){y.scrollTo({left:R,behavior:a});return}_?p.x=y.scrollLeft-R:p.x=v===pe.Right?y.scrollLeft-S.x:y.scrollLeft-C.x,p.x&&y.scrollBy({left:-p.x,behavior:a});break}else if(P&&N.y!==d.y){const R=y.scrollTop+f.y,_=v===pe.Down&&R<=S.y||v===pe.Up&&R>=C.y;if(_&&!f.x){y.scrollTo({top:R,behavior:a});return}_?p.y=y.scrollTop-R:p.y=v===pe.Down?y.scrollTop-S.y:y.scrollTop-C.y,p.y&&y.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,po(yl(d,this.referenceCoordinates),p))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ah.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Rk,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Ev(t){return!!(t&&"distance"in t)}function Cv(t){return!!(t&&"delay"in t)}class Fg{constructor(e,n,r){var s;r===void 0&&(r=UM(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=Uo(o),this.documentListeners=new ja(this.document),this.listeners=new ja(r),this.windowListeners=new ja(Yt(o)),this.initialCoordinates=(s=Zp(i))!=null?s:Jn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(vn.Resize,this.handleCancel),this.windowListeners.add(vn.DragStart,Sv),this.windowListeners.add(vn.VisibilityChange,this.handleCancel),this.windowListeners.add(vn.ContextMenu,Sv),this.documentListeners.add(vn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Cv(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Ev(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(vn.Click,FM,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Zp(e))!=null?n:Jn,c=yl(s,l);if(!r&&a){if(Ev(a)){if(a.tolerance!=null&&mf(c,a.tolerance))return this.handleCancel();if(mf(c,a.distance))return this.handleStart()}if(Cv(a)&&mf(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const VM={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lh extends Fg{constructor(e){const{event:n}=e,r=Uo(n.target);super(e,VM,r)}}lh.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const WM={move:{name:"mousemove"},end:{name:"mouseup"}};var tm;(function(t){t[t.RightClick=2]="RightClick"})(tm||(tm={}));class KM extends Fg{constructor(e){super(e,WM,Uo(e.event.target))}}KM.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===tm.RightClick?!1:(r==null||r({event:n}),!0)}}];const gf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class qM extends Fg{constructor(e){super(e,gf)}static setup(){return window.addEventListener(gf.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(gf.move.name,e)};function e(){}}}qM.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Ra;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Ra||(Ra={}));var $u;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})($u||($u={}));function JM(t){let{acceleration:e,activator:n=Ra.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=$u.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:f}=t;const p=YM({delta:d,disabled:!i}),[m,y]=lM(),v=b.useRef({x:0,y:0}),g=b.useRef({x:0,y:0}),x=b.useMemo(()=>{switch(n){case Ra.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Ra.DraggableRect:return s}},[n,s,l]),w=b.useRef(null),k=b.useCallback(()=>{const C=w.current;if(!C)return;const E=v.current.x*g.current.x,N=v.current.y*g.current.y;C.scrollBy(E,N)},[]),S=b.useMemo(()=>a===$u.TreeOrder?[...c].reverse():c,[a,c]);b.useEffect(()=>{if(!i||!c.length||!x){y();return}for(const C of S){if((r==null?void 0:r(C))===!1)continue;const E=c.indexOf(C),N=u[E];if(!N)continue;const{direction:A,speed:P}=PM(C,N,x,e,f);for(const R of["x","y"])p[R][A[R]]||(P[R]=0,A[R]=0);if(P.x>0||P.y>0){y(),w.current=C,m(k,o),v.current=P,g.current=A;return}}v.current={x:0,y:0},g.current={x:0,y:0},y()},[e,k,r,y,i,o,JSON.stringify(x),JSON.stringify(p),m,c,S,u,JSON.stringify(f)])}const GM={x:{[at.Backward]:!1,[at.Forward]:!1},y:{[at.Backward]:!1,[at.Forward]:!1}};function YM(t){let{delta:e,disabled:n}=t;const r=Xp(e);return Bl(s=>{if(n||!r||!s)return GM;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[at.Backward]:s.x[at.Backward]||i.x===-1,[at.Forward]:s.x[at.Forward]||i.x===1},y:{[at.Backward]:s.y[at.Backward]||i.y===-1,[at.Forward]:s.y[at.Forward]||i.y===1}}},[n,e,r])}function QM(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Bl(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function XM(t,e){return b.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var vl;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(vl||(vl={}));var nm;(function(t){t.Optimized="optimized"})(nm||(nm={}));const Tv=new Map;function ZM(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=b.useState(null),{frequency:a,measure:l,strategy:c}=s,u=b.useRef(t),d=v(),f=gl(d),p=b.useCallback(function(g){g===void 0&&(g=[]),!f.current&&o(x=>x===null?g:x.concat(g.filter(w=>!x.includes(w))))},[f]),m=b.useRef(null),y=Bl(g=>{if(d&&!n)return Tv;if(!g||g===Tv||u.current!==t||i!=null){const x=new Map;for(let w of t){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){x.set(w.id,w.rect.current);continue}const k=w.node.current,S=k?new Ug(l(k),k):null;w.rect.current=S,S&&x.set(w.id,S)}return x}return g},[t,i,n,d,l]);return b.useEffect(()=>{u.current=t},[t]),b.useEffect(()=>{d||p()},[n,d]),b.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),b.useEffect(()=>{d||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},a))},[a,d,p,...r]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:i!=null};function v(){switch(c){case vl.Always:return!1;case vl.BeforeDragging:return n;default:return!n}}}function Ak(t,e){return Bl(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function eO(t,e){return Ak(t,e)}function tO(t){let{callback:e,disabled:n}=t;const r=zg(e),s=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ch(t){let{callback:e,disabled:n}=t;const r=zg(e),s=b.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function nO(t){return new Ug(Fo(t),t)}function Nv(t,e,n){e===void 0&&(e=nO);const[r,s]=b.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const u=e(t);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=tO({callback(l){if(t)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(t)){i();break}}}}),a=ch({callback:i});return cr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function rO(t){const e=Ak(t);return Sk(t,e)}const _v=[];function sO(t){const e=b.useRef(t),n=Bl(r=>t?r&&r!==_v&&t&&e.current&&t.parentNode===e.current.parentNode?r:oh(t):_v,[t]);return b.useEffect(()=>{e.current=t},[t]),n}function iO(t){const[e,n]=b.useState(null),r=b.useRef(t),s=b.useCallback(i=>{const o=pf(i.target);o&&n(a=>a?(a.set(o,em(o)),new Map(a)):null)},[]);return b.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const c=pf(l);return c?(c.addEventListener("scroll",s,{passive:!0}),[c,em(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const c=pf(l);c==null||c.removeEventListener("scroll",s)})}},[s,t]),b.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>po(i,o),Jn):jk(t):Jn,[t,e])}function jv(t,e){e===void 0&&(e=[]);const n=b.useRef(null);return b.useEffect(()=>{n.current=null},e),b.useEffect(()=>{const r=t!==Jn;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?yl(t,n.current):Jn}function oO(t){b.useEffect(()=>{if(!ih)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function aO(t,e){return b.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Mk(t){return b.useMemo(()=>t?AM(t):null,[t])}const Rv=[];function lO(t,e){e===void 0&&(e=Fo);const[n]=t,r=Mk(n?Yt(n):null),[s,i]=b.useState(Rv);function o(){i(()=>t.length?t.map(l=>Nk(l)?r:new Ug(e(l),l)):Rv)}const a=ch({callback:o});return cr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function cO(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return zl(e)?e:t}function uO(t){let{measure:e}=t;const[n,r]=b.useState(null),s=b.useCallback(c=>{for(const{target:u}of c)if(zl(u)){r(d=>{const f=e(u);return d?{...d,width:f.width,height:f.height}:f});break}},[e]),i=ch({callback:s}),o=b.useCallback(c=>{const u=cO(c);i==null||i.disconnect(),u&&(i==null||i.observe(u)),r(u?e(u):null)},[e,i]),[a,l]=Pu(o);return b.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const dO=[{sensor:lh,options:{}},{sensor:ah,options:{}}],hO={current:{}},Qc={draggable:{measure:kv},droppable:{measure:kv,strategy:vl.WhileDragging,frequency:nm.Optimized},dragOverlay:{measure:Fo}};class Aa extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const fO={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Aa,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Du},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qc,measureDroppableContainers:Du,windowRect:null,measuringScheduled:!1},pO={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Du,draggableNodes:new Map,over:null,measureDroppableContainers:Du},uh=b.createContext(pO),Ok=b.createContext(fO);function mO(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Aa}}}function gO(t,e){switch(e.type){case rt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case rt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case rt.DragEnd:case rt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case rt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Aa(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case rt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Aa(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case rt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Aa(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function yO(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=b.useContext(uh),i=Xp(r),o=Xp(n==null?void 0:n.id);return b.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Bg(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=dM(u);if(d){d.focus();break}}})}},[r,e,s,o,i]),null}function vO(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function xO(t){return b.useMemo(()=>({draggable:{...Qc.draggable,...t==null?void 0:t.draggable},droppable:{...Qc.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Qc.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function wO(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=b.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;cr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=n(c),d=Sk(u,r);if(o||(d.x=0),a||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const f=Ek(c);f&&f.scrollBy({top:d.y,left:d.x})}},[e,o,a,r,n])}const Ik=b.createContext({...Jn,scaleX:1,scaleY:1});var Gr;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Gr||(Gr={}));const Pk=b.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:u=dO,collisionDetection:d=EM,measuring:f,modifiers:p,...m}=e;const y=b.useReducer(gO,void 0,mO),[v,g]=y,[x,w]=yM(),[k,S]=b.useState(Gr.Uninitialized),C=k===Gr.Initialized,{draggable:{active:E,nodes:N,translate:A},droppable:{containers:P}}=v,R=E!=null?N.get(E):null,_=b.useRef({initial:null,translated:null}),T=b.useMemo(()=>{var Z;return E!=null?{id:E,data:(Z=R==null?void 0:R.data)!=null?Z:hO,rect:_}:null},[E,R]),O=b.useRef(null),[j,I]=b.useState(null),[B,L]=b.useState(null),F=gl(m,Object.values(m)),K=Ul("DndDescribedBy",o),se=b.useMemo(()=>P.getEnabled(),[P]),G=xO(f),{droppableRects:Ce,measureDroppableContainers:je,measuringScheduled:St}=ZM(se,{dragging:C,dependencies:[A.x,A.y],config:G.droppable}),Te=QM(N,E),fn=b.useMemo(()=>B?Zp(B):null,[B]),An=q(),Mt=eO(Te,G.draggable.measure);wO({activeNode:E!=null?N.get(E):null,config:An.layoutShiftCompensation,initialRect:Mt,measure:G.draggable.measure});const ue=Nv(Te,G.draggable.measure,Mt),$r=Nv(Te?Te.parentElement:null),Ut=b.useRef({activatorEvent:null,active:null,activeNode:Te,collisionRect:null,collisions:null,droppableRects:Ce,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:P,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Xt=P.getNodeFor((n=Ut.current.over)==null?void 0:n.id),Zt=uO({measure:G.dragOverlay.measure}),Gn=(r=Zt.nodeRef.current)!=null?r:Te,pn=C?(s=Zt.rect)!=null?s:ue:null,Ls=!!(Zt.nodeRef.current&&Zt.rect),$s=rO(Ls?null:ue),Mn=Mk(Gn?Yt(Gn):null),en=sO(C?Xt??Te:null),zr=lO(en),Yn=vO(p,{transform:{x:A.x-$s.x,y:A.y-$s.y,scaleX:1,scaleY:1},activatorEvent:B,active:T,activeNodeRect:ue,containerNodeRect:$r,draggingNodeRect:pn,over:Ut.current.over,overlayNodeRect:Zt.rect,scrollableAncestors:en,scrollableAncestorRects:zr,windowRect:Mn}),zs=fn?po(fn,A):null,Br=iO(en),Bs=jv(Br),ji=jv(Br,[ue]),Qn=po(Yn,Bs),He=pn?NM(pn,Yn):null,de=T&&He?d({active:T,collisionRect:He,droppableRects:Ce,droppableContainers:se,pointerCoordinates:zs}):null,ke=bk(de,"id"),[Pe,mn]=b.useState(null),Xn=Ls?Yn:po(Yn,ji),Zn=CM(Xn,(i=Pe==null?void 0:Pe.rect)!=null?i:null,ue),Ot=b.useRef(null),On=b.useCallback((Z,oe)=>{let{sensor:me,options:J}=oe;if(O.current==null)return;const Se=N.get(O.current);if(!Se)return;const fe=Z.nativeEvent,ae=new me({active:O.current,activeNode:Se,event:fe,options:J,context:Ut,onAbort(we){if(!N.get(we))return;const{onDragAbort:Et}=F.current,tn={id:we};Et==null||Et(tn),x({type:"onDragAbort",event:tn})},onPending(we,Ft,Et,tn){if(!N.get(we))return;const{onDragPending:Wo}=F.current,Ur={id:we,constraint:Ft,initialCoordinates:Et,offset:tn};Wo==null||Wo(Ur),x({type:"onDragPending",event:Ur})},onStart(we){const Ft=O.current;if(Ft==null)return;const Et=N.get(Ft);if(!Et)return;const{onDragStart:tn}=F.current,Vo={activatorEvent:fe,active:{id:Ft,data:Et.data,rect:_}};Zs.unstable_batchedUpdates(()=>{tn==null||tn(Vo),S(Gr.Initializing),g({type:rt.DragStart,initialCoordinates:we,active:Ft}),x({type:"onDragStart",event:Vo}),I(Ot.current),L(fe)})},onMove(we){g({type:rt.DragMove,coordinates:we})},onEnd:De(rt.DragEnd),onCancel:De(rt.DragCancel)});Ot.current=ae;function De(we){return async function(){const{active:Et,collisions:tn,over:Vo,scrollAdjustedTranslate:Wo}=Ut.current;let Ur=null;if(Et&&Wo){const{cancelDrop:Ko}=F.current;Ur={activatorEvent:fe,active:Et,collisions:tn,delta:Wo,over:Vo},we===rt.DragEnd&&typeof Ko=="function"&&await Promise.resolve(Ko(Ur))&&(we=rt.DragCancel)}O.current=null,Zs.unstable_batchedUpdates(()=>{g({type:we}),S(Gr.Uninitialized),mn(null),I(null),L(null),Ot.current=null;const Ko=we===rt.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const _h=F.current[Ko];_h==null||_h(Ur),x({type:Ko,event:Ur})}})}}},[N]),M=b.useCallback((Z,oe)=>(me,J)=>{const Se=me.nativeEvent,fe=N.get(J);if(O.current!==null||!fe||Se.dndKit||Se.defaultPrevented)return;const ae={active:fe};Z(me,oe.options,ae)===!0&&(Se.dndKit={capturedBy:oe.sensor},O.current=J,On(me,oe))},[N,On]),H=XM(u,M);oO(u),cr(()=>{ue&&k===Gr.Initializing&&S(Gr.Initialized)},[ue,k]),b.useEffect(()=>{const{onDragMove:Z}=F.current,{active:oe,activatorEvent:me,collisions:J,over:Se}=Ut.current;if(!oe||!me)return;const fe={active:oe,activatorEvent:me,collisions:J,delta:{x:Qn.x,y:Qn.y},over:Se};Zs.unstable_batchedUpdates(()=>{Z==null||Z(fe),x({type:"onDragMove",event:fe})})},[Qn.x,Qn.y]),b.useEffect(()=>{const{active:Z,activatorEvent:oe,collisions:me,droppableContainers:J,scrollAdjustedTranslate:Se}=Ut.current;if(!Z||O.current==null||!oe||!Se)return;const{onDragOver:fe}=F.current,ae=J.get(ke),De=ae&&ae.rect.current?{id:ae.id,rect:ae.rect.current,data:ae.data,disabled:ae.disabled}:null,we={active:Z,activatorEvent:oe,collisions:me,delta:{x:Se.x,y:Se.y},over:De};Zs.unstable_batchedUpdates(()=>{mn(De),fe==null||fe(we),x({type:"onDragOver",event:we})})},[ke]),cr(()=>{Ut.current={activatorEvent:B,active:T,activeNode:Te,collisionRect:He,collisions:de,droppableRects:Ce,draggableNodes:N,draggingNode:Gn,draggingNodeRect:pn,droppableContainers:P,over:Pe,scrollableAncestors:en,scrollAdjustedTranslate:Qn},_.current={initial:pn,translated:He}},[T,Te,de,He,N,Gn,pn,Ce,P,Pe,en,Qn]),JM({...An,delta:A,draggingRect:He,pointerCoordinates:zs,scrollableAncestors:en,scrollableAncestorRects:zr});const ie=b.useMemo(()=>({active:T,activeNode:Te,activeNodeRect:ue,activatorEvent:B,collisions:de,containerNodeRect:$r,dragOverlay:Zt,draggableNodes:N,droppableContainers:P,droppableRects:Ce,over:Pe,measureDroppableContainers:je,scrollableAncestors:en,scrollableAncestorRects:zr,measuringConfiguration:G,measuringScheduled:St,windowRect:Mn}),[T,Te,ue,B,de,$r,Zt,N,P,Ce,Pe,je,en,zr,G,St,Mn]),ne=b.useMemo(()=>({activatorEvent:B,activators:H,active:T,activeNodeRect:ue,ariaDescribedById:{draggable:K},dispatch:g,draggableNodes:N,over:Pe,measureDroppableContainers:je}),[B,H,T,ue,g,K,N,Pe,je]);return ve.createElement(yk.Provider,{value:w},ve.createElement(uh.Provider,{value:ne},ve.createElement(Ok.Provider,{value:ie},ve.createElement(Ik.Provider,{value:Zn},c)),ve.createElement(yO,{disabled:(a==null?void 0:a.restoreFocus)===!1})),ve.createElement(wM,{...a,hiddenTextDescribedById:K}));function q(){const Z=(j==null?void 0:j.autoScrollEnabled)===!1,oe=typeof l=="object"?l.enabled===!1:l===!1,me=C&&!Z&&!oe;return typeof l=="object"?{...l,enabled:me}:{enabled:me}}}),bO=b.createContext(null),Av="button",kO="Draggable";function SO(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Ul(kO),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:f}=b.useContext(uh),{role:p=Av,roleDescription:m="draggable",tabIndex:y=0}=s??{},v=(l==null?void 0:l.id)===e,g=b.useContext(v?Ik:bO),[x,w]=Pu(),[k,S]=Pu(),C=aO(o,e),E=gl(n);cr(()=>(d.set(e,{id:e,key:i,node:x,activatorNode:k,data:E}),()=>{const A=d.get(e);A&&A.key===i&&d.delete(e)}),[d,e]);const N=b.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":r,"aria-pressed":v&&p===Av?!0:void 0,"aria-roledescription":m,"aria-describedby":u.draggable}),[r,p,y,v,m,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:N,isDragging:v,listeners:r?void 0:C,node:x,over:f,setNodeRef:w,setActivatorNodeRef:S,transform:g}}function EO(){return b.useContext(Ok)}const CO="Droppable",TO={timeout:25};function NO(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Ul(CO),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=b.useContext(uh),u=b.useRef({disabled:n}),d=b.useRef(!1),f=b.useRef(null),p=b.useRef(null),{disabled:m,updateMeasurementsFor:y,timeout:v}={...TO,...s},g=gl(y??r),x=b.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(g.current)?g.current:[g.current]),p.current=null},v)},[v]),w=ch({callback:x,disabled:m||!o}),k=b.useCallback((N,A)=>{w&&(A&&(w.unobserve(A),d.current=!1),N&&w.observe(N))},[w]),[S,C]=Pu(k),E=gl(e);return b.useEffect(()=>{!w||!S.current||(w.disconnect(),d.current=!1,w.observe(S.current))},[S,w]),b.useEffect(()=>(a({type:rt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:S,rect:f,data:E}}),()=>a({type:rt.UnregisterDroppable,key:i,id:r})),[r]),b.useEffect(()=>{n!==u.current.disabled&&(a({type:rt.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)},[r,i,n,a]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===r,node:S,over:l,setNodeRef:C}}function mo(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function _O(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function wc(t){return t!==null&&t>=0}function jO(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function RO(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Dk=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=mo(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},bc={scaleX:1,scaleY:1},Xc=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const c=i[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...bc}:null}const l=AO(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...bc}:s<n&&s>=o?{x:0,y:a.height+l,...bc}:{x:0,y:0,...bc}};function AO(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Lk="Sortable",$k=ve.createContext({activeIndex:-1,containerId:Lk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Dk,disabled:{draggable:!1,droppable:!1}});function Zc(t){let{children:e,id:n,items:r,strategy:s=Dk,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=EO(),d=Ul(Lk,n),f=a.rect!==null,p=b.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),m=o!=null,y=o?p.indexOf(o.id):-1,v=c?p.indexOf(c.id):-1,g=b.useRef(p),x=!jO(p,g.current),w=v!==-1&&y===-1||x,k=RO(i);cr(()=>{x&&m&&u(p)},[x,p,m,u]),b.useEffect(()=>{g.current=p},[p]);const S=b.useMemo(()=>({activeIndex:y,containerId:d,disabled:k,disableTransforms:w,items:p,overIndex:v,useDragOverlay:f,sortedRects:_O(p,l),strategy:s}),[y,d,k.draggable,k.droppable,w,p,v,l,f,s]);return ve.createElement($k.Provider,{value:S},e)}const MO=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return mo(n,r,s).indexOf(e)},OO=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},IO={duration:200,easing:"ease"},zk="transform",PO=_s.Transition.toString({property:zk,duration:0,easing:"linear"}),DO={roleDescription:"sortable"};function LO(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=b.useState(null),a=b.useRef(n);return cr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const c=Fo(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&o(u)}}n!==a.current&&(a.current=n)},[e,n,r,s]),b.useEffect(()=>{i&&o(null)},[i]),i}function dh(t){let{animateLayoutChanges:e=OO,attributes:n,disabled:r,data:s,getNewIndex:i=MO,id:o,strategy:a,resizeObserverConfig:l,transition:c=IO}=t;const{items:u,containerId:d,activeIndex:f,disabled:p,disableTransforms:m,sortedRects:y,overIndex:v,useDragOverlay:g,strategy:x}=b.useContext($k),w=$O(r,p),k=u.indexOf(o),S=b.useMemo(()=>({sortable:{containerId:d,index:k,items:u},...s}),[d,s,k,u]),C=b.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:E,node:N,isOver:A,setNodeRef:P}=NO({id:o,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...l}}),{active:R,activatorEvent:_,activeNodeRect:T,attributes:O,setNodeRef:j,listeners:I,isDragging:B,over:L,setActivatorNodeRef:F,transform:K}=SO({id:o,data:S,attributes:{...DO,...n},disabled:w.draggable}),se=aM(P,j),G=!!R,Ce=G&&!m&&wc(f)&&wc(v),je=!g&&B,St=je&&Ce?K:null,fn=Ce?St??(a??x)({rects:y,activeNodeRect:T,activeIndex:f,overIndex:v,index:k}):null,An=wc(f)&&wc(v)?i({id:o,items:u,activeIndex:f,overIndex:v}):k,Mt=R==null?void 0:R.id,ue=b.useRef({activeId:Mt,items:u,newIndex:An,containerId:d}),$r=u!==ue.current.items,Ut=e({active:R,containerId:d,isDragging:B,isSorting:G,id:o,index:k,items:u,newIndex:ue.current.newIndex,previousItems:ue.current.items,previousContainerId:ue.current.containerId,transition:c,wasDragging:ue.current.activeId!=null}),Xt=LO({disabled:!Ut,index:k,node:N,rect:E});return b.useEffect(()=>{G&&ue.current.newIndex!==An&&(ue.current.newIndex=An),d!==ue.current.containerId&&(ue.current.containerId=d),u!==ue.current.items&&(ue.current.items=u)},[G,An,d,u]),b.useEffect(()=>{if(Mt===ue.current.activeId)return;if(Mt!=null&&ue.current.activeId==null){ue.current.activeId=Mt;return}const Gn=setTimeout(()=>{ue.current.activeId=Mt},50);return()=>clearTimeout(Gn)},[Mt]),{active:R,activeIndex:f,attributes:O,data:S,rect:E,index:k,newIndex:An,items:u,isOver:A,isSorting:G,isDragging:B,listeners:I,node:N,overIndex:v,over:L,setNodeRef:se,setActivatorNodeRef:F,setDroppableNodeRef:P,setDraggableNodeRef:j,transform:Xt??fn,transition:Zt()};function Zt(){if(Xt||$r&&ue.current.newIndex===k)return PO;if(!(je&&!Bg(_)||!c)&&(G||Ut))return _s.Transition.toString({...c,property:zk})}}function $O(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function zu(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const zO=[pe.Down,pe.Right,pe.Up,pe.Left],Bk=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=e;if(zO.includes(t.code)){if(t.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const f=s.get(d.id);if(f)switch(t.code){case pe.Down:r.top<f.top&&l.push(d);break;case pe.Up:r.top>f.top&&l.push(d);break;case pe.Left:r.left>f.left&&l.push(d);break;case pe.Right:r.left<f.left&&l.push(d);break}});const c=kM({collisionRect:r,droppableRects:s,droppableContainers:l});let u=bk(c,"id");if(u===(o==null?void 0:o.id)&&c.length>1&&(u=c[1].id),u!=null){const d=i.get(n.id),f=i.get(u),p=f?s.get(f.id):null,m=f==null?void 0:f.node.current;if(m&&p&&d&&f){const v=oh(m).some((C,E)=>a[E]!==C),g=Uk(d,f),x=BO(d,f),w=v||!g?{x:0,y:0}:{x:x?r.width-p.width:0,y:x?r.height-p.height:0},k={x:p.left,y:p.top};return w.x&&w.y?k:yl(k,w)}}}};function Uk(t,e){return!zu(t)||!zu(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function BO(t,e){return!zu(t)||!zu(e)||!Uk(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const UO="https://translate.googleapis.com/translate_a/single",Fk={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":" "," ":" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":" "," ":" "," ":" ",:""},FO=Object.entries(Fk).reduce((t,[e,n])=>(t[n]=e,t),{}),HO=(t,e="ru",n="tj")=>{if(!t)return"";let r=t.toLowerCase();const o=Object.entries(e==="ru"&&n==="tj"||e==="ru"&&n==="tg"?Fk:FO).sort((a,l)=>l[0].length-a[0].length);for(const[a,l]of o){const c=new RegExp(a,"gi");r=r.replace(c,l)}return r.charAt(0).toUpperCase()+r.slice(1)},VO=async(t,e="ru",n="tg")=>{try{const r=`${UO}?client=gtx&sl=${e}&tl=${n}&dt=t&q=${encodeURIComponent(t)}`,i=await(await fetch(r)).json();if(i&&i[0])return i[0].map(o=>o[0]).join("");throw new Error("Invalid response")}catch(r){return console.warn("Google Translate API failed, using dictionary:",r),null}},lt=async(t,e="ru",n="tj")=>{if(!t||!t.trim())return"";const i=await VO(t,e==="tj"?"tg":e,n==="tj"?"tg":n);return i||HO(t,e,n)},WO=({data:t,onChange:e,lang:n})=>{const[r,s]=b.useState(!1),i=(c,u)=>{e({...t,[c]:u})},o=async()=>{s(!0);try{const c=await lt(t.descriptionRu||"","ru","tj");i("descriptionTj",c)}finally{s(!1)}},a=async()=>{s(!0);try{const c=await lt(t.descriptionTj||"","tj","ru");i("descriptionRu",c)}finally{s(!1)}},l=()=>{i("urlTj",t.url||"")};return h.jsxs("div",{className:"space-y-5",children:[h.jsxs("h4",{className:"text-lg font-semibold text-gaming-primary flex items-center gap-2",children:[h.jsx(ll,{size:20}),""]}),h.jsxs("div",{children:[h.jsxs("label",{className:"block text-sm text-gaming-textMuted mb-2 flex items-center gap-2",children:[h.jsx(q0,{size:14}),n==="ru"?"   (RU)":"   (RU)"]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"url",value:t.url||"",onChange:c=>i("url",c.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors"}),h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"RU"})]})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("label",{className:"block text-sm text-gaming-textMuted mb-2 flex items-center gap-2",children:[h.jsx(q0,{size:14}),n==="ru"?"   (TJ)":"   (TJ)"]}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:"url",value:t.urlTj||"",onChange:c=>i("urlTj",c.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors"}),h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"TJ"})]})]}),h.jsx("button",{type:"button",onClick:l,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors",title:n==="ru"?" ":"",children:h.jsx(yt,{size:16})})]}),h.jsx("div",{className:"border-t border-white/5 pt-4"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:n==="ru"?"  (RU)":"  (RU)"}),h.jsx("textarea",{value:t.descriptionRu||"",onChange:c=>i("descriptionRu",c.target.value),placeholder:n==="ru"?"  ...":" ...",rows:3,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors resize-none"})]}),h.jsx("button",{type:"button",onClick:a,disabled:r,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:r?h.jsx(tt,{size:16,className:"animate-spin"}):h.jsx(yt,{size:16,className:"rotate-180"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:n==="ru"?"  (TJ)":"  (TJ)"}),h.jsx("textarea",{value:t.descriptionTj||"",onChange:c=>i("descriptionTj",c.target.value),placeholder:" ...",rows:3,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors resize-none"})]}),h.jsx("button",{type:"button",onClick:o,disabled:r,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:r?h.jsx(tt,{size:16,className:"animate-spin"}):h.jsx(yt,{size:16})})]}),(t.url||t.urlTj)&&h.jsxs("div",{className:"bg-gaming-card/30 rounded-xl p-3 text-sm text-gaming-textMuted",children:[h.jsx("span",{className:"text-gaming-primary font-medium",children:" "}),n==="ru"?"     ":"      "]})]})};var Hk={exports:{}},Vk={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Co=b;function KO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qO=typeof Object.is=="function"?Object.is:KO,JO=Co.useState,GO=Co.useEffect,YO=Co.useLayoutEffect,QO=Co.useDebugValue;function XO(t,e){var n=e(),r=JO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return YO(function(){s.value=n,s.getSnapshot=e,yf(s)&&i({inst:s})},[t,n,e]),GO(function(){return yf(s)&&i({inst:s}),t(function(){yf(s)&&i({inst:s})})},[t]),QO(n),n}function yf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qO(t,n)}catch{return!0}}function ZO(t,e){return e()}var eI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ZO:XO;Vk.useSyncExternalStore=Co.useSyncExternalStore!==void 0?Co.useSyncExternalStore:eI;Hk.exports=Vk;var Hg=Hk.exports;function gt(t){this.content=t}gt.prototype={constructor:gt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),i=r.content.slice();return s==-1?i.push(n||t,e):(i[s+1]=e,n&&(i[s]=n)),new gt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new gt(n)},addToStart:function(t,e){return new gt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new gt(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),i=r.find(t);return s.splice(i==-1?s.length:i,0,e,n),new gt(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=gt.from(t),t.size?new gt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=gt.from(t),t.size?new gt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=gt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};gt.from=function(t){if(t instanceof gt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new gt(e)};function Wk(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),i=e.child(r);if(s==i){n+=s.nodeSize;continue}if(!s.sameMarkup(i))return n;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)n++;return n}if(s.content.size||i.content.size){let o=Wk(s.content,i.content,n+1);if(o!=null)return o}n+=s.nodeSize}}function Kk(t,e,n,r){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:n,b:r};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){n-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:n,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||a.content.size){let c=Kk(o.content,a.content,n-1,r-1);if(c)return c}n-=l,r-=l}}class D{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,i){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let i="",o=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new D(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let i=0,o=0;o<n;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),r.push(a),s+=a.nodeSize),o=l}return new D(r,s)}cutByIndex(e,n){return e==n?D.empty:e==0&&n==this.content.length?this:new D(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),i=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new D(s,i)}addToStart(e){return new D([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new D(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return Wk(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Kk(this,e,n,r)}findIndex(e){if(e==0)return kc(0,e);if(e==this.size)return kc(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),i=r+s.nodeSize;if(i>=e)return i==e?kc(n+1,i):kc(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return D.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new D(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return D.empty;let n,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(n||(n=e.slice(0,s)),n[n.length-1]=i.withText(n[n.length-1].text+i.text)):n&&n.push(i)}return new D(n||e,r)}static from(e){if(!e)return D.empty;if(e instanceof D)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new D([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}D.empty=new D([],0);const vf={index:0,offset:0};function kc(t,e){return vf.index=t,vf.offset=e,vf}function Bu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Bu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Bu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Ee=class rm{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))n||(n=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(i)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Bu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return rm.none;if(e instanceof rm)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};Ee.none=[];class Uu extends Error{}class U{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Jk(this.content,e+this.openStart,n);return r&&new U(r,this.openStart,this.openEnd)}removeBetween(e,n){return new U(qk(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return U.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new U(D.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(n||!i.type.spec.isolating);i=i.lastChild)s++;return new U(e,r,s)}}U.empty=new U(D.empty,0,0);function qk(t,e,n){let{index:r,offset:s}=t.findIndex(e),i=t.maybeChild(r),{index:o,offset:a}=t.findIndex(n);if(s==e||i.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,i.copy(qk(i.content,e-s-1,n-s-1)))}function Jk(t,e,n,r){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=Jk(o.content,e-i-1,n,o);return a&&t.replaceChild(s,o.copy(a))}function tI(t,e,n){if(n.openStart>t.depth)throw new Uu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Uu("Inconsistent open depths");return Gk(t,e,n,0)}function Gk(t,e,n,r){let s=t.index(r),i=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let o=Gk(t,e,n,r+1);return i.copy(i.content.replaceChild(s,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,a=o.content;return ui(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=nI(n,t);return ui(i,Qk(t,o,a,e,r))}else return ui(i,Fu(t,e,r))}function Yk(t,e){if(!e.type.compatibleContent(t.type))throw new Uu("Cannot join "+e.type.name+" onto "+t.type.name)}function sm(t,e,n){let r=t.node(n);return Yk(r,e.node(n)),r}function ci(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ma(t,e,n,r){let s=(e||t).node(n),i=0,o=e?e.index(n):s.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(ci(t.nodeAfter,r),i++));for(let a=i;a<o;a++)ci(s.child(a),r);e&&e.depth==n&&e.textOffset&&ci(e.nodeBefore,r)}function ui(t,e){return t.type.checkContent(e),t.copy(e)}function Qk(t,e,n,r,s){let i=t.depth>s&&sm(t,e,s+1),o=r.depth>s&&sm(n,r,s+1),a=[];return Ma(null,t,s,a),i&&o&&e.index(s)==n.index(s)?(Yk(i,o),ci(ui(i,Qk(t,e,n,r,s+1)),a)):(i&&ci(ui(i,Fu(t,e,s+1)),a),Ma(e,n,s,a),o&&ci(ui(o,Fu(n,r,s+1)),a)),Ma(r,null,s,a),new D(a)}function Fu(t,e,n){let r=[];if(Ma(null,t,n,r),t.depth>n){let s=sm(t,e,n+1);ci(ui(s,Fu(t,e,n+1)),r)}return Ma(e,null,n,r),new D(r)}function nI(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let i=n-1;i>=0;i--)s=e.node(i).copy(D.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class xl{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Ee.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Hu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,i=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new xl(n,r,i)}static resolveCached(e,n){let r=Mv.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==n)return o}else Mv.set(e,r=new rI);let s=r.elts[r.i]=xl.resolve(e,n);return r.i=(r.i+1)%sI,s}}class rI{constructor(){this.elts=[],this.i=0}}const sI=12,Mv=new WeakMap;class Hu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const iI=Object.create(null);class Kn{constructor(e,n,r,s=Ee.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||D.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Bu(this.attrs,n||e.defaultAttrs||iI)&&Ee.sameSet(this.marks,r||Ee.none)}copy(e=null){return e==this.content?this:new Kn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Kn(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return U.empty;let s=this.resolve(e),i=this.resolve(n),o=r?0:s.sharedDepth(n),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new U(c,s.depth-o,i.depth-o)}replace(e,n,r){return tI(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return xl.resolveCached(this,e)}resolveNoCache(e){return xl.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Xk(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=D.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Ee.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Ee.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=D.fromJSON(e,n.content),i=e.nodeType(n.type).create(n.attrs,s,r);return i.type.checkAttrs(i.attrs),i}}Kn.prototype.text=void 0;class Vu extends Kn{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Xk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Vu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Vu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Xk(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class wi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new oI(e,n);if(r.next==null)return wi.empty;let s=Zk(r);r.next&&r.err("Unexpected trailing text");let i=fI(hI(s));return pI(i,r),i}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let i=n;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!n||l.validEnd))return D.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=i(d,a.concat(u));if(f)return f}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}wi.empty=new wi(!0);class oI{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Zk(t){let e=[];do e.push(aI(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function aI(t){let e=[];do e.push(lI(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function lI(t){let e=dI(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=cI(t,e);else break;return e}function Ov(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function cI(t,e){let n=Ov(t),r=n;return t.eat(",")&&(t.next!="}"?r=Ov(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function uI(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let i in n){let o=n[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function dI(t){if(t.eat("(")){let e=Zk(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=uI(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function hI(t){let e=[[]];return s(i(t,0),n()),e;function n(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=n())}else if(o.type=="star"){let l=n();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=n();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function eS(t,e){return e-t}function Iv(t,e){let n=[];return r(e),n.sort(eS);function r(s){let i=t[s];if(i.length==1&&!i[0].term)return r(i[0].to);n.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&n.indexOf(l)==-1&&r(l)}}}function fI(t){let e=Object.create(null);return n(Iv(t,0));function n(r){let s=[];r.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);Iv(t,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new wi(r.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(eS);i.next.push({type:s[o][0],next:e[a.join(",")]||n(a)})}return i}}function pI(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function tS(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function nS(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let i=t[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function rS(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function sS(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new gI(t,r,e[r]);return n}let Pv=class iS{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=sS(e,r.attrs),this.defaultAttrs=tS(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==wi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:nS(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Kn(this,this.computeAttrs(e),D.from(n),Ee.setFrom(r))}createChecked(e=null,n,r){return n=D.from(n),this.checkContent(n),new Kn(this,this.computeAttrs(e),n,Ee.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=D.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let s=this.contentMatch.matchFragment(n),i=s&&s.fillBefore(D.empty,!0);return i?new Kn(this,e,n.append(i),Ee.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){rS(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Ee.none:e}static compile(e,n){let r=Object.create(null);e.forEach((i,o)=>r[i]=new iS(i,n,o));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function mI(t,e,n){let r=n.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${i}`)}}class gI{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?mI(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hh{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=sS(e,s.attrs),this.excluded=null;let i=tS(this.attrs);this.instance=i?new Ee(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Ee(this,nS(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new hh(i,s++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){rS(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class oS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=gt.from(e.nodes),n.marks=gt.from(e.marks||{}),this.nodes=Pv.compile(this.spec.nodes,this),this.marks=hh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=wi.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Dv(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Dv(this,o.split(" "))}this.nodeFromJSON=s=>Kn.fromJSON(this,s),this.markFromJSON=s=>Ee.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Pv){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Vu(r,r.defaultAttrs,e,Ee.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Dv(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],i=t.marks[s],o=i;if(i)n.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function yI(t){return t.tag!=null}function vI(t){return t.style!=null}class ws{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(yI(s))this.tags.push(s);else if(vI(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,n={}){let r=new $v(this,n,!1);return r.addAll(e,Ee.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new $v(this,n,!0);return r.addAll(e,Ee.none,n.from,n.to),U.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(bI(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||n.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,n,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<i)break}n.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=zv(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=zv(o)),o.node||o.ignore||o.mark||(o.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ws(e,ws.schemaRules(e)))}}const aS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lS={ol:!0,ul:!0},wl=1,im=2,Oa=4;function Lv(t,e,n){return e!=null?(e?wl:0)|(e==="full"?im:0):t&&t.whitespace=="pre"?wl|im:n&~Oa}class Sc{constructor(e,n,r,s,i,o){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=Ee.none,this.match=i||(o&Oa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(D.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&wl)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let n=D.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(D.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!aS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class $v{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,i,o=Lv(null,n.preserveWhitespace,0)|(r?Oa:0);s?i=new Sc(s.type,s.attrs,Ee.none,!0,n.topMatch||s.type.contentMatch,o):r?i=new Sc(null,null,Ee.none,!0,null,o):i=new Sc(e.schema.topNodeType,null,Ee.none,!0,null,o),this.nodes=[i],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,i=s.options&im?"full":this.localPreserveWS||(s.options&wl)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)if(i==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=r.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),n,!0),a[l]&&this.insertNode(o.text(a[l]),n,!/\S/.test(a[l]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;lS.hasOwnProperty(o)&&this.parser.normalizeLists&&wI(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:xI.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(aS.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=l&&l.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,r,s){let i,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,n.attrs||null,r,n.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[n.mark];r=r.concat(l.create(n.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,n,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,n);this.findAtPoint(e,i)}findPlace(e,n,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)n=this.enterInner(s[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(n=this.enterInner(i,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=Ee.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Bv(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,n,r,s){let i=this.findPlace(e.create(n),r,!1);return i&&(i=this.enterInner(e,n,r,!0,s)),i}enterInner(e,n,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=Lv(e,i,o.options);o.options&Oa&&o.content.length==0&&(a|=Oa);let l=Ee.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Bv(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Sc(e,n,l,s,null,a)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=wl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function wI(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&lS.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function bI(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function zv(t){let e={};for(let n in t)e[n]=t[n];return e}function Bv(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class Ni{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=xf(n).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=eu(xf(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,n);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&eu(xf(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return eu(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ni(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Uv(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Uv(e.marks)}}function Uv(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function xf(t){return t.document||window.document}const Fv=new WeakMap;function kI(t){let e=Fv.get(t);return e===void 0&&Fv.set(t,e=SI(t)),e}function SI(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function eu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=kI(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(n=s.slice(0,o),s=s.slice(o+1));let a,l=n?t.createElementNS(n,s):t.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?l.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&l.style?l.style.cssText=c[d]:l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=eu(t,f,n,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const cS=65535,uS=Math.pow(2,16);function EI(t,e){return t+e*uS}function Hv(t){return t&cS}function CI(t){return(t-(t&cS))/uS}const dS=1,hS=2,tu=4,fS=8;class om{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&fS)>0}get deletedBefore(){return(this.delInfo&(dS|tu))>0}get deletedAfter(){return(this.delInfo&(hS|tu))>0}get deletedAcross(){return(this.delInfo&tu)>0}}class on{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&on.empty)return on.empty}recover(e){let n=0,r=Hv(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+CI(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],d=l+c;if(e<=d){let f=c?e==l?-1:e==d?1:n:n,p=l+s+(f<0?0:u);if(r)return p;let m=e==(n<0?l:d)?null:EI(a/3,e-l),y=e==l?hS:e==d?dS:tu;return(n<0?e!=l:e!=d)&&(y|=fS),new om(p,y,m)}s+=u-c}return r?e+s:new om(e+s,0,null)}touches(e,n){let r=0,s=Hv(n),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+n],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new on(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?on.empty:new on(e<0?[0,-e,0]:[0,0,e])}}on.empty=new on([]);class bl{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new bl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new bl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new om(e,s,null)}}const wf=Object.create(null);class At{getMap(){return on.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wf[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in wf)throw new RangeError("Duplicate use of step JSON ID "+e);return wf[e]=n,n.prototype.jsonID=e,n}}class Xe{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Xe(e,null)}static fail(e){return new Xe(null,e)}static fromReplace(e,n,r,s){try{return Xe.ok(e.replace(n,r,s))}catch(i){if(i instanceof Uu)return Xe.fail(i.message);throw i}}}function Vg(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(Vg(i.content,e,i))),i.isInline&&(i=e(i,n,s)),r.push(i)}return D.fromArray(r)}class cs extends At{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new U(Vg(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),n.openStart,n.openEnd);return Xe.fromReplace(e,this.from,this.to,i)}invert(){return new Hn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new cs(n.pos,r.pos,this.mark)}merge(e){return e instanceof cs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new cs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new cs(n.from,n.to,e.markFromJSON(n.mark))}}At.jsonID("addMark",cs);class Hn extends At{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new U(Vg(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Xe.fromReplace(e,this.from,this.to,r)}invert(){return new cs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Hn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Hn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Hn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hn(n.from,n.to,e.markFromJSON(n.mark))}}At.jsonID("removeMark",Hn);class us extends At{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Xe.fromReplace(e,this.pos,this.pos+1,new U(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new us(this.pos,n.marks[s]);return new us(this.pos,this.mark)}}return new bi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new us(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new us(n.pos,e.markFromJSON(n.mark))}}At.jsonID("addNodeMark",us);class bi extends At{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Xe.fromReplace(e,this.pos,this.pos+1,new U(D.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new us(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new bi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new bi(n.pos,e.markFromJSON(n.mark))}}At.jsonID("removeNodeMark",bi);class ct extends At{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&am(e,this.from,this.to)?Xe.fail("Structure replace would overwrite content"):Xe.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new on([this.from,this.to-this.from,this.slice.size])}invert(e){return new ct(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new ct(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ct)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?U.empty:new U(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ct(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?U.empty:new U(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ct(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ct(n.from,n.to,U.fromJSON(e,n.slice),!!n.structure)}}At.jsonID("replace",ct);class dt extends At{constructor(e,n,r,s,i,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(am(e,this.from,this.gapFrom)||am(e,this.gapTo,this.to)))return Xe.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Xe.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Xe.fromReplace(e,this.from,this.to,r):Xe.fail("Content does not fit in gap")}getMap(){return new on([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new dt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||i>r.pos?null:new dt(n.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new dt(n.from,n.to,n.gapFrom,n.gapTo,U.fromJSON(e,n.slice),n.insert,!!n.structure)}}At.jsonID("replaceAround",dt);function am(t,e,n){let r=t.resolve(e),s=n-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function TI(t,e,n,r){let s=[],i=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),p=Math.min(c+l.nodeSize,n),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[y])?o.to=p:s.push(o=new Hn(f,p,d[y])));a&&a.to==f?a.to=p:i.push(a=new cs(f,p,r))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function NI(t,e,n,r){let s=[],i=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof hh){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],f;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&d.eq(s[p].style)&&(f=m)}f?(f.to=c,f.step=i):s.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>t.step(new Hn(o.from,o.to,o.style)))}function Wg(t,e,n,r=n.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new ct(a,u,U.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Hn(a,u,c.marks[f]));if(s&&c.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,m;for(;f=p.exec(c.text);)m||(m=new U(D.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new ct(a+f.index,a+f.index+f[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(D.empty,!0);t.replace(a,a,new U(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function _I(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ho(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,i=0;;--r){let o=t.$from.node(r),a=t.$from.index(r)+s,l=t.$to.indexAfter(r)-i;if(r<t.depth&&o.canReplace(a,l,n))return r;if(r==0||o.type.spec.isolating||!_I(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function jI(t,e,n){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=D.empty,d=0;for(let m=i,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=D.from(r.node(m).copy(u)),d++):l--;let f=D.empty,p=0;for(let m=i,y=!1;m>n;m--)y||s.after(m+1)<s.end(m)?(y=!0,f=D.from(s.node(m).copy(f)),p++):c++;t.step(new dt(l,c,o,a,new U(u.append(f),d,p),u.size-d,!0))}function Kg(t,e,n=null,r=t){let s=RI(t,e),i=s&&AI(r,e);return i?s.map(Vv).concat({type:e,attrs:n}).concat(i.map(Vv)):null}function Vv(t){return{type:t,attrs:null}}function RI(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return n.canReplaceWith(r,s,o)?i:null}function AI(t,e){let{parent:n,startIndex:r,endIndex:s}=t,i=n.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function MI(t,e,n){let r=D.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let a=n[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=D.from(n[o].type.create(n[o].attrs,r))}let s=e.start,i=e.end;t.step(new dt(s,i,s,i,new U(r,0,0),n.length,!0))}function OI(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&II(t.doc,t.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&mS(t,o,a,i),Wg(t,t.mapping.slice(i).map(a,1),r,void 0,c===null);let u=t.mapping.slice(i),d=u.map(a,1),f=u.map(a+o.nodeSize,1);return t.step(new dt(d,f,d+1,f-1,new U(D.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&pS(t,o,a,i),!1}})}function pS(t,e,n,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(r).map(n+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function mS(t,e,n,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function II(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function PI(t,e,n,r,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");n||(n=i.type);let o=n.create(r,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!n.validContent(i.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new dt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new U(D.from(o),0,0),1,!0))}function Nr(t,e,n=1,r){let s=t.resolve(e),i=s.depth-n,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=n-2;c>i;c--,u--){let d=s.node(c),f=s.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(p))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function DI(t,e,n=1,r){let s=t.doc.resolve(e),i=D.empty,o=D.empty;for(let a=s.depth,l=s.depth-n,c=n-1;a>l;a--,c--){i=D.from(s.node(a).copy(i));let u=r&&r[c];o=D.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}t.step(new ct(e,e,new U(i.append(o),n,n),!0))}function Is(t,e){let n=t.resolve(e),r=n.index();return gS(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function LI(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?t.type.schema.nodes.text:i.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(i.marks))return!1}return n.validEnd}function gS(t,e){return!!(t&&e&&!t.isLeaf&&LI(t,e))}function fh(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):n>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&gS(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function $I(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-n),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);mS(t,u.node(),u.before(),a)}o.inlineContent&&Wg(t,e+n-1,o,i.node().contentMatchAt(i.index()),r==null);let l=t.mapping.slice(a),c=l.map(e-n);if(t.step(new ct(c,l.map(e+n,-1),U.empty,!0)),r===!0){let u=t.doc.resolve(c);pS(t,u.node(),u.before(),t.steps.length)}return t}function zI(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,n))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,n))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function yS(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let i=0;i<n.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(n.openStart==0&&n.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function ph(t,e,n=e,r=U.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),i=t.resolve(n);return vS(s,i,r)?new ct(e,n,r):new BI(s,i,r).fit()}function vS(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class BI{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=D.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=D.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new U(i,o,a);return e>-1?new dt(r.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||r.pos!=this.$to.pos?new ct(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=n.firstChild;if(n.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}n=i.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=bf(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(D.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=bf(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new U(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=bf(e,n);if(s.childCount<=1&&n>0){let i=e.size-n<=n+s.size;this.unplaced=new U(ha(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new U(ha(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:i}){for(;this.depth>n;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(s){for(let y=0;y<s.childCount;y++)u.push(s.child(y));d=d.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),v=d.matchType(y.type);if(!v)break;c++,(c>1||l==0||y.content.size)&&(d=v,u.push(xS(y.mark(f.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=fa(this.placed,n,D.from(u)),this.frontier[n].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,v=a;y<p;y++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=m?e==0?U.empty:new U(ha(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new U(ha(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!kf(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],i=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=kf(e,n,s,r,i);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=kf(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:i?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=fa(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=fa(this.placed,this.depth,D.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(D.empty,!0);n.childCount&&(this.placed=fa(this.placed,this.frontier.length,n))}}function ha(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(ha(t.firstChild.content,e-1,n)))}function fa(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(fa(t.lastChild.content,e-1,n)))}function bf(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function xS(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,xS(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(D.empty,!0)))),t.copy(r)}function kf(t,e,n,r,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!n.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!UI(n,i.content,o)?a:null}function UI(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function FI(t){return t.spec.defining||t.spec.definingForContent}function HI(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),i=t.doc.resolve(n);if(vS(s,i,r))return t.step(new ct(e,n,r));let o=bS(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let m=s.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?a=f:s.before(f)==p&&o.splice(1,0,-f)}let l=o.indexOf(a),c=[],u=r.openStart;for(let f=r.content,p=0;;p++){let m=f.firstChild;if(c.push(m),p==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let p=c[f],m=FI(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=f;else if(m||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+u+1)%(r.openStart+1),m=c[p];if(m)for(let y=0;y<o.length;y++){let v=o[(y+l)%o.length],g=!0;v<0&&(g=!1,v=-v);let x=s.node(v-1),w=s.index(v-1);if(x.canReplaceWith(w,w,m.type,m.marks))return t.replace(s.before(v),g?i.after(v):n,new U(wS(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=o[f];p<0||(e=s.before(p),n=i.after(p))}}function wS(t,e,n,r,s){if(e<n){let i=t.firstChild;t=t.replaceChild(0,i.copy(wS(i.content,e+1,n,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(D.empty,!0))}return t}function VI(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=zI(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new U(D.from(r),0,0))}function WI(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),i=bS(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return t.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return t.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&s.end(o)-n!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function bS(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&n.push(s)}return n}class go extends At{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Xe.fail("No node at attribute step's position");let r=Object.create(null);for(let i in n.attrs)r[i]=n.attrs[i];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Xe.fromReplace(e,this.pos,this.pos+1,new U(D.from(s),0,n.isLeaf?0:1))}getMap(){return on.empty}invert(e){return new go(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new go(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new go(n.pos,n.attr,n.value)}}At.jsonID("attr",go);class kl extends At{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Xe.ok(r)}getMap(){return on.empty}invert(e){return new kl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new kl(n.attr,n.value)}}At.jsonID("docAttr",kl);let To=class extends Error{};To=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};To.prototype=Object.create(Error.prototype);To.prototype.constructor=To;To.prototype.name="TransformError";class kS{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new bl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new To(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let s=this.mapping.maps[r];r&&(e=s.map(e,1),n=s.map(n,-1)),s.forEach((i,o,a,l)=>{e=Math.min(e,a),n=Math.max(n,l)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=U.empty){let s=ph(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new U(D.from(r),0,0))}delete(e,n){return this.replace(e,n,U.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return HI(this,e,n,r),this}replaceRangeWith(e,n,r){return VI(this,e,n,r),this}deleteRange(e,n){return WI(this,e,n),this}lift(e,n){return jI(this,e,n),this}join(e,n=1){return $I(this,e,n),this}wrap(e,n){return MI(this,e,n),this}setBlockType(e,n=e,r,s=null){return OI(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return PI(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new go(e,n,r)),this}setDocAttribute(e,n){return this.step(new kl(e,n)),this}addNodeMark(e,n){return this.step(new us(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Ee)n.isInSet(r.marks)&&this.step(new bi(e,n));else{let s=r.marks,i,o=[];for(;i=n.isInSet(s);)o.push(new bi(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,n=1,r){return DI(this,e,n,r),this}addMark(e,n,r){return TI(this,e,n,r),this}removeMark(e,n,r){return NI(this,e,n,r),this}clearIncompatible(e,n,r){return Wg(this,e,n,r),this}}const Sf=Object.create(null);class ce{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new KI(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=U.empty){let r=n.content.lastChild,s=null;for(let a=0;a<n.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?U.empty:n),a==0&&qv(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),qv(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new re(e):Hi(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=n<0?Hi(e.node(0),e.node(i),e.before(i+1),e.index(i),n,r):Hi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new cn(e.node(0))}static atStart(e){return Hi(e,e,0,0,1)||new cn(e)}static atEnd(e){return Hi(e,e,e.content.size,e.childCount,-1)||new cn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Sf[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Sf)throw new RangeError("Duplicate use of selection JSON ID "+e);return Sf[e]=n,n.prototype.jsonID=e,n}getBookmark(){return re.between(this.$anchor,this.$head).getBookmark()}}ce.prototype.visible=!0;class KI{constructor(e,n){this.$from=e,this.$to=n}}let Wv=!1;function Kv(t){!Wv&&!t.parent.inlineContent&&(Wv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class re extends ce{constructor(e,n=e){Kv(e),Kv(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return ce.near(r);let s=e.resolve(n.map(this.anchor));return new re(s.parent.inlineContent?s:r,r)}replace(e,n=U.empty){if(super.replace(e,n),n==U.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof re&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new mh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new re(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let i=ce.findFrom(n,r,!0)||ce.findFrom(n,-r,!0);if(i)n=i.$head;else return ce.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(ce.findFrom(e,-r,!0)||ce.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new re(e,n)}}ce.jsonID("text",re);class mh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new mh(e.map(this.anchor),e.map(this.head))}resolve(e){return re.between(e.resolve(this.anchor),e.resolve(this.head))}}class X extends ce{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),i=e.resolve(s);return r?ce.near(i):new X(i)}content(){return new U(D.from(this.node),0,0)}eq(e){return e instanceof X&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new qg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new X(e.resolve(n.anchor))}static create(e,n){return new X(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}X.prototype.visible=!1;ce.jsonID("node",X);class qg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new mh(r,r):new qg(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&X.isSelectable(r)?new X(n):ce.near(n)}}class cn extends ce{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=U.empty){if(n==U.empty){e.delete(0,e.doc.content.size);let r=ce.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new cn(e)}map(e){return new cn(e)}eq(e){return e instanceof cn}getBookmark(){return qI}}ce.jsonID("all",cn);const qI={map(){return this},resolve(t){return new cn(t)}};function Hi(t,e,n,r,s,i=!1){if(e.inlineContent)return re.create(t,n);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&X.isSelectable(a))return X.create(t,n-(s<0?a.nodeSize:0))}else{let l=Hi(t,a,n+s,s<0?a.childCount:0,s,i);if(l)return l}n+=a.nodeSize*s}return null}function qv(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof ct||s instanceof dt))return;let i=t.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(ce.near(t.doc.resolve(o),n))}const Jv=1,Ec=2,Gv=4;class JI extends kS{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Jv)&~Ec,this.storedMarks=null,this}get selectionSet(){return(this.updated&Jv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ec,this}ensureMarks(e){return Ee.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ec)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Ec,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Ee.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(n);i=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,i)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(ce.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Gv,this}get scrolledIntoView(){return(this.updated&Gv)>0}}function Yv(t,e){return!e||!t?t:t.bind(e)}class pa{constructor(e,n,r){this.name=e,this.init=Yv(n.init,r),this.apply=Yv(n.apply,r)}}const GI=[new pa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new pa("selection",{init(t,e){return t.selection||ce.atStart(e.doc)},apply(t){return t.selection}}),new pa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new pa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ef{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=GI.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new pa(r.key,r.spec.state,r))})}}class io{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new io(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];n[i.name]=i.apply(e,this[i.name],this,n)}return n}get tr(){return new JI(this)}static create(e){let n=new Ef(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new io(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new Ef(this.schema,e.plugins),r=n.fields,s=new io(n);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(n[r]=i.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Ef(e.schema,e.plugins),i=new io(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Kn.fromJSON(e.schema,n.doc);else if(o.name=="selection")i.selection=ce.fromJSON(i.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(i.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){i[o.name]=c.fromJSON.call(l,e,n[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function SS(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=SS(s,e,{})),n[r]=s}return n}class Fe{constructor(e){this.spec=e,this.props={},e.props&&SS(e.props,this,this.props),this.key=e.key?e.key.key:ES("plugin")}getState(e){return e[this.key]}}const Cf=Object.create(null);function ES(t){return t in Cf?t+"$"+ ++Cf[t]:(Cf[t]=0,t+"$")}class it{constructor(e="key"){this.key=ES(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Jg=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function CS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const TS=(t,e,n)=>{let r=CS(t,n);if(!r)return!1;let s=Gg(r);if(!s){let o=r.blockRange(),a=o&&Ho(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(PS(t,s,e,-1))return!0;if(r.parent.content.size==0&&(No(i,"end")||X.isSelectable(i)))for(let o=r.depth;;o--){let a=ph(t.doc,r.before(o),r.after(o),U.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(No(i,"end")?ce.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):X.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},YI=(t,e,n)=>{let r=CS(t,n);if(!r)return!1;let s=Gg(r);return s?NS(t,s,e):!1},QI=(t,e,n)=>{let r=jS(t,n);if(!r)return!1;let s=Yg(r);return s?NS(t,s,e):!1};function NS(t,e,n){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=ph(t.doc,i,l,U.empty);if(!c||c.from!=i||c instanceof ct&&c.slice.size>=l-i)return!1;if(n){let u=t.tr.step(c);u.setSelection(re.create(u.doc,i)),n(u.scrollIntoView())}return!0}function No(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const _S=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;i=Gg(r)}let o=i&&i.nodeBefore;return!o||!X.isSelectable(o)?!1:(e&&e(t.tr.setSelection(X.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function Gg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function jS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const RS=(t,e,n)=>{let r=jS(t,n);if(!r)return!1;let s=Yg(r);if(!s)return!1;let i=s.nodeAfter;if(PS(t,s,e,1))return!0;if(r.parent.content.size==0&&(No(i,"start")||X.isSelectable(i))){let o=ph(t.doc,r.before(),r.after(),U.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(No(i,"start")?ce.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):X.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},AS=(t,e,n)=>{let{$head:r,empty:s}=t.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;i=Yg(r)}let o=i&&i.nodeAfter;return!o||!X.isSelectable(o)?!1:(e&&e(t.tr.setSelection(X.create(t.doc,i.pos)).scrollIntoView()),!0)};function Yg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const XI=(t,e)=>{let n=t.selection,r=n instanceof X,s;if(r){if(n.node.isTextblock||!Is(t.doc,n.from))return!1;s=n.from}else if(s=fh(t.doc,n.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);r&&i.setSelection(X.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},ZI=(t,e)=>{let n=t.selection,r;if(n instanceof X){if(n.node.isTextblock||!Is(t.doc,n.to))return!1;r=n.to}else if(r=fh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},eP=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),i=s&&Ho(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},MS=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Qg(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const tP=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),i=n.indexAfter(-1),o=Qg(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(ce.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},OS=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof cn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=Qg(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(re.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},IS=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Nr(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Ho(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function nP(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof X&&e.selection.node.isBlock)return!r.parentOffset||!Nr(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=Qg(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof re||e.selection instanceof cn)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Nr(u.doc,d,i.length,i);if(f||(i[0]=a?{type:a}:null,f=Nr(u.doc,d,i.length,i)),!f)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),m=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return n&&n(u.scrollIntoView()),!0}}const rP=nP(),sP=(t,e)=>{let{$from:n,to:r}=t.selection,s,i=n.sharedDepth(r);return i==0?!1:(s=n.before(i),e&&e(t.tr.setSelection(X.create(t.doc,s))),!0)};function iP(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Is(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function PS(t,e,n,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&iP(t,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(n){let p=e.pos+i.nodeSize,m=D.empty;for(let g=o.length-1;g>=0;g--)m=D.from(o[g].create(null,m));m=D.from(s.copy(m));let y=t.tr.step(new dt(e.pos-1,p,e.pos,p,new U(m,1,0),o.length,!0)),v=y.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==s.type&&Is(y.doc,v.pos)&&y.join(v.pos),n(y.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:ce.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Ho(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&No(i,"start",!0)&&No(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let y=i,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,y.content)){if(n){let g=D.empty;for(let w=m.length-1;w>=0;w--)g=D.from(m[w].copy(g));let x=t.tr.step(new dt(e.pos-m.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new U(g,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function DS(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(n&&n(e.tr.setSelection(re.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const oP=DS(-1),aP=DS(1);function lP(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i),a=o&&Kg(o,t,e);return a?(r&&r(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function Qv(t,e=null){return function(n,r){let s=!1;for(let i=0;i<n.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[i];n.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let u=n.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let i=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];i.setBlockType(a,l,t,e)}r(i.scrollIntoView())}return!0}}function Xg(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}Xg(Jg,TS,_S);Xg(Jg,RS,AS);Xg(MS,OS,IS,rP);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function cP(t,e=null){return function(n,r){let{$from:s,$to:i}=n.selection,o=s.blockRange(i);if(!o)return!1;let a=r?n.tr:null;return uP(a,o,t,e)?(r&&r(a.scrollIntoView()),!0):!1}}function uP(t,e,n,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Hu(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Hu(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=Kg(i,n,r,e);return a?(t&&dP(t,e,a,s,n),!0):!1}function dP(t,e,n,r,s){let i=D.empty;for(let u=n.length-1;u>=0;u--)i=D.from(n[u].type.create(n[u].attrs,i));t.step(new dt(e.start-(r?2:0),e.end,e.start,e.end,new U(i,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==s&&(o=u+1);let a=n.length-o,l=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Nr(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function hP(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?n?r.node(i.depth-1).type==t?fP(e,n,t,i):pP(e,n,i):!0:!1}}function fP(t,e,n,r){let s=t.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new dt(i-1,o,i,o,new U(D.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Hu(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=Ho(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return Is(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function pP(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(n.start),o=i.nodeAfter;if(r.mapping.map(n.end)!=n.start+i.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?D.empty:D.from(s))))return!1;let d=i.pos,f=d+o.nodeSize;return r.step(new dt(d-(a?1:0),f+(l?1:0),d+1,f-1,new U((a?D.empty:D.from(s.copy(D.empty))).append(l?D.empty:D.from(s.copy(D.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function mP(t){return function(e,n){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=D.from(c?t.create():null),d=new U(D.from(t.create(null,D.from(a.type.create(null,u)))),c?3:1,0),f=i.start,p=i.end;n(e.tr.step(new dt(f-(c?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}const vt=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},_o=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let lm=null;const wr=function(t,e,n){let r=lm||(lm=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},gP=function(){lm=null},ki=function(t,e,n,r){return n&&(Xv(t,e,n,r,-1)||Xv(t,e,n,r,1))},yP=/^(img|br|input|textarea|hr)$/i;function Xv(t,e,n,r,s){for(var i;;){if(t==n&&e==r)return!0;if(e==(s<0?0:kn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Fl(t)||yP.test(t.nodeName)||t.contentEditable=="false")return!1;e=vt(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?kn(t):0}else return!1}}function kn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function vP(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=kn(t)}else if(t.parentNode&&!Fl(t))e=vt(t),t=t.parentNode;else return null}}function xP(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Fl(t))e=vt(t)+1,t=t.parentNode;else return null}}function wP(t,e,n){for(let r=e==0,s=e==kn(t);r||s;){if(t==n)return!0;let i=vt(t);if(t=t.parentNode,!t)return!1;r=r&&i==0,s=s&&i==kn(t)}}function Fl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const gh=function(t){return t.focusNode&&ki(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Gs(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function bP(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function kP(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(kn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(kn(r.startContainer),r.startOffset)}}}const ur=typeof navigator<"u"?navigator:null,Zv=typeof document<"u"?document:null,Ps=ur&&ur.userAgent||"",cm=/Edge\/(\d+)/.exec(Ps),LS=/MSIE \d/.exec(Ps),um=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ps),Gt=!!(LS||um||cm),bs=LS?document.documentMode:um?+um[1]:cm?+cm[1]:0,Cn=!Gt&&/gecko\/(\d+)/i.test(Ps);Cn&&+(/Firefox\/(\d+)/.exec(Ps)||[0,0])[1];const dm=!Gt&&/Chrome\/(\d+)/.exec(Ps),wt=!!dm,$S=dm?+dm[1]:0,Rt=!Gt&&!!ur&&/Apple Computer/.test(ur.vendor),jo=Rt&&(/Mobile\/\w+/.test(Ps)||!!ur&&ur.maxTouchPoints>2),xn=jo||(ur?/Mac/.test(ur.platform):!1),zS=ur?/Win/.test(ur.platform):!1,Er=/Android \d/.test(Ps),Hl=!!Zv&&"webkitFontSmoothing"in Zv.documentElement.style,SP=Hl?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function EP(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function pr(t,e){return typeof t=="number"?t:t[e]}function CP(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function ex(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=_o(o);continue}let a=o,l=a==i.body,c=l?EP(i):CP(a),u=0,d=0;if(e.top<c.top+pr(r,"top")?d=-(c.top-e.top+pr(s,"top")):e.bottom>c.bottom-pr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+pr(s,"top")-c.top:e.bottom-c.bottom+pr(s,"bottom")),e.left<c.left+pr(r,"left")?u=-(c.left-e.left+pr(s,"left")):e.right>c.right-pr(r,"right")&&(u=e.right-c.right+pr(s,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v}}let f=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:_o(o)}}function TP(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:BS(t.dom)}}function BS(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=_o(r));return e}function NP({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;US(n,r==0?0:r-e)}function US(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:i}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let $i=null;function _P(t){if(t.setActive)return t.setActive();if($i)return t.focus($i);let e=BS(t);t.focus($i==null?{get preventScroll(){return $i={preventScroll:!0},!0}}:void 0),$i||($i=!1,US(e,0))}function FS(t,e){let n,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=wr(u).getClientRects();else continue;for(let p=0;p<f.length;p++){let m=f[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,s=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!n&&l&&(n=l,s=c,r=0),n&&n.nodeType==3?jP(n,s):!n||r&&n.nodeType==1?{node:t,offset:i}:FS(n,s)}function jP(t,e){let n=t.nodeValue.length,r=document.createRange(),s;for(let i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);let o=Wr(r,1);if(o.top!=o.bottom&&Zg(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),s||{node:t,offset:0}}function Zg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function RP(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function AP(t,e,n){let{node:r,offset:s}=FS(e,n),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,s,i)}function MP(t,e,n,r){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function HS(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Zg(e,c))return HS(o,e,c)}}if((i=(i+1)%r)==s)break}return t}function OP(t,e){let n=t.dom.ownerDocument,r,s=0,i=kP(n,e.left,e.top);i&&({node:r,offset:s}=i);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Zg(e,c)||(o=HS(t.dom,e,c),!o))return null}if(Rt)for(let c=o;r&&c;c=_o(c))c.draggable&&(r=void 0);if(o=RP(o,e),r){if(Cn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;Hl&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=MP(t,r,s,e))}a==null&&(a=AP(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function tx(t){return t.top<t.bottom||t.left<t.right}function Wr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(tx(r))return r}return Array.prototype.find.call(n,tx)||t.getBoundingClientRect()}const IP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function VS(t,e,n){let{node:r,offset:s,atom:i}=t.docView.domFromPos(e,n<0?-1:1),o=Hl||Cn;if(r.nodeType==3)if(o&&(IP.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let l=Wr(wr(r,s,s),n);if(Cn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=Wr(wr(r,s-1,s-1),-1);if(c.top==l.top){let u=Wr(wr(r,s,s+1),-1);if(u.top!=l.top)return sa(u,u.left<c.left)}}return l}else{let l=s,c=s,u=n<0?1:-1;return n<0&&!s?(c++,u=-1):n>=0&&s==r.nodeValue.length?(l--,u=1):n<0?l--:c++,sa(Wr(wr(r,l,c),u),u<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(n<0||s==kn(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Tf(l.getBoundingClientRect(),!1)}if(i==null&&s<kn(r)){let l=r.childNodes[s];if(l.nodeType==1)return Tf(l.getBoundingClientRect(),!0)}return Tf(r.getBoundingClientRect(),n>=0)}if(i==null&&s&&(n<0||s==kn(r))){let l=r.childNodes[s-1],c=l.nodeType==3?wr(l,kn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return sa(Wr(c,1),!1)}if(i==null&&s<kn(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?wr(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return sa(Wr(c,-1),!0)}return sa(Wr(r.nodeType==3?wr(r):r,-n),n>=0)}function sa(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Tf(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function WS(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function PP(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return WS(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=VS(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=wr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const DP=/[\u0590-\u08ac]/;function LP(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=t.domSelection();return a?!DP.test(r.parent.textContent)||!a.modify?n=="left"||n=="backward"?i:o:WS(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=a.caretBidiLevel;a.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return f!=null&&(a.caretBidiLevel=f),v}):r.pos==r.start()||r.pos==r.end()}let nx=null,rx=null,sx=!1;function $P(t,e,n){return nx==e&&rx==n?sx:(nx=e,rx=n,sx=n=="up"||n=="down"?PP(t,e,n):LP(t,e,n))}const Tn=0,ix=1,ni=2,dr=3;class Vl{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Tn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>vt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!n||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof qS){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof KS&&i.side>=0;r--);if(n<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&n&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,n):{node:this.contentDOM,offset:i?vt(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,n):{node:this.contentDOM,offset:i?vt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=vt(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=vt(d.dom);break}n+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let i=Math.min(e,n),o=Math.max(e,n);for(let p=0,m=0;p<this.children.length;p++){let y=this.children[p],v=m+y.size;if(i>m&&o<v)return y.setSelection(e-m-y.border,n-m-y.border,r,s);m=v}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Cn||Rt)&&e==n){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let y=p,v;y;y=y.parentNode){if(v=y.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:vt(v)+1});break}let g=y.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let y=p.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Cn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&Rt)&&ki(a.node,a.offset,u.anchorNode,u.anchorOffset)&&ki(l.node,l.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&Cn)){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let a=r+i.border,l=o-i.border;if(e>=a&&n<=l){this.dirty=e==r||n==o?ni:ix,e==a&&n==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=dr:i.markDirty(e-a,n-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?ni:dr}r=o}this.dirty=ni}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ni:ix;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class KS extends Vl{constructor(e,n,r,s){let i,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,i=this}matchesWidget(e){return this.dirty==Tn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class zP extends Vl{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Si extends Vl{constructor(e,n,r,s,i){super(e,[],r,s),this.mark=n,this.spec=i}static create(e,n,r,s){let i=s.nodeViews[n.type.name],o=i&&i(n,s,r);return(!o||!o.dom)&&(o=Ni.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Si(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&dr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=dr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Tn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Tn}}slice(e,n,r){let s=Si.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;n<o&&(i=fm(i,n,o,r)),e>0&&(i=fm(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ks extends Vl{constructor(e,n,r,s,i,o,a,l,c){super(e,[],i,o),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,n,r,s,i,o){let a=i.nodeViews[n.type.name],l,c=a&&a(n,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ni.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=YS(u,r,n),c?l=new BP(e,n,r,s,u,d||null,f,c,i,o+1):n.isText?new yh(e,n,r,s,u,f,i):new ks(e,n,r,s,u,d||null,f,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>D.empty)}return e}matchesNode(e,n,r){return this.dirty==Tn&&e.eq(this.node)&&Wu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,i=e.composing?this.localCompositionInfo(e,n):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new FP(this,o&&o.node,e);WP(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e,u):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Ee.none:this.node.child(u).marks,r,e,u),l.placeWidget(c,e,s)},(c,u,d,f)=>{l.syncToMarks(c.marks,r,e,f);let p;l.findNodeMatch(c,u,d,f)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,f,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ni)&&(o&&this.protectLocalComposition(e,o),JS(this.contentDOM,this.children,e),jo&&KP(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof re)||r<n||s>n+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=qP(this.node.content,o,r-n,s-n);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let i=n;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new zP(this,i,n,s);e.input.compositionNodes.push(o),this.children=fm(this.children,r,r+s.length,e,o)}update(e,n,r,s){return this.dirty==dr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Tn}updateOuterDeco(e){if(Wu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=GS(this.dom,this.nodeDOM,hm(this.outerDeco,this.node,n),hm(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ox(t,e,n,r,s){YS(r,e,t);let i=new ks(void 0,t,e,n,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class yh extends ks{constructor(e,n,r,s,i,o,a){super(e,n,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==dr||this.dirty!=Tn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Tn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Tn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),i=document.createTextNode(s.text);return new yh(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=dr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class qS extends Vl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Tn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class BP extends ks{constructor(e,n,r,s,i,o,a,l,c,u){super(e,n,r,s,i,o,a,c,u),this.spec=l}update(e,n,r,s){if(this.dirty==dr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,n,r);return i&&this.updateInner(e,n,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function JS(t,e,n){let r=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=r;)r=ax(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(a,r);if(o instanceof Si){let l=r?r.previousSibling:t.lastChild;JS(o.contentDOM,o.children,n),r=l?l.nextSibling:t.firstChild}}for(;r;)r=ax(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const Ia=function(t){t&&(this.nodeName=t)};Ia.prototype=Object.create(null);const ri=[new Ia];function hm(t,e,n){if(t.length==0)return ri;let r=n?ri[0]:new Ia,s=[r];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(r=new Ia(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&s.length==1&&s.push(r=new Ia(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function GS(t,e,n,r){if(n==ri&&r==ri)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=n[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=ri[0]),s=l}UP(s,a||ri[0],o)}return s}function UP(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&t.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function YS(t,e,n){return GS(t,t,ri,hm(e,n,t.nodeType!=1))}function Wu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ax(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class FP{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=HP(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,s){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Tn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1,c=this.top.children.length;s<this.preMatch.index&&(c=Math.min(this.index+3,c));for(let u=this.index;u<c;u++){let d=this.top.children[u];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Si.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,n,r,s,i){let o=this.top.children[s];return o.dirty==dr&&o.dom==o.contentDOM&&(o.dirty=ni),o.update(e,n,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof ks){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,f=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=dr&&Wu(n,l.outerDeco));if(!f&&l.update(e,n,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(l,e,n,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ni,d.updateChildren(s,o+1),d.dirty=Tn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,i,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Wu(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=ks.create(this.top,n,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,r,s,i){let o=ks.create(this.top,e,n,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new KS(this.top,e,n,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Si;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof yh)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Rt||wt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new qS(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function HP(t,e){let n=e,r=n.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=n.children[r-1];if(c instanceof Si)n=c,r=c.children.length;else{a=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function VP(t,e){return t.type.side-e.type.side}function WP(t,e,n,r){let s=e.locals(t),i=0;if(s.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let v=s[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(VP);for(let v=0;v<d.length;v++)n(d[v],c,!!l)}else n(u,c,!!l);let f,p;if(l)p=-1,f=l,l=null;else if(c<t.childCount)p=c,f=t.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+f.nodeSize;if(f.isText){let v=m;o<s.length&&s[o].from<v&&(v=s[o].from);for(let g=0;g<a.length;g++)a[g].to<v&&(v=a[g].to);v<m&&(l=f.cut(v-i),f=f.cut(0,v-i),m=v,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let y=f.isInline&&!f.isLeaf?a.filter(v=>!v.inline):a.slice();r(f,y,e.forChild(i,f),p),i=m}}function KP(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function qP(t,e,n,r){for(let s=0,i=0;s<t.childCount&&i<=r;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let c=t.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=n){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function fm(t,e,n,r,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>n&&i.push(l.slice(n-c,l.size,r)))}return i}function ey(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(gh(n)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&X.isSelectable(d)&&s.parent&&!(d.isInline&&wP(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;c=new X(o==f?a:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let p=0;p<n.rangeCount;p++){let m=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=f==t.state.selection.anchor?[f,d]:[d,f],a=r.resolve(o)}else l=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;c=ty(t,u,a,d)}return c}function QS(t){return t.editable?t.hasFocus():ZS(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function _r(t,e=!1){let n=t.state.selection;if(XS(t,n),!!QS(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&wt){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&ki(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)GP(t);else{let{anchor:r,head:s}=n,i,o;lx&&!(n instanceof re)&&(n.$from.parent.inlineContent||(i=cx(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=cx(t,n.to))),t.docView.setSelection(r,s,t,e),lx&&(i&&ux(i),o&&ux(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&JP(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const lx=Rt||wt&&$S<63;function cx(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,i=r?n.childNodes[r-1]:null;if(Rt&&s&&s.contentEditable=="false")return Nf(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Nf(s);if(i)return Nf(i)}}function Nf(t){return t.contentEditable="true",Rt&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ux(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function JP(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!QS(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function GP(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,vt(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Gt&&bs<=11&&(n.disabled=!0,n.disabled=!1)}function XS(t,e){if(e instanceof X){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(dx(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else dx(t)}function dx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ty(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||re.between(e,n,r)}function hx(t){return t.editable&&!t.hasFocus()?!1:ZS(t)}function ZS(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function YP(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ki(e.node,e.offset,n.anchorNode,n.anchorOffset)}function pm(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&ce.findFrom(i,e)}function Yr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function fx(t,e,n){let r=t.state.selection;if(r instanceof re)if(n.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Yr(t,new re(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=pm(t.state,e);return s&&s instanceof X?Yr(t,s):!1}else if(!(xn&&n.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?X.isSelectable(i)?Yr(t,new X(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):Hl?Yr(t,new re(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof X&&r.node.isInline)return Yr(t,new re(e>0?r.$to:r.$from));{let s=pm(t.state,e);return s?Yr(t,s):!1}}}function Ku(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Pa(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function zi(t,e){return e<0?QP(t):XP(t)}function QP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,i,o=!1;for(Cn&&n.nodeType==1&&r<Ku(n)&&Pa(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let a=n.childNodes[r-1];if(Pa(a,-1))s=n,i=--r;else if(a.nodeType==3)n=a,r=n.nodeValue.length;else break}}else{if(eE(n))break;{let a=n.previousSibling;for(;a&&Pa(a,-1);)s=n.parentNode,i=vt(a),a=a.previousSibling;if(a)n=a,r=Ku(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?mm(t,n,r):s&&mm(t,s,i)}function XP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=Ku(n),i,o;for(;;)if(r<s){if(n.nodeType!=1)break;let a=n.childNodes[r];if(Pa(a,1))i=n,o=++r;else break}else{if(eE(n))break;{let a=n.nextSibling;for(;a&&Pa(a,1);)i=a.parentNode,o=vt(a)+1,a=a.nextSibling;if(a)n=a,r=0,s=Ku(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}i&&mm(t,i,o)}function eE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ZP(t,e){for(;t&&e==t.childNodes.length&&!Fl(t);)e=vt(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function eD(t,e){for(;t&&!e&&!Fl(t);)e=vt(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function mm(t,e,n){if(e.nodeType!=3){let i,o;(o=ZP(e,n))?(e=o,n=0):(i=eD(e,n))&&(e=i,n=i.nodeValue.length)}let r=t.domSelection();if(!r)return;if(gh(r)){let i=document.createRange();i.setEnd(e,n),i.setStart(e,n),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&_r(t)},50)}function px(t,e){let n=t.state.doc.resolve(e);if(!(wt||zS)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<n.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function mx(t,e,n){let r=t.state.selection;if(r instanceof re&&!r.empty||n.indexOf("s")>-1||xn&&n.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=pm(t.state,e);if(o&&o instanceof X)return Yr(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof cn?ce.near(o,e):ce.findFrom(o,e);return a?Yr(t,a):!1}return!1}function gx(t,e){if(!(t.state.selection instanceof re))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(n.pos-i.nodeSize,n.pos):o.delete(n.pos,n.pos+i.nodeSize),t.dispatch(o),!0}return!1}function yx(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function tD(t){if(!Rt||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;yx(t,r,"true"),setTimeout(()=>yx(t,r,"false"),20)}return!1}function nD(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function rD(t,e){let n=e.keyCode,r=nD(e);if(n==8||xn&&n==72&&r=="c")return gx(t,-1)||zi(t,-1);if(n==46&&!e.shiftKey||xn&&n==68&&r=="c")return gx(t,1)||zi(t,1);if(n==13||n==27)return!0;if(n==37||xn&&n==66&&r=="c"){let s=n==37?px(t,t.state.selection.from)=="ltr"?-1:1:-1;return fx(t,s,r)||zi(t,s)}else if(n==39||xn&&n==70&&r=="c"){let s=n==39?px(t,t.state.selection.from)=="ltr"?1:-1:1;return fx(t,s,r)||zi(t,s)}else{if(n==38||xn&&n==80&&r=="c")return mx(t,-1,r)||zi(t,-1);if(n==40||xn&&n==78&&r=="c")return tD(t)||mx(t,1,r)||zi(t,1);if(r==(xn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ny(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=t.someProp("clipboardSerializer")||Ni.fromSchema(t.state.schema),a=oE(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=iE[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:f,slice:e}}function tE(t,e,n,r,s){let i=s.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=!!e&&(r||i||!n);if(l){if(t.someProp("transformPastedText",f=>{e=f(e,i||r,t)}),i)return a=new U(D.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{a=f(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)a=d;else{let f=s.marks(),{schema:p}=t.state,m=Ni.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let v=o.appendChild(document.createElement("p"));y&&v.appendChild(m.serializeNode(p.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=aD(n),Hl&&lD(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||ws.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!sD.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)a=cD(vx(a,+u[1],+u[2]),u[4]);else if(a=U.maxOpen(iD(a.content,s),!0),a.openStart||a.openEnd){let d=0,f=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;f<a.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);a=vx(a,d,f)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const sD=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function iD(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&rE(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=sE(o[o.length-1],i.length));let u=nE(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return D.from(o)}return t}function nE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,D.from(t));return t}function rE(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=rE(t,e,n,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(D.from(nE(n,t,s+1))))}}function sE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,sE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(D.empty,!0);return t.copy(n.append(r))}function gm(t,e,n,r,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<r-1&&(a=gm(a,e,n,r,s+1,i)),s>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(D.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function vx(t,e,n){return e<t.openStart&&(t=new U(gm(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new U(gm(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const iE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let xx=null;function oE(){return xx||(xx=document.implementation.createHTMLDocument("title"))}let _f=null;function oD(t){let e=window.trustedTypes;return e?(_f||(_f=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),_f.createHTML(t)):t}function aD(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=oE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&iE[r[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),n.innerHTML=oD(t),s)for(let i=0;i<s.length;i++)n=n.querySelector(s[i])||n;return n}function lD(t){let e=t.querySelectorAll(wt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function cD(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=r.length-2;a>=0;a-=2){let l=n.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=D.from(l.create(r[a+1],s)),i++,o++}return new U(s,i,o)}const Lt={},$t={},uD={touchstart:!0,touchmove:!0};class dD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function hD(t){for(let e in Lt){let n=Lt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{pD(t,r)&&!ry(t,r)&&(t.editable||!(r.type in $t))&&n(t,r)},uD[e]?{passive:!0}:void 0)}Rt&&t.dom.addEventListener("input",()=>null),ym(t)}function ds(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function fD(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function ym(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ry(t,r))})}function ry(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function pD(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function mD(t,e){!ry(t,e)&&Lt[e.type]&&(t.editable||!(e.type in $t))&&Lt[e.type](t,e)}$t.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!lE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Er&&wt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),jo&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,Gs(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||rD(t,n)?n.preventDefault():ds(t,"key")};$t.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};$t.keypress=(t,e)=>{let n=e;if(lE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||xn&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof re)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,s,i))&&t.dispatch(i()),n.preventDefault()}};function vh(t){return{left:t.clientX,top:t.clientY}}function gD(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function sy(t,e,n,r,s){if(r==-1)return!1;let i=t.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,n,i.nodeAfter,i.before(o),s,!0):a(t,n,i.node(o),i.before(o),s,!1)))return!0;return!1}function yo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function yD(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&X.isSelectable(r)?(yo(t,new X(n)),!0):!1}function vD(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof X&&(r=n.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(X.isSelectable(a)){r&&n.$from.depth>0&&o>=n.$from.depth&&i.before(n.$from.depth+1)==n.$from.pos?s=i.before(n.$from.depth):s=i.before(o);break}}return s!=null?(yo(t,X.create(t.state.doc,s)),!0):!1}function xD(t,e,n,r,s){return sy(t,"handleClickOn",e,n,r)||t.someProp("handleClick",i=>i(t,e,r))||(s?vD(t,n):yD(t,n))}function wD(t,e,n,r){return sy(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function bD(t,e,n,r){return sy(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||kD(t,n,r)}function kD(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(yo(t,re.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)yo(t,re.create(r,a+1,a+1+o.content.size));else if(X.isSelectable(o))yo(t,X.create(r,a));else continue;return!0}}function iy(t){return qu(t)}const aE=xn?"metaKey":"ctrlKey";Lt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=iy(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&gD(n,t.input.lastClick)&&!n[aE]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:i,button:n.button};let o=t.posAtCoords(vh(n));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new SD(t,o,n,!!r)):(i=="doubleClick"?wD:bD)(t,o.pos,o.inside,n)?n.preventDefault():ds(t,"pointer"))};class SD{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[aE],this.allowDefault=r.shiftKey;let i,o;if(n.inside>-1)i=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof X&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Cn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ds(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>_r(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(vh(e))),this.updateAllowDefault(e),this.allowDefault||!n?ds(this.view,"pointer"):xD(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Rt&&this.mightDrag&&!this.mightDrag.node.isAtom||wt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(yo(this.view,ce.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ds(this.view,"pointer")}move(e){this.updateAllowDefault(e),ds(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Lt.touchstart=t=>{t.input.lastTouch=Date.now(),iy(t),ds(t,"pointer")};Lt.touchmove=t=>{t.input.lastTouch=Date.now(),ds(t,"pointer")};Lt.contextmenu=t=>iy(t);function lE(t,e){return t.composing?!0:Rt&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ED=Er?5e3:-1;$t.compositionstart=$t.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof re&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||wt&&zS&&CD(t)))t.markCursor=t.state.storedMarks||n.marks(),qu(t,!0),t.markCursor=null;else if(qu(t,!e.selection.empty),Cn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}cE(t,ED)};function CD(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}$t.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,cE(t,20))};function cE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>qu(t),e))}function uE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=ND());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function TD(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=vP(e.focusNode,e.focusOffset),r=xP(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function ND(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function qu(t,e=!1){if(!(Er&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),uE(t),e||t.docView&&t.docView.dirty){let n=ey(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function _D(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Sl=Gt&&bs<15||jo&&SP<604;Lt.copy=$t.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let i=Sl?null:n.clipboardData,o=r.content(),{dom:a,text:l}=ny(t,o);i?(n.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):_D(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function jD(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function RD(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?El(t,r.value,null,s,e):El(t,r.textContent,r.innerHTML,s,e)},50)}function El(t,e,n,r,s){let i=tE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||U.empty)))return!0;if(!i)return!1;let o=jD(i),a=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function dE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}$t.paste=(t,e)=>{let n=e;if(t.composing&&!Er)return;let r=Sl?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&El(t,dE(r),r.getData("text/html"),s,n)?n.preventDefault():RD(t,n)};class hE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const AD=xn?"altKey":"ctrlKey";function fE(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[AD]}Lt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(vh(n)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof X?s.to-1:s.to))){if(r&&r.mightDrag)o=X.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=X.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:c,slice:u}=ny(t,a);(!n.dataTransfer.files.length||!wt||$S>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Sl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Sl||n.dataTransfer.setData("text/plain",c),t.dragging=new hE(u,fE(t,n),o)};Lt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};$t.dragover=$t.dragenter=(t,e)=>e.preventDefault();$t.drop=(t,e)=>{try{MD(t,e,t.dragging)}finally{t.dragging=null}};function MD(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(vh(e));if(!r)return;let s=t.state.doc.resolve(r.pos),i=n&&n.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=tE(t,dE(e.dataTransfer),Sl?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(n&&fE(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||U.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?yS(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:p}=n;p?p.replace(l):l.deleteSelection()}let c=l.mapping.map(a),u=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(u?l.replaceRangeWith(c,c,i.content.firstChild):l.replaceRange(c,c,i),l.doc.eq(d))return;let f=l.doc.resolve(c);if(u&&X.isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new X(f));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,y,v,g)=>p=g),l.setSelection(ty(t,f,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Lt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&_r(t)},20))};Lt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Lt.beforeinput=(t,e)=>{if(wt&&Er&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,Gs(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in $t)Lt[t]=$t[t];function Cl(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ju{constructor(e,n){this.toDOM=e,this.spec=n||di,this.side=this.spec.side||0}map(e,n,r,s){let{pos:i,deleted:o}=e.mapResult(n.from+s,this.side<0?-1:1);return o?null:new Pt(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ju&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Cl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ss{constructor(e,n){this.attrs=e,this.spec=n||di}map(e,n,r,s){let i=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new Pt(i,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ss&&Cl(this.attrs,e.attrs)&&Cl(this.spec,e.spec)}static is(e){return e.type instanceof Ss}destroy(){}}class oy{constructor(e,n){this.attrs=e,this.spec=n||di}map(e,n,r,s){let i=e.mapResult(n.from+s,1);if(i.deleted)return null;let o=e.mapResult(n.to+s,-1);return o.deleted||o.pos<=i.pos?null:new Pt(i.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),i;return s==n.from&&!(i=e.child(r)).isText&&s+i.nodeSize==n.to}eq(e){return this==e||e instanceof oy&&Cl(this.attrs,e.attrs)&&Cl(this.spec,e.spec)}destroy(){}}class Pt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Pt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Pt(e,e,new Ju(n,r))}static inline(e,n,r,s){return new Pt(e,n,new Ss(r,s))}static node(e,n,r,s){return new Pt(e,n,new oy(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ss}get widget(){return this.type instanceof Ju}}const Vi=[],di={};class $e{constructor(e,n){this.local=e.length?e:Vi,this.children=n.length?n:Vi}static create(e,n){return n.length?Gu(n,e,0,di):Nt}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,r,s+a,i)}}map(e,n,r){return this==Nt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||di)}mapInner(e,n,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(n,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?OD(this.children,o||[],e,n,r,s,i):o?new $e(o.sort(hi),Vi):Nt}add(e,n){return n.length?this==Nt?$e.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=mE(n,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,Gu(u,a,c+1,di)),i+=3}});let o=pE(i?gE(n):n,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new $e(o.length?this.local.concat(o).sort(hi):this.local,s||this.children)}remove(e){return e.length==0||this==Nt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+n,l=r[i+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=Nt?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,n)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new $e(s,r):Nt}forChild(e,n){if(this==Nt)return this;if(n.isLeaf)return $e.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof Ss){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new $e(s.sort(hi),Vi);return r?new ns([a,r]):a}return r||Nt}eq(e){if(this==e)return!0;if(!(e instanceof $e)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return ay(this.localsInner(e))}localsInner(e){if(this==Nt)return Vi;if(e.inlineContent||!this.local.some(Ss.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ss||n.push(this.local[r]);return n}forEachSet(e){e(this)}}$e.empty=new $e([],[]);$e.removeOverlap=ay;const Nt=$e.empty;class ns{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,di));return ns.from(r)}forChild(e,n){if(n.isLeaf)return $e.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,n);i!=Nt&&(i instanceof ns?r=r.concat(i.members):r.push(i))}return ns.from(r)}eq(e){if(!(e instanceof ns)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!n)n=i;else{r&&(n=n.slice(),r=!1);for(let o=0;o<i.length;o++)n.push(i[o])}}return n?ay(r?n:n.sort(hi)):Vi}static from(e){switch(e.length){case 0:return Nt;case 1:return e[0];default:return new ns(e.every(n=>n instanceof $e)?e:e.reduce((n,r)=>n.concat(r instanceof $e?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function OD(t,e,n,r,s,i,o){let a=t.slice();for(let c=0,u=i;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,p,m,y)=>{let v=y-m-(p-f);for(let g=0;g<a.length;g+=3){let x=a[g+1];if(x<0||f>x+u-d)continue;let w=a[g]+u-d;p>=w?a[g+1]=f<=w?-2:-1:f>=u&&v&&(a[g]+=v,a[g+1]+=v)}d+=v}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+i),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let f=n.map(t[c+1]+i,-1),p=f-s,{index:m,offset:y}=r.content.findIndex(d),v=r.maybeChild(m);if(v&&y==d&&y+v.nodeSize==p){let g=a[c+2].mapInner(n,v,u+1,t[c]+i+1,o);g!=Nt?(a[c]=d,a[c+1]=p,a[c+2]=g):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ID(a,t,e,n,s,i,o),u=Gu(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let p=u.children[d];for(;f<a.length&&a[f]<p;)f+=3;a.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new $e(e.sort(hi),a)}function pE(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new Pt(s.from+e,s.to+e,s.type))}return n}function ID(t,e,n,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return n}function mE(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>n&&o.to<r&&((s||(s=[])).push(o),t[i]=null);return s}function gE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Gu(t,e,n,r){let s=[],i=!1;e.forEach((a,l)=>{let c=mE(t,a,l+n);if(c){i=!0;let u=Gu(c,a,n+l+1,r);u!=Nt&&s.push(l,l+a.nodeSize,u)}});let o=pE(i?gE(t):t,-n).sort(hi);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new $e(o,s):Nt}function hi(t,e){return t.from-e.from||t.to-e.to}function ay(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,r.to),wx(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),wx(e,s,r.copy(i.from,r.to)));break}}}return e}function wx(t,e,n){for(;e<t.length&&hi(n,t[e])>0;)e++;t.splice(e,0,n)}function jf(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Nt&&e.push(r)}),t.cursorWrapper&&e.push($e.create(t.state.doc,[t.cursorWrapper.deco])),ns.from(e)}const PD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},DD=Gt&&bs<=11;class LD{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class $D{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new LD,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Gt&&bs<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():Rt&&e.composing&&r.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),DD&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,PD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hx(this.view)){if(this.suppressingSelectionUpdates)return _r(this.view);if(Gt&&bs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ki(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let i=e.focusNode;i;i=_o(i))n.add(i);for(let i=e.anchorNode;i;i=_o(i))if(n.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&hx(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of l)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}else if(Cn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||UD(e,d)!=p)&&f.remove()}}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&gh(r)&&(c=ey(e))&&c.eq(ce.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,_r(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),zD(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,FD(e,l)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||_r(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Gt&&bs<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(i=f)}let o=s&&s.parentNode==e.target?vt(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?vt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let bx=new WeakMap,kx=!1;function zD(t){if(!bx.has(t)&&(bx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Cn,kx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),kx=!0}}function Sx(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return ki(o.node,o.offset,s,i)&&([n,r,s,i]=[s,i,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:i}}function BD(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Sx(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Sx(t,n):null}function UD(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function FD(t,e){var n;let{focusNode:r,focusOffset:s}=t.domSelectionRange();for(let i of e)if(((n=i.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let o=i.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(i,a.firstChild),r==i&&t.domSelection().collapse(i,s)}else i.parentNode.removeChild(i)}}function HD(t,e,n){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],gh(l)||c.push({node:l.focusNode,offset:l.focusOffset})),wt&&t.input.lastKeyCode===8)for(let v=i;v>s;v--){let g=r.childNodes[v-1],x=g.pmViewDesc;if(g.nodeName=="BR"&&!x){i=v;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||ws.fromSchema(t.state.schema),p=d.resolve(o),m=null,y=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:VD,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=v),m={anchor:v+o,head:g+o}}return{doc:y,sel:m,from:o,to:a}}function VD(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Rt&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Rt&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const WD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function KD(t,e,n,r,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let E=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=ey(t,E);if(N&&!t.state.selection.eq(N)){if(wt&&Er&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,Gs(13,"Enter"))))return;let A=t.state.tr.setSelection(N);E=="pointer"?A.setMeta("pointer",!0):E=="key"&&A.scrollIntoView(),i&&A.setMeta("composition",i),t.dispatch(A)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=HD(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=GD(d.content,c.doc.content,c.from,f,p);if(m&&t.input.domChangeCount++,(jo&&t.input.lastIOSEnter>Date.now()-225||Er)&&s.some(E=>E.nodeType==1&&!WD.test(E.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",E=>E(t,Gs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof re&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=Ex(t,t.state.doc,c.sel);if(E&&!E.eq(t.state.selection)){let N=t.state.tr.setSelection(E);i&&N.setMeta("composition",i),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof re&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Gt&&bs<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),g=u.resolve(m.start),x=y.sameParent(v)&&y.parent.inlineContent&&g.end()>=m.endA;if((jo&&t.input.lastIOSEnter>Date.now()-225&&(!x||s.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!x&&y.pos<c.doc.content.size&&(!y.sameParent(v)||!y.parent.inlineContent)&&y.pos<v.pos&&!/\S/.test(c.doc.textBetween(y.pos,v.pos,"","")))&&t.someProp("handleKeyDown",E=>E(t,Gs(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&JD(u,m.start,m.endA,y,v)&&t.someProp("handleKeyDown",E=>E(t,Gs(8,"Backspace")))){Er&&wt&&t.domObserver.suppressSelectionUpdates();return}wt&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Er&&!x&&y.start()!=v.start()&&v.parentOffset==0&&y.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(E){return E(t,Gs(13,"Enter"))})},20));let w=m.start,k=m.endA,S=E=>{let N=E||t.state.tr.replace(w,k,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let A=Ex(t,N.doc,c.sel);A&&!(wt&&t.composing&&A.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(A.head==w||A.head==N.mapping.map(k)-1)||Gt&&A.empty&&A.head==w)&&N.setSelection(A)}return i&&N.setMeta("composition",i),N.scrollIntoView()},C;if(x)if(y.pos==v.pos){Gt&&bs<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>_r(t),20));let E=S(t.state.tr.delete(w,k)),N=u.resolve(m.start).marksAcross(u.resolve(m.endA));N&&E.ensureMarks(N),t.dispatch(E)}else if(m.endA==m.endB&&(C=qD(y.parent.content.cut(y.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,m.endA-g.start())))){let E=S(t.state.tr);C.type=="add"?E.addMark(w,k,C.mark):E.removeMark(w,k,C.mark),t.dispatch(E)}else if(y.parent.child(y.index()).isText&&y.index()==v.index()-(v.textOffset?0:1)){let E=y.parent.textBetween(y.parentOffset,v.parentOffset),N=()=>S(t.state.tr.insertText(E,w,k));t.someProp("handleTextInput",A=>A(t,w,k,E,N))||t.dispatch(N())}else t.dispatch(S());else t.dispatch(S())}function Ex(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ty(t,e.resolve(n.anchor),e.resolve(n.head))}function qD(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<n.length;u++)i=n[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(D.from(c).eq(t))return{mark:a,type:o}}function JD(t,e,n,r,s){if(n-e<=s.pos-r.pos||Rf(r,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&n==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Rf(i,!0,!0));return!o.parent.isTextblock||o.pos>n||Rf(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Rf(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let i=t.node(r).maybeChild(t.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function GD(t,e,n,r,s){let i=t.findDiffStart(e,n);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&t.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&Cx(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<t.size&&Cx(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Cx(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class yE{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new dD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Rx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_x(this),Nx(this),this.nodeViews=jx(this),this.docView=ox(this.state.doc,Tx(this),jf(this),this.dom,this),this.domObserver=new $D(this,(r,s,i,o)=>KD(this,r,s,i,o)),this.domObserver.start(),hD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ym(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Rx),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(uE(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=jx(this);QD(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&ym(this),this.editable=_x(this),Nx(this);let l=jf(this),c=Tx(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&TP(this);if(o){this.domObserver.stop();let p=d&&(Gt||wt)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&YD(s.selection,e.selection);if(d){let m=wt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=TD(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=ox(e.doc,c,l,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&YP(this))?_r(this,p):(XS(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&NP(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof X){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&ex(this,n.getBoundingClientRect(),e)}else ex(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-n.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new hE(e.slice,e.move,s<0?void 0:X.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=n?n(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=n?n(a):a))return s}}hasFocus(){if(Gt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&_P(this.dom),_r(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return OP(this,e)}coordsAtPos(e,n=1){return VS(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return $P(this,n||this.state,e)}pasteHTML(e,n){return El(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return El(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return ny(this,e)}destroy(){this.docView&&(fD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jf(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,gP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return mD(this,e)}domSelectionRange(){let e=this.domSelection();return e?Rt&&this.root.nodeType===11&&bP(this.dom.ownerDocument)==this.dom&&BD(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}yE.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Tx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Pt.node(0,t.state.doc.content.size,e)]}function Nx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Pt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _x(t){return!t.someProp("editable",e=>e(t.state)===!1)}function YD(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function jx(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function QD(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Rx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var js={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},XD=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var xt=0;xt<10;xt++)js[48+xt]=js[96+xt]=String(xt);for(var xt=1;xt<=24;xt++)js[xt+111]="F"+xt;for(var xt=65;xt<=90;xt++)js[xt]=String.fromCharCode(xt+32),Yu[xt]=String.fromCharCode(xt);for(var Af in js)Yu.hasOwnProperty(Af)||(Yu[Af]=js[Af]);function eL(t){var e=XD&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||ZD&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Yu:js)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const tL=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),nL=typeof navigator<"u"&&/Win/.test(navigator.platform);function rL(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))tL?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function sL(t){let e=Object.create(null);for(let n in t)e[rL(n)]=t[n];return e}function Mf(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function iL(t){return new Fe({props:{handleKeyDown:vE(t)}})}function vE(t){let e=sL(t);return function(n,r){let s=eL(r),i,o=e[Mf(s,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Mf(s,r,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(nL&&r.ctrlKey&&r.altKey)&&(i=js[r.keyCode])&&i!=s){let a=e[Mf(i,r)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var oL=Object.defineProperty,ly=(t,e)=>{for(var n in e)oL(t,n,{get:e[n],enumerable:!0})};function xh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:i}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,i=n.storedMarks,n}}}var wh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...c)=>{const u=a(...c)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),u}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o=[],a=!!t,l=t||s.tr,c=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(d=>d===!0)),u={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...m)=>{const y=this.buildProps(l,e),v=f(...m)(y);return o.push(v),u}])),run:c};return u}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,i=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...c)=>l(...c)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:i}=r,o={tr:t,editor:r,view:i,state:xh({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([a,l])=>[a,(...c)=>l(...c)(o)]))}};return o}},xE={};ly(xE,{blur:()=>aL,clearContent:()=>lL,clearNodes:()=>cL,command:()=>uL,createParagraphNear:()=>dL,cut:()=>hL,deleteCurrentNode:()=>fL,deleteNode:()=>pL,deleteRange:()=>mL,deleteSelection:()=>gL,enter:()=>yL,exitCode:()=>vL,extendMarkRange:()=>xL,first:()=>wL,focus:()=>kL,forEach:()=>SL,insertContent:()=>EL,insertContentAt:()=>NL,joinBackward:()=>RL,joinDown:()=>jL,joinForward:()=>AL,joinItemBackward:()=>ML,joinItemForward:()=>OL,joinTextblockBackward:()=>IL,joinTextblockForward:()=>PL,joinUp:()=>_L,keyboardShortcut:()=>LL,lift:()=>$L,liftEmptyBlock:()=>zL,liftListItem:()=>BL,newlineInCode:()=>UL,resetAttributes:()=>FL,scrollIntoView:()=>HL,selectAll:()=>VL,selectNodeBackward:()=>WL,selectNodeForward:()=>KL,selectParentNode:()=>qL,selectTextblockEnd:()=>JL,selectTextblockStart:()=>GL,setContent:()=>YL,setMark:()=>g$,setMeta:()=>y$,setNode:()=>v$,setNodeSelection:()=>x$,setTextDirection:()=>w$,setTextSelection:()=>b$,sinkListItem:()=>k$,splitBlock:()=>S$,splitListItem:()=>E$,toggleList:()=>C$,toggleMark:()=>T$,toggleNode:()=>N$,toggleWrap:()=>_$,undoInputRule:()=>j$,unsetAllMarks:()=>R$,unsetMark:()=>A$,unsetTextDirection:()=>M$,updateAttributes:()=>O$,wrapIn:()=>I$,wrapInList:()=>P$});var aL=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),lL=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),cL=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),f=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(f);if(!p)return;const m=Ho(p);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,y)}(m||m===0)&&e.lift(p,m)})}),!0},uL=t=>e=>t(e),dL=()=>({state:t,dispatch:e})=>OS(t,e),hL=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,i=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new re(r.doc.resolve(Math.max(o-1,0)))),!0},fL=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function Ze(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var pL=t=>({tr:e,state:n,dispatch:r})=>{const s=Ze(t,n.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},mL=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},gL=()=>({state:t,dispatch:e})=>Jg(t,e),yL=()=>({commands:t})=>t.keyboardShortcut("Enter"),vL=()=>({state:t,dispatch:e})=>tP(t,e);function cy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Qu(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:cy(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function wE(t,e,n={}){return t.find(r=>r.type===e&&Qu(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Ax(t,e,n={}){return!!wE(t,e,n)}function uy(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!wE([...s.node.marks],e,n)))return;let o=s.index,a=t.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&Ax([...t.parent.child(o-1).marks],e,n);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&Ax([...t.parent.child(l).marks],e,n);)c+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Lr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var xL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const i=Lr(t,r.schema),{doc:o,selection:a}=n,{$from:l,from:c,to:u}=a;if(s){const d=uy(l,i,e);if(d&&d.from<=c&&d.to>=u){const f=re.create(o,d.from,d.to);n.setSelection(f)}}return!0},wL=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function bE(t){return t instanceof re}function si(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function kE(t,e=null){if(!e)return null;const n=ce.atStart(t),r=ce.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,i=r.to;return e==="all"?re.create(t,si(0,s,i),si(t.content.size,s,i)):re.create(t,si(e,s,i),si(e,s,i))}function Mx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Xu(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function bL(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var kL=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(Xu()||Mx())&&r.dom.focus(),bL()&&!Xu()&&!Mx()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};try{if(r.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(i&&t===null&&!bE(n.state.selection))return o(),!0;const a=kE(s.doc,t)||n.state.selection,l=n.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},SL=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),EL=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),SE=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&SE(r)}return t};function Cc(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return SE(n)}function Tl(t,e,n){if(t instanceof Kn||t instanceof D)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return D.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Tl("",e,n)}if(s){if(n.errorOnInvalidContent){let o=!1,a="";const l=new oS({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?ws.fromSchema(l).parseSlice(Cc(t),n.parseOptions):ws.fromSchema(l).parse(Cc(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=ws.fromSchema(e);return n.slice?i.parseSlice(Cc(t),n.parseOptions).content:i.parse(Cc(t),n.parseOptions)}return Tl("",e,n)}function CL(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof ct||s instanceof dt))return;const i=t.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),t.setSelection(ce.near(t.doc.resolve(o),n))}var TL=t=>!("type"in t),NL=(t,e,n)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){n={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let a;const l=v=>{i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Tl(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=Tl(e,i.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((TL(a)?a:[a]).forEach(v=>{v.check(),f=f?v.isText&&v.marks.length===0:!1,p=p?v.isBlock:!1}),u===d&&p){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,d+=1)}let y;if(f){if(Array.isArray(e))y=e.map(v=>v.text||"").join("");else if(e instanceof D){let v="";e.forEach(g=>{g.text&&(v+=g.text)}),y=v}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,u,d)}else{y=a;const v=r.doc.resolve(u),g=v.node(),x=v.parentOffset===0,w=g.isText||g.isTextblock,k=g.content.size>0;x&&w&&k&&(u=Math.max(0,u-1)),r.replaceWith(u,d,y)}n.updateSelection&&CL(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:y})}return!0},_L=()=>({state:t,dispatch:e})=>XI(t,e),jL=()=>({state:t,dispatch:e})=>ZI(t,e),RL=()=>({state:t,dispatch:e})=>TS(t,e),AL=()=>({state:t,dispatch:e})=>RS(t,e),ML=()=>({state:t,dispatch:e,tr:n})=>{try{const r=fh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},OL=()=>({state:t,dispatch:e,tr:n})=>{try{const r=fh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},IL=()=>({state:t,dispatch:e})=>YI(t,e),PL=()=>({state:t,dispatch:e})=>QI(t,e);function EE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function DL(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Xu()||EE()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),i&&(n=`Shift-${n}`),n}var LL=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const i=DL(t).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Rs(t,e,n={}){const{from:r,to:s,empty:i}=t.selection,o=e?Ze(e,t.schema):null,a=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),m=Math.min(s,f+d.nodeSize);a.push({node:d,from:p,to:m})});const l=s-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Qu(d.node.attrs,n,{strict:!1}));return i?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=l}var $L=(t,e={})=>({state:n,dispatch:r})=>{const s=Ze(t,n.schema);return Rs(n,s,e)?eP(n,r):!1},zL=()=>({state:t,dispatch:e})=>IS(t,e),BL=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return hP(r)(e,n)},UL=()=>({state:t,dispatch:e})=>MS(t,e);function bh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ox(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var FL=(t,e)=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=bh(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Ze(t,r.schema)),a==="mark"&&(o=Lr(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(u,d)=>{i&&i===u.type&&(l=!0,s&&n.setNodeMarkup(d,void 0,Ox(u.attrs,e))),o&&u.marks.length&&u.marks.forEach(f=>{o===f.type&&(l=!0,s&&n.addMark(d,d+u.nodeSize,o.create(Ox(f.attrs,e))))})})}),l},HL=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),VL=()=>({tr:t,dispatch:e})=>{if(e){const n=new cn(t.doc);t.setSelection(n)}return!0},WL=()=>({state:t,dispatch:e})=>_S(t,e),KL=()=>({state:t,dispatch:e})=>AS(t,e),qL=()=>({state:t,dispatch:e})=>sP(t,e),JL=()=>({state:t,dispatch:e})=>aP(t,e),GL=()=>({state:t,dispatch:e})=>oP(t,e);function vm(t,e,n={},r={}){return Tl(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var YL=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(r.preserveWhitespace!=="full"){const c=vm(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,c).setMeta("preventUpdate",!n),!0}return o&&i.setMeta("preventUpdate",!n),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function CE(t,e){const n=Lr(e,t.schema),{from:r,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===n.name);return a?{...a.attrs}:{}}function TE(t,e){const n=new kS(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function QL(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function XL(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,i)=>{n(s)&&r.push({node:s,pos:i})}),r}function ZL(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function kh(t){return e=>ZL(e.$from,t)}function Q(t,e,n){return t.config[e]===void 0&&t.parent?Q(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Q(t.parent,e,n):null}):t.config[e]}function dy(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Q(e,"addExtensions",n);return r?[e,...dy(r())]:e}).flat(10)}function hy(t,e){const n=Ni.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function NE(t){return typeof t=="function"}function ye(t,e=void 0,...n){return NE(t)?e?t.bind(e)(...n):t(...n):t}function e$(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ro(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function _E(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ro(t),s=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=Q(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=Q(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const f={...i,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function Ie(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),a.forEach(u=>{const[d,f]=u.split(":").map(p=>p.trim());c.set(d,f)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function Nl(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ie(n,r),{})}function t$(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Ix(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(n):t$(n.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function Px(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&e$(n)?!1:n!=null))}function Dx(t){var e,n;const r={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(r.default=t.attribute.default),((n=t==null?void 0:t.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function n$(t,e){var n;const r=_E(t),{nodeExtensions:s,markExtensions:i}=Ro(t),o=(n=s.find(c=>Q(c,"topNode")))==null?void 0:n.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((g,x)=>{const w=Q(x,"extendNodeSchema",d);return{...g,...w?w(c):{}}},{}),p=Px({...f,content:ye(Q(c,"content",d)),marks:ye(Q(c,"marks",d)),group:ye(Q(c,"group",d)),inline:ye(Q(c,"inline",d)),atom:ye(Q(c,"atom",d)),selectable:ye(Q(c,"selectable",d)),draggable:ye(Q(c,"draggable",d)),code:ye(Q(c,"code",d)),whitespace:ye(Q(c,"whitespace",d)),linebreakReplacement:ye(Q(c,"linebreakReplacement",d)),defining:ye(Q(c,"defining",d)),isolating:ye(Q(c,"isolating",d)),attrs:Object.fromEntries(u.map(Dx))}),m=ye(Q(c,"parseHTML",d));m&&(p.parseDOM=m.map(g=>Ix(g,u)));const y=Q(c,"renderHTML",d);y&&(p.toDOM=g=>y({node:g,HTMLAttributes:Nl(g,u)}));const v=Q(c,"renderText",d);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((v,g)=>{const x=Q(g,"extendMarkSchema",d);return{...v,...x?x(c):{}}},{}),p=Px({...f,inclusive:ye(Q(c,"inclusive",d)),excludes:ye(Q(c,"excludes",d)),group:ye(Q(c,"group",d)),spanning:ye(Q(c,"spanning",d)),code:ye(Q(c,"code",d)),attrs:Object.fromEntries(u.map(Dx))}),m=ye(Q(c,"parseHTML",d));m&&(p.parseDOM=m.map(v=>Ix(v,u)));const y=Q(c,"renderHTML",d);return y&&(p.toDOM=v=>y({mark:v,HTMLAttributes:Nl(v,u)})),[c.name,p]}));return new oS({topNode:o,nodes:a,marks:l})}function r$(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Zu(t){return t.sort((n,r)=>{const s=Q(n,"priority")||100,i=Q(r,"priority")||100;return s>i?-1:s<i?1:0})}function jE(t){const e=Zu(dy(t)),n=r$(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function RE(t,e,n){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=n||{};let a="";return t.nodesBetween(r,s,(l,c,u,d)=>{var f;l.isBlock&&c>r&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(f=l==null?void 0:l.text)==null?void 0:f.slice(Math.max(r,c)-c,s-c))}),a}function s$(t,e){const n={from:0,to:t.content.size};return RE(t,n,e)}function AE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function i$(t,e){const n=Ze(e,t.schema),{from:r,to:s}=t.selection,i=[];t.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===n.name);return o?{...o.attrs}:{}}function ME(t,e){const n=bh(typeof e=="string"?e:e.name,t.schema);return n==="node"?i$(t,e):n==="mark"?CE(t,e):{}}function o$(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function a$(t){const e=o$(t);return e.length===1?e:e.filter((n,r)=>!e.filter((i,o)=>o!==r).some(i=>n.oldRange.from>=i.oldRange.from&&n.oldRange.to<=i.oldRange.to&&n.newRange.from>=i.newRange.from&&n.newRange.to<=i.newRange.to))}function OE(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=n[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),f=e.invert().map(u);r.push({oldRange:{from:d,to:f},newRange:{from:c,to:u}})})}),a$(r)}function fy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const i=n.resolve(t),o=uy(i,s.type);o&&r.push({mark:s,...o})}):n.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}var l$=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let i=r,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function Tc(t,e){return e.nodes[t]||e.marks[t]||null}function nu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}var c$=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)==null?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),n};function xm(t,e,n={}){const{empty:r,ranges:s}=t.selection,i=e?Lr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>Qu(d.attrs,n,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:f})=>{const p=d.pos,m=f.pos;t.doc.nodesBetween(p,m,(y,v)=>{if(!y.isText&&!y.marks.length)return;const g=Math.max(p,v),x=Math.min(m,v+y.nodeSize),w=x-g;o+=w,a.push(...y.marks.map(k=>({mark:k,from:g,to:x})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>Qu(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,f)=>d+f.to-f.from,0);return(l>0?l+c:l)>=o}function u$(t,e,n={}){if(!e)return Rs(t,null,n)||xm(t,null,n);const r=bh(e,t.schema);return r==="node"?Rs(t,e,n):r==="mark"?xm(t,e,n):!1}var d$=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const i=kh(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},h$=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Lx(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function $x(t,e){const{nodeExtensions:n}=Ro(e),r=n.find(o=>o.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=ye(Q(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function Sh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(Sh(i,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function IE(t){return t instanceof X}var PE=class DE{constructor(e){this.position=e}static fromJSON(e){return new DE(e.position)}toJSON(){return{position:this.position}}};function f$(t,e){const n=e.mapping.mapResult(t.position);return{position:new PE(n.pos),mapResult:n}}function p$(t){return new PE(t)}function m$(t,e,n){var r;const{selection:s}=e;let i=null;if(bE(s)&&(i=s.$cursor),i){const a=(r=t.storedMarks)!=null?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(a)||!a.some(c=>c.type.excludes(n)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(a.pos,l.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const p=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=p&&m}return!c}),c})}var g$=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=n,{empty:o,ranges:a}=i,l=Lr(t,r.schema);if(s)if(o){const c=CE(r,l);n.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,p)=>{const m=Math.max(p,u),y=Math.min(p+f.nodeSize,d);f.marks.find(g=>g.type===l)?f.marks.forEach(g=>{l===g.type&&n.addMark(m,y,l.create({...g.attrs,...e}))}):n.addMark(m,y,l.create(e))})});return m$(r,n,l)},y$=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),v$=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const i=Ze(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>Qv(i,{...o,...e})(n)?!0:a.clearNodes()).command(({state:a})=>Qv(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},x$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=si(t,0,r.content.size),i=X.create(r,s);e.setSelection(i)}return!0},w$=(t,e)=>({tr:n,state:r,dispatch:s})=>{const{selection:i}=r;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&n.doc.nodesBetween(o,a,(l,c)=>{l.isText||n.setNodeMarkup(c,void 0,{...l.attrs,dir:t})}),!0},b$=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=re.atStart(r).from,a=re.atEnd(r).to,l=si(s,o,a),c=si(i,o,a),u=re.create(r,l,c);e.setSelection(u)}return!0},k$=t=>({state:e,dispatch:n})=>{const r=Ze(t,e.schema);return mP(r)(e,n)};function zx(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var S$=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=nu(c,a.node().type.name,a.node().attrs);if(i instanceof X&&i.node.isBlock)return!a.parentOffset||!Nr(o,a.pos)?!1:(r&&(t&&zx(n,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,f=a.depth===0?void 0:QL(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&f?[{type:f,attrs:u}]:void 0,m=Nr(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Nr(e.doc,e.mapping.map(a.pos),1,f?[{type:f}]:void 0)&&(m=!0,p=f?[{type:f,attrs:u}]:void 0),r){if(m&&(i instanceof re&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),f&&!d&&!a.parentOffset&&a.parent.type!==f)){const y=e.mapping.map(a.before()),v=e.doc.resolve(y);a.node(-1).canReplaceWith(v.index(),v.index()+1,f)&&e.setNodeMarkup(e.mapping.map(a.before()),f)}t&&zx(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},E$=(t,e={})=>({tr:n,state:r,dispatch:s,editor:i})=>{var o;const a=Ze(t,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const f=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let g=D.empty;const x=l.index(-1)?1:l.index(-2)?2:3;for(let N=l.depth-x;N>=l.depth-3;N-=1)g=D.from(l.node(N).copy(g));const w=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,k={...nu(f,l.node().type.name,l.node().attrs),...e},S=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(k))||void 0;g=g.append(D.from(a.createAndFill(null,S)||void 0));const C=l.before(l.depth-(x-1));n.replace(C,l.after(-w),new U(g,4-x,0));let E=-1;n.doc.nodesBetween(C,n.doc.content.size,(N,A)=>{if(E>-1)return!1;N.isTextblock&&N.content.size===0&&(E=A+1)}),E>-1&&n.setSelection(re.near(n.doc.resolve(E))),n.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...nu(f,d.type.name,d.attrs),...e},y={...nu(f,l.node().type.name,l.node().attrs),...e};n.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:y}]:[{type:a,attrs:m}];if(!Nr(n.doc,l.pos,2))return!1;if(s){const{selection:g,storedMarks:x}=r,{splittableMarks:w}=i.extensionManager,k=x||g.$to.parentOffset&&g.$from.marks();if(n.split(l.pos,2,v).scrollIntoView(),!k||!s)return!0;const S=k.filter(C=>w.includes(C.type.name));n.ensureMarks(S)}return!0},Of=(t,e)=>{const n=kh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Is(t.doc,n.pos)&&t.join(n.pos),!0},If=(t,e)=>{const n=kh(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Is(t.doc,r)&&t.join(r),!0},C$=(t,e,n,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,p=Ze(t,o.schema),m=Ze(e,o.schema),{selection:y,storedMarks:v}=o,{$from:g,$to:x}=y,w=g.blockRange(x),k=v||y.$to.parentOffset&&y.$from.marks();if(!w)return!1;const S=kh(C=>$x(C.type.name,d))(y);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===p)return c.liftListItem(m);if($x(S.node.type.name,d)&&p.validContent(S.node.content)&&a)return l().command(()=>(i.setNodeMarkup(S.pos,p),!0)).command(()=>Of(i,p)).command(()=>If(i,p)).run()}return!n||!k||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Of(i,p)).command(()=>If(i,p)).run():l().command(()=>{const C=u().wrapInList(p,r),E=k.filter(N=>f.includes(N.type.name));return i.ensureMarks(E),C?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Of(i,p)).command(()=>If(i,p)).run()},T$=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=n,o=Lr(t,r.schema);return xm(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},N$=(t,e,n={})=>({state:r,commands:s})=>{const i=Ze(t,r.schema),o=Ze(e,r.schema),a=Rs(r,i,n);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...n})},_$=(t,e={})=>({state:n,commands:r})=>{const s=Ze(t,n.schema);return Rs(n,s,e)?r.lift(s):r.wrapIn(s,e)},j$=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},R$=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},A$=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=n,l=Lr(t,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:f,to:p}=a;const m=(i=c.marks().find(v=>v.type===l))==null?void 0:i.attrs,y=uy(c,l,m);y&&(f=y.from,p=y.to),n.removeMark(f,p,l)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,l)});return n.removeStoredMark(l),!0},M$=t=>({tr:e,state:n,dispatch:r})=>{const{selection:s}=n;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),r&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const c={...a.attrs};delete c.dir,e.setNodeMarkup(l,void 0,c)}),!0},O$=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let i=null,o=null;const a=bh(typeof t=="string"?t:t.name,r.schema);if(!a)return!1;a==="node"&&(i=Ze(t,r.schema)),a==="mark"&&(o=Lr(t,r.schema));let l=!1;return n.selection.ranges.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;let f,p,m,y;n.selection.empty?r.doc.nodesBetween(u,d,(v,g)=>{i&&i===v.type&&(l=!0,m=Math.max(g,u),y=Math.min(g+v.nodeSize,d),f=g,p=v)}):r.doc.nodesBetween(u,d,(v,g)=>{g<u&&i&&i===v.type&&(l=!0,m=Math.max(g,u),y=Math.min(g+v.nodeSize,d),f=g,p=v),g>=u&&g<=d&&(i&&i===v.type&&(l=!0,s&&n.setNodeMarkup(g,void 0,{...v.attrs,...e})),o&&v.marks.length&&v.marks.forEach(x=>{if(o===x.type&&(l=!0,s)){const w=Math.max(g,u),k=Math.min(g+v.nodeSize,d);n.addMark(w,k,o.create({...x.attrs,...e}))}}))}),p&&(f!==void 0&&s&&n.setNodeMarkup(f,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(v=>{o===v.type&&s&&n.addMark(m,y,o.create({...v.attrs,...e}))}))}),l},I$=(t,e={})=>({state:n,dispatch:r})=>{const s=Ze(t,n.schema);return lP(s,e)(n,r)},P$=(t,e={})=>({state:n,dispatch:r})=>{const s=Ze(t,n.schema);return cP(s,e)(n,r)},D$=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},Eh=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},L$=(t,e)=>{if(cy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nc(t){var e;const{editor:n,from:r,to:s,text:i,rules:o,plugin:a}=t,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(e=c.nodeBefore||c.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=c$(c)+i;return o.forEach(f=>{if(u)return;const p=L$(d,f.find);if(!p)return;const m=l.state.tr,y=xh({state:l.state,transaction:m}),v={from:r-(p[0].length-i.length),to:s},{commands:g,chain:x,can:w}=new wh({editor:n,state:y});f.handler({state:y,range:v,match:p,commands:g,chain:x,can:w})===null||!m.steps.length||(f.undoable&&m.setMeta(a,{transform:m,from:r,to:s,text:i}),l.dispatch(m),u=!0)}),u}function $$(t){const{editor:e,rules:n}=t,r=new Fe({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=hy(D.from(u),o.schema);const{from:d}=l,f=d+u.length;Nc({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return Nc({editor:e,from:i,to:o,text:a,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Nc({editor:e,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Nc({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function z$(t){return Object.prototype.toString.call(t).slice(8,-1)}function _c(t){return z$(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function LE(t,e){const n={...t};return _c(t)&&_c(e)&&Object.keys(e).forEach(r=>{_c(e[r])&&_c(t[r])?n[r]=LE(t[r],e[r]):n[r]=e[r]}),n}var py=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ye(Q(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ye(Q(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>LE(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},fr=class $E extends py{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new $E(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===n.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function B$(t){return typeof t=="number"}var U$=class{constructor(t){this.find=t.find,this.handler=t.handler}},F$=(t,e,n)=>{if(cy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function H$(t){const{editor:e,state:n,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:c,can:u}=new wh({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(p,m)=>{var y,v,g,x,w;if((v=(y=p.type)==null?void 0:y.spec)!=null&&v.code||!(p.isText||p.isTextblock||p.isInline))return;const k=(w=(x=(g=p.content)==null?void 0:g.size)!=null?x:p.nodeSize)!=null?w:0,S=Math.max(r,m),C=Math.min(s,m+k);if(S>=C)return;const E=p.isText?p.text||"":p.textBetween(S-m,C-m,void 0,"");F$(E,i.find,o).forEach(A=>{if(A.index===void 0)return;const P=S+A.index+1,R=P+A[0].length,_={from:n.tr.mapping.map(P),to:n.tr.mapping.map(R)},T=i.handler({state:n,range:_,match:A,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(T)})}),d.every(p=>p!==null)}var jc=null,V$=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function W$(t){const{editor:e,rules:n}=t;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:f,rule:p,pasteEvt:m})=>{const y=u.tr,v=xh({state:u,transaction:y});if(!(!H$({editor:e,state:v,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new Fe({view(d){const f=m=>{var y;r=(y=d.dom.parentElement)!=null&&y.contains(m.target)?d.dom.parentElement:null,r&&(jc=e)},p=()=>{jc&&(jc=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(i=r===d.dom.parentElement,a=f,!i){const p=jc;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,f)=>{var p;const m=(p=f.clipboardData)==null?void 0:p.getData("text/html");return o=f,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,p)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!s,v=m.getMeta("uiEvent")==="drop"&&!i,g=m.getMeta("applyPasteRules"),x=!!g;if(!y&&!v&&!x)return;if(x){let{text:S}=g;typeof S=="string"?S=S:S=hy(D.from(S),p.schema);const{from:C}=g,E=C+S.length,N=V$(S);return l({rule:u,state:p,from:C,to:{b:E},pasteEvt:N})}const w=f.doc.content.findDiffStart(p.doc.content),k=f.doc.content.findDiffEnd(p.doc.content);if(!(!B$(w)||!k||w===k.b))return l({rule:u,state:p,from:w,to:k,pasteEvt:o})}}))}var Ch=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=jE(t),this.schema=n$(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Tc(e.name,this.schema)},r=Q(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Zu([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Tc(r.name,this.schema)},i=[],o=Q(r,"addKeyboardShortcuts",s);let a={};if(r.type==="mark"&&Q(r,"exitable",s)&&(a.ArrowRight=()=>fr.handleExit({editor:t,mark:r})),o){const f=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...f}}const l=iL(a);i.push(l);const c=Q(r,"addInputRules",s);if(Lx(r,t.options.enableInputRules)&&c){const f=c();if(f&&f.length){const p=$$({editor:t,rules:f}),m=Array.isArray(p)?p:[p];i.push(...m)}}const u=Q(r,"addPasteRules",s);if(Lx(r,t.options.enablePasteRules)&&u){const f=u();if(f&&f.length){const p=W$({editor:t,rules:f});i.push(...p)}}const d=Q(r,"addProseMirrorPlugins",s);if(d){const f=d();i.push(...f)}return i})}get attributes(){return _E(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ro(this.extensions);return Object.fromEntries(e.filter(n=>!!Q(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Ze(n.name,this.schema)},i=Q(n,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,c,u,d,f)=>{const p=Nl(l,r);return o({node:l,view:c,getPos:u,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return Zu([...this.extensions].reverse()).reduceRight((r,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Tc(s.name,this.schema)},o=Q(s,"dispatchTransaction",i);return o?a=>{o.call(i,{transaction:a,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ro(this.extensions);return Object.fromEntries(e.filter(n=>!!Q(n,"addMarkView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Lr(n.name,this.schema)},i=Q(n,"addMarkView",s);if(!i)return[];const o=(a,l,c)=>{const u=Nl(a,r);return i()({mark:a,view:l,inline:c,editor:t,extension:n,HTMLAttributes:u,updateAttributes:d=>{o3(a,t,d)}})};return[n.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Tc(e.name,this.schema)};e.type==="mark"&&((n=ye(Q(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Q(e,"onBeforeCreate",r),i=Q(e,"onCreate",r),o=Q(e,"onUpdate",r),a=Q(e,"onSelectionUpdate",r),l=Q(e,"onTransaction",r),c=Q(e,"onFocus",r),u=Q(e,"onBlur",r),d=Q(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}};Ch.resolve=jE;Ch.sort=Zu;Ch.flatten=dy;var K$={};ly(K$,{ClipboardTextSerializer:()=>BE,Commands:()=>UE,Delete:()=>FE,Drop:()=>HE,Editable:()=>VE,FocusEvents:()=>KE,Keymap:()=>qE,Paste:()=>JE,Tabindex:()=>GE,TextDirection:()=>YE,focusEventsPluginKey:()=>WE});var be=class zE extends py{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new zE(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},BE=be.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Fe({key:new it("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=AE(n);return RE(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),UE=be.create({name:"commands",addCommands(){return{...xE}}}),FE=be.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const i=()=>{var o,a,l,c;if((c=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?c:t.getMeta("y-sync$"))return;const u=TE(t.before,[t,...e]);OE(u).forEach(p=>{u.mapping.mapResult(p.oldRange.from).deletedAfter&&u.mapping.mapResult(p.oldRange.to).deletedBefore&&u.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,y)=>{const v=y+m.nodeSize-2,g=p.oldRange.from<=y&&v<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:y,to:v,newFrom:u.mapping.map(y),newTo:u.mapping.map(v),deletedRange:p.oldRange,newRange:p.newRange,partial:!g,editor:this.editor,transaction:t,combinedTransform:u})})});const f=u.mapping;u.steps.forEach((p,m)=>{var y,v;if(p instanceof Hn){const g=f.slice(m).map(p.from,-1),x=f.slice(m).map(p.to),w=f.invert().map(g,-1),k=f.invert().map(x),S=(y=u.doc.nodeAt(g-1))==null?void 0:y.marks.some(E=>E.eq(p.mark)),C=(v=u.doc.nodeAt(x))==null?void 0:v.marks.some(E=>E.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:w,to:k},newRange:{from:g,to:x},partial:!!(C||S),editor:this.editor,transaction:t,combinedTransform:u})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(i,0):i()}}),HE=be.create({name:"drop",addProseMirrorPlugins(){return[new Fe({key:new it("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),VE=be.create({name:"editable",addProseMirrorPlugins(){return[new Fe({key:new it("editable"),props:{editable:()=>this.editor.options.editable}})]}}),WE=new it("focusEvents"),KE=be.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Fe({key:WE,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),qE=be.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:f,parent:p}=d,m=d.parent.isTextblock&&f>0?a.doc.resolve(f-1):d,y=m.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=y&&m.parent.childCount===1?v===d.pos:ce.atStart(c).from===f;return!u||!p.type.isTextblock||p.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Xu()||EE()?i:s},addProseMirrorPlugins(){return[new Fe({key:new it("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),s=t.some(y=>y.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=ce.atStart(e.doc).from,c=ce.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!Sh(n.doc))return;const f=n.tr,p=xh({state:n,transaction:f}),{commands:m}=new wh({editor:this.editor,state:p});if(m.clearNodes(),!!f.steps.length)return f}})]}}),JE=be.create({name:"paste",addProseMirrorPlugins(){return[new Fe({key:new it("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),GE=be.create({name:"tabindex",addProseMirrorPlugins(){return[new Fe({key:new it("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),YE=be.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ro(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Fe({key:new it("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),q$=class ma{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ma(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ma(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ma(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,i=n.isAtom&&!n.isText,o=n.isInline,a=this.pos+r+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!s&&!o&&l.depth<=this.depth)return;const c=new ma(l,this.editor,s,s||o?n:null);s&&(c.actualDepth=this.depth+1),e.push(c)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const i=s.node.attrs,o=Object.keys(n);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==n[l])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(n);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>n[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},J$=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function G$(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var Y$=class extends D${constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:f$,createMappablePosition:p$},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:i})=>this.options.onDrop(r,s,i)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=kE(e,this.options.autofocus);this.editorState=io.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=G$(J$,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=NE(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;n=n.filter(o=>!o.key.startsWith(i))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[VE,BE.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),UE,KE,qE,GE,HE,JE,FE,YE.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Ch(r,this)}createCommandManager(){this.commandManager=new wh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=vm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=vm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new yE(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(c=>{var u;return(u=this.capturedTransaction)==null?void 0:u.step(c)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=n.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!n.some(c=>c.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return ME(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return u$(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return hy(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return s$(this.state.doc,{blockSeparator:e,textSerializers:{...AE(this.schema),...n}})}get isEmpty(){return Sh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new q$(e,this)}get $doc(){return this.$pos(0)}};function Ao(t){return new Eh({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ye(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=n.from+a.indexOf(o),u=c+o.length;if(fy(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>c).length)return null;u<n.to&&i.delete(u,n.to),c>n.from&&i.delete(n.from+l,c);const f=n.from+l+o.length;i.addMark(n.from+l,f,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function QE(t){return new Eh({find:t.find,handler:({state:e,range:n,match:r})=>{const s=ye(t.getAttributes,void 0,r)||{},{tr:i}=e,o=n.from;let a=n.to;const l=t.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=t.type.isInline?o:o-1;i.insert(c,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function wm(t){return new Eh({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),i=ye(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,i)},undoable:t.undoable})}function Mo(t){return new Eh({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const i=ye(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),l=o.doc.resolve(n.from).blockRange(),c=l&&Kg(l,t.type,i);if(!c)return null;if(o.wrap(l,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(v=>p.includes(v.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Is(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)},undoable:t.undoable})}var Q$=t=>"touches"in t,X$=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,c=a.clientY-this.startY;this.handleResize(l,c)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const c=l.clientX-this.startX,u=l.clientY-this.startY;this.handleResize(c,u)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,s,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),s=e.includes("left"),i=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),s&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,Q$(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(r,s,n);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,s=this.startHeight;const i=t.includes("right"),o=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return i?r=this.startWidth+e:o&&(r=this.startWidth-e),a?s=this.startHeight+n:l&&(s=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(a?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,t):{width:r,height:s}}applyConstraints(t,e,n){var r,s,i,o;if(!n){let c=Math.max(this.minSize.width,t),u=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(c=Math.min(this.maxSize.width,c)),(s=this.maxSize)!=null&&s.height&&(u=Math.min(this.maxSize.height,u)),{width:c,height:u}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function Z$(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof X){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let s=r.depth;for(;s>=0;){const i=r.index(s);if(r.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var e3={};ly(e3,{createAtomBlockMarkdownSpec:()=>t3,createBlockMarkdownSpec:()=>n3,createInlineMarkdownSpec:()=>i3,parseAttributes:()=>my,parseIndentedBlocks:()=>bm,renderNestedMarkdownContent:()=>yy,serializeAttributes:()=>gy});function my(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,c=>(n.push(c),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const c=s.map(u=>u.trim().slice(1));e.class=c.join(" ")}const i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(o)).forEach(([,c,u])=>{var d;const f=parseInt(((d=u.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),p=n[f];p&&(e[c]=p.slice(1,-1))});const l=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(u=>{u.match(/^[a-zA-Z][\w-]*$/)&&(e[u]=!0)}),e}function gy(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function t3(t){const{nodeName:e,name:n,parseAttributes:r=my,serializeAttributes:s=gy,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=n||e,c=u=>{if(!a)return u;const d={};return a.forEach(f=>{f in u&&(d[f]=u[f])}),d};return{parseMarkdown:(u,d)=>{const f={...i,...u.attributes};return d.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(u){var d;const f=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(d=u.match(f))==null?void 0:d.index;return p!==void 0?p:-1},tokenize(u,d,f){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=u.match(p);if(!m)return;const y=m[1]||"",v=r(y);if(!o.find(x=>!(x in v)))return{type:e,raw:m[0],attributes:v}}},renderMarkdown:u=>{const d=c(u.attrs||{}),f=s(d),p=f?` {${f}}`:"";return`:::${l}${p} :::`}}}function n3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=my,serializeAttributes:i=gy,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,c=n||e,u=d=>{if(!l)return d;const f={};return l.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{let p;if(r){const y=r(d);p=typeof y=="string"?[{type:"text",text:y}]:y}else a==="block"?p=f.parseChildren(d.tokens||[]):p=f.parseInline(d.tokens||[]);const m={...o,...d.attributes};return f.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${c}`,"m"),m=(f=d.match(p))==null?void 0:f.index;return m!==void 0?m:-1},tokenize(d,f,p){var m;const y=new RegExp(`^:::${c}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),v=d.match(y);if(!v)return;const[g,x=""]=v,w=s(x);let k=1;const S=g.length;let C="";const E=/^:::([\w-]*)(\s.*)?/gm,N=d.slice(S);for(E.lastIndex=0;;){const A=E.exec(N);if(A===null)break;const P=A.index,R=A[1];if(!((m=A[2])!=null&&m.endsWith(":::"))){if(R)k+=1;else if(k-=1,k===0){const _=N.slice(0,P);C=_.trim();const T=d.slice(0,S+P+A[0].length);let O=[];if(C)if(a==="block")for(O=p.blockTokens(_),O.forEach(j=>{j.text&&(!j.tokens||j.tokens.length===0)&&(j.tokens=p.inlineTokens(j.text))});O.length>0;){const j=O[O.length-1];if(j.type==="paragraph"&&(!j.text||j.text.trim()===""))O.pop();else break}else O=p.inlineTokens(C);return{type:e,raw:T,attributes:w,content:C,tokens:O}}}}}},renderMarkdown:(d,f)=>{const p=u(d.attrs||{}),m=i(p),y=m?` {${m}}`:"",v=f.renderChildren(d.content||[],`

`);return`:::${c}${y}

${v}

:::`}}}function r3(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,i,o]=r;e[s]=i||o,r=n.exec(t)}return e}function s3(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function i3(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=r3,serializeAttributes:i=s3,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,c=n||e,u=f=>{if(!l)return f;const p={};return l.forEach(m=>{const y=typeof m=="string"?m:m.name,v=typeof m=="string"?void 0:m.skipIfDefault;if(y in f){const g=f[y];if(v!==void 0&&g===v)return;p[y]=g}}),p},d=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const m={...o,...f.attributes};if(a)return p.createNode(e,m);const y=r?r(f):f.content||"";return y?p.createNode(e,m,[p.createTextNode(y)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),m=f.match(p),y=m==null?void 0:m.index;return y!==void 0?y:-1},tokenize(f,p,m){const y=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),v=f.match(y);if(!v)return;let g="",x="";if(a){const[,k]=v;x=k}else{const[,k,S]=v;x=k,g=S||""}const w=s(x.trim());return{type:e,raw:v[0],content:g.trim(),attributes:w}}},renderMarkdown:f=>{let p="";r?p=r(f):f.content&&f.content.length>0&&(p=f.content.filter(g=>g.type==="text").map(g=>g.text).join(""));const m=u(f.attrs||{}),y=i(m),v=y?` ${y}`:"";return a?`[${c}${v}]`:`[${c}${v}]${p}[/${c}]`}}}function bm(t,e,n){var r,s,i,o;const a=t.split(`
`),l=[];let c="",u=0;const d=e.baseIndentSize||2;for(;u<a.length;){const f=a[u],p=f.match(e.itemPattern);if(!p){if(l.length>0)break;if(f.trim()===""){u+=1,c=`${c}${f}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:y,mainContent:v}=m;c=`${c}${f}
`;const g=[v];for(u+=1;u<a.length;){const S=a[u];if(S.trim()===""){const E=a.slice(u+1).findIndex(P=>P.trim()!=="");if(E===-1)break;if((((s=(r=a[u+1+E].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>y){g.push(S),c=`${c}${S}
`,u+=1;continue}else break}if((((o=(i=S.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>y)g.push(S),c=`${c}${S}
`,u+=1;else break}let x;const w=g.slice(1);if(w.length>0){const S=w.map(C=>C.slice(y+d)).join(`
`);S.trim()&&(e.customNestedParser?x=e.customNestedParser(S):x=n.blockTokens(S))}const k=e.createToken(m,x);l.push(k)}if(l.length!==0)return{items:l,raw:c}}function yy(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(c=>{const u=e.renderChildren([c]);if(u){const d=u.split(`
`).map(f=>f?e.indent(f):"").join(`
`);l.push(d)}}),l.join(`
`)}function o3(t,e,n={}){const{state:r}=e,{doc:s,tr:i}=r,o=t;s.descendants((a,l)=>{const c=i.mapping.map(l),u=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(p=>{if(p!==o)return!1;d=p}),!d)return;let f=!1;if(Object.keys(n).forEach(p=>{n[p]!==d.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...n});i.removeMark(c,u,t.type),i.addMark(c,u,p)}}),i.docChanged&&e.view.dispatch(i)}var Qt=class XE extends py{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new XE(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Ei(t){return new U$({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const i=ye(t.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=n.to;if(a){const u=l.search(/\S/),d=n.from+l.indexOf(a),f=d+a.length;if(fy(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===t.type&&v!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+a.length,o.addMark(n.from+u,c,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:a3,getOwnPropertySymbols:l3}=Object,{hasOwnProperty:c3}=Object.prototype;function Pf(t,e){return function(r,s,i){return t(r,s,i)&&e(r,s,i)}}function Rc(t){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,s);const{cache:i}=s,o=i.get(n),a=i.get(r);if(o&&a)return o===r&&a===n;i.set(n,r),i.set(r,n);const l=t(n,r,s);return i.delete(n),i.delete(r),l}}function u3(t){return t!=null?t[Symbol.toStringTag]:void 0}function Bx(t){return a3(t).concat(l3(t))}const d3=Object.hasOwn||((t,e)=>c3.call(t,e));function _i(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const h3="__v",f3="__o",p3="_owner",{getOwnPropertyDescriptor:Ux,keys:Fx}=Object;function m3(t,e){return t.byteLength===e.byteLength&&ed(new Uint8Array(t),new Uint8Array(e))}function g3(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function y3(t,e){return t.byteLength===e.byteLength&&ed(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function v3(t,e){return _i(t.getTime(),e.getTime())}function x3(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function w3(t,e){return t===e}function Hx(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.entries();let o,a,l=0;for(;(o=i.next())&&!o.done;){const c=e.entries();let u=!1,d=0;for(;(a=c.next())&&!a.done;){if(s[d]){d++;continue}const f=o.value,p=a.value;if(n.equals(f[0],p[0],l,d,t,e,n)&&n.equals(f[1],p[1],f[0],p[0],t,e,n)){u=s[d]=!0;break}d++}if(!u)return!1;l++}return!0}const b3=_i;function k3(t,e,n){const r=Fx(t);let s=r.length;if(Fx(e).length!==s)return!1;for(;s-- >0;)if(!ZE(t,e,n,r[s]))return!1;return!0}function ia(t,e,n){const r=Bx(t);let s=r.length;if(Bx(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=r[s],!ZE(t,e,n,i)||(o=Ux(t,i),a=Ux(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function S3(t,e){return _i(t.valueOf(),e.valueOf())}function E3(t,e){return t.source===e.source&&t.flags===e.flags}function Vx(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const s=new Array(r),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const l=e.values();let c=!1,u=0;for(;(a=l.next())&&!a.done;){if(!s[u]&&n.equals(o.value,a.value,o.value,a.value,t,e,n)){c=s[u]=!0;break}u++}if(!c)return!1}return!0}function ed(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function C3(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function ZE(t,e,n,r){return(r===p3||r===f3||r===h3)&&(t.$$typeof||e.$$typeof)?!0:d3(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const T3="[object ArrayBuffer]",N3="[object Arguments]",_3="[object Boolean]",j3="[object DataView]",R3="[object Date]",A3="[object Error]",M3="[object Map]",O3="[object Number]",I3="[object Object]",P3="[object RegExp]",D3="[object Set]",L3="[object String]",$3={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},z3="[object URL]",B3=Object.prototype.toString;function U3({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:c,areRegExpsEqual:u,areSetsEqual:d,areTypedArraysEqual:f,areUrlsEqual:p,unknownTagComparators:m}){return function(v,g,x){if(v===g)return!0;if(v==null||g==null)return!1;const w=typeof v;if(w!==typeof g)return!1;if(w!=="object")return w==="number"?a(v,g,x):w==="function"?i(v,g,x):!1;const k=v.constructor;if(k!==g.constructor)return!1;if(k===Object)return l(v,g,x);if(Array.isArray(v))return e(v,g,x);if(k===Date)return r(v,g,x);if(k===RegExp)return u(v,g,x);if(k===Map)return o(v,g,x);if(k===Set)return d(v,g,x);const S=B3.call(v);if(S===R3)return r(v,g,x);if(S===P3)return u(v,g,x);if(S===M3)return o(v,g,x);if(S===D3)return d(v,g,x);if(S===I3)return typeof v.then!="function"&&typeof g.then!="function"&&l(v,g,x);if(S===z3)return p(v,g,x);if(S===A3)return s(v,g,x);if(S===N3)return l(v,g,x);if($3[S])return f(v,g,x);if(S===T3)return t(v,g,x);if(S===j3)return n(v,g,x);if(S===_3||S===O3||S===L3)return c(v,g,x);if(m){let C=m[S];if(!C){const E=u3(v);E&&(C=m[E])}if(C)return C(v,g,x)}return!1}}function F3({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:m3,areArraysEqual:n?ia:g3,areDataViewsEqual:y3,areDatesEqual:v3,areErrorsEqual:x3,areFunctionsEqual:w3,areMapsEqual:n?Pf(Hx,ia):Hx,areNumbersEqual:b3,areObjectsEqual:n?ia:k3,arePrimitiveWrappersEqual:S3,areRegExpsEqual:E3,areSetsEqual:n?Pf(Vx,ia):Vx,areTypedArraysEqual:n?Pf(ed,ia):ed,areUrlsEqual:C3,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const s=Rc(r.areArraysEqual),i=Rc(r.areMapsEqual),o=Rc(r.areObjectsEqual),a=Rc(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return r}function H3(t){return function(e,n,r,s,i,o,a){return t(e,n,a)}}function V3({circular:t,comparator:e,createState:n,equals:r,strict:s}){if(n)return function(a,l){const{cache:c=t?new WeakMap:void 0,meta:u}=n();return e(a,l,{cache:c,equals:r,meta:u,strict:s})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const i={cache:void 0,equals:r,meta:void 0,strict:s};return function(a,l){return e(a,l,i)}}const W3=Ds();Ds({strict:!0});Ds({circular:!0});Ds({circular:!0,strict:!0});Ds({createInternalComparator:()=>_i});Ds({strict:!0,createInternalComparator:()=>_i});Ds({circular:!0,createInternalComparator:()=>_i});Ds({circular:!0,createInternalComparator:()=>_i,strict:!0});function Ds(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:s=!1}=t,i=F3(t),o=U3(i),a=n?n(o):H3(o);return V3({circular:e,comparator:o,createState:r,equals:a,strict:s})}var eC={exports:{}},tC={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Th=b,K3=Hg;function q3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var J3=typeof Object.is=="function"?Object.is:q3,G3=K3.useSyncExternalStore,Y3=Th.useRef,Q3=Th.useEffect,X3=Th.useMemo,Z3=Th.useDebugValue;tC.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Y3(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=X3(function(){function l(p){if(!c){if(c=!0,u=p,p=r(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return d=m}return d=p}if(m=d,J3(u,p))return m;var y=r(p);return s!==void 0&&s(m,y)?(u=p,m):(u=p,d=y)}var c=!1,u,d,f=n===void 0?null:n;return[function(){return l(e())},f===null?void 0:function(){return l(f())}]},[e,n,r,s]);var a=G3(t,i[0],i[1]);return Q3(function(){o.hasValue=!0,o.value=a},[a]),Z3(a),a};eC.exports=tC;var e4=eC.exports,t4=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},n4=({contentComponent:t})=>{const e=Hg.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(e)})};function r4(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:o_.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var s4=class extends ve.Component{constructor(t){var e;super(t),this.editorContentRef=ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=r4(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:t4(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&h.jsx(n4,{contentComponent:t.contentComponent})]})}},i4=b.forwardRef((t,e)=>{const n=ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return ve.createElement(s4,{key:n,innerRef:e,...t})}),nC=ve.memo(i4),o4=typeof window<"u"?b.useLayoutEffect:b.useEffect,a4=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function l4(t){var e;const[n]=b.useState(()=>new a4(t.editor)),r=e4.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:W3);return o4(()=>n.watch(t.editor),[t.editor,n]),b.useDebugValue(r),r}var c4=!1,km=typeof window>"u",u4=km||!!(typeof window<"u"&&window.next),d4=class rC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?km||u4?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...r)},onBlur:(...r)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...r)},onCreate:(...r)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...r)},onDestroy:(...r)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...r)},onFocus:(...r)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...r)},onSelectionUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...r)},onTransaction:(...r)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...r)},onUpdate:(...r)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...r)},onContentError:(...r)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...r)},onDrop:(...r)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...r)},onPaste:(...r)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...r)},onDelete:(...r)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...r)}};return new Y$(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=n.extensions)==null?void 0:o[i])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?rC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function h4(t={},e=[]){const n=b.useRef(t);n.current=t;const[r]=b.useState(()=>new d4(n)),s=Hg.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return b.useDebugValue(s),b.useEffect(r.onRender(e)),l4({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var sC=b.createContext({editor:null});sC.Consumer;var f4=b.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),p4=()=>b.useContext(f4);ve.forwardRef((t,e)=>{const{onDragStart:n}=p4(),r=t.as||"div";return h.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});ve.createContext({markViewContentRef:()=>{}});var vy=b.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});vy.displayName="TiptapContext";var m4=()=>b.useContext(vy);function iC({editor:t,instance:e,children:n}){const r=t??e;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=b.useMemo(()=>({editor:r}),[r]),i=b.useMemo(()=>({editor:r}),[r]);return h.jsx(sC.Provider,{value:i,children:h.jsx(vy.Provider,{value:s,children:n})})}iC.displayName="Tiptap";function oC({...t}){const{editor:e}=m4();return h.jsx(nC,{editor:e,...t})}oC.displayName="Tiptap.Content";Object.assign(iC,{Content:oC});var td=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},g4=/^\s*>\s$/,y4=Qt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return td("blockquote",{...Ie(this.options.HTMLAttributes,t),children:td("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?n:`${n} ${l}`);r.push(a.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Mo({find:g4,type:this.type})]}}),v4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,x4=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,w4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,b4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,k4=fr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return td("strong",{...Ie(this.options.HTMLAttributes,t),children:td("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ao({find:v4,type:this.type}),Ao({find:w4,type:this.type})]},addPasteRules(){return[Ei({find:x4,type:this.type}),Ei({find:b4,type:this.type})]}}),S4=/(^|[^`])`([^`]+)`(?!`)$/,E4=/(^|[^`])`([^`]+)`(?!`)/g,C4=fr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ao({find:S4,type:this.type})]},addPasteRules(){return[Ei({find:E4,type:this.type})]}}),Df=4,T4=/^```([a-z]+)?[\s\n]$/,N4=/^~~~([a-z]+)?[\s\n]$/,_4=Qt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Df,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ie(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Df,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(n);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:c,to:u}=s,p=r.doc.textBetween(c,u,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(c,u,r.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Df,{state:r}=t,{selection:s}=r,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:c}=i,u=i.start(),d=i.end(),p=r.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,y=0;const v=c-u;for(let C=0;C<p.length;C+=1){if(y+p[C].length>=v){m=C;break}y+=p[C].length+1}const x=((l=p[m].match(/^ */))==null?void 0:l[0])||"",w=Math.min(x.length,n);if(w===0)return!0;let k=u;for(let C=0;C<m;C+=1)k+=p[C].length+1;return a.delete(k,k+w),c-k<=w&&a.setSelection(re.create(a.doc,k)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:c}=s,f=r.doc.textBetween(l,c,`
`,`
`).split(`
`).map(p=>{var m;const y=((m=p.match(/^ */))==null?void 0:m[0])||"",v=Math.min(y.length,n);return p.slice(v)}).join(`
`);return a.replaceWith(l,c,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:i}=n;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?t.commands.command(({tr:c})=>(c.setSelection(ce.near(r.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[wm({find:T4,type:this.type,getAttributes:t=>({language:t[1]})}),wm({find:N4,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Fe({key:new it("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!n||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(re.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),j4=Qt.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),R4=Qt.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ie(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(f=>a.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),A4=Qt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ie(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>wm({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),M4=Qt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ie(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!Z$(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return IE(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,c=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(re.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(X.create(o.doc,l.pos)):o.setSelection(re.create(o.doc,l.pos));else{const u=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=u==null?void 0:u.create();d&&(o.insert(c,d),o.setSelection(re.create(o.doc,c+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[QE({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),O4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,I4=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,P4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,D4=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,L4=fr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ao({find:O4,type:this.type}),Ao({find:P4,type:this.type})]},addPasteRules(){return[Ei({find:I4,type:this.type}),Ei({find:D4,type:this.type})]}});const $4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",z4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Sm="numeric",Em="ascii",Cm="alpha",Da="asciinumeric",ga="alphanumeric",Tm="domain",aC="emoji",B4="scheme",U4="slashscheme",Lf="whitespace";function F4(t,e){return t in e||(e[t]=[]),e[t]}function ii(t,e,n){e[Sm]&&(e[Da]=!0,e[ga]=!0),e[Em]&&(e[Da]=!0,e[Cm]=!0),e[Da]&&(e[ga]=!0),e[Cm]&&(e[ga]=!0),e[ga]&&(e[Tm]=!0),e[aC]&&(e[Tm]=!0);for(const r in e){const s=F4(r,n);s.indexOf(t)<0&&s.push(t)}}function H4(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function Vt(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Vt.groups={};Vt.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||Vt.groups;let s;return e&&e.j?s=e:(s=new Vt(e),n&&r&&ii(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,n,r)},tt(t,e,n,r){r=r||Vt.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new Vt,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Vt,i){if(r)if(o.t&&typeof o.t=="string"){const l=Object.assign(H4(o.t,r),n);ii(i,l,r)}else n&&ii(i,n,r);o.t=i}return s.j[t]=o,o}};const le=(t,e,n,r,s)=>t.ta(e,n,r,s),Ve=(t,e,n,r,s)=>t.tr(e,n,r,s),Wx=(t,e,n,r,s)=>t.ts(e,n,r,s),$=(t,e,n,r,s)=>t.tt(e,n,r,s),yr="WORD",Nm="UWORD",lC="ASCIINUMERICAL",cC="ALPHANUMERICAL",_l="LOCALHOST",_m="TLD",jm="UTLD",ru="SCHEME",Wi="SLASH_SCHEME",xy="NUM",Rm="WS",wy="NL",La="OPENBRACE",$a="CLOSEBRACE",nd="OPENBRACKET",rd="CLOSEBRACKET",sd="OPENPAREN",id="CLOSEPAREN",od="OPENANGLEBRACKET",ad="CLOSEANGLEBRACKET",ld="FULLWIDTHLEFTPAREN",cd="FULLWIDTHRIGHTPAREN",ud="LEFTCORNERBRACKET",dd="RIGHTCORNERBRACKET",hd="LEFTWHITECORNERBRACKET",fd="RIGHTWHITECORNERBRACKET",pd="FULLWIDTHLESSTHAN",md="FULLWIDTHGREATERTHAN",gd="AMPERSAND",yd="APOSTROPHE",vd="ASTERISK",Qr="AT",xd="BACKSLASH",wd="BACKTICK",bd="CARET",rs="COLON",by="COMMA",kd="DOLLAR",nr="DOT",Sd="EQUALS",ky="EXCLAMATION",yn="HYPHEN",za="PERCENT",Ed="PIPE",Cd="PLUS",Td="POUND",Ba="QUERY",Sy="QUOTE",uC="FULLWIDTHMIDDLEDOT",Ey="SEMI",rr="SLASH",Ua="TILDE",Nd="UNDERSCORE",dC="EMOJI",_d="SYM";var hC=Object.freeze({__proto__:null,ALPHANUMERICAL:cC,AMPERSAND:gd,APOSTROPHE:yd,ASCIINUMERICAL:lC,ASTERISK:vd,AT:Qr,BACKSLASH:xd,BACKTICK:wd,CARET:bd,CLOSEANGLEBRACKET:ad,CLOSEBRACE:$a,CLOSEBRACKET:rd,CLOSEPAREN:id,COLON:rs,COMMA:by,DOLLAR:kd,DOT:nr,EMOJI:dC,EQUALS:Sd,EXCLAMATION:ky,FULLWIDTHGREATERTHAN:md,FULLWIDTHLEFTPAREN:ld,FULLWIDTHLESSTHAN:pd,FULLWIDTHMIDDLEDOT:uC,FULLWIDTHRIGHTPAREN:cd,HYPHEN:yn,LEFTCORNERBRACKET:ud,LEFTWHITECORNERBRACKET:hd,LOCALHOST:_l,NL:wy,NUM:xy,OPENANGLEBRACKET:od,OPENBRACE:La,OPENBRACKET:nd,OPENPAREN:sd,PERCENT:za,PIPE:Ed,PLUS:Cd,POUND:Td,QUERY:Ba,QUOTE:Sy,RIGHTCORNERBRACKET:dd,RIGHTWHITECORNERBRACKET:fd,SCHEME:ru,SEMI:Ey,SLASH:rr,SLASH_SCHEME:Wi,SYM:_d,TILDE:Ua,TLD:_m,UNDERSCORE:Nd,UTLD:jm,UWORD:Nm,WORD:yr,WS:Rm});const mr=/[a-z]/,oa=new RegExp("\\p{L}","u"),$f=new RegExp("\\p{Emoji}","u"),gr=/\d/,zf=/\s/,Kx="\r",Bf=`
`,V4="",W4="",Uf="";let Ac=null,Mc=null;function K4(t=[]){const e={};Vt.groups=e;const n=new Vt;Ac==null&&(Ac=qx($4)),Mc==null&&(Mc=qx(z4)),$(n,"'",yd),$(n,"{",La),$(n,"}",$a),$(n,"[",nd),$(n,"]",rd),$(n,"(",sd),$(n,")",id),$(n,"<",od),$(n,">",ad),$(n,"",ld),$(n,"",cd),$(n,"",ud),$(n,"",dd),$(n,"",hd),$(n,"",fd),$(n,"",pd),$(n,"",md),$(n,"&",gd),$(n,"*",vd),$(n,"@",Qr),$(n,"`",wd),$(n,"^",bd),$(n,":",rs),$(n,",",by),$(n,"$",kd),$(n,".",nr),$(n,"=",Sd),$(n,"!",ky),$(n,"-",yn),$(n,"%",za),$(n,"|",Ed),$(n,"+",Cd),$(n,"#",Td),$(n,"?",Ba),$(n,'"',Sy),$(n,"/",rr),$(n,";",Ey),$(n,"~",Ua),$(n,"_",Nd),$(n,"\\",xd),$(n,"",uC);const r=Ve(n,gr,xy,{[Sm]:!0});Ve(r,gr,r);const s=Ve(r,mr,lC,{[Da]:!0}),i=Ve(r,oa,cC,{[ga]:!0}),o=Ve(n,mr,yr,{[Em]:!0});Ve(o,gr,s),Ve(o,mr,o),Ve(s,gr,s),Ve(s,mr,s);const a=Ve(n,oa,Nm,{[Cm]:!0});Ve(a,mr),Ve(a,gr,i),Ve(a,oa,a),Ve(i,gr,i),Ve(i,mr),Ve(i,oa,i);const l=$(n,Bf,wy,{[Lf]:!0}),c=$(n,Kx,Rm,{[Lf]:!0}),u=Ve(n,zf,Rm,{[Lf]:!0});$(n,Uf,u),$(c,Bf,l),$(c,Uf,u),Ve(c,zf,u),$(u,Kx),$(u,Bf),Ve(u,zf,u),$(u,Uf,u);const d=Ve(n,$f,dC,{[aC]:!0});$(d,"#"),Ve(d,$f,d),$(d,V4,d);const f=$(d,W4);$(f,"#"),Ve(f,$f,d);const p=[[mr,o],[gr,s]],m=[[mr,null],[oa,a],[gr,i]];for(let y=0;y<Ac.length;y++)Hr(n,Ac[y],_m,yr,p);for(let y=0;y<Mc.length;y++)Hr(n,Mc[y],jm,Nm,m);ii(_m,{tld:!0,ascii:!0},e),ii(jm,{utld:!0,alpha:!0},e),Hr(n,"file",ru,yr,p),Hr(n,"mailto",ru,yr,p),Hr(n,"http",Wi,yr,p),Hr(n,"https",Wi,yr,p),Hr(n,"ftp",Wi,yr,p),Hr(n,"ftps",Wi,yr,p),ii(ru,{scheme:!0,ascii:!0},e),ii(Wi,{slashscheme:!0,ascii:!0},e),t=t.sort((y,v)=>y[0]>v[0]?1:-1);for(let y=0;y<t.length;y++){const v=t[y][0],x=t[y][1]?{[B4]:!0}:{[U4]:!0};v.indexOf("-")>=0?x[Tm]=!0:mr.test(v)?gr.test(v)?x[Da]=!0:x[Em]=!0:x[Sm]=!0,Wx(n,v,v,x)}return Wx(n,"localhost",_l,{ascii:!0}),n.jd=new Vt(_d),{start:n,tokens:Object.assign({groups:e},hC)}}function fC(t,e){const n=q4(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=n.length,s=[];let i=0,o=0;for(;o<r;){let a=t,l=null,c=0,u=null,d=-1,f=-1;for(;o<r&&(l=a.go(n[o]));)a=l,a.accepts()?(d=0,f=0,u=a):d>=0&&(d+=n[o].length,f++),c+=n[o].length,i+=n[o].length,o++;i-=d,o-=f,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function q4(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),i,o=s<55296||s>56319||r+1===n||(i=t.charCodeAt(r+1))<56320||i>57343?t[r]:t.slice(r,r+2);e.push(o),r+=o.length}return e}function Hr(t,e,n,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new Vt(r),i.jr=s.slice(),t.j[l]=i),t=i}return i=new Vt(n),i.jr=s.slice(),t.j[e[o-1]]=i,i}function qx(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let i=0;for(;s.indexOf(t[r+i])>=0;)i++;if(i>0){e.push(n.join(""));for(let o=parseInt(t.substring(r,r+i),10);o>0;o--)n.pop();r+=i}else n.push(t[r]),r++}return e}const jl={defaultProtocol:"http",events:null,format:Jx,formatHref:Jx,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Cy(t,e=null){let n=Object.assign({},jl);t&&(n=Object.assign(n,t instanceof Cy?t.o:t));const r=n.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Cy.prototype={o:jl,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:jl[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Jx(t){return t}function pC(t,e){this.t="token",this.v=t,this.tk=e}pC.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=jl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),i=this.toFormattedString(t),o={},a=t.get("className",n,e),l=t.get("target",n,e),c=t.get("rel",n,e),u=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&Object.assign(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function Nh(t,e){class n extends pC{constructor(s,i){super(s,i),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Gx=Nh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Yx=Nh("text"),J4=Nh("nl"),Oc=Nh("url",{isLink:!0,toHref(t=jl.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==_l&&t[1].t===rs}}),gn=t=>new Vt(t);function G4({groups:t}){const e=t.domain.concat([gd,vd,Qr,xd,wd,bd,kd,Sd,yn,xy,za,Ed,Cd,Td,rr,_d,Ua,Nd]),n=[yd,rs,by,nr,ky,za,Ba,Sy,Ey,od,ad,La,$a,rd,nd,sd,id,ld,cd,ud,dd,hd,fd,pd,md],r=[gd,yd,vd,xd,wd,bd,kd,Sd,yn,La,$a,za,Ed,Cd,Td,Ba,rr,_d,Ua,Nd],s=gn(),i=$(s,Ua);le(i,r,i),le(i,t.domain,i);const o=gn(),a=gn(),l=gn();le(s,t.domain,o),le(s,t.scheme,a),le(s,t.slashscheme,l),le(o,r,i),le(o,t.domain,o);const c=$(o,Qr);$(i,Qr,c),$(a,Qr,c),$(l,Qr,c);const u=$(i,nr);le(u,r,i),le(u,t.domain,i);const d=gn();le(c,t.domain,d),le(d,t.domain,d);const f=$(d,nr);le(f,t.domain,d);const p=gn(Gx);le(f,t.tld,p),le(f,t.utld,p),$(c,_l,p);const m=$(d,yn);$(m,yn,m),le(m,t.domain,d),le(p,t.domain,d),$(p,nr,f),$(p,yn,m);const y=$(p,rs);le(y,t.numeric,Gx);const v=$(o,yn),g=$(o,nr);$(v,yn,v),le(v,t.domain,o),le(g,r,i),le(g,t.domain,o);const x=gn(Oc);le(g,t.tld,x),le(g,t.utld,x),le(x,t.domain,o),le(x,r,i),$(x,nr,g),$(x,yn,v),$(x,Qr,c);const w=$(x,rs),k=gn(Oc);le(w,t.numeric,k);const S=gn(Oc),C=gn();le(S,e,S),le(S,n,C),le(C,e,S),le(C,n,C),$(x,rr,S),$(k,rr,S);const E=$(a,rs),N=$(l,rs),A=$(N,rr),P=$(A,rr);le(a,t.domain,o),$(a,nr,g),$(a,yn,v),le(l,t.domain,o),$(l,nr,g),$(l,yn,v),le(E,t.domain,S),$(E,rr,S),$(E,Ba,S),le(P,t.domain,S),le(P,e,S),$(P,rr,S);const R=[[La,$a],[nd,rd],[sd,id],[od,ad],[ld,cd],[ud,dd],[hd,fd],[pd,md]];for(let _=0;_<R.length;_++){const[T,O]=R[_],j=$(S,T);$(C,T,j),$(j,O,S);const I=gn(Oc);le(j,e,I);const B=gn();le(j,n),le(I,e,I),le(I,n,B),le(B,e,I),le(B,n,B),$(I,O,S),$(B,O,S)}return $(s,_l,x),$(s,wy,J4),{start:s,tokens:hC}}function Y4(t,e,n){let r=n.length,s=0,i=[],o=[];for(;s<r;){let a=t,l=null,c=null,u=0,d=null,f=-1;for(;s<r&&!(l=a.go(n[s].t));)o.push(n[s++]);for(;s<r&&(c=l||a.go(n[s].t));)l=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,s++,u++;if(f<0)s-=u,s<r&&(o.push(n[s]),s++);else{o.length>0&&(i.push(Ff(Yx,e,o)),o=[]),s-=f,u-=f;const p=d.t,m=n.slice(s-u,s);i.push(Ff(p,e,m))}}return o.length>0&&i.push(Ff(Yx,e,o)),i}function Ff(t,e,n){const r=n[0].s,s=n[n.length-1].e,i=e.slice(r,s);return new t(i,n)}const Q4=typeof console<"u"&&console&&console.warn||(()=>{}),X4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ae={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Z4(){return Vt.groups={},Ae.scanner=null,Ae.parser=null,Ae.tokenQueue=[],Ae.pluginQueue=[],Ae.customSchemes=[],Ae.initialized=!1,Ae}function Qx(t,e=!1){if(Ae.initialized&&Q4(`linkifyjs: already initialized - will not register custom scheme "${t}" ${X4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ae.customSchemes.push([t,e])}function ez(){Ae.scanner=K4(Ae.customSchemes);for(let t=0;t<Ae.tokenQueue.length;t++)Ae.tokenQueue[t][1]({scanner:Ae.scanner});Ae.parser=G4(Ae.scanner.tokens);for(let t=0;t<Ae.pluginQueue.length;t++)Ae.pluginQueue[t][1]({scanner:Ae.scanner,parser:Ae.parser});return Ae.initialized=!0,Ae}function Ty(t){return Ae.initialized||ez(),Y4(Ae.parser.start,t,fC(Ae.scanner.start,t))}Ty.scan=fC;function mC(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Cy(n),s=Ty(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}var Ny="[\0- -\u2029]",tz=new RegExp(Ny),nz=new RegExp(`${Ny}$`),rz=new RegExp(Ny,"g");function sz(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function iz(t){return new Fe({key:new it("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(c=>c.docChanged)&&!n.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=TE(n.doc,[...e]);if(OE(a).forEach(({newRange:c})=>{const u=XL(r.doc,c,p=>p.isTextblock);let d,f;if(u.length>1)d=u[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(u.length){const p=r.doc.textBetween(c.from,c.to," "," ");if(!nz.test(p))return;d=u[0],f=r.doc.textBetween(d.pos,c.to,void 0," ")}if(d&&f){const p=f.split(tz).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],y=d.pos+f.lastIndexOf(m);if(!m)return!1;const v=Ty(m).map(g=>g.toObject(t.defaultProtocol));if(!sz(v))return!1;v.filter(g=>g.isLink).map(g=>({...g,from:y+g.start+1,to:y+g.end+1})).filter(g=>r.schema.marks.code?!r.doc.rangeHasMark(g.from,g.to,r.schema.marks.code):!0).filter(g=>t.validate(g.value)).filter(g=>t.shouldAutoLink(g.value)).forEach(g=>{fy(g.from,g.to,r.doc).some(x=>x.mark.type===t.type)||o.addMark(g.from,g.to,t.type.create({href:g.href}))})}}),!!o.steps.length)return o}})}function oz(t){return new Fe({key:new it("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{const l=r.target;if(!l)return!1;const c=t.editor.view.dom;o=l.closest("a"),o&&!c.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const l=ME(e.state,t.type.name),c=(s=o.href)!=null?s:l.href,u=(i=o.target)!=null?i:l.target;c&&(window.open(c,u),a=!0)}return a}}})}function az(t){return new Fe({key:new it("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";r.content.forEach(u=>{l+=u.textContent});const c=mC(l,{defaultProtocol:t.defaultProtocol}).find(u=>u.isLink&&u.value===l);return!l||!c||s!==void 0&&!s(c.value)?!1:t.editor.commands.setMark(t.type,{href:c.href})}}})}function Hs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(rz,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var lz=fr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Qx(t);return}Qx(t.scheme,t.optionalSlashes)})},onDestroy(){Z4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Hs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Hs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Hs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ie(this.options.HTMLAttributes,t),0]:["a",Ie(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n,r,s,i;const o=(r=(n=t.attrs)==null?void 0:n.href)!=null?r:"",a=(i=(s=t.attrs)==null?void 0:s.title)!=null?i:"",l=e.renderChildren(t);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Hs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Hs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ei({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=mC(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Hs(o,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(iz({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Hs(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(oz({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(az({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),cz=Object.defineProperty,uz=(t,e)=>{for(var n in e)cz(t,n,{get:e[n],enumerable:!0})},dz="listItem",Xx="textStyle",Zx=/^\s*([-+*])\s$/,gC=Qt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dz,this.editor.getAttributes(Xx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Mo({find:Zx,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Mo({find:Zx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Xx),editor:this.editor})),[t]}}),yC=Qt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);n.push(...a)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>yy(t,e,r=>{var s,i;return r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${(((i=(s=r.meta)==null?void 0:s.parentAttrs)==null?void 0:i.start)||1)+r.index}. `:"- "},n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),hz={};uz(hz,{findListItemPos:()=>Wl,getNextListDepth:()=>_y,handleBackspace:()=>Am,handleDelete:()=>Mm,hasListBefore:()=>vC,hasListItemAfter:()=>fz,hasListItemBefore:()=>xC,listItemHasSubList:()=>wC,nextListIsDeeper:()=>bC,nextListIsHigher:()=>kC});var Wl=(t,e)=>{const{$from:n}=e.selection,r=Ze(t,e.schema);let s=null,i=n.depth,o=n.pos,a=null;for(;i>0&&a===null;)s=n.node(i),s.type===r?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},_y=(t,e)=>{const n=Wl(t,e);if(!n)return!1;const[,r]=l$(e,t,n.$pos.pos+4);return r},vC=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),i=t.doc.resolve(s).node();return!(!i||!n.includes(i.type.name))},xC=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},wC=(t,e,n)=>{if(!n)return!1;const r=Ze(t,e.schema);let s=!1;return n.descendants(i=>{i.type===r&&(s=!0)}),s},Am=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Rs(t.state,e)&&vC(t.state,e,n)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),c=[];l.node().descendants((f,p)=>{f.type.name===e&&c.push({node:f,pos:p})});const u=c.at(-1);if(!u)return!1;const d=t.state.doc.resolve(l.start()+u.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Rs(t.state,e)||!h$(t.state))return!1;const r=Wl(e,t.state);if(!r)return!1;const i=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=wC(e,t.state,i);return xC(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},bC=(t,e)=>{const n=_y(t,e),r=Wl(t,e);return!r||!n?!1:n>r.depth},kC=(t,e)=>{const n=_y(t,e),r=Wl(t,e);return!r||!n?!1:n<r.depth},Mm=(t,e)=>{if(!Rs(t.state,e)||!d$(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:bC(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():kC(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},fz=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},SC=be.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Mm(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Mm(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Am(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&Am(t,n,r)&&(e=!0)}),e}}}}),ew=/^(\s*)(\d+)\.\s+(.*)$/,pz=/^\s/;function mz(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],i=s.match(ew);if(!i)break;const[,o,a,l]=i,c=o.length;let u=l,d=n+1;const f=[s];for(;d<t.length;){const p=t[d];if(p.match(ew))break;if(p.trim()==="")f.push(p),u+=`
`,d+=1;else if(p.match(pz))f.push(p),u+=`
${p.slice(c+2)}`,d+=1;else break}e.push({indent:c,number:parseInt(a,10),content:u.trim(),raw:f.join(`
`)}),r=d,n=d}return[e,r]}function EC(t,e,n){var r;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((r=a[0])==null?void 0:r.trim())||"",c=[];l&&c.push({type:"paragraph",raw:l,tokens:n.inlineTokens(l)});const u=a.slice(1).join(`
`).trim();if(u){const p=n.blockTokens(u);c.push(...p)}let d=i+1;const f=[];for(;d<t.length&&t[d].indent>e;)f.push(t[d]),d+=1;if(f.length>0){const p=Math.min(...f.map(y=>y.indent)),m=EC(f,p,n);c.push({type:"list",ordered:!0,start:f[0].number,items:m,raw:f.map(y=>y.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:c}),i=d}else i+=1}return s}function gz(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);r.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&r.push(...i)}}),{type:"listItem",content:r}})}var yz="listItem",tw="textStyle",nw=/^(\d+)\.\s$/,CC=Qt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ie(this.options.HTMLAttributes,n),0]:["ol",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?gz(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[i,o]=mz(s);if(i.length===0)return;const a=EC(i,0,n);return a.length===0?void 0:{type:"list",ordered:!0,start:((r=i[0])==null?void 0:r.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(yz,this.editor.getAttributes(tw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Mo({find:nw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Mo({find:nw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(tw)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),vz=/^\s*(\[([( |x])?\])\s$/,xz=Qt.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Ie(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return yy(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),c=d=>{var f,p;a.ariaLabel=((p=(f=this.options.a11y)==null?void 0:f.checkboxLabel)==null?void 0:p.call(f,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};c(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:f}=d.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=n();if(typeof m!="number")return!1;const y=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...y==null?void 0:y.attrs,checked:f}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,f)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,f])=>{s.setAttribute(d,f)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([d,f])=>{s.setAttribute(d,f)});let u=new Set(Object.keys(e));return{dom:s,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,c(d);const f=r.extensionManager.attributes,p=Nl(d,f),m=new Set(Object.keys(p)),y=this.options.HTMLAttributes;return u.forEach(v=>{m.has(v)||(v in y?s.setAttribute(v,y[v]):s.removeAttribute(v))}),Object.entries(p).forEach(([v,g])=>{g==null?v in y?s.setAttribute(v,y[v]):s.removeAttribute(v):s.setAttribute(v,g)}),u=m,!0}}}},addInputRules(){return[Mo({find:vz,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),wz=Qt.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Ie(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=i=>{const o=bm(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:n.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:r},n);return o?[{type:"taskList",raw:o.raw,items:o.items}]:n.blockTokens(i)},s=bm(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:n.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});be.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(gC.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(yC.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(SC.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(CC.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(xz.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(wz.configure(this.options.taskList)),t}});var rw="&nbsp;",bz="",kz=Qt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ie(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];if(n.length===1&&n[0].type==="image")return e.parseChildren([n[0]]);const r=e.parseInline(n);return r.length===1&&r[0].type==="text"&&(r[0].text===rw||r[0].text===bz)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,r)},renderMarkdown:(t,e)=>{if(!t)return"";const n=Array.isArray(t.content)?t.content:[];return n.length===0?rw:e.renderChildren(n)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Sz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ez=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Cz=fr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ie(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ao({find:Sz,type:this.type})]},addPasteRules(){return[Ei({find:Ez,type:this.type})]}}),Tz=Qt.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),TC=fr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ie(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:n.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Nz=TC;function _z(t={}){return new Fe({view(e){return new jz(e,t)}})}class jz{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let m=p.getBoundingClientRect(),y=d?m.bottom:m.top;d&&f&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:m.left,right:m.right,top:y-v,bottom:y+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),f=d.width/l.offsetWidth,p=d.height/l.offsetHeight;c=d.left-l.scrollLeft*f,u=d.top-l.scrollTop*p}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!i){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=yS(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class qe extends ce{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return qe.valid(r)?new qe(r):ce.near(r)}content(){return U.empty}eq(e){return e instanceof qe&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new qe(e.resolve(n.pos))}getBookmark(){return new jy(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!Rz(e)||!Az(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&qe.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(n>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=n;let l=e.doc.resolve(s);if(qe.valid(l))return l}for(;;){let o=n>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!X.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*n),r=!1;continue e}break}i=o,s+=n;let a=e.doc.resolve(s);if(qe.valid(a))return a}return null}}}qe.prototype.visible=!1;qe.findFrom=qe.findGapCursorFrom;ce.jsonID("gapcursor",qe);class jy{constructor(e){this.pos=e}map(e){return new jy(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return qe.valid(n)?new qe(n):ce.near(n)}}function NC(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function Rz(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||NC(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Az(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||NC(s.type))return!0;if(s.inlineContent)return!1}}return!0}function Mz(){return new Fe({props:{decorations:Dz,createSelectionBetween(t,e,n){return e.pos==n.pos&&qe.valid(n)?new qe(n):null},handleClick:Iz,handleKeyDown:Oz,handleDOMEvents:{beforeinput:Pz}}})}const Oz=vE({ArrowLeft:Ic("horiz",-1),ArrowRight:Ic("horiz",1),ArrowUp:Ic("vert",-1),ArrowDown:Ic("vert",1)});function Ic(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof re){if(!i.endOfTextblock(n)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=qe.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new qe(c))),!0):!1}}function Iz(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!qe.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&X.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new qe(r))),!0)}function Pz(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof qe))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=D.empty;for(let o=r.length-1;o>=0;o--)s=D.from(r[o].createAndFill(null,s));let i=t.state.tr.replace(n.pos,n.pos,new U(s,0,0));return i.setSelection(re.near(i.doc.resolve(n.pos+1))),t.dispatch(i),!1}function Dz(t){if(!(t.selection instanceof qe))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",$e.create(t.doc,[Pt.widget(t.selection.head,e,{key:"gapcursor"})])}var jd=200,ht=function(){};ht.prototype.append=function(e){return e.length?(e=ht.from(e),!this.length&&e||e.length<jd&&this.leafAppend(e)||this.length<jd&&e.leafPrepend(this)||this.appendInner(e)):this};ht.prototype.prepend=function(e){return e.length?ht.from(e).append(this):this};ht.prototype.appendInner=function(e){return new Lz(this,e)};ht.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?ht.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};ht.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ht.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};ht.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},n,r),s};ht.from=function(e){return e instanceof ht?e:e&&e.length?new _C(e):ht.empty};var _C=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=jd)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=jd)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(ht);ht.empty=new _C([]);var Lz=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ht);const $z=500;class Fn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;n&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new sr(d.map));let p=d.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new sr(m,void 0,void 0,c.length+u.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new Fn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new sr(e.mapping.maps[u],d,n),p;(p=l&&l.merge(f))&&(f=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(f),n&&(o++,n=void 0),s||(l=f)}let c=o-r.depth;return c>Bz&&(a=zz(a,c),o-=c),new Fn(a.append(i),o)}remapping(e,n){let r=new bl;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new Fn(this.items.append(e.map(n=>new sr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(f=>{f.selection&&a--},s);let l=n;this.items.forEach(f=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(f.step){let y=e.steps[p].invert(e.docs[p]),v=f.selection&&f.selection.map(i.slice(l+1,p));v&&a++,r.push(new sr(m,y,v))}else r.push(new sr(m))},s);let c=[];for(let f=n;f<o;f++)c.push(new sr(i.maps[f]));let u=this.items.slice(0,s).append(c).append(r),d=new Fn(u,a);return d.emptyItemCount()>$z&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(n.slice(r)),c=l&&l.getMap();if(r--,c&&n.appendMap(c,r),l){let u=o.selection&&o.selection.map(n.slice(r));u&&i++;let d=new sr(c.invert(),l,u),f,p=s.length-1;(f=s.length&&s[p].merge(d))?s[p]=f:s.push(d)}}else o.map&&r--},this.items.length,0),new Fn(ht.from(s.reverse()),i)}}Fn.empty=new Fn(ht.empty,0);function zz(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class sr{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new sr(n.getMap().invert(),n,this.selection)}}}class Xr{constructor(e,n,r,s,i){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const Bz=20;function Uz(t,e,n,r){let s=n.getMeta(fi),i;if(s)return s.historyState;n.getMeta(Vz)&&(t=new Xr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(fi))return o.getMeta(fi).redo?new Xr(t.done.addTransform(n,void 0,r,su(e)),t.undone,sw(n.mapping.maps),t.prevTime,t.prevComposition):new Xr(t.done,t.undone.addTransform(n,void 0,r,su(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Fz(n,t.prevRanges)),c=o?Hf(t.prevRanges,n.mapping):sw(n.mapping.maps);return new Xr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,r,su(e)),Fn.empty,c,n.time,a??t.prevComposition)}else return(i=n.getMeta("rebased"))?new Xr(t.done.rebased(n,i),t.undone.rebased(n,i),Hf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Xr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Hf(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Fz(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(n=!0)}),n}function sw(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,i,o)=>e.push(i,o));return e}function Hf(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),i=e.map(t[r+1],-1);s<=i&&n.push(s,i)}return n}function Hz(t,e,n){let r=su(e),s=fi.get(e).spec.config,i=(n?t.undone:t.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(n?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Xr(n?a:i.remaining,n?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(fi,{redo:n,historyState:l})}let Vf=!1,iw=null;function su(t){let e=t.plugins;if(iw!=e){Vf=!1,iw=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Vf=!0;break}}return Vf}const fi=new it("history"),Vz=new it("closeHistory");function Wz(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Fe({key:fi,state:{init(){return new Xr(Fn.empty,Fn.empty,null,0,-1)},apply(e,n,r){return Uz(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?RC:r=="historyRedo"?AC:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function jC(t,e){return(n,r)=>{let s=fi.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let i=Hz(s,n,t);i&&r(e?i.scrollIntoView():i)}return!0}}const RC=jC(!1,!0),AC=jC(!0,!0);be.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Fe({key:new it("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:r.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const c=r.tr.deleteRange(a,l);return t=!0,c}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),i=this.storage.characters({node:e.doc});if(i<=r||s>r&&i>r&&i<=s)return!0;if(s>r&&i>r&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-r,c=a-l,u=a;return e.deleteRange(c,u),!(this.storage.characters({node:e.doc})>r)}})]}});var Kz=be.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_z(this.options)]}});be.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Fe({key:new it("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,i=[];if(!n||!r)return $e.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,c)=>{if(l.isText)return;if(!(s>=c&&s<=c+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,c)=>{if(l.isText||!(s>=c&&s<=c+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(Pt.node(c,c+l.nodeSize,{class:this.options.className}))}),$e.create(t,i)}}})]}});var qz=be.create({name:"gapCursor",addProseMirrorPlugins(){return[Mz()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ye(Q(t,"allowGapCursor",n)))!=null?e:null}}}),ow="placeholder";function Jz(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}be.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:ow,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${Jz(this.options.dataAttribute)}`:`data-${ow}`;return[new Fe({key:new it("placeholder"),props:{decorations:({doc:e,selection:n})=>{const r=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=n,i=[];if(!r)return null;const o=this.editor.isEmpty;return e.descendants((a,l)=>{const c=s>=l&&s<=l+a.nodeSize,u=!a.isLeaf&&Sh(a);if((c||!this.options.showOnlyCurrent)&&u){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const f=Pt.node(l,l+a.nodeSize,{class:d.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:c}):this.options.placeholder});i.push(f)}return this.options.includeChildren}),$e.create(e,i)}}})]}});be.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Fe({key:new it("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||IE(n.selection)||t.view.dragging?null:$e.create(n.doc,[Pt.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function aw({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var Gz=be.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new it(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new Fe({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:c}=o,u=e.getState(o),d=a.content.size,f=c.nodes[n];if(u)return l.insert(d,f.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!aw({node:o,types:r})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!aw({node:o,types:r})}}})]}}),Yz=be.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>RC(t,e),redo:()=>({state:t,dispatch:e})=>AC(t,e)}},addProseMirrorPlugins(){return[Wz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Qz=be.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(k4.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(y4.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(gC.configure(this.options.bulletList)),this.options.code!==!1&&s.push(C4.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(_4.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(j4.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(Kz.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(qz.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(R4.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(A4.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Yz.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(M4.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(L4.configure(this.options.italic)),this.options.listItem!==!1&&s.push(yC.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(SC.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(lz.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(CC.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(kz.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(Cz.configure(this.options.strike)),this.options.text!==!1&&s.push(Tz.configure(this.options.text)),this.options.underline!==!1&&s.push(TC.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Gz.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),Xz=Qz,Zz=be.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).some(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),e5=Zz,t5=20,MC=(t,e=0)=>{const n=[];return!t.children.length||e>t5||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(...MC(r,e+1))}),n},n5=t=>{if(!t.children.length)return;const e=MC(t);e&&e.forEach(n=>{var r,s;const i=n.getAttribute("style"),o=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${o};${i}`)})},OC=fr.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&n5(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),r5=be.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const i=r[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),IC=be.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const i=r[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),s5=be.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),i5=be.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),o5=be.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});be.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(r5.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(IC.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(s5.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(i5.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(o5.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(OC.configure(this.options.textStyle)),t}});var a5=IC,l5=fr.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),c5=l5,u5=fr.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",Ie(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),d5=u5,h5=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,f5=Qt.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ie(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,i,o;const a=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",l=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",c=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return c?`![${l}](${a} "${c}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:a})=>{const l=document.createElement("img");Object.entries(o).forEach(([d,f])=>{if(f!=null)switch(d){case"width":case"height":break;default:l.setAttribute(d,f);break}}),l.src=o.src;const c=new X$({element:l,editor:a,node:s,getPos:i,onResize:(d,f)=>{l.style.width=`${d}px`,l.style.height=`${f}px`},onCommit:(d,f)=>{const p=i();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:d,height:f}).run()},onUpdate:(d,f,p)=>d.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),u=c.dom;return u.style.visibility="hidden",u.style.pointerEvents="none",l.onload=()=>{u.style.visibility="",u.style.pointerEvents=""},c}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[QE({find:h5,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),p5=f5;const m5=["#FFFFFF","#6C5DD3","#00E0FF","#FF49DB","#FFD700","#8E8EA0","#FF4444","#44FF44"],g5=({editor:t,minimal:e})=>{if(!t)return null;const n=({onClick:r,isActive:s,disabled:i,children:o,title:a})=>h.jsx("button",{onClick:r,disabled:i,title:a,className:`p-1.5 rounded-lg transition-colors ${s?"bg-gaming-primary text-white":"text-gaming-textMuted hover:text-white hover:bg-gaming-card/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:o});return h.jsxs("div",{className:"flex flex-wrap gap-1 p-2 bg-gaming-card/30 border-b border-white/5",children:[h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"",children:h.jsx(p2,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"",children:h.jsx(l2,{size:16})})]}),h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"",children:h.jsx(Kj,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"",children:h.jsx(e2,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),title:"",children:h.jsx(f2,{size:16})}),!e&&h.jsx(n,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),title:"",children:h.jsx(u2,{size:16})})]}),h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().toggleSubscript().run(),isActive:t.isActive("subscript"),title:"  (HO)",children:h.jsx(d2,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleSuperscript().run(),isActive:t.isActive("superscript"),title:"  (x)",children:h.jsx(h2,{size:16})})]}),!e&&h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),title:" 1",children:h.jsx(Qj,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),title:" 2",children:h.jsx(Xj,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t.isActive("heading",{level:3}),title:" 3",children:h.jsx(Zj,{size:16})})]}),!e&&h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:" ",children:h.jsx(K1,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:" ",children:h.jsx(s2,{size:16})})]}),!e&&h.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[h.jsx(n,{onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),title:"  ",children:h.jsx(Uj,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),title:" ",children:h.jsx(Bj,{size:16})}),h.jsx(n,{onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),title:"  ",children:h.jsx(Fj,{size:16})})]}),h.jsx("div",{className:"flex gap-0.5 items-center pl-1",children:h.jsxs("div",{className:"flex items-center gap-1 bg-gaming-bg/50 rounded-lg p-1",children:[h.jsx(o2,{size:14,className:"text-gaming-textMuted ml-1"}),m5.map(r=>h.jsx("button",{onClick:()=>t.chain().focus().setColor(r).run(),className:`w-4 h-4 rounded-full border border-white/10 hover:scale-110 transition-transform ${t.isActive("textStyle",{color:r})?"ring-2 ring-white":""}`,style:{backgroundColor:r},title:r},r))]})})]})},Rd=({content:t,onChange:e,placeholder:n,minHeight:r="200px",minimal:s=!1,className:i=""})=>{const o=ve.useRef(null),a=async d=>{if(d)try{const f=d.name.split(".").pop(),m=`${`${Date.now()}_${Math.random().toString(36).substring(2)}.${f}`}`,{error:y}=await ls.storage.from("images").upload(m,d);if(y)throw y;const{data:v}=ls.storage.from("images").getPublicUrl(m);u&&u.chain().focus().setImage({src:v.publicUrl}).run()}catch(f){console.error("Error uploading image:",f),alert("  ")}},l=d=>{const f=(d.clipboardData||d.originalEvent.clipboardData).items;for(const p of f)if(p.kind==="file"&&p.type.startsWith("image/")){d.preventDefault();const m=p.getAsFile();a(m);return}},c=ve.useMemo(()=>[Xz,Nz,c5,d5,OC,a5,e5.configure({types:["heading","paragraph"]}),p5.configure({inline:!0,allowBase64:!0})],[]),u=h4({extensions:c,content:t,onUpdate:({editor:d})=>{e(d.getHTML())},editorProps:{attributes:{class:`prose prose-invert max-w-none focus:outline-none px-4 py-3 text-white ${s?"text-sm":""}`,style:`min-height: ${r}`},handlePaste:(d,f)=>{l(f);const p=(f.clipboardData||f.originalEvent.clipboardData).items;for(const m of p)if(m.kind==="file"&&m.type.startsWith("image/"))return!0;return!1}}});return b.useEffect(()=>{if(u&&t!==u.getHTML()){if(u.getText()===""&&t==="")return;u.commands.setContent(t)}},[t,u]),h.jsxs("div",{className:`bg-gaming-bg/50 border border-white/10 rounded-xl overflow-hidden focus-within:border-gaming-primary/50 transition-colors ${i}`,children:[h.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/*",onChange:d=>a(d.target.files[0])}),h.jsx(g5,{editor:u,minimal:s}),h.jsx(nC,{editor:u,style:{minHeight:r}})]})},y5=({data:t,onChange:e,lang:n})=>{const[r,s]=b.useState(!1),i=(l,c)=>{e({...t,[l]:c})},o=async()=>{s(!0);try{const l=await lt(t.bodyTj||"","tj","ru");i("bodyRu",l)}finally{s(!1)}},a=async()=>{s(!0);try{const l=await lt(t.bodyRu||"","ru","tj");i("bodyTj",l)}finally{s(!1)}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("h4",{className:"text-lg font-semibold text-gaming-accent flex items-center gap-2",children:[h.jsx(jn,{size:20}),n==="ru"?" ":" "]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:n==="ru"?" (RU)":" (RU)"}),h.jsx(Rd,{content:t.bodyRu||"",onChange:l=>i("bodyRu",l),placeholder:n==="ru"?"  ...":"   ..."})]}),h.jsx("button",{type:"button",onClick:o,disabled:r,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:r?h.jsx(tt,{size:16,className:"animate-spin"}):h.jsx(yt,{size:16,className:"rotate-180"})})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:n==="ru"?" (TJ)":" (TJ)"}),h.jsx(Rd,{content:t.bodyTj||"",onChange:l=>i("bodyTj",l),placeholder:"   ..."})]}),h.jsx("button",{type:"button",onClick:a,disabled:r,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:r?h.jsx(tt,{size:16,className:"animate-spin"}):h.jsx(yt,{size:16})})]}),h.jsxs("div",{className:"flex justify-between text-xs text-gaming-textMuted",children:[h.jsxs("span",{children:["RU: ",(t.bodyRu||"").length," ",n==="ru"?"":""]}),h.jsxs("span",{children:["TJ: ",(t.bodyTj||"").length," ",n==="ru"?"":""]})]})]})},lw=[{id:"multiple_choice",icon:K1,label:{ru:"4  ",tj:"4  "}},{id:"matching",icon:Hj,label:{ru:"",tj:""}},{id:"numeric",icon:Yj,label:{ru:" ",tj:" "}}],v5=["","","","","","","","","","","","","","","","","C","%","","",""],x5=({data:t,onChange:e,lang:n})=>{const r=t.questions||[],[s,i]=b.useState({}),o=(_="multiple_choice")=>{let T={id:`q_${Date.now()}`,type:_,textRu:"",textTj:"",image:null};_==="multiple_choice"?(T.options=[{id:`opt_${Date.now()}_1`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_2`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_3`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_4`,textRu:"",textTj:"",image:null}],T.correctId=null):_==="matching"?(T.leftItems=[{id:"A",textRu:"",textTj:"",image:null},{id:"B",textRu:"",textTj:"",image:null},{id:"C",textRu:"",textTj:"",image:null},{id:"D",textRu:"",textTj:"",image:null}],T.rightItems=[{id:"1",textRu:"",textTj:"",image:null},{id:"2",textRu:"",textTj:"",image:null},{id:"3",textRu:"",textTj:"",image:null},{id:"4",textRu:"",textTj:"",image:null},{id:"5",textRu:"",textTj:"",image:null}],T.correctMatches={A:"",B:"",C:"",D:""}):_==="numeric"&&(T.digits=["","","",""],T.unit=""),e({...t,questions:[...r,T]})},a=(_,T,O)=>{const j=[...r];j[_]={...j[_],[T]:O},e({...t,questions:j})},l=_=>{const T=r.filter((O,j)=>j!==_);e({...t,questions:T})},c=(_,T,O,j)=>{const I=[...r];I[_].options[T]={...I[_].options[T],[O]:j},e({...t,questions:I})},u=(_,T)=>{const O=[...r];O[_].correctId=T,e({...t,questions:O})},d=(_,T,O,j)=>{const I=[...r];I[_].leftItems[T]={...I[_].leftItems[T],[O]:j},e({...t,questions:I})},f=(_,T,O,j)=>{const I=[...r];I[_].rightItems[T]={...I[_].rightItems[T],[O]:j},e({...t,questions:I})},p=(_,T,O)=>{const j=[...r];j[_].correctMatches={...j[_].correctMatches,[T]:O},e({...t,questions:j})},m=(_,T,O)=>{if(O.length>1&&(O=O.slice(-1)),O&&!/^\d$/.test(O))return;const j=[...r];j[_].digits[T]=O,e({...t,questions:j})},y=(_,T)=>{const O=[...r];O[_].unit=T,e({...t,questions:O})},v=async _=>{const T=`q_${_}`;i(O=>({...O,[T]:!0}));try{const O=await lt(r[_].textRu,"ru","tj");a(_,"textTj",O)}finally{i(O=>({...O,[T]:!1}))}},g=async _=>{const T=`q_${_}`;i(O=>({...O,[T]:!0}));try{const O=await lt(r[_].textTj,"tj","ru");a(_,"textRu",O)}finally{i(O=>({...O,[T]:!1}))}},x=async(_,T)=>{const O=`opt_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].options[T],I=await lt(j.textRu,"ru","tj");c(_,T,"textTj",I)}finally{i(j=>({...j,[O]:!1}))}},w=async(_,T)=>{const O=`opt_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].options[T],I=await lt(j.textTj,"tj","ru");c(_,T,"textRu",I)}finally{i(j=>({...j,[O]:!1}))}},k=async(_,T)=>{const O=`left_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].leftItems[T],I=await lt(j.textRu,"ru","tj");d(_,T,"textTj",I)}finally{i(j=>({...j,[O]:!1}))}},S=async(_,T)=>{const O=`left_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].leftItems[T],I=await lt(j.textTj,"tj","ru");d(_,T,"textRu",I)}finally{i(j=>({...j,[O]:!1}))}},C=async(_,T)=>{const O=`right_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].rightItems[T],I=await lt(j.textRu,"ru","tj");f(_,T,"textTj",I)}finally{i(j=>({...j,[O]:!1}))}},E=async(_,T)=>{const O=`right_${_}_${T}`;i(j=>({...j,[O]:!0}));try{const j=r[_].rightItems[T],I=await lt(j.textTj,"tj","ru");f(_,T,"textRu",I)}finally{i(j=>({...j,[O]:!1}))}},[N,A]=b.useState(!1),P=(_,T)=>{const O=_.clipboardData.items;for(let j=0;j<O.length;j++)if(O[j].type.indexOf("image")!==-1){const I=O[j].getAsFile(),B=new FileReader;B.onload=L=>{T(L.target.result)},B.readAsDataURL(I),_.preventDefault()}},R=({image:_,onUpload:T,onRemove:O,size:j="md"})=>{const I=ve.useRef(null),[B,L]=b.useState(!1),F=async K=>{const se=K.target.files[0];if(se){L(!0);try{const G=se.name.split(".").pop(),je=`${`${Date.now()}_${Math.random().toString(36).substring(2)}.${G}`}`,{error:St}=await ls.storage.from("images").upload(je,se);if(St){console.error(" :",St),alert(n==="ru"?"  ":"   ");return}const{data:Te}=ls.storage.from("images").getPublicUrl(je);T(Te.publicUrl)}catch(G){console.error("Upload error:",G),alert("Upload failed")}finally{L(!1)}}};return _?h.jsxs("div",{className:`relative group ${j==="sm"?"w-10 h-10":"w-full h-32"} bg-gaming-card/50 rounded-lg border border-white/10 overflow-hidden`,children:[h.jsx("img",{src:_,alt:"Uploaded",className:"w-full h-full object-cover"}),h.jsx("button",{onClick:O,className:"absolute top-1 right-1 p-1 bg-red-500/80 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:h.jsx(Ns,{size:12})})]}):h.jsxs(h.Fragment,{children:[h.jsx("input",{type:"file",ref:I,className:"hidden",accept:"image/*",onChange:F,disabled:B}),h.jsxs("button",{onClick:()=>{var K;return(K=I.current)==null?void 0:K.click()},disabled:B,className:`flex items-center justify-center ${j==="sm"?"w-10 h-10":"w-full h-10"} bg-gaming-bg/30 border border-white/10 rounded-lg hover:bg-gaming-bg/50 hover:border-gaming-primary/50 transition-all text-gaming-textMuted hover:text-gaming-primary relative`,title:" ",children:[B?h.jsx(tt,{size:j==="sm"?14:16,className:"animate-spin text-gaming-primary"}):h.jsx(Ig,{size:j==="sm"?16:18}),j!=="sm"&&!B&&h.jsx("span",{className:"ml-2 text-sm",children:n==="ru"?" ":"  "})]})]})};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("h4",{className:"text-lg font-semibold text-gaming-pink flex items-center gap-2",children:[h.jsx(ol,{size:20}),n==="ru"?" ":" "]}),h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:()=>A(!N),className:"flex items-center gap-2 px-3 py-2 bg-gaming-pink/20 text-gaming-pink rounded-xl hover:bg-gaming-pink/30 transition-colors text-sm",children:[h.jsx(Ru,{size:16}),n==="ru"?" ":"  ",h.jsx(Gc,{size:14})]}),N&&h.jsx("div",{className:"absolute right-0 top-full mt-2 bg-gaming-card border border-white/10 rounded-xl shadow-xl z-10 min-w-[200px] overflow-hidden",children:lw.map(_=>{const T=_.icon;return h.jsxs("button",{onClick:()=>{o(_.id),A(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 transition-colors text-left",children:[h.jsx(T,{size:18,className:"text-gaming-pink"}),h.jsx("span",{className:"text-sm",children:_.label[n]})]},_.id)})})]})]}),r.length===0?h.jsxs("div",{className:"text-center py-8 text-gaming-textMuted",children:[h.jsx(ol,{size:32,className:"mx-auto mb-2 opacity-30"}),h.jsx("p",{children:n==="ru"?" .  !":" .   !"})]}):h.jsx("div",{className:"space-y-6",children:r.map((_,T)=>{var O;return h.jsxs("div",{className:"bg-gaming-bg/30 rounded-xl p-4 border border-white/5",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-sm text-gaming-textMuted",children:[n==="ru"?"":""," #",T+1]}),h.jsx("span",{className:"text-xs px-2 py-1 bg-gaming-pink/20 text-gaming-pink rounded-full",children:((O=lw.find(j=>j.id===_.type))==null?void 0:O.label[n])||_.type})]}),h.jsx("button",{onClick:()=>l(T),className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:h.jsx(al,{size:16})})]}),h.jsx("div",{className:"mb-4",children:h.jsx(R,{image:_.image,onUpload:j=>a(T,"image",j),onRemove:()=>a(T,"image",null),size:"lg"})}),h.jsxs("div",{className:"mb-3",children:[h.jsx("label",{className:"text-xs text-gaming-textMuted mb-1 block ml-1",children:n==="ru"?"  (RU)":"  (RU)"}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("div",{className:"flex-1",children:h.jsx(Rd,{content:_.textRu,onChange:j=>a(T,"textRu",j),placeholder:n==="ru"?"  ...":"   ...",minimal:!0,minHeight:"100px"})}),h.jsx("button",{onClick:()=>g(T),disabled:s[`q_${T}`],className:"mt-2 px-2 py-2 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:s[`q_${T}`]?h.jsx(tt,{size:14,className:"animate-spin"}):h.jsx(yt,{size:14,className:"rotate-180"})})]})]}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"text-xs text-gaming-textMuted mb-1 block ml-1",children:n==="ru"?"  (TJ)":"  (TJ)"}),h.jsxs("div",{className:"flex gap-2 items-start",children:[h.jsx("div",{className:"flex-1",children:h.jsx(Rd,{content:_.textTj,onChange:j=>a(T,"textTj",j),placeholder:n==="ru"?"  ...":"   ...",minimal:!0,minHeight:"100px"})}),h.jsx("button",{onClick:()=>v(T),disabled:s[`q_${T}`],className:"mt-2 px-2 py-2 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:s[`q_${T}`]?h.jsx(tt,{size:14,className:"animate-spin"}):h.jsx(yt,{size:14})})]})]}),_.type==="multiple_choice"&&h.jsxs("div",{className:"space-y-2 ml-4",children:[h.jsx("span",{className:"text-xs text-gaming-textMuted",children:n==="ru"?"  (   )":" (  )"}),_.options.map((j,I)=>h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>u(T,j.id),className:`p-1.5 rounded-lg transition-colors ${_.correctId===j.id?"bg-green-500/20 text-green-400":"bg-gaming-card/50 text-gaming-textMuted hover:text-white"}`,children:h.jsx(Dn,{size:14})}),h.jsxs("span",{className:"text-gaming-textMuted text-sm w-6",children:[String.fromCharCode(65+I),")"]}),h.jsx("input",{type:"text",value:j.textRu,onChange:B=>c(T,I,"textRu",B.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50",onPaste:B=>P(B,L=>c(T,I,"image",L))}),h.jsx("button",{onClick:()=>w(T,I),disabled:s[`opt_${T}_${I}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`opt_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12,className:"rotate-180"})}),h.jsx("input",{type:"text",value:j.textTj,onChange:B=>c(T,I,"textTj",B.target.value),placeholder:"TJ",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50",onPaste:B=>P(B,L=>c(T,I,"image",L))}),h.jsx("button",{onClick:()=>x(T,I),disabled:s[`opt_${T}_${I}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`opt_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12})}),h.jsx(R,{image:j.image,onUpload:B=>c(T,I,"image",B),onRemove:()=>c(T,I,"image",null),size:"sm"})]},j.id))]}),_.type==="matching"&&h.jsxs("div",{className:"space-y-4 ml-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("span",{className:"text-xs text-gaming-textMuted block mb-2",children:n==="ru"?"  (A, B, C, D)":" "}),_.leftItems.map((j,I)=>h.jsxs("div",{className:"p-2 sm:p-3 bg-white/5 rounded-xl border border-white/5 space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"text-gaming-pink font-bold w-6",children:[j.id,")"]}),h.jsx("input",{type:"text",value:j.textRu,onChange:B=>d(T,I,"textRu",B.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-pink/50",onPaste:B=>P(B,L=>d(T,I,"image",L))}),h.jsx("button",{onClick:()=>S(T,I),disabled:s[`left_${T}_${I}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`left_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12,className:"rotate-180"})})]}),h.jsxs("div",{className:"pl-8 flex gap-2",children:[h.jsx("input",{type:"text",value:j.textTj,onChange:B=>d(T,I,"textTj",B.target.value),placeholder:"TJ",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white/70 placeholder-white/20 focus:outline-none focus:border-gaming-accent/50",onPaste:B=>P(B,L=>d(T,I,"image",L))}),h.jsx("button",{onClick:()=>k(T,I),disabled:s[`left_${T}_${I}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`left_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12})}),h.jsx(R,{image:j.image,onUpload:B=>d(T,I,"image",B),onRemove:()=>d(T,I,"image",null),size:"sm"})]})]},j.id))]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("span",{className:"text-xs text-gaming-textMuted block mb-2",children:n==="ru"?"  (1-5)":" "}),_.rightItems.map((j,I)=>h.jsxs("div",{className:"p-2 sm:p-3 bg-white/5 rounded-xl border border-white/5 space-y-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("span",{className:"text-gaming-accent font-bold w-6",children:[j.id,")"]}),h.jsx("input",{type:"text",value:j.textRu,onChange:B=>f(T,I,"textRu",B.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50",onPaste:B=>P(B,L=>f(T,I,"image",L))}),h.jsx("button",{onClick:()=>E(T,I),disabled:s[`right_${T}_${I}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`right_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12,className:"rotate-180"})})]}),h.jsxs("div",{className:"pl-8 flex gap-2",children:[h.jsx("input",{type:"text",value:j.textTj,onChange:B=>f(T,I,"textTj",B.target.value),placeholder:"TJ",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white/70 placeholder-white/20 focus:outline-none focus:border-gaming-accent/50",onPaste:B=>P(B,L=>f(T,I,"image",L))}),h.jsx("button",{onClick:()=>C(T,I),disabled:s[`right_${T}_${I}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`right_${T}_${I}`]?h.jsx(tt,{size:12,className:"animate-spin"}):h.jsx(yt,{size:12})}),h.jsx(R,{image:j.image,onUpload:B=>f(T,I,"image",B),onRemove:()=>f(T,I,"image",null),size:"sm"})]})]},j.id))]})]}),h.jsxs("div",{className:"bg-gaming-card/30 rounded-xl p-4 border border-white/10",children:[h.jsx("span",{className:"text-sm font-semibold text-white block mb-4",children:n==="ru"?"  :":"  :"}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"border-separate border-spacing-2 mx-auto",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{className:"w-8"}),_.rightItems.map(j=>h.jsx("th",{className:"text-center font-bold text-gaming-accent text-sm pb-2",children:j.id},j.id))]})}),h.jsx("tbody",{children:_.leftItems.map(j=>h.jsxs("tr",{children:[h.jsx("td",{className:"text-center font-bold text-gaming-pink text-sm pr-2",children:j.id}),_.rightItems.map(I=>{const B=_.correctMatches[j.id]===I.id;return h.jsx("td",{className:"text-center p-0.5",children:h.jsx("button",{onClick:()=>p(T,j.id,I.id),className:`w-8 h-8 rounded-full border transition-all flex items-center justify-center
                                                                                ${B?"bg-gaming-primary border-gaming-primary shadow-[0_0_8px_rgba(var(--gaming-primary-rgb),0.4)]":"bg-white/5 border-white/20 hover:border-white/40"}`,children:B&&h.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})},I.id)})]},j.id))})]})}),h.jsx("p",{className:"text-[10px] text-gaming-textMuted mt-4 text-center",children:n==="ru"?"*       ":"*         "})]})]}),_.type==="numeric"&&h.jsxs("div",{className:"space-y-4 ml-4",children:[h.jsx("span",{className:"text-xs text-gaming-textMuted",children:n==="ru"?"   ( 4 ):":"  ( 4 ):"}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex gap-2",children:_.digits.map((j,I)=>h.jsx("input",{type:"text",value:j,onChange:B=>m(T,I,B.target.value),maxLength:1,className:"w-12 h-12 text-center text-2xl font-bold bg-gaming-bg/50 border-2 border-white/20 rounded-lg text-white focus:outline-none focus:border-gaming-primary transition-colors",placeholder:"0"},I))}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-gaming-textMuted text-sm",children:n==="ru"?":":":"}),h.jsx("select",{value:_.unit||"",onChange:j=>y(T,j.target.value),className:"bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-white",children:v5.map(j=>h.jsx("option",{value:j,children:j||(n==="ru"?"( )":"( )")},j))})]})]}),h.jsxs("div",{className:"bg-gaming-card/30 rounded-lg p-3 text-sm",children:[h.jsx("span",{className:"text-gaming-textMuted",children:n==="ru"?": ":": "}),h.jsxs("span",{className:"text-gaming-primary font-bold",children:[_.digits.filter(j=>j).join("")||""," ",_.unit]})]})]})]},_.id)})})]})},w5=(t,e=1600,n=.7)=>new Promise((r,s)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=o=>{const a=new Image;a.src=o.target.result,a.onload=()=>{const l=document.createElement("canvas");let c=a.width,u=a.height;c>u?c>e&&(u=Math.round(u*e/c),c=e):u>e&&(c=Math.round(c*e/u),u=e),l.width=c,l.height=u,l.getContext("2d").drawImage(a,0,0,c,u);const f=l.toDataURL("image/jpeg",n);r(f)},a.onerror=l=>s(l)},i.onerror=o=>s(o)}),b5=({slide:t,index:e,onUpdate:n,onDelete:r,lang:s,editLang:i})=>{const{attributes:o,listeners:a,setNodeRef:l,transform:c,transition:u}=dh({id:t.id}),d={transform:_s.Transform.toString(c),transition:u},f=i==="ru"?"captionRu":"captionTj",p=i==="ru"?s==="ru"?" (RU)":" (RU)":s==="ru"?" (TJ)":" (TJ)";return h.jsx("div",{ref:l,style:d,className:"bg-gaming-bg/30 rounded-xl p-4 border border-white/5",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{...o,...a,className:"mt-2 cursor-grab text-gaming-textMuted hover:text-white",children:h.jsx(Xd,{size:18})}),h.jsxs("div",{className:"flex-1 space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-sm text-gaming-textMuted",children:[""," #",e+1]}),h.jsx("div",{className:"flex items-center gap-1",children:h.jsx("button",{onClick:()=>r(t.id),className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:h.jsx(al,{size:16})})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ig,{size:16,className:"text-gaming-textMuted"}),h.jsx("input",{type:"url",value:t.imageUrl||"",onChange:m=>n(t.id,"imageUrl",m.target.value),placeholder:s==="ru"?"URL ":"URL ",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-gold/50"})]}),t.imageUrl&&h.jsx("div",{className:"w-full h-32 rounded-lg overflow-hidden bg-gaming-card/50",children:h.jsx("img",{src:t.imageUrl,alt:`Slide ${e+1}`,className:"w-full h-full object-contain",onError:m=>{m.target.style.display="none"}})}),h.jsx("input",{type:"text",value:t[f]||"",onChange:m=>n(t.id,f,m.target.value),placeholder:p,className:`w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-white/30 focus:outline-none transition-colors ${i==="ru"?"focus:border-gaming-primary/50":"focus:border-gaming-accent/50"}`})]})]})})},k5=({slidesRu:t=[],slidesTj:e=[],onChange:n,lang:r})=>{const[s,i]=b.useState("ru"),[o,a]=b.useState(!1),l=ve.useRef(null),c=s==="ru"?t:e,u=s==="ru"?"slidesRu":"slidesTj",d=vk(Lu(lh),Lu(ah,{coordinateGetter:Bk})),f=()=>{const g={id:`slide_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,imageUrl:"",captionRu:"",captionTj:""};n(u,[...c,g])},p=async g=>{const x=Array.from(g.target.files);if(x.length!==0){a(!0);try{const w=await Promise.all(x.map(async k=>{const S=await w5(k);return{id:`slide_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,imageUrl:S,captionRu:"",captionTj:""}}));n(u,[...c,...w])}catch(w){console.error("Error compressing images:",w),alert(r==="ru"?"   ":"   ")}finally{a(!1),l.current&&(l.current.value="")}}},m=(g,x,w)=>{const k=c.map(S=>S.id===g?{...S,[x]:w}:S);n(u,k)},y=g=>{n(u,c.filter(x=>x.id!==g))},v=g=>{if(active.id!==over.id){const x=c.findIndex(k=>k.id===active.id),w=c.findIndex(k=>k.id===over.id);n(u,mo(c,x,w))}};return h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-white/5 p-4 rounded-2xl border border-white/10",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("h4",{className:"text-lg font-semibold text-gaming-gold flex items-center gap-2",children:[h.jsx(as,{size:20}),r==="ru"?" ":" "]}),h.jsxs("div",{className:"flex p-1 bg-black/30 rounded-xl border border-white/5 w-fit",children:[h.jsxs("button",{onClick:()=>i("ru"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${s==="ru"?"bg-gaming-primary text-white shadow-lg":"text-gaming-textMuted hover:text-white"}`,children:[h.jsx(Bp,{size:14}),""]}),h.jsxs("button",{onClick:()=>i("tj"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${s==="tj"?"bg-gaming-accent text-white shadow-lg":"text-gaming-textMuted hover:text-white"}`,children:[h.jsx(Bp,{size:14}),""]})]})]}),h.jsxs("div",{className:"flex gap-2 items-center self-end sm:self-center",children:[h.jsx("input",{type:"file",ref:l,onChange:p,multiple:!0,accept:"image/*",className:"hidden"}),h.jsxs("button",{onClick:()=>{var g;return(g=l.current)==null?void 0:g.click()},disabled:o,className:"flex items-center gap-2 px-3 py-2 bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors text-sm",children:[o?h.jsx(tt,{size:16,className:"animate-spin"}):h.jsx(Ig,{size:16}),r==="ru"?"":""]}),h.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-3 py-2 bg-gaming-gold/20 text-gaming-gold rounded-xl hover:bg-gaming-gold/30 transition-colors text-sm",children:[h.jsx(Ru,{size:16}),r==="ru"?"":""]})]})]}),c.length===0?h.jsxs("div",{className:"text-center py-12 bg-gaming-bg/20 rounded-2xl border border-dashed border-white/10",children:[h.jsx(as,{size:48,className:"mx-auto mb-3 opacity-20 text-gaming-gold"}),h.jsx("p",{className:"text-gaming-textMuted",children:r==="ru"?`  (${s==="ru"?"RU":"TJ"}) `:`  (${s==="ru"?"RU":"TJ"})  `}),h.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 text-sm text-gaming-gold hover:underline",children:r==="ru"?"  ":"  "})]}):h.jsx(Pk,{sensors:d,collisionDetection:kk,onDragEnd:v,children:h.jsx(Zc,{items:c.map(g=>g.id),strategy:Xc,children:h.jsx("div",{className:"space-y-3",children:c.map((g,x)=>h.jsx(b5,{slide:g,index:x,lang:r,editLang:s,onUpdate:m,onDelete:y},g.id))})})})]})},S5=[{id:"video",icon:ll,label:{ru:"",tj:""}},{id:"text",icon:jn,label:{ru:"",tj:""}},{id:"test",icon:ol,label:{ru:"",tj:""}},{id:"slides",icon:as,label:{ru:"",tj:""}}],E5=({lesson:t,onSave:e,onClose:n,lang:r,isSaving:s})=>{const[i,o]=b.useState("video"),[a,l]=b.useState(t.content||{video:{url:"",descriptionRu:"",descriptionTj:""},text:{bodyRu:"",bodyTj:""},test:{questions:[]},slidesRu:[],slidesTj:[]}),c=f=>{o(f)},u=(f,p)=>{l(m=>({...m,[f]:p}))},d=()=>{e({...t,content:a})};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/70 backdrop-blur-sm sm:p-4",children:h.jsxs("div",{className:"w-full max-w-4xl h-[90vh] sm:h-auto sm:max-h-[90vh] bg-gaming-card/95 backdrop-blur-xl rounded-t-3xl sm:rounded-3xl border border-white/10 overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-white/10 shrink-0",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:r==="ru"?"":""}),h.jsx("p",{className:"text-gaming-textMuted mt-1 text-sm sm:text-base truncate max-w-[200px] sm:max-w-md",children:r==="tj"&&t.titleTj||t.title})]}),h.jsx("button",{onClick:n,disabled:s,className:"p-2 text-gaming-textMuted hover:text-white transition-colors disabled:opacity-50",children:h.jsx(Ns,{size:24})})]}),h.jsx("div",{className:"flex gap-2 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/5 overflow-x-auto shrink-0 no-scrollbar",children:S5.map(f=>{const p=f.icon,m=i===f.id;return h.jsxs("button",{onClick:()=>c(f.id),disabled:s,className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl whitespace-nowrap transition-all text-sm sm:text-base ${m?"bg-gaming-primary text-white":"bg-gaming-bg/50 text-gaming-textMuted hover:text-white"} ${s?"opacity-50 cursor-not-allowed":""}`,children:[h.jsx(p,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),f.label[r]]},f.id)})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 pointer-events-auto",children:[s&&h.jsx("div",{className:"absolute inset-0 bg-black/20 z-10 flex items-center justify-center",children:h.jsx(tt,{size:40,className:"animate-spin text-gaming-primary"})}),i==="video"&&h.jsx(WO,{data:a.video||{},onChange:f=>u("video",f),lang:r}),i==="text"&&h.jsx(y5,{data:a.text||{},onChange:f=>u("text",f),lang:r}),i==="test"&&h.jsx(x5,{data:a.test||{questions:[]},onChange:f=>u("test",f),lang:r}),i==="slides"&&h.jsx(k5,{slidesRu:a.slidesRu||[],slidesTj:a.slidesTj||[],onChange:(f,p)=>l(m=>({...m,[f]:p})),lang:r})]}),h.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 sm:p-6 border-t border-white/10 shrink-0 bg-gaming-card/95",children:[h.jsx("button",{onClick:n,disabled:s,className:"px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base text-gaming-textMuted hover:text-white transition-colors disabled:opacity-50",children:r==="ru"?"":""}),h.jsxs("button",{onClick:d,disabled:s,className:"flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors active:scale-95 text-sm sm:text-base disabled:opacity-70 disabled:active:scale-100",children:[s?h.jsx(tt,{size:18,className:"animate-spin"}):h.jsx(Yc,{size:18}),r==="ru"?s?"...":"":s?" ...":" "]})]})]})})};function C5(t,e){const[n,r]=b.useState(t);return b.useEffect(()=>{const s=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(s)}},[t,e]),n}const Om=[{id:"video",icon:ll,label:{ru:"",tj:""}},{id:"text",icon:jn,label:{ru:"",tj:""}},{id:"test",icon:ol,label:{ru:"",tj:""}},{id:"presentation",icon:as,label:{ru:"",tj:""}}],cw="donishmand_creator_syllabus",T5=({section:t,sectionIndex:e,children:n,lang:r,onDelete:s})=>{const{attributes:i,listeners:o,setNodeRef:a,transform:l,transition:c,isDragging:u}=dh({id:t.id}),d={transform:_s.Transform.toString(l),transition:c,opacity:u?.5:1};return h.jsx("div",{ref:a,style:d,className:"bg-gaming-bg/30 rounded-2xl border border-white/5 overflow-hidden",children:h.jsxs("div",{className:"flex items-center p-4",children:[h.jsx("div",{...i,...o,className:"cursor-grab mr-3 text-gaming-textMuted hover:text-white",children:h.jsx(Xd,{size:18})}),n]})})},N5=({topic:t,topicIndex:e,sectionIndex:n,children:r})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:c}=dh({id:t.id}),u={transform:_s.Transform.toString(a),transition:l,opacity:c?.5:1};return h.jsx("div",{ref:o,style:u,className:"bg-gaming-card/40 rounded-xl border border-white/5 overflow-hidden",children:h.jsxs("div",{className:"flex items-center p-3",children:[h.jsx("div",{...s,...i,className:"cursor-grab mr-2 text-gaming-textMuted hover:text-white",children:h.jsx(Xd,{size:16})}),r]})})},_5=({lesson:t,lessonIndex:e,sectionIndex:n,topicIndex:r,lang:s,onDelete:i,onEdit:o,getLessonIcon:a})=>{var v;const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:f,isDragging:p}=dh({id:t.id}),m=a(t.type),y={transform:_s.Transform.toString(d),transition:f,opacity:p?.5:1};return h.jsxs("div",{ref:u,style:y,className:"flex items-center justify-between gap-3 p-2 bg-gaming-bg/30 rounded-lg border border-white/5",children:[h.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 cursor-pointer group hover:bg-white/5 p-1 rounded-md transition-colors",onClick:()=>o(t),title:s==="ru"?"  ":"   ",children:[h.jsx("div",{...l,...c,className:"cursor-grab text-gaming-textMuted hover:text-white shrink-0",onClick:g=>g.stopPropagation(),children:h.jsx(Xd,{size:14})}),h.jsx(m,{size:14,className:"text-gaming-pink shrink-0"}),h.jsxs("span",{className:"text-sm truncate block group-hover:text-gaming-primary transition-colors",children:[n+1,".",r+1,".",e+1,". ",s==="tj"&&t.titleTj||t.title]}),h.jsx("span",{className:"text-xs px-2 py-0.5 bg-gaming-card/50 rounded-full text-gaming-textMuted shrink-0 hidden xs:inline-block",children:((v=Om.find(g=>g.id===t.type))==null?void 0:v.label[s])||t.type})]}),h.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[h.jsx("button",{onClick:g=>{g.preventDefault(),g.stopPropagation(),o(t,"move")},className:"p-1 text-gaming-textMuted hover:text-gaming-accent transition-colors",title:s==="ru"?"":"",children:h.jsx(F1,{size:14})}),h.jsx("button",{onClick:g=>{g.stopPropagation(),i(t.id)},className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",title:s==="ru"?"":" ",children:h.jsx(al,{size:14})})]})]})},j5=({item:t,itemType:e,syllabus:n,onMove:r,onClose:s,lang:i})=>{const[o,a]=b.useState(t.fromSectionId||""),[l,c]=b.useState(t.fromTopicId||""),u=n.sections||[],d=u.find(m=>m.id===o),f=(d==null?void 0:d.topics)||[],p=()=>{e==="topic"?o&&o!==t.fromSectionId&&r(o):e==="lesson"&&o&&l&&(o!==t.fromSectionId||l!==t.fromTopicId)&&r(o,l)};return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:h.jsxs("div",{className:"w-full max-w-md bg-gaming-card/95 backdrop-blur-xl rounded-2xl border border-white/10 p-6",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4",children:i==="ru"?" ":" "}),h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:i==="ru"?"":""}),h.jsxs("select",{value:o,onChange:m=>{a(m.target.value),c("")},className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none",children:[h.jsx("option",{value:"",children:i==="ru"?" ...":"  ..."}),u.map(m=>h.jsx("option",{value:m.id,children:i==="tj"&&m.titleTj||m.title},m.id))]})]}),e==="lesson"&&h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:i==="ru"?"":""}),h.jsxs("select",{value:l,onChange:m=>c(m.target.value),disabled:!o,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none disabled:opacity-50",children:[h.jsx("option",{value:"",children:i==="ru"?" ...":"  ..."}),f.map(m=>h.jsx("option",{value:m.id,children:i==="tj"&&m.titleTj||m.title},m.id))]})]}),h.jsxs("div",{className:"flex gap-3 mt-6",children:[h.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80",disabled:e==="topic"?!o:!o||!l,children:i==="ru"?"":""}),h.jsx("button",{onClick:s,className:"px-4 py-2 text-gaming-textMuted hover:text-white",children:i==="ru"?"":""})]})]})})},R5=({lang:t,t:e})=>{const n=$o(),[r,s]=b.useState(Up[0]),[i,o]=b.useState(()=>{const M=localStorage.getItem(cw);if(M)try{return JSON.parse(M)}catch{return{...xi}}return{...xi}}),[a,l]=b.useState("saved"),c=C5(i,2e3);b.useEffect(()=>{if(!c)return;(async()=>{l("saving");try{c[r]&&await ti.saveStructure(r,c[r]),l("saved")}catch(H){console.error(" -:",H),l("error")}})()},[c,r]);const[u,d]=b.useState({}),[f,p]=b.useState({}),[m,y]=b.useState(!1),[v,g]=b.useState(null),[x,w]=b.useState(null),[k,S]=b.useState(""),[C,E]=b.useState(""),[N,A]=b.useState(""),[P,R]=b.useState(""),[_,T]=b.useState(""),[O,j]=b.useState(""),[I,B]=b.useState("video"),[L,F]=b.useState(null),[K,se]=b.useState(null),[G,Ce]=b.useState(null),je=vk(Lu(lh,{activationConstraint:{distance:8}}),Lu(ah,{coordinateGetter:Bk})),[St,Te]=b.useState(null),[fn,An]=b.useState(null);b.useEffect(()=>{localStorage.setItem(cw,JSON.stringify(i))},[i]);const Mt=i[r]||{sections:[]},ue=M=>d(H=>({...H,[M]:!H[M]})),$r=M=>p(H=>({...H,[M]:!H[M]})),Ut=M=>{const{active:H,over:ie}=M;if(!ie||H.id===ie.id)return;const ne=H.id,q=ie.id,Z=ne.startsWith("sec_"),oe=ne.startsWith("top_"),me=ne.startsWith("les_");if(Z){o(J=>{const Se=J[r].sections,fe=Se.findIndex(De=>De.id===ne),ae=Se.findIndex(De=>De.id===q);return{...J,[r]:{...J[r],sections:mo(Se,fe,ae)}}});return}if(oe){o(J=>{const fe=J[r].sections.map(ae=>{const De=ae.topics.map(we=>we.id);if(De.includes(ne)&&De.includes(q)){const we=ae.topics.findIndex(Et=>Et.id===ne),Ft=ae.topics.findIndex(Et=>Et.id===q);return{...ae,topics:mo(ae.topics,we,Ft)}}return ae});return{...J,[r]:{...J[r],sections:fe}}});return}me&&o(J=>{const fe=J[r].sections.map(ae=>({...ae,topics:ae.topics.map(De=>{const we=De.lessons.map(Ft=>Ft.id);if(we.includes(ne)&&we.includes(q)){const Ft=De.lessons.findIndex(tn=>tn.id===ne),Et=De.lessons.findIndex(tn=>tn.id===q);return{...De,lessons:mo(De.lessons,Ft,Et)}}return De})}));return{...J,[r]:{...J[r],sections:fe}}})},Xt=()=>{if(!k.trim())return;const M={id:`sec_${Date.now()}`,title:k.trim(),titleTj:C.trim()||autoTranslate(k.trim(),"ru","tj"),topics:[]};o(H=>{var ie;return{...H,[r]:{...H[r],sections:[...((ie=H[r])==null?void 0:ie.sections)||[],M]}}}),S(""),E(""),y(!1)},Zt=M=>{if(!N.trim())return;const H={id:`top_${Date.now()}`,title:N.trim(),titleTj:P.trim()||autoTranslate(N.trim(),"ru","tj"),lessons:[]};o(ie=>({...ie,[r]:{...ie[r],sections:ie[r].sections.map(ne=>ne.id===M?{...ne,topics:[...ne.topics,H]}:ne)}})),A(""),R(""),g(null)},Gn=(M,H)=>{if(!_.trim())return;const ie={id:`les_${Date.now()}`,title:_.trim(),titleTj:O.trim()||autoTranslate(_.trim(),"ru","tj"),type:I,content:{}};o(ne=>({...ne,[r]:{...ne[r],sections:ne[r].sections.map(q=>q.id===M?{...q,topics:q.topics.map(Z=>Z.id===H?{...Z,lessons:[...Z.lessons,ie]}:Z)}:q)}})),T(""),j(""),B("video"),w(null)},pn=M=>{o(H=>({...H,[r]:{...H[r],sections:H[r].sections.filter(ie=>ie.id!==M)}}))},Ls=(M,H)=>{o(ie=>({...ie,[r]:{...ie[r],sections:ie[r].sections.map(ne=>ne.id===M?{...ne,topics:ne.topics.filter(q=>q.id!==H)}:ne)}}))},$s=(M,H,ie)=>{o(ne=>({...ne,[r]:{...ne[r],sections:ne[r].sections.map(q=>q.id===M?{...q,topics:q.topics.map(Z=>Z.id===H?{...Z,lessons:Z.lessons.filter(oe=>oe.id!==ie)}:Z)}:q)}}))},Mn=(M,H,ie)=>{o(ne=>{const q={...ne},Z={...q[r]};let oe=[...Z.sections],me=null;return oe=oe.map((J,Se)=>{if(J.id===H){const fe=J.topics.findIndex(ae=>ae.id===M);if(fe!==-1)return me=J.topics[fe],{...J,topics:J.topics.filter(ae=>ae.id!==M)}}return J}),me?(oe=oe.map(J=>J.id===ie?{...J,topics:[...J.topics,me]}:J),Z.sections=oe,q[r]=Z,q):ne}),Ce(null)},en=(M,H,ie,ne,q)=>{o(Z=>{const oe={...Z},me={...oe[r]};let J=[...me.sections],Se=null;return J=J.map(fe=>({...fe,topics:fe.topics.map(ae=>{if(fe.id===H&&ae.id===ie){const De=ae.lessons.findIndex(we=>we.id===M);if(De!==-1)return Se=ae.lessons[De],{...ae,lessons:ae.lessons.filter(we=>we.id!==M)}}return ae})})),Se?(J=J.map(fe=>({...fe,topics:fe.topics.map(ae=>fe.id===ne&&ae.id===q?{...ae,lessons:[...ae.lessons,Se]}:ae)})),me.sections=J,oe[r]=me,oe):Z}),Ce(null)};b.useEffect(()=>{(async()=>{try{l("saving");const H=await ti.getStructure(r);H&&o(ie=>({...ie,[r]:H})),l("saved")}catch(H){console.error("  :",H)}})()},[r]);const[zr,Yn]=b.useState(!1),zs=async(M,H,ie)=>{Yn(!0);try{let ne=M;if(!M.content){const q=await ti.getLesson(M.id);q&&q.content&&(ne={...M,content:q.content},o(Z=>({...Z,[r]:{...Z[r],sections:Z[r].sections.map(oe=>oe.id===H?{...oe,topics:oe.topics.map(me=>me.id===ie?{...me,lessons:me.lessons.map(J=>J.id===M.id?ne:J)}:me)}:oe)}})))}F(ne),se({sectionId:H,topicId:ie})}catch(ne){console.error("  :",ne),alert("   ")}finally{Yn(!1)}},[Br,Bs]=b.useState(!1),ji=async M=>{Bs(!0);try{const{sectionId:H,topicId:ie}=K;await ti.saveLesson(M,r),o(ne=>({...ne,[r]:{...ne[r],sections:ne[r].sections.map(q=>q.id===H?{...q,topics:q.topics.map(Z=>Z.id===ie?{...Z,lessons:Z.lessons.map(oe=>oe.id===M.id?M:oe)}:Z)}:q)}})),F(null),se(null)}catch(H){console.error("  :",H),alert(t==="ru"?"  ":"   ")}finally{Bs(!1)}},[Qn,He]=b.useState({section:!1,topic:!1,lesson:!1}),de=async()=>{He(M=>({...M,section:!0}));try{const M=await lt(k,"ru","tj");E(M)}finally{He(M=>({...M,section:!1}))}},ke=async()=>{He(M=>({...M,topic:!0}));try{const M=await lt(N,"ru","tj");R(M)}finally{He(M=>({...M,topic:!1}))}},Pe=async()=>{He(M=>({...M,lesson:!0}));try{const M=await lt(_,"ru","tj");j(M)}finally{He(M=>({...M,lesson:!1}))}},mn=async()=>{He(M=>({...M,section:!0}));try{const M=await lt(C,"tj","ru");S(M)}finally{He(M=>({...M,section:!1}))}},Xn=async()=>{He(M=>({...M,topic:!0}));try{const M=await lt(P,"tj","ru");A(M)}finally{He(M=>({...M,topic:!1}))}},Zn=async()=>{He(M=>({...M,lesson:!0}));try{const M=await lt(O,"tj","ru");T(M)}finally{He(M=>({...M,lesson:!1}))}},Ot=(M,H,ie,ne,q,Z,oe=" (RU)",me=" (TJ)")=>h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:"text",value:M,onChange:J=>H(J.target.value),placeholder:oe,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors"}),h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"RU"})]}),h.jsx("button",{type:"button",onClick:Z,className:"flex items-center gap-1 px-3 py-3 bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors text-sm",title:" TJ -> RU",children:h.jsx(yt,{size:16,className:"rotate-180"})})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("input",{type:"text",value:ie,onChange:J=>ne(J.target.value),placeholder:me,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors"}),h.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"TJ"})]}),h.jsx("button",{type:"button",onClick:q,className:"flex items-center gap-1 px-3 py-3 bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors text-sm",title:" RU -> TJ",children:h.jsx(yt,{size:16})})]})]}),On=M=>{const H=Om.find(ie=>ie.id===M);return H?H.icon:jn};return h.jsxs("div",{className:"min-h-screen bg-gaming-bg font-sans text-white p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[h.jsxs("button",{onClick:()=>n("/"),className:"flex items-center gap-2 text-gaming-textMuted hover:text-white transition-colors self-start",children:[h.jsx(Qd,{size:20}),t==="ru"?"":""]}),h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gaming-card/50 border border-white/5 text-sm font-medium",children:[a==="saved"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-gaming-accent",children:""}),h.jsx("span",{className:"text-gaming-textMuted",children:t==="ru"?" ":"  "})]}),a==="saving"&&h.jsxs(h.Fragment,{children:[h.jsx(tt,{size:16,className:"text-gaming-primary animate-spin"}),h.jsx("span",{className:"text-white",children:t==="ru"?"...":" ..."})]}),a==="error"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-red-500",children:""}),h.jsx("span",{className:"text-red-400",children:t==="ru"?" ":""})]})]})]}),h.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 flex items-center gap-3",children:[h.jsx(Gj,{className:"text-gaming-primary",size:32}),t==="ru"?" ":" "]}),h.jsx("p",{className:"text-gaming-textMuted text-base sm:text-lg mb-6 sm:mb-8",children:t==="ru"?" ,   .   .":",     .    ."}),h.jsxs("div",{className:"mb-6 sm:mb-8",children:[h.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:t==="ru"?" ":"  "}),h.jsxs("div",{className:"relative",children:[h.jsx("select",{value:r,onChange:M=>s(M.target.value),className:"w-full sm:max-w-md bg-gaming-card/60 backdrop-blur-xl border border-white/10 rounded-xl px-4 py-3 text-white appearance-none cursor-pointer focus:outline-none focus:border-gaming-primary/50 transition-colors",children:Up.map(M=>{var H;return h.jsx("option",{value:M,className:"bg-gaming-card text-white",children:((H=Zd[M])==null?void 0:H[t])||M},M)})}),h.jsx(Gc,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gaming-textMuted pointer-events-none",size:20})]})]}),h.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl border border-white/5 rounded-3xl p-4 sm:p-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[h.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[h.jsx(t2,{className:"text-gaming-primary",size:24}),t==="ru"?"":""]}),h.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors active:scale-95 w-full sm:w-auto",children:[h.jsx(Jj,{size:18}),t==="ru"?" ":"  "]})]}),m&&h.jsxs("div",{className:"mb-6 p-4 bg-gaming-bg/50 rounded-2xl border border-gaming-primary/30",children:[h.jsx("h3",{className:"text-lg font-semibold mb-4 text-gaming-primary",children:t==="ru"?" ":" "}),Ot(k,S,C,E,de,mn),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsxs("button",{onClick:Xt,className:"flex items-center gap-2 px-4 py-2 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors active:scale-95",children:[h.jsx(Yc,{size:16}),t==="ru"?"":" "]}),h.jsx("button",{onClick:()=>{y(!1),S(""),E("")},className:"px-4 py-2 text-gaming-textMuted hover:text-white transition-colors",children:t==="ru"?"":" "})]})]}),Mt.sections.length===0?h.jsxs("div",{className:"text-center py-12 text-gaming-textMuted",children:[h.jsx(Og,{size:48,className:"mx-auto mb-4 opacity-30"}),h.jsx("p",{children:t==="ru"?"  .  !":"  .   !"})]}):h.jsx(Pk,{sensors:je,collisionDetection:kk,onDragEnd:Ut,children:h.jsx(Zc,{items:Mt.sections.map(M=>M.id),strategy:Xc,children:h.jsx("div",{className:"space-y-4",children:Mt.sections.map((M,H)=>{var ie,ne;return h.jsx(T5,{section:M,sectionIndex:H,lang:t,onDelete:pn,children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>ue(M.id),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[u[M.id]?h.jsx(Gc,{size:20,className:"text-gaming-primary"}):h.jsx(Ts,{size:20,className:"text-gaming-textMuted"}),h.jsxs("span",{className:"text-lg font-semibold",children:[H+1,". ",t==="tj"&&M.titleTj||M.title]}),h.jsxs("span",{className:"text-sm text-gaming-textMuted",children:["(",((ie=M.topics)==null?void 0:ie.length)||0," ",t==="ru"?"":"",")"]})]}),h.jsx("button",{onClick:q=>{q.stopPropagation(),pn(M.id)},className:"p-2 text-gaming-textMuted hover:text-red-400 transition-colors",children:h.jsx(al,{size:18})})]}),u[M.id]&&h.jsxs("div",{className:"mt-4 ml-8",children:[h.jsxs("button",{onClick:()=>g(M.id),className:"flex items-center gap-2 px-3 py-2 mb-4 text-sm text-gaming-accent hover:bg-gaming-accent/10 rounded-lg transition-colors",children:[h.jsx(Ru,{size:16}),t==="ru"?" ":"  "]}),v===M.id&&h.jsxs("div",{className:"mb-4 p-4 bg-gaming-card/50 rounded-xl border border-gaming-accent/30",children:[h.jsx("h4",{className:"text-md font-semibold mb-3 text-gaming-accent",children:t==="ru"?" ":" "}),Ot(N,A,P,R,ke,Xn),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsxs("button",{onClick:()=>Zt(M.id),className:"flex items-center gap-2 px-3 py-2 bg-gaming-accent text-white rounded-lg hover:bg-gaming-accent/80 transition-colors active:scale-95 text-sm",children:[h.jsx(Yc,{size:14}),t==="ru"?"":" "]}),h.jsx("button",{onClick:()=>{g(null),A(""),R("")},className:"px-3 py-2 text-gaming-textMuted hover:text-white transition-colors text-sm",children:t==="ru"?"":" "})]})]}),((ne=M.topics)==null?void 0:ne.length)===0?h.jsx("p",{className:"text-sm text-gaming-textMuted",children:t==="ru"?" ":" "}):h.jsx(Zc,{items:M.topics.map(q=>q.id),strategy:Xc,children:h.jsx("div",{className:"space-y-3",children:M.topics.map((q,Z)=>{var oe,me;return h.jsx(N5,{topic:q,topicIndex:Z,sectionIndex:H,children:h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>$r(q.id),children:[h.jsxs("div",{className:"flex items-center gap-2",children:[f[q.id]?h.jsx(Gc,{size:16,className:"text-gaming-accent"}):h.jsx(Ts,{size:16,className:"text-gaming-textMuted"}),h.jsxs("span",{className:"font-medium",children:[H+1,".",Z+1,". ",t==="tj"&&q.titleTj||q.title]}),h.jsxs("span",{className:"text-xs text-gaming-textMuted",children:["(",((oe=q.lessons)==null?void 0:oe.length)||0," ",t==="ru"?"":"",")"]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:J=>{J.stopPropagation(),Ce({type:"topic",id:q.id,fromSectionId:M.id})},className:"p-1 text-gaming-textMuted hover:text-gaming-accent transition-colors",title:t==="ru"?"":"",children:h.jsx(F1,{size:14})}),h.jsx("button",{onClick:J=>{J.stopPropagation(),Ls(M.id,q.id)},className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:h.jsx(al,{size:16})})]})]}),f[q.id]&&h.jsxs("div",{className:"mt-3 ml-6",children:[h.jsxs("button",{onClick:()=>w({sectionId:M.id,topicId:q.id}),className:"flex items-center gap-2 px-2 py-1 mb-3 text-xs text-gaming-pink hover:bg-gaming-pink/10 rounded-lg transition-colors",children:[h.jsx(Ru,{size:14}),t==="ru"?" ":"  "]}),(x==null?void 0:x.sectionId)===M.id&&(x==null?void 0:x.topicId)===q.id&&h.jsxs("div",{className:"mb-3 p-3 bg-gaming-bg/50 rounded-lg border border-gaming-pink/30",children:[h.jsx("h5",{className:"text-sm font-semibold mb-3 text-gaming-pink",children:t==="ru"?" ":" "}),Ot(_,T,O,j,Pe,Zn),h.jsxs("div",{className:"mt-3",children:[h.jsx("label",{className:"block text-xs text-gaming-textMuted mb-2",children:t==="ru"?" ":" "}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Om.map(J=>{const Se=J.icon,fe=I===J.id;return h.jsxs("button",{onClick:()=>B(J.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs transition-colors ${fe?"bg-gaming-pink text-white":"bg-gaming-card/50 text-gaming-textMuted hover:text-white"}`,children:[h.jsx(Se,{size:14}),J.label[t]]},J.id)})})]}),h.jsxs("div",{className:"flex gap-2 mt-4",children:[h.jsxs("button",{onClick:()=>Gn(M.id,q.id),className:"flex items-center gap-2 px-3 py-2 bg-gaming-pink text-white rounded-lg hover:bg-gaming-pink/80 transition-colors active:scale-95 text-xs",children:[h.jsx(Yc,{size:12}),t==="ru"?"":" "]}),h.jsx("button",{onClick:()=>{w(null),T(""),j("")},className:"px-3 py-2 text-gaming-textMuted hover:text-white transition-colors text-xs",children:t==="ru"?"":" "})]})]}),((me=q.lessons)==null?void 0:me.length)===0?h.jsx("p",{className:"text-xs text-gaming-textMuted",children:t==="ru"?" ":" "}):h.jsx(Zc,{items:q.lessons.map(J=>J.id),strategy:Xc,children:h.jsx("div",{className:"space-y-2",children:q.lessons.map((J,Se)=>h.jsx(_5,{lesson:J,lessonIndex:Se,sectionIndex:H,topicIndex:Z,lang:t,onDelete:fe=>$s(M.id,q.id,fe),onEdit:(fe,ae)=>{ae==="move"?Ce({type:"lesson",id:J.id,fromSectionId:M.id,fromTopicId:q.id}):zs(fe,M.id,q.id)},getLessonIcon:On},J.id))})})]})]})},q.id)})})})]})]})},M.id)})})})})]}),L&&h.jsx(E5,{lesson:L,onSave:ji,onClose:()=>{Br||(F(null),se(null))},lang:t,isSaving:Br}),G&&h.jsx(j5,{item:G,itemType:G.type,syllabus:i[r]||{sections:[]},onMove:(M,H)=>{G.type==="topic"&&Mn(G.id,G.fromSectionId,M),G.type==="lesson"&&en(G.id,G.fromSectionId,G.fromTopicId,M,H)},onClose:()=>Ce(null),lang:t}),"        "]})},A5=({lang:t,t:e})=>h.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center px-4 py-12 relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gaming-pink/5 rounded-full blur-[100px] pointer-events-none"}),h.jsx("div",{className:"absolute top-1/4 right-1/4 w-[300px] h-[300px] bg-gaming-primary/10 rounded-full blur-[80px] pointer-events-none animate-pulse-slow"}),h.jsxs("div",{className:"relative z-10 text-center max-w-2xl mx-auto",children:[h.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gaming-card/50 backdrop-blur-md rounded-3xl border border-gaming-pink/20 shadow-lg shadow-gaming-pink/10 mb-8 animate-float",children:h.jsx(zj,{size:64,className:"text-gaming-pink"})}),h.jsx("h1",{className:"text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-gaming-primary via-gaming-pink to-gaming-accent mb-4 drop-shadow-2xl",children:"404"}),h.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-6",children:e.errorTitle}),h.jsx("p",{className:"text-lg text-gaming-textMuted mb-10 leading-relaxed",children:e.errorSubtitle}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsxs(Ye,{to:"/",className:"group relative bg-gaming-primary hover:bg-gaming-primary/90 text-white px-8 py-3 rounded-xl font-bold transition-all active:scale-95 shadow-lg shadow-gaming-primary/25 flex items-center justify-center gap-2 overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),h.jsx(W1,{size:20}),h.jsx("span",{children:e.errorHome})]}),h.jsxs("button",{onClick:()=>window.history.back(),className:"group bg-transparent hover:bg-white/5 text-white border border-white/10 px-8 py-3 rounded-xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 backdrop-blur-sm",children:[h.jsx(Vj,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),h.jsx("span",{children:e.errorBack})]})]})]})]});function M5(){const[t,e]=b.useState("tj"),[n,r]=b.useState("student"),s=v2[t],i=Pr();return ve.useEffect(()=>{window.scrollTo(0,0)},[i.pathname]),h.jsxs("div",{className:"min-h-screen bg-gaming-bg font-sans text-white selection:bg-gaming-pink/30 selection:text-white overflow-hidden flex flex-col",children:[h.jsx(m2,{lang:t,setLang:e,t:s}),h.jsx("main",{className:"flex-grow pt-24",children:h.jsxs(rj,{children:[h.jsx(Vr,{path:"/",element:h.jsx(b2,{lang:t,t:s,setLang:e,userRole:n,setUserRole:r})}),h.jsx(Vr,{path:"/subject/:subjectId",element:h.jsx(eM,{lang:t,t:s,userRole:n})}),h.jsx(Vr,{path:"/subject/:subjectId/section/:sectionId",element:h.jsx(tM,{lang:t,t:s,userRole:n})}),h.jsx(Vr,{path:"/subject/:subjectId/section/:sectionId/topic/:topicId",element:h.jsx(nM,{lang:t,t:s,userRole:n})}),h.jsx(Vr,{path:"/lesson/:lessonId",element:h.jsx(oM,{lang:t,t:s,userRole:n})}),h.jsx(Vr,{path:"/creator",element:h.jsx(R5,{lang:t,t:s})}),h.jsx(Vr,{path:"*",element:h.jsx(A5,{lang:t,t:s})})]})}),h.jsx(g2,{t:s})]})}function O5(){return h.jsx(Nj,{basename:"/Donishmand_platform/",children:h.jsx(M5,{})})}Wf.createRoot(document.getElementById("root")).render(h.jsx(ve.StrictMode,{children:h.jsx(O5,{})}));
