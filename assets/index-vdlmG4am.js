(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function jb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rb={exports:{}},bh={},_b={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=Symbol.for("react.element"),Qk=Symbol.for("react.portal"),Zk=Symbol.for("react.fragment"),eS=Symbol.for("react.strict_mode"),tS=Symbol.for("react.profiler"),rS=Symbol.for("react.provider"),nS=Symbol.for("react.context"),sS=Symbol.for("react.forward_ref"),iS=Symbol.for("react.suspense"),oS=Symbol.for("react.memo"),aS=Symbol.for("react.lazy"),gy=Symbol.iterator;function lS(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var Ob={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Db=Object.assign,Ib={};function Ja(t,e,r){this.props=t,this.context=e,this.refs=Ib,this.updater=r||Ob}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zb(){}zb.prototype=Ja.prototype;function eg(t,e,r){this.props=t,this.context=e,this.refs=Ib,this.updater=r||Ob}var tg=eg.prototype=new zb;tg.constructor=eg;Db(tg,Ja.prototype);tg.isPureReactComponent=!0;var vy=Array.isArray,Lb=Object.prototype.hasOwnProperty,rg={current:null},Pb={key:!0,ref:!0,__self:!0,__source:!0};function $b(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lb.call(e,n)&&!Pb.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:ec,type:t,key:i,ref:o,props:s,_owner:rg.current}}function uS(t,e){return{$$typeof:ec,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ng(t){return typeof t=="object"&&t!==null&&t.$$typeof===ec}function cS(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yy=/\/+/g;function Cf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cS(""+t.key):e.toString(36)}function gd(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ec:case Qk:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+Cf(o,0):n,vy(s)?(r="",t!=null&&(r=t.replace(yy,"$&/")+"/"),gd(s,e,r,"",function(u){return u})):s!=null&&(ng(s)&&(s=uS(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",vy(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+Cf(i,a);o+=gd(i,e,r,l,s)}else if(l=lS(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+Cf(i,a++),o+=gd(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xc(t,e,r){if(t==null)return t;var n=[],s=0;return gd(t,n,"","",function(i){return e.call(r,i,s++)}),n}function dS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cr={current:null},vd={transition:null},hS={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:vd,ReactCurrentOwner:rg};function Bb(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:xc,forEach:function(t,e,r){xc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return xc(t,function(){e++}),e},toArray:function(t){return xc(t,function(e){return e})||[]},only:function(t){if(!ng(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Ja;De.Fragment=Zk;De.Profiler=tS;De.PureComponent=eg;De.StrictMode=eS;De.Suspense=iS;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hS;De.act=Bb;De.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Db({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Lb.call(e,l)&&!Pb.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:ec,type:t.type,key:s,ref:i,props:n,_owner:o}};De.createContext=function(t){return t={$$typeof:nS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rS,_context:t},t.Consumer=t};De.createElement=$b;De.createFactory=function(t){var e=$b.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:sS,render:t}};De.isValidElement=ng;De.lazy=function(t){return{$$typeof:aS,_payload:{_status:-1,_result:t},_init:dS}};De.memo=function(t,e){return{$$typeof:oS,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=vd.transition;vd.transition={};try{t()}finally{vd.transition=e}};De.unstable_act=Bb;De.useCallback=function(t,e){return Cr.current.useCallback(t,e)};De.useContext=function(t){return Cr.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return Cr.current.useDeferredValue(t)};De.useEffect=function(t,e){return Cr.current.useEffect(t,e)};De.useId=function(){return Cr.current.useId()};De.useImperativeHandle=function(t,e,r){return Cr.current.useImperativeHandle(t,e,r)};De.useInsertionEffect=function(t,e){return Cr.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return Cr.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return Cr.current.useMemo(t,e)};De.useReducer=function(t,e,r){return Cr.current.useReducer(t,e,r)};De.useRef=function(t){return Cr.current.useRef(t)};De.useState=function(t){return Cr.current.useState(t)};De.useSyncExternalStore=function(t,e,r){return Cr.current.useSyncExternalStore(t,e,r)};De.useTransition=function(){return Cr.current.useTransition()};De.version="18.3.1";_b.exports=De;var T=_b.exports;const Ve=jb(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fS=T,pS=Symbol.for("react.element"),mS=Symbol.for("react.fragment"),gS=Object.prototype.hasOwnProperty,vS=fS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yS={key:!0,ref:!0,__self:!0,__source:!0};function Fb(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)gS.call(e,n)&&!yS.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:pS,type:t,key:i,ref:o,props:s,_owner:vS.current}}bh.Fragment=mS;bh.jsx=Fb;bh.jsxs=Fb;Rb.exports=bh;var f=Rb.exports,rm={},Hb={exports:{}},Zr={},Ub={exports:{}},Vb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ue){var ne=q.length;q.push(ue);e:for(;0<ne;){var $=ne-1>>>1,U=q[$];if(0<s(U,ue))q[$]=ue,q[ne]=U,ne=$;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var ue=q[0],ne=q.pop();if(ne!==ue){q[0]=ne;e:for(var $=0,U=q.length,fe=U>>>1;$<fe;){var ie=2*($+1)-1,_e=q[ie],Ee=ie+1,Ge=q[Ee];if(0>s(_e,ne))Ee<U&&0>s(Ge,_e)?(q[$]=Ge,q[Ee]=ne,$=Ee):(q[$]=_e,q[ie]=ne,$=ie);else if(Ee<U&&0>s(Ge,ne))q[$]=Ge,q[Ee]=ne,$=Ee;else break e}}return ue}function s(q,ue){var ne=q.sortIndex-ue.sortIndex;return ne!==0?ne:q.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,h=3,p=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(q){for(var ue=r(u);ue!==null;){if(ue.callback===null)n(u);else if(ue.startTime<=q)n(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=r(u)}}function E(q){if(y=!1,k(q),!m)if(r(l)!==null)m=!0,H(M);else{var ue=r(u);ue!==null&&Z(E,ue.startTime-q)}}function M(q,ue){m=!1,y&&(y=!1,v(_),_=-1),p=!0;var ne=h;try{for(k(ue),d=r(l);d!==null&&(!(d.expirationTime>ue)||q&&!ee());){var $=d.callback;if(typeof $=="function"){d.callback=null,h=d.priorityLevel;var U=$(d.expirationTime<=ue);ue=t.unstable_now(),typeof U=="function"?d.callback=U:d===r(l)&&n(l),k(ue)}else n(l);d=r(l)}if(d!==null)var fe=!0;else{var ie=r(u);ie!==null&&Z(E,ie.startTime-ue),fe=!1}return fe}finally{d=null,h=ne,p=!1}}var j=!1,N=null,_=-1,L=5,V=-1;function ee(){return!(t.unstable_now()-V<L)}function P(){if(N!==null){var q=t.unstable_now();V=q;var ue=!0;try{ue=N(!0,q)}finally{ue?D():(j=!1,N=null)}}else j=!1}var D;if(typeof w=="function")D=function(){w(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=P,D=function(){I.postMessage(null)}}else D=function(){x(P,0)};function H(q){N=q,j||(j=!0,D())}function Z(q,ue){_=x(function(){q(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,H(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(q){switch(h){case 1:case 2:case 3:var ue=3;break;default:ue=h}var ne=h;h=ue;try{return q()}finally{h=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ue){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ne=h;h=q;try{return ue()}finally{h=ne}},t.unstable_scheduleCallback=function(q,ue,ne){var $=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?$+ne:$):ne=$,q){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ne+U,q={id:c++,callback:ue,priorityLevel:q,startTime:ne,expirationTime:U,sortIndex:-1},ne>$?(q.sortIndex=ne,e(u,q),r(l)===null&&q===r(u)&&(y?(v(_),_=-1):y=!0,Z(E,ne-$))):(q.sortIndex=U,e(l,q),m||p||(m=!0,H(M))),q},t.unstable_shouldYield=ee,t.unstable_wrapCallback=function(q){var ue=h;return function(){var ne=h;h=ue;try{return q.apply(this,arguments)}finally{h=ne}}}})(Vb);Ub.exports=Vb;var xS=Ub.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS=T,Qr=xS;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wb=new Set,uu={};function Po(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(uu[t]=e,t=0;t<e.length;t++)Wb.add(e[t])}var js=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nm=Object.prototype.hasOwnProperty,wS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xy={},by={};function kS(t){return nm.call(by,t)?!0:nm.call(xy,t)?!1:wS.test(t)?by[t]=!0:(xy[t]=!0,!1)}function SS(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TS(t,e,r,n){if(e===null||typeof e>"u"||SS(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Er(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ir[t]=new Er(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ir[e]=new Er(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ir[t]=new Er(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ir[t]=new Er(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ir[t]=new Er(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ir[t]=new Er(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ir[t]=new Er(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ir[t]=new Er(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ir[t]=new Er(t,5,!1,t.toLowerCase(),null,!1,!1)});var sg=/[\-:]([a-z])/g;function ig(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sg,ig);ir[e]=new Er(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sg,ig);ir[e]=new Er(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sg,ig);ir[e]=new Er(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ir[t]=new Er(t,1,!1,t.toLowerCase(),null,!1,!1)});ir.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ir[t]=new Er(t,1,!1,t.toLowerCase(),null,!0,!0)});function og(t,e,r,n){var s=ir.hasOwnProperty(e)?ir[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TS(e,r,s,n)&&(r=null),n||s===null?kS(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ps=bS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bc=Symbol.for("react.element"),aa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),ag=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),qb=Symbol.for("react.provider"),Kb=Symbol.for("react.context"),lg=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),ug=Symbol.for("react.memo"),Zs=Symbol.for("react.lazy"),Gb=Symbol.for("react.offscreen"),wy=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var gt=Object.assign,Ef;function El(t){if(Ef===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ef=e&&e[1]||""}return`
`+Ef+t}var Nf=!1;function Mf(t,e){if(!t||Nf)return"";Nf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Nf=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?El(t):""}function CS(t){switch(t.tag){case 5:return El(t.type);case 16:return El("Lazy");case 13:return El("Suspense");case 19:return El("SuspenseList");case 0:case 2:case 15:return t=Mf(t.type,!1),t;case 11:return t=Mf(t.type.render,!1),t;case 1:return t=Mf(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case la:return"Fragment";case aa:return"Portal";case sm:return"Profiler";case ag:return"StrictMode";case im:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kb:return(t.displayName||"Context")+".Consumer";case qb:return(t._context.displayName||"Context")+".Provider";case lg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ug:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case Zs:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function ES(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===ag?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NS(t){var e=Jb(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function wc(t){t._valueTracker||(t._valueTracker=NS(t))}function Yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Jb(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var r=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ky(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ri(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Xb(t,e){e=e.checked,e!=null&&og(t,"checked",e,!1)}function um(t,e){Xb(t,e);var r=Ri(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cm(t,e.type,r):e.hasOwnProperty("defaultValue")&&cm(t,e.type,Ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sy(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function cm(t,e,r){(e!=="number"||Hd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Nl=Array.isArray;function wa(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ri(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function dm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ty(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(X(92));if(Nl(r)){if(1<r.length)throw Error(X(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ri(r)}}function Qb(t,e){var r=Ri(e.value),n=Ri(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Cy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kc,e3=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kc=kc||document.createElement("div"),kc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ll={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MS=["Webkit","ms","Moz","O"];Object.keys(Ll).forEach(function(t){MS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ll[e]=Ll[t]})});function t3(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ll.hasOwnProperty(t)&&Ll[t]?(""+e).trim():e+"px"}function r3(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=t3(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var AS=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(t,e){if(e){if(AS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function cg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,ka=null,Sa=null;function Ey(t){if(t=nc(t)){if(typeof gm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Ch(e),gm(t.stateNode,t.type,e))}}function n3(t){ka?Sa?Sa.push(t):Sa=[t]:ka=t}function s3(){if(ka){var t=ka,e=Sa;if(Sa=ka=null,Ey(t),e)for(t=0;t<e.length;t++)Ey(e[t])}}function i3(t,e){return t(e)}function o3(){}var Af=!1;function a3(t,e,r){if(Af)return t(e,r);Af=!0;try{return i3(t,e,r)}finally{Af=!1,(ka!==null||Sa!==null)&&(o3(),s3())}}function du(t,e){var r=t.stateNode;if(r===null)return null;var n=Ch(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(X(231,e,typeof r));return r}var vm=!1;if(js)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){vm=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{vm=!1}function jS(t,e,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(c){this.onError(c)}}var Pl=!1,Ud=null,Vd=!1,ym=null,RS={onError:function(t){Pl=!0,Ud=t}};function _S(t,e,r,n,s,i,o,a,l){Pl=!1,Ud=null,jS.apply(RS,arguments)}function OS(t,e,r,n,s,i,o,a,l){if(_S.apply(this,arguments),Pl){if(Pl){var u=Ud;Pl=!1,Ud=null}else throw Error(X(198));Vd||(Vd=!0,ym=u)}}function $o(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function l3(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if($o(t)!==t)throw Error(X(188))}function DS(t){var e=t.alternate;if(!e){if(e=$o(t),e===null)throw Error(X(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Ny(s),t;if(i===n)return Ny(s),e;i=i.sibling}throw Error(X(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(X(189))}}if(r.alternate!==n)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?t:e}function u3(t){return t=DS(t),t!==null?c3(t):null}function c3(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c3(t);if(e!==null)return e;t=t.sibling}return null}var d3=Qr.unstable_scheduleCallback,My=Qr.unstable_cancelCallback,IS=Qr.unstable_shouldYield,zS=Qr.unstable_requestPaint,Ct=Qr.unstable_now,LS=Qr.unstable_getCurrentPriorityLevel,dg=Qr.unstable_ImmediatePriority,h3=Qr.unstable_UserBlockingPriority,Wd=Qr.unstable_NormalPriority,PS=Qr.unstable_LowPriority,f3=Qr.unstable_IdlePriority,wh=null,es=null;function $S(t){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(wh,t,void 0,(t.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:HS,BS=Math.log,FS=Math.LN2;function HS(t){return t>>>=0,t===0?32:31-(BS(t)/FS|0)|0}var Sc=64,Tc=4194304;function Ml(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qd(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=Ml(a):(i&=o,i!==0&&(n=Ml(i)))}else o=r&~s,o!==0?n=Ml(o):i!==0&&(n=Ml(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-zn(e),s=1<<r,n|=t[r],e&=~s;return n}function US(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VS(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zn(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=US(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function xm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p3(){var t=Sc;return Sc<<=1,!(Sc&4194240)&&(Sc=64),t}function jf(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function tc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zn(e),t[e]=r}function WS(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-zn(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function hg(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-zn(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var We=0;function m3(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g3,fg,v3,y3,x3,bm=!1,Cc=[],xi=null,bi=null,wi=null,hu=new Map,fu=new Map,oi=[],qS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ay(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":wi=null;break;case"pointerover":case"pointerout":hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function pl(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=nc(e),e!==null&&fg(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function KS(t,e,r,n,s){switch(e){case"focusin":return xi=pl(xi,t,e,r,n,s),!0;case"dragenter":return bi=pl(bi,t,e,r,n,s),!0;case"mouseover":return wi=pl(wi,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return hu.set(i,pl(hu.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,fu.set(i,pl(fu.get(i)||null,t,e,r,n,s)),!0}return!1}function b3(t){var e=lo(t.target);if(e!==null){var r=$o(e);if(r!==null){if(e=r.tag,e===13){if(e=l3(r),e!==null){t.blockedOn=e,x3(t.priority,function(){v3(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=wm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);mm=n,r.target.dispatchEvent(n),mm=null}else return e=nc(r),e!==null&&fg(e),t.blockedOn=r,!1;e.shift()}return!0}function jy(t,e,r){yd(t)&&r.delete(e)}function GS(){bm=!1,xi!==null&&yd(xi)&&(xi=null),bi!==null&&yd(bi)&&(bi=null),wi!==null&&yd(wi)&&(wi=null),hu.forEach(jy),fu.forEach(jy)}function ml(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,GS)))}function pu(t){function e(s){return ml(s,t)}if(0<Cc.length){ml(Cc[0],t);for(var r=1;r<Cc.length;r++){var n=Cc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(xi!==null&&ml(xi,t),bi!==null&&ml(bi,t),wi!==null&&ml(wi,t),hu.forEach(e),fu.forEach(e),r=0;r<oi.length;r++)n=oi[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<oi.length&&(r=oi[0],r.blockedOn===null);)b3(r),r.blockedOn===null&&oi.shift()}var Ta=Ps.ReactCurrentBatchConfig,Kd=!0;function JS(t,e,r,n){var s=We,i=Ta.transition;Ta.transition=null;try{We=1,pg(t,e,r,n)}finally{We=s,Ta.transition=i}}function YS(t,e,r,n){var s=We,i=Ta.transition;Ta.transition=null;try{We=4,pg(t,e,r,n)}finally{We=s,Ta.transition=i}}function pg(t,e,r,n){if(Kd){var s=wm(t,e,r,n);if(s===null)Bf(t,e,n,Gd,r),Ay(t,n);else if(KS(s,t,e,r,n))n.stopPropagation();else if(Ay(t,n),e&4&&-1<qS.indexOf(t)){for(;s!==null;){var i=nc(s);if(i!==null&&g3(i),i=wm(t,e,r,n),i===null&&Bf(t,e,n,Gd,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Bf(t,e,n,null,r)}}var Gd=null;function wm(t,e,r,n){if(Gd=null,t=cg(n),t=lo(t),t!==null)if(e=$o(t),e===null)t=null;else if(r=e.tag,r===13){if(t=l3(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gd=t,null}function w3(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LS()){case dg:return 1;case h3:return 4;case Wd:case PS:return 16;case f3:return 536870912;default:return 16}default:return 16}}var di=null,mg=null,xd=null;function k3(){if(xd)return xd;var t,e=mg,r=e.length,n,s="value"in di?di.value:di.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return xd=s.slice(t,1<n?1-n:void 0)}function bd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ec(){return!0}function Ry(){return!1}function en(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ec:Ry,this.isPropagationStopped=Ry,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ec)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ec)},persist:function(){},isPersistent:Ec}),e}var Ya={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gg=en(Ya),rc=gt({},Ya,{view:0,detail:0}),XS=en(rc),Rf,_f,gl,kh=gt({},rc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gl&&(gl&&t.type==="mousemove"?(Rf=t.screenX-gl.screenX,_f=t.screenY-gl.screenY):_f=Rf=0,gl=t),Rf)},movementY:function(t){return"movementY"in t?t.movementY:_f}}),_y=en(kh),QS=gt({},kh,{dataTransfer:0}),ZS=en(QS),e9=gt({},rc,{relatedTarget:0}),Of=en(e9),t9=gt({},Ya,{animationName:0,elapsedTime:0,pseudoElement:0}),r9=en(t9),n9=gt({},Ya,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),s9=en(n9),i9=gt({},Ya,{data:0}),Oy=en(i9),o9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u9(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=l9[t])?!!e[t]:!1}function vg(){return u9}var c9=gt({},rc,{key:function(t){if(t.key){var e=o9[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?a9[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vg,charCode:function(t){return t.type==="keypress"?bd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d9=en(c9),h9=gt({},kh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dy=en(h9),f9=gt({},rc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vg}),p9=en(f9),m9=gt({},Ya,{propertyName:0,elapsedTime:0,pseudoElement:0}),g9=en(m9),v9=gt({},kh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),y9=en(v9),x9=[9,13,27,32],yg=js&&"CompositionEvent"in window,$l=null;js&&"documentMode"in document&&($l=document.documentMode);var b9=js&&"TextEvent"in window&&!$l,S3=js&&(!yg||$l&&8<$l&&11>=$l),Iy=" ",zy=!1;function T3(t,e){switch(t){case"keyup":return x9.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C3(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ua=!1;function w9(t,e){switch(t){case"compositionend":return C3(e);case"keypress":return e.which!==32?null:(zy=!0,Iy);case"textInput":return t=e.data,t===Iy&&zy?null:t;default:return null}}function k9(t,e){if(ua)return t==="compositionend"||!yg&&T3(t,e)?(t=k3(),xd=mg=di=null,ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S3&&e.locale!=="ko"?null:e.data;default:return null}}var S9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!S9[t.type]:e==="textarea"}function E3(t,e,r,n){n3(n),e=Jd(e,"onChange"),0<e.length&&(r=new gg("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Bl=null,mu=null;function T9(t){L3(t,0)}function Sh(t){var e=ha(t);if(Yb(e))return t}function C9(t,e){if(t==="change")return e}var N3=!1;if(js){var Df;if(js){var If="oninput"in document;if(!If){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),If=typeof Py.oninput=="function"}Df=If}else Df=!1;N3=Df&&(!document.documentMode||9<document.documentMode)}function $y(){Bl&&(Bl.detachEvent("onpropertychange",M3),mu=Bl=null)}function M3(t){if(t.propertyName==="value"&&Sh(mu)){var e=[];E3(e,mu,t,cg(t)),a3(T9,e)}}function E9(t,e,r){t==="focusin"?($y(),Bl=e,mu=r,Bl.attachEvent("onpropertychange",M3)):t==="focusout"&&$y()}function N9(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sh(mu)}function M9(t,e){if(t==="click")return Sh(e)}function A9(t,e){if(t==="input"||t==="change")return Sh(e)}function j9(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $n=typeof Object.is=="function"?Object.is:j9;function gu(t,e){if($n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!nm.call(e,s)||!$n(t[s],e[s]))return!1}return!0}function By(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fy(t,e){var r=By(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=By(r)}}function A3(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A3(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j3(){for(var t=window,e=Hd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Hd(t.document)}return e}function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function R9(t){var e=j3(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&A3(r.ownerDocument.documentElement,r)){if(n!==null&&xg(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Fy(r,i);var o=Fy(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _9=js&&"documentMode"in document&&11>=document.documentMode,ca=null,km=null,Fl=null,Sm=!1;function Hy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sm||ca==null||ca!==Hd(n)||(n=ca,"selectionStart"in n&&xg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Fl&&gu(Fl,n)||(Fl=n,n=Jd(km,"onSelect"),0<n.length&&(e=new gg("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=ca)))}function Nc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var da={animationend:Nc("Animation","AnimationEnd"),animationiteration:Nc("Animation","AnimationIteration"),animationstart:Nc("Animation","AnimationStart"),transitionend:Nc("Transition","TransitionEnd")},zf={},R3={};js&&(R3=document.createElement("div").style,"AnimationEvent"in window||(delete da.animationend.animation,delete da.animationiteration.animation,delete da.animationstart.animation),"TransitionEvent"in window||delete da.transitionend.transition);function Th(t){if(zf[t])return zf[t];if(!da[t])return t;var e=da[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in R3)return zf[t]=e[r];return t}var _3=Th("animationend"),O3=Th("animationiteration"),D3=Th("animationstart"),I3=Th("transitionend"),z3=new Map,Uy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fi(t,e){z3.set(t,e),Po(e,[t])}for(var Lf=0;Lf<Uy.length;Lf++){var Pf=Uy[Lf],O9=Pf.toLowerCase(),D9=Pf[0].toUpperCase()+Pf.slice(1);Fi(O9,"on"+D9)}Fi(_3,"onAnimationEnd");Fi(O3,"onAnimationIteration");Fi(D3,"onAnimationStart");Fi("dblclick","onDoubleClick");Fi("focusin","onFocus");Fi("focusout","onBlur");Fi(I3,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Po("onBeforeInput",["compositionend","keypress","textInput","paste"]);Po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function Vy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,OS(n,e,void 0,t),t.currentTarget=null}function L3(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Vy(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Vy(s,a,u),i=l}}}if(Vd)throw t=ym,Vd=!1,ym=null,t}function nt(t,e){var r=e[Mm];r===void 0&&(r=e[Mm]=new Set);var n=t+"__bubble";r.has(n)||(P3(e,t,2,!1),r.add(n))}function $f(t,e,r){var n=0;e&&(n|=4),P3(r,t,n,e)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function vu(t){if(!t[Mc]){t[Mc]=!0,Wb.forEach(function(r){r!=="selectionchange"&&(I9.has(r)||$f(r,!1,t),$f(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mc]||(e[Mc]=!0,$f("selectionchange",!1,e))}}function P3(t,e,r,n){switch(w3(e)){case 1:var s=JS;break;case 4:s=YS;break;default:s=pg}r=s.bind(null,e,r,t),s=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Bf(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=lo(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}a3(function(){var u=i,c=cg(r),d=[];e:{var h=z3.get(t);if(h!==void 0){var p=gg,m=t;switch(t){case"keypress":if(bd(r)===0)break e;case"keydown":case"keyup":p=d9;break;case"focusin":m="focus",p=Of;break;case"focusout":m="blur",p=Of;break;case"beforeblur":case"afterblur":p=Of;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=_y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=ZS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=p9;break;case _3:case O3:case D3:p=r9;break;case I3:p=g9;break;case"scroll":p=XS;break;case"wheel":p=y9;break;case"copy":case"cut":case"paste":p=s9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Dy}var y=(e&4)!==0,x=!y&&t==="scroll",v=y?h!==null?h+"Capture":null:h;y=[];for(var w=u,k;w!==null;){k=w;var E=k.stateNode;if(k.tag===5&&E!==null&&(k=E,v!==null&&(E=du(w,v),E!=null&&y.push(yu(w,E,k)))),x)break;w=w.return}0<y.length&&(h=new p(h,m,null,r,c),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&r!==mm&&(m=r.relatedTarget||r.fromElement)&&(lo(m)||m[Rs]))break e;if((p||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=r.relatedTarget||r.toElement,p=u,m=m?lo(m):null,m!==null&&(x=$o(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(y=_y,E="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Dy,E="onPointerLeave",v="onPointerEnter",w="pointer"),x=p==null?h:ha(p),k=m==null?h:ha(m),h=new y(E,w+"leave",p,r,c),h.target=x,h.relatedTarget=k,E=null,lo(c)===u&&(y=new y(v,w+"enter",m,r,c),y.target=k,y.relatedTarget=x,E=y),x=E,p&&m)t:{for(y=p,v=m,w=0,k=y;k;k=Vo(k))w++;for(k=0,E=v;E;E=Vo(E))k++;for(;0<w-k;)y=Vo(y),w--;for(;0<k-w;)v=Vo(v),k--;for(;w--;){if(y===v||v!==null&&y===v.alternate)break t;y=Vo(y),v=Vo(v)}y=null}else y=null;p!==null&&Wy(d,h,p,y,!1),m!==null&&x!==null&&Wy(d,x,m,y,!0)}}e:{if(h=u?ha(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var M=C9;else if(Ly(h))if(N3)M=A9;else{M=N9;var j=E9}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(M=M9);if(M&&(M=M(t,u))){E3(d,M,r,c);break e}j&&j(t,h,u),t==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&cm(h,"number",h.value)}switch(j=u?ha(u):window,t){case"focusin":(Ly(j)||j.contentEditable==="true")&&(ca=j,km=u,Fl=null);break;case"focusout":Fl=km=ca=null;break;case"mousedown":Sm=!0;break;case"contextmenu":case"mouseup":case"dragend":Sm=!1,Hy(d,r,c);break;case"selectionchange":if(_9)break;case"keydown":case"keyup":Hy(d,r,c)}var N;if(yg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ua?T3(t,r)&&(_="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(S3&&r.locale!=="ko"&&(ua||_!=="onCompositionStart"?_==="onCompositionEnd"&&ua&&(N=k3()):(di=c,mg="value"in di?di.value:di.textContent,ua=!0)),j=Jd(u,_),0<j.length&&(_=new Oy(_,t,null,r,c),d.push({event:_,listeners:j}),N?_.data=N:(N=C3(r),N!==null&&(_.data=N)))),(N=b9?w9(t,r):k9(t,r))&&(u=Jd(u,"onBeforeInput"),0<u.length&&(c=new Oy("onBeforeInput","beforeinput",null,r,c),d.push({event:c,listeners:u}),c.data=N))}L3(d,e)})}function yu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Jd(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=du(t,r),i!=null&&n.unshift(yu(t,i,s)),i=du(t,e),i!=null&&n.push(yu(t,i,s))),t=t.return}return n}function Vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Wy(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=du(r,i),l!=null&&o.unshift(yu(r,l,a))):s||(l=du(r,i),l!=null&&o.push(yu(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var z9=/\r\n?/g,L9=/\u0000|\uFFFD/g;function qy(t){return(typeof t=="string"?t:""+t).replace(z9,`
`).replace(L9,"")}function Ac(t,e,r){if(e=qy(e),qy(t)!==e&&r)throw Error(X(425))}function Yd(){}var Tm=null,Cm=null;function Em(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,P9=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,$9=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(t){return Ky.resolve(null).then(t).catch(B9)}:Nm;function B9(t){setTimeout(function(){throw t})}function Ff(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),pu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);pu(e)}function ki(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Xa,xu="__reactProps$"+Xa,Rs="__reactContainer$"+Xa,Mm="__reactEvents$"+Xa,F9="__reactListeners$"+Xa,H9="__reactHandles$"+Xa;function lo(t){var e=t[Xn];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Rs]||r[Xn]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Gy(t);t!==null;){if(r=t[Xn])return r;t=Gy(t)}return e}t=r,r=t.parentNode}return null}function nc(t){return t=t[Xn]||t[Rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ha(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Ch(t){return t[xu]||null}var Am=[],fa=-1;function Hi(t){return{current:t}}function it(t){0>fa||(t.current=Am[fa],Am[fa]=null,fa--)}function et(t,e){fa++,Am[fa]=t.current,t.current=e}var _i={},hr=Hi(_i),Dr=Hi(!1),No=_i;function Da(t,e){var r=t.type.contextTypes;if(!r)return _i;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ir(t){return t=t.childContextTypes,t!=null}function Xd(){it(Dr),it(hr)}function Jy(t,e,r){if(hr.current!==_i)throw Error(X(168));et(hr,e),et(Dr,r)}function $3(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(X(108,ES(t)||"Unknown",s));return gt({},r,n)}function Qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,No=hr.current,et(hr,t),et(Dr,Dr.current),!0}function Yy(t,e,r){var n=t.stateNode;if(!n)throw Error(X(169));r?(t=$3(t,e,No),n.__reactInternalMemoizedMergedChildContext=t,it(Dr),it(hr),et(hr,t)):it(Dr),et(Dr,r)}var bs=null,Eh=!1,Hf=!1;function B3(t){bs===null?bs=[t]:bs.push(t)}function U9(t){Eh=!0,B3(t)}function Ui(){if(!Hf&&bs!==null){Hf=!0;var t=0,e=We;try{var r=bs;for(We=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}bs=null,Eh=!1}catch(s){throw bs!==null&&(bs=bs.slice(t+1)),d3(dg,Ui),s}finally{We=e,Hf=!1}}return null}var pa=[],ma=0,Zd=null,e0=0,un=[],cn=0,Mo=null,ws=1,ks="";function to(t,e){pa[ma++]=e0,pa[ma++]=Zd,Zd=t,e0=e}function F3(t,e,r){un[cn++]=ws,un[cn++]=ks,un[cn++]=Mo,Mo=t;var n=ws;t=ks;var s=32-zn(n)-1;n&=~(1<<s),r+=1;var i=32-zn(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ws=1<<32-zn(e)+s|r<<s|n,ks=i+t}else ws=1<<i|r<<s|n,ks=t}function bg(t){t.return!==null&&(to(t,1),F3(t,1,0))}function wg(t){for(;t===Zd;)Zd=pa[--ma],pa[ma]=null,e0=pa[--ma],pa[ma]=null;for(;t===Mo;)Mo=un[--cn],un[cn]=null,ks=un[--cn],un[cn]=null,ws=un[--cn],un[cn]=null}var Jr=null,Gr=null,ot=!1,On=null;function H3(t,e){var r=hn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Xy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jr=t,Gr=ki(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jr=t,Gr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Mo!==null?{id:ws,overflow:ks}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Jr=t,Gr=null,!0):!1;default:return!1}}function jm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rm(t){if(ot){var e=Gr;if(e){var r=e;if(!Xy(t,e)){if(jm(t))throw Error(X(418));e=ki(r.nextSibling);var n=Jr;e&&Xy(t,e)?H3(n,r):(t.flags=t.flags&-4097|2,ot=!1,Jr=t)}}else{if(jm(t))throw Error(X(418));t.flags=t.flags&-4097|2,ot=!1,Jr=t}}}function Qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jr=t}function jc(t){if(t!==Jr)return!1;if(!ot)return Qy(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Em(t.type,t.memoizedProps)),e&&(e=Gr)){if(jm(t))throw U3(),Error(X(418));for(;e;)H3(t,e),e=ki(e.nextSibling)}if(Qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Gr=ki(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Gr=null}}else Gr=Jr?ki(t.stateNode.nextSibling):null;return!0}function U3(){for(var t=Gr;t;)t=ki(t.nextSibling)}function Ia(){Gr=Jr=null,ot=!1}function kg(t){On===null?On=[t]:On.push(t)}var V9=Ps.ReactCurrentBatchConfig;function vl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var n=r.stateNode}if(!n)throw Error(X(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,t))}return t}function Rc(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zy(t){var e=t._init;return e(t._payload)}function V3(t){function e(v,w){if(t){var k=v.deletions;k===null?(v.deletions=[w],v.flags|=16):k.push(w)}}function r(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function n(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=Ei(v,w),v.index=0,v.sibling=null,v}function i(v,w,k){return v.index=k,t?(k=v.alternate,k!==null?(k=k.index,k<w?(v.flags|=2,w):k):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,k,E){return w===null||w.tag!==6?(w=Jf(k,v.mode,E),w.return=v,w):(w=s(w,k),w.return=v,w)}function l(v,w,k,E){var M=k.type;return M===la?c(v,w,k.props.children,E,k.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zs&&Zy(M)===w.type)?(E=s(w,k.props),E.ref=vl(v,w,k),E.return=v,E):(E=Nd(k.type,k.key,k.props,null,v.mode,E),E.ref=vl(v,w,k),E.return=v,E)}function u(v,w,k,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=Yf(k,v.mode,E),w.return=v,w):(w=s(w,k.children||[]),w.return=v,w)}function c(v,w,k,E,M){return w===null||w.tag!==7?(w=bo(k,v.mode,E,M),w.return=v,w):(w=s(w,k),w.return=v,w)}function d(v,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Jf(""+w,v.mode,k),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bc:return k=Nd(w.type,w.key,w.props,null,v.mode,k),k.ref=vl(v,null,w),k.return=v,k;case aa:return w=Yf(w,v.mode,k),w.return=v,w;case Zs:var E=w._init;return d(v,E(w._payload),k)}if(Nl(w)||hl(w))return w=bo(w,v.mode,k,null),w.return=v,w;Rc(v,w)}return null}function h(v,w,k,E){var M=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:a(v,w,""+k,E);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bc:return k.key===M?l(v,w,k,E):null;case aa:return k.key===M?u(v,w,k,E):null;case Zs:return M=k._init,h(v,w,M(k._payload),E)}if(Nl(k)||hl(k))return M!==null?null:c(v,w,k,E,null);Rc(v,k)}return null}function p(v,w,k,E,M){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(k)||null,a(w,v,""+E,M);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bc:return v=v.get(E.key===null?k:E.key)||null,l(w,v,E,M);case aa:return v=v.get(E.key===null?k:E.key)||null,u(w,v,E,M);case Zs:var j=E._init;return p(v,w,k,j(E._payload),M)}if(Nl(E)||hl(E))return v=v.get(k)||null,c(w,v,E,M,null);Rc(w,E)}return null}function m(v,w,k,E){for(var M=null,j=null,N=w,_=w=0,L=null;N!==null&&_<k.length;_++){N.index>_?(L=N,N=null):L=N.sibling;var V=h(v,N,k[_],E);if(V===null){N===null&&(N=L);break}t&&N&&V.alternate===null&&e(v,N),w=i(V,w,_),j===null?M=V:j.sibling=V,j=V,N=L}if(_===k.length)return r(v,N),ot&&to(v,_),M;if(N===null){for(;_<k.length;_++)N=d(v,k[_],E),N!==null&&(w=i(N,w,_),j===null?M=N:j.sibling=N,j=N);return ot&&to(v,_),M}for(N=n(v,N);_<k.length;_++)L=p(N,v,_,k[_],E),L!==null&&(t&&L.alternate!==null&&N.delete(L.key===null?_:L.key),w=i(L,w,_),j===null?M=L:j.sibling=L,j=L);return t&&N.forEach(function(ee){return e(v,ee)}),ot&&to(v,_),M}function y(v,w,k,E){var M=hl(k);if(typeof M!="function")throw Error(X(150));if(k=M.call(k),k==null)throw Error(X(151));for(var j=M=null,N=w,_=w=0,L=null,V=k.next();N!==null&&!V.done;_++,V=k.next()){N.index>_?(L=N,N=null):L=N.sibling;var ee=h(v,N,V.value,E);if(ee===null){N===null&&(N=L);break}t&&N&&ee.alternate===null&&e(v,N),w=i(ee,w,_),j===null?M=ee:j.sibling=ee,j=ee,N=L}if(V.done)return r(v,N),ot&&to(v,_),M;if(N===null){for(;!V.done;_++,V=k.next())V=d(v,V.value,E),V!==null&&(w=i(V,w,_),j===null?M=V:j.sibling=V,j=V);return ot&&to(v,_),M}for(N=n(v,N);!V.done;_++,V=k.next())V=p(N,v,_,V.value,E),V!==null&&(t&&V.alternate!==null&&N.delete(V.key===null?_:V.key),w=i(V,w,_),j===null?M=V:j.sibling=V,j=V);return t&&N.forEach(function(P){return e(v,P)}),ot&&to(v,_),M}function x(v,w,k,E){if(typeof k=="object"&&k!==null&&k.type===la&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case bc:e:{for(var M=k.key,j=w;j!==null;){if(j.key===M){if(M=k.type,M===la){if(j.tag===7){r(v,j.sibling),w=s(j,k.props.children),w.return=v,v=w;break e}}else if(j.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Zs&&Zy(M)===j.type){r(v,j.sibling),w=s(j,k.props),w.ref=vl(v,j,k),w.return=v,v=w;break e}r(v,j);break}else e(v,j);j=j.sibling}k.type===la?(w=bo(k.props.children,v.mode,E,k.key),w.return=v,v=w):(E=Nd(k.type,k.key,k.props,null,v.mode,E),E.ref=vl(v,w,k),E.return=v,v=E)}return o(v);case aa:e:{for(j=k.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){r(v,w.sibling),w=s(w,k.children||[]),w.return=v,v=w;break e}else{r(v,w);break}else e(v,w);w=w.sibling}w=Yf(k,v.mode,E),w.return=v,v=w}return o(v);case Zs:return j=k._init,x(v,w,j(k._payload),E)}if(Nl(k))return m(v,w,k,E);if(hl(k))return y(v,w,k,E);Rc(v,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(r(v,w.sibling),w=s(w,k),w.return=v,v=w):(r(v,w),w=Jf(k,v.mode,E),w.return=v,v=w),o(v)):r(v,w)}return x}var za=V3(!0),W3=V3(!1),t0=Hi(null),r0=null,ga=null,Sg=null;function Tg(){Sg=ga=r0=null}function Cg(t){var e=t0.current;it(t0),t._currentValue=e}function _m(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ca(t,e){r0=t,Sg=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Or=!0),t.firstContext=null)}function vn(t){var e=t._currentValue;if(Sg!==t)if(t={context:t,memoizedValue:e,next:null},ga===null){if(r0===null)throw Error(X(308));ga=t,r0.dependencies={lanes:0,firstContext:t}}else ga=ga.next=t;return e}var uo=null;function Eg(t){uo===null?uo=[t]:uo.push(t)}function q3(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Eg(e)):(r.next=s.next,s.next=r),e.interleaved=r,_s(t,n)}function _s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ei=!1;function Ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Si(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,$e&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,_s(t,r)}return s=n.interleaved,s===null?(e.next=e,Eg(n)):(e.next=s.next,s.next=e),n.interleaved=e,_s(t,r)}function wd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hg(t,r)}}function e2(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function n0(t,e,r,n){var s=t.updateQueue;ei=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,c=u=l=null,a=i;do{var h=a.lane,p=a.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,y=a;switch(h=e,p=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(p,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(p,d,h):m,h==null)break e;d=gt({},d,h);break e;case 2:ei=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(c===null&&(l=d),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);jo|=o,t.lanes=o,t.memoizedState=d}}function t2(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(X(191,s));s.call(n)}}}var sc={},ts=Hi(sc),bu=Hi(sc),wu=Hi(sc);function co(t){if(t===sc)throw Error(X(174));return t}function Mg(t,e){switch(et(wu,e),et(bu,t),et(ts,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hm(e,t)}it(ts),et(ts,e)}function La(){it(ts),it(bu),it(wu)}function G3(t){co(wu.current);var e=co(ts.current),r=hm(e,t.type);e!==r&&(et(bu,t),et(ts,r))}function Ag(t){bu.current===t&&(it(ts),it(bu))}var dt=Hi(0);function s0(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uf=[];function jg(){for(var t=0;t<Uf.length;t++)Uf[t]._workInProgressVersionPrimary=null;Uf.length=0}var kd=Ps.ReactCurrentDispatcher,Vf=Ps.ReactCurrentBatchConfig,Ao=0,pt=null,zt=null,Ft=null,i0=!1,Hl=!1,ku=0,W9=0;function lr(){throw Error(X(321))}function Rg(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!$n(t[r],e[r]))return!1;return!0}function _g(t,e,r,n,s,i){if(Ao=i,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kd.current=t===null||t.memoizedState===null?J9:Y9,t=r(n,s),Hl){i=0;do{if(Hl=!1,ku=0,25<=i)throw Error(X(301));i+=1,Ft=zt=null,e.updateQueue=null,kd.current=X9,t=r(n,s)}while(Hl)}if(kd.current=o0,e=zt!==null&&zt.next!==null,Ao=0,Ft=zt=pt=null,i0=!1,e)throw Error(X(300));return t}function Og(){var t=ku!==0;return ku=0,t}function qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?pt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function yn(){if(zt===null){var t=pt.alternate;t=t!==null?t.memoizedState:null}else t=zt.next;var e=Ft===null?pt.memoizedState:Ft.next;if(e!==null)Ft=e,zt=t;else{if(t===null)throw Error(X(310));zt=t,t={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ft===null?pt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Su(t,e){return typeof e=="function"?e(t):e}function Wf(t){var e=yn(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var n=zt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Ao&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,pt.lanes|=c,jo|=c}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,$n(n,e.memoizedState)||(Or=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,pt.lanes|=i,jo|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function qf(t){var e=yn(),r=e.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);$n(i,e.memoizedState)||(Or=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function J3(){}function Y3(t,e){var r=pt,n=yn(),s=e(),i=!$n(n.memoizedState,s);if(i&&(n.memoizedState=s,Or=!0),n=n.queue,Dg(Z3.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ft!==null&&Ft.memoizedState.tag&1){if(r.flags|=2048,Tu(9,Q3.bind(null,r,n,s,e),void 0,null),Wt===null)throw Error(X(349));Ao&30||X3(r,e,s)}return s}function X3(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Q3(t,e,r,n){e.value=r,e.getSnapshot=n,e5(e)&&t5(t)}function Z3(t,e,r){return r(function(){e5(e)&&t5(t)})}function e5(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!$n(t,r)}catch{return!0}}function t5(t){var e=_s(t,1);e!==null&&Ln(e,t,1,-1)}function r2(t){var e=qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:t},e.queue=t,t=t.dispatch=G9.bind(null,pt,t),[e.memoizedState,t]}function Tu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function r5(){return yn().memoizedState}function Sd(t,e,r,n){var s=qn();pt.flags|=t,s.memoizedState=Tu(1|e,r,void 0,n===void 0?null:n)}function Nh(t,e,r,n){var s=yn();n=n===void 0?null:n;var i=void 0;if(zt!==null){var o=zt.memoizedState;if(i=o.destroy,n!==null&&Rg(n,o.deps)){s.memoizedState=Tu(e,r,i,n);return}}pt.flags|=t,s.memoizedState=Tu(1|e,r,i,n)}function n2(t,e){return Sd(8390656,8,t,e)}function Dg(t,e){return Nh(2048,8,t,e)}function n5(t,e){return Nh(4,2,t,e)}function s5(t,e){return Nh(4,4,t,e)}function i5(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function o5(t,e,r){return r=r!=null?r.concat([t]):null,Nh(4,4,i5.bind(null,e,t),r)}function Ig(){}function a5(t,e){var r=yn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rg(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function l5(t,e){var r=yn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Rg(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function u5(t,e,r){return Ao&21?($n(r,e)||(r=p3(),pt.lanes|=r,jo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Or=!0),t.memoizedState=r)}function q9(t,e){var r=We;We=r!==0&&4>r?r:4,t(!0);var n=Vf.transition;Vf.transition={};try{t(!1),e()}finally{We=r,Vf.transition=n}}function c5(){return yn().memoizedState}function K9(t,e,r){var n=Ci(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},d5(t))h5(e,r);else if(r=q3(t,e,r,n),r!==null){var s=kr();Ln(r,t,n,s),f5(r,e,n)}}function G9(t,e,r){var n=Ci(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(d5(t))h5(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,$n(a,o)){var l=e.interleaved;l===null?(s.next=s,Eg(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=q3(t,e,s,n),r!==null&&(s=kr(),Ln(r,t,n,s),f5(r,e,n))}}function d5(t){var e=t.alternate;return t===pt||e!==null&&e===pt}function h5(t,e){Hl=i0=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function f5(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,hg(t,r)}}var o0={readContext:vn,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},J9={readContext:vn,useCallback:function(t,e){return qn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:n2,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sd(4194308,4,i5.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var r=qn();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=qn();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=K9.bind(null,pt,t),[n.memoizedState,t]},useRef:function(t){var e=qn();return t={current:t},e.memoizedState=t},useState:r2,useDebugValue:Ig,useDeferredValue:function(t){return qn().memoizedState=t},useTransition:function(){var t=r2(!1),e=t[0];return t=q9.bind(null,t[1]),qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=pt,s=qn();if(ot){if(r===void 0)throw Error(X(407));r=r()}else{if(r=e(),Wt===null)throw Error(X(349));Ao&30||X3(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,n2(Z3.bind(null,n,i,t),[t]),n.flags|=2048,Tu(9,Q3.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=qn(),e=Wt.identifierPrefix;if(ot){var r=ks,n=ws;r=(n&~(1<<32-zn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ku++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=W9++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Y9={readContext:vn,useCallback:a5,useContext:vn,useEffect:Dg,useImperativeHandle:o5,useInsertionEffect:n5,useLayoutEffect:s5,useMemo:l5,useReducer:Wf,useRef:r5,useState:function(){return Wf(Su)},useDebugValue:Ig,useDeferredValue:function(t){var e=yn();return u5(e,zt.memoizedState,t)},useTransition:function(){var t=Wf(Su)[0],e=yn().memoizedState;return[t,e]},useMutableSource:J3,useSyncExternalStore:Y3,useId:c5,unstable_isNewReconciler:!1},X9={readContext:vn,useCallback:a5,useContext:vn,useEffect:Dg,useImperativeHandle:o5,useInsertionEffect:n5,useLayoutEffect:s5,useMemo:l5,useReducer:qf,useRef:r5,useState:function(){return qf(Su)},useDebugValue:Ig,useDeferredValue:function(t){var e=yn();return zt===null?e.memoizedState=t:u5(e,zt.memoizedState,t)},useTransition:function(){var t=qf(Su)[0],e=yn().memoizedState;return[t,e]},useMutableSource:J3,useSyncExternalStore:Y3,useId:c5,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=gt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Om(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:gt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Mh={isMounted:function(t){return(t=t._reactInternals)?$o(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=kr(),s=Ci(t),i=Ts(n,s);i.payload=e,r!=null&&(i.callback=r),e=Si(t,i,s),e!==null&&(Ln(e,t,s,n),wd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=kr(),s=Ci(t),i=Ts(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Si(t,i,s),e!==null&&(Ln(e,t,s,n),wd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=kr(),n=Ci(t),s=Ts(r,n);s.tag=2,e!=null&&(s.callback=e),e=Si(t,s,n),e!==null&&(Ln(e,t,n,r),wd(e,t,n))}};function s2(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!gu(r,n)||!gu(s,i):!0}function p5(t,e,r){var n=!1,s=_i,i=e.contextType;return typeof i=="object"&&i!==null?i=vn(i):(s=Ir(e)?No:hr.current,n=e.contextTypes,i=(n=n!=null)?Da(t,s):_i),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mh,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function i2(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Mh.enqueueReplaceState(e,e.state,null)}function Dm(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Ng(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vn(i):(i=Ir(e)?No:hr.current,s.context=Da(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Om(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mh.enqueueReplaceState(s,s.state,null),n0(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pa(t,e){try{var r="",n=e;do r+=CS(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Im(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Q9=typeof WeakMap=="function"?WeakMap:Map;function m5(t,e,r){r=Ts(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){l0||(l0=!0,Wm=n),Im(t,e)},r}function g5(t,e,r){r=Ts(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Im(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Im(t,e),typeof n!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function o2(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Q9;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=hT.bind(null,t,e,r),e.then(t,t))}function a2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l2(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Ts(-1,1),e.tag=2,Si(r,e,1))),r.lanes|=1),t)}var Z9=Ps.ReactCurrentOwner,Or=!1;function xr(t,e,r,n){e.child=t===null?W3(e,null,r,n):za(e,t.child,r,n)}function u2(t,e,r,n,s){r=r.render;var i=e.ref;return Ca(e,s),n=_g(t,e,r,n,i,s),r=Og(),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(ot&&r&&bg(e),e.flags|=1,xr(t,e,n,s),e.child)}function c2(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Ug(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,v5(t,e,i,n,s)):(t=Nd(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:gu,r(o,n)&&t.ref===e.ref)return Os(t,e,s)}return e.flags|=1,t=Ei(i,n),t.ref=e.ref,t.return=e,e.child=t}function v5(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(gu(i,n)&&t.ref===e.ref)if(Or=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Or=!0);else return e.lanes=t.lanes,Os(t,e,s)}return zm(t,e,r,n,s)}function y5(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(ya,Vr),Vr|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(ya,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,et(ya,Vr),Vr|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,et(ya,Vr),Vr|=n;return xr(t,e,s,r),e.child}function x5(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zm(t,e,r,n,s){var i=Ir(r)?No:hr.current;return i=Da(e,i),Ca(e,s),r=_g(t,e,r,n,i,s),n=Og(),t!==null&&!Or?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Os(t,e,s)):(ot&&n&&bg(e),e.flags|=1,xr(t,e,r,s),e.child)}function d2(t,e,r,n,s){if(Ir(r)){var i=!0;Qd(e)}else i=!1;if(Ca(e,s),e.stateNode===null)Td(t,e),p5(e,r,n),Dm(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=vn(u):(u=Ir(r)?No:hr.current,u=Da(e,u));var c=r.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&i2(e,o,n,u),ei=!1;var h=e.memoizedState;o.state=h,n0(e,n,o,s),l=e.memoizedState,a!==n||h!==l||Dr.current||ei?(typeof c=="function"&&(Om(e,r,c,n),l=e.memoizedState),(a=ei||s2(e,r,a,n,h,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,K3(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Mn(e.type,a),o.props=u,d=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=vn(l):(l=Ir(r)?No:hr.current,l=Da(e,l));var p=r.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&i2(e,o,n,l),ei=!1,h=e.memoizedState,o.state=h,n0(e,n,o,s);var m=e.memoizedState;a!==d||h!==m||Dr.current||ei?(typeof p=="function"&&(Om(e,r,p,n),m=e.memoizedState),(u=ei||s2(e,r,u,n,h,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),o.props=n,o.state=m,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Lm(t,e,r,n,i,s)}function Lm(t,e,r,n,s,i){x5(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Yy(e,r,!1),Os(t,e,i);n=e.stateNode,Z9.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=za(e,t.child,null,i),e.child=za(e,null,a,i)):xr(t,e,a,i),e.memoizedState=n.state,s&&Yy(e,r,!0),e.child}function b5(t){var e=t.stateNode;e.pendingContext?Jy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Jy(t,e.context,!1),Mg(t,e.containerInfo)}function h2(t,e,r,n,s){return Ia(),kg(s),e.flags|=256,xr(t,e,r,n),e.child}var Pm={dehydrated:null,treeContext:null,retryLane:0};function $m(t){return{baseLanes:t,cachePool:null,transitions:null}}function w5(t,e,r){var n=e.pendingProps,s=dt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),et(dt,s&1),t===null)return Rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rh(o,n,0,null),t=bo(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=$m(r),e.memoizedState=Pm,t):zg(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return eT(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ei(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ei(a,i):(i=bo(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?$m(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Pm,n}return i=t.child,t=i.sibling,n=Ei(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function zg(t,e){return e=Rh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _c(t,e,r,n){return n!==null&&kg(n),za(e,t.child,null,r),t=zg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eT(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Kf(Error(X(422))),_c(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Rh({mode:"visible",children:n.children},s,0,null),i=bo(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&za(e,t.child,null,o),e.child.memoizedState=$m(o),e.memoizedState=Pm,i);if(!(e.mode&1))return _c(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(X(419)),n=Kf(i,n,void 0),_c(t,e,o,n)}if(a=(o&t.childLanes)!==0,Or||a){if(n=Wt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,_s(t,s),Ln(n,t,s,-1))}return Hg(),n=Kf(Error(X(421))),_c(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gr=ki(s.nextSibling),Jr=e,ot=!0,On=null,t!==null&&(un[cn++]=ws,un[cn++]=ks,un[cn++]=Mo,ws=t.id,ks=t.overflow,Mo=e),e=zg(e,n.children),e.flags|=4096,e)}function f2(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),_m(t.return,e,r)}function Gf(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function k5(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(xr(t,e,n.children,r),n=dt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f2(t,r,e);else if(t.tag===19)f2(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(et(dt,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&s0(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Gf(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&s0(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Gf(e,!0,r,null,i);break;case"together":Gf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Os(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),jo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,r=Ei(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Ei(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function tT(t,e,r){switch(e.tag){case 3:b5(e),Ia();break;case 5:G3(e);break;case 1:Ir(e.type)&&Qd(e);break;case 4:Mg(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;et(t0,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(et(dt,dt.current&1),e.flags|=128,null):r&e.child.childLanes?w5(t,e,r):(et(dt,dt.current&1),t=Os(t,e,r),t!==null?t.sibling:null);et(dt,dt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return k5(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(dt,dt.current),n)break;return null;case 22:case 23:return e.lanes=0,y5(t,e,r)}return Os(t,e,r)}var S5,Bm,T5,C5;S5=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bm=function(){};T5=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,co(ts.current);var i=null;switch(r){case"input":s=lm(t,s),n=lm(t,n),i=[];break;case"select":s=gt({},s,{value:void 0}),n=gt({},n,{value:void 0}),i=[];break;case"textarea":s=dm(t,s),n=dm(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Yd)}fm(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&nt("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};C5=function(t,e,r,n){r!==n&&(e.flags|=4)};function yl(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ur(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function rT(t,e,r){var n=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ur(e),null;case 1:return Ir(e.type)&&Xd(),ur(e),null;case 3:return n=e.stateNode,La(),it(Dr),it(hr),jg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Gm(On),On=null))),Bm(t,e),ur(e),null;case 5:Ag(e);var s=co(wu.current);if(r=e.type,t!==null&&e.stateNode!=null)T5(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(X(166));return ur(e),null}if(t=co(ts.current),jc(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Xn]=e,n[xu]=i,t=(e.mode&1)!==0,r){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(s=0;s<Al.length;s++)nt(Al[s],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":ky(n,i),nt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},nt("invalid",n);break;case"textarea":Ty(n,i),nt("invalid",n)}fm(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ac(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ac(n.textContent,a,t),s=["children",""+a]):uu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nt("scroll",n)}switch(r){case"input":wc(n),Sy(n,i,!0);break;case"textarea":wc(n),Cy(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Yd)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zb(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Xn]=e,t[xu]=n,S5(t,e,!1,!1),e.stateNode=t;e:{switch(o=pm(r,n),r){case"dialog":nt("cancel",t),nt("close",t),s=n;break;case"iframe":case"object":case"embed":nt("load",t),s=n;break;case"video":case"audio":for(s=0;s<Al.length;s++)nt(Al[s],t);s=n;break;case"source":nt("error",t),s=n;break;case"img":case"image":case"link":nt("error",t),nt("load",t),s=n;break;case"details":nt("toggle",t),s=n;break;case"input":ky(t,n),s=lm(t,n),nt("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=gt({},n,{value:void 0}),nt("invalid",t);break;case"textarea":Ty(t,n),s=dm(t,n),nt("invalid",t);break;default:s=n}fm(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?r3(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&e3(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&cu(t,l):typeof l=="number"&&cu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(uu.hasOwnProperty(i)?l!=null&&i==="onScroll"&&nt("scroll",t):l!=null&&og(t,i,l,o))}switch(r){case"input":wc(t),Sy(t,n,!1);break;case"textarea":wc(t),Cy(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ri(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?wa(t,!!n.multiple,i,!1):n.defaultValue!=null&&wa(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ur(e),null;case 6:if(t&&e.stateNode!=null)C5(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(X(166));if(r=co(wu.current),co(ts.current),jc(e)){if(n=e.stateNode,r=e.memoizedProps,n[Xn]=e,(i=n.nodeValue!==r)&&(t=Jr,t!==null))switch(t.tag){case 3:Ac(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ac(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Xn]=e,e.stateNode=n}return ur(e),null;case 13:if(it(dt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Gr!==null&&e.mode&1&&!(e.flags&128))U3(),Ia(),e.flags|=98560,i=!1;else if(i=jc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(X(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(X(317));i[Xn]=e}else Ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ur(e),i=!1}else On!==null&&(Gm(On),On=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Pt===0&&(Pt=3):Hg())),e.updateQueue!==null&&(e.flags|=4),ur(e),null);case 4:return La(),Bm(t,e),t===null&&vu(e.stateNode.containerInfo),ur(e),null;case 10:return Cg(e.type._context),ur(e),null;case 17:return Ir(e.type)&&Xd(),ur(e),null;case 19:if(it(dt),i=e.memoizedState,i===null)return ur(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)yl(i,!1);else{if(Pt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=s0(t),o!==null){for(e.flags|=128,yl(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return et(dt,dt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ct()>$a&&(e.flags|=128,n=!0,yl(i,!1),e.lanes=4194304)}else{if(!n)if(t=s0(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),yl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ot)return ur(e),null}else 2*Ct()-i.renderingStartTime>$a&&r!==1073741824&&(e.flags|=128,n=!0,yl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ct(),e.sibling=null,r=dt.current,et(dt,n?r&1|2:r&1),e):(ur(e),null);case 22:case 23:return Fg(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Vr&1073741824&&(ur(e),e.subtreeFlags&6&&(e.flags|=8192)):ur(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function nT(t,e){switch(wg(e),e.tag){case 1:return Ir(e.type)&&Xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return La(),it(Dr),it(hr),jg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ag(e),null;case 13:if(it(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(dt),null;case 4:return La(),null;case 10:return Cg(e.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Oc=!1,dr=!1,sT=typeof WeakSet=="function"?WeakSet:Set,le=null;function va(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){St(t,e,n)}else r.current=null}function Fm(t,e,r){try{r()}catch(n){St(t,e,n)}}var p2=!1;function iT(t,e){if(Tm=Kd,t=j3(),xg(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var p;d!==r||s!==0&&d.nodeType!==3||(a=o+s),d!==i||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===r&&++u===s&&(a=o),h===i&&++c===n&&(l=o),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Cm={focusedElem:t,selectionRange:r},Kd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:Mn(e.type,y),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(E){St(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return m=p2,p2=!1,m}function Ul(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fm(e,r,i)}s=s.next}while(s!==n)}}function Ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Hm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function E5(t){var e=t.alternate;e!==null&&(t.alternate=null,E5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[xu],delete e[Mm],delete e[F9],delete e[H9])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N5(t){return t.tag===5||t.tag===3||t.tag===4}function m2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Um(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Yd));else if(n!==4&&(t=t.child,t!==null))for(Um(t,e,r),t=t.sibling;t!==null;)Um(t,e,r),t=t.sibling}function Vm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Vm(t,e,r),t=t.sibling;t!==null;)Vm(t,e,r),t=t.sibling}var Qt=null,jn=!1;function qs(t,e,r){for(r=r.child;r!==null;)M5(t,e,r),r=r.sibling}function M5(t,e,r){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(wh,r)}catch{}switch(r.tag){case 5:dr||va(r,e);case 6:var n=Qt,s=jn;Qt=null,qs(t,e,r),Qt=n,jn=s,Qt!==null&&(jn?(t=Qt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Qt.removeChild(r.stateNode));break;case 18:Qt!==null&&(jn?(t=Qt,r=r.stateNode,t.nodeType===8?Ff(t.parentNode,r):t.nodeType===1&&Ff(t,r),pu(t)):Ff(Qt,r.stateNode));break;case 4:n=Qt,s=jn,Qt=r.stateNode.containerInfo,jn=!0,qs(t,e,r),Qt=n,jn=s;break;case 0:case 11:case 14:case 15:if(!dr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fm(r,e,o),s=s.next}while(s!==n)}qs(t,e,r);break;case 1:if(!dr&&(va(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){St(r,e,a)}qs(t,e,r);break;case 21:qs(t,e,r);break;case 22:r.mode&1?(dr=(n=dr)||r.memoizedState!==null,qs(t,e,r),dr=n):qs(t,e,r);break;default:qs(t,e,r)}}function g2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new sT),e.forEach(function(n){var s=pT.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Cn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qt=a.stateNode,jn=!1;break e;case 3:Qt=a.stateNode.containerInfo,jn=!0;break e;case 4:Qt=a.stateNode.containerInfo,jn=!0;break e}a=a.return}if(Qt===null)throw Error(X(160));M5(i,o,s),Qt=null,jn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){St(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)A5(e,t),e=e.sibling}function A5(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),Wn(t),n&4){try{Ul(3,t,t.return),Ah(3,t)}catch(y){St(t,t.return,y)}try{Ul(5,t,t.return)}catch(y){St(t,t.return,y)}}break;case 1:Cn(e,t),Wn(t),n&512&&r!==null&&va(r,r.return);break;case 5:if(Cn(e,t),Wn(t),n&512&&r!==null&&va(r,r.return),t.flags&32){var s=t.stateNode;try{cu(s,"")}catch(y){St(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Xb(s,i),pm(a,o);var u=pm(a,i);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?r3(s,d):c==="dangerouslySetInnerHTML"?e3(s,d):c==="children"?cu(s,d):og(s,c,d,u)}switch(a){case"input":um(s,i);break;case"textarea":Qb(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?wa(s,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?wa(s,!!i.multiple,i.defaultValue,!0):wa(s,!!i.multiple,i.multiple?[]:"",!1))}s[xu]=i}catch(y){St(t,t.return,y)}}break;case 6:if(Cn(e,t),Wn(t),n&4){if(t.stateNode===null)throw Error(X(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){St(t,t.return,y)}}break;case 3:if(Cn(e,t),Wn(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{pu(e.containerInfo)}catch(y){St(t,t.return,y)}break;case 4:Cn(e,t),Wn(t);break;case 13:Cn(e,t),Wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($g=Ct())),n&4&&g2(t);break;case 22:if(c=r!==null&&r.memoizedState!==null,t.mode&1?(dr=(u=dr)||c,Cn(e,t),dr=u):Cn(e,t),Wn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(le=t,c=t.child;c!==null;){for(d=le=c;le!==null;){switch(h=le,p=h.child,h.tag){case 0:case 11:case 14:case 15:Ul(4,h,h.return);break;case 1:va(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){St(n,r,y)}}break;case 5:va(h,h.return);break;case 22:if(h.memoizedState!==null){y2(d);continue}}p!==null?(p.return=h,le=p):y2(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=t3("display",o))}catch(y){St(t,t.return,y)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){St(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Cn(e,t),Wn(t),n&4&&g2(t);break;case 21:break;default:Cn(e,t),Wn(t)}}function Wn(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(N5(r)){var n=r;break e}r=r.return}throw Error(X(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(cu(s,""),n.flags&=-33);var i=m2(t);Vm(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=m2(t);Um(t,a,o);break;default:throw Error(X(161))}}catch(l){St(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oT(t,e,r){le=t,j5(t)}function j5(t,e,r){for(var n=(t.mode&1)!==0;le!==null;){var s=le,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Oc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dr;a=Oc;var u=dr;if(Oc=o,(dr=l)&&!u)for(le=s;le!==null;)o=le,l=o.child,o.tag===22&&o.memoizedState!==null?x2(s):l!==null?(l.return=o,le=l):x2(s);for(;i!==null;)le=i,j5(i),i=i.sibling;le=s,Oc=a,dr=u}v2(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,le=i):v2(t)}}function v2(t){for(;le!==null;){var e=le;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dr||Ah(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!dr)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Mn(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&t2(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}t2(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}dr||e.flags&512&&Hm(e)}catch(h){St(e,e.return,h)}}if(e===t){le=null;break}if(r=e.sibling,r!==null){r.return=e.return,le=r;break}le=e.return}}function y2(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var r=e.sibling;if(r!==null){r.return=e.return,le=r;break}le=e.return}}function x2(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Ah(4,e)}catch(l){St(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){St(e,s,l)}}var i=e.return;try{Hm(e)}catch(l){St(e,i,l)}break;case 5:var o=e.return;try{Hm(e)}catch(l){St(e,o,l)}}}catch(l){St(e,e.return,l)}if(e===t){le=null;break}var a=e.sibling;if(a!==null){a.return=e.return,le=a;break}le=e.return}}var aT=Math.ceil,a0=Ps.ReactCurrentDispatcher,Lg=Ps.ReactCurrentOwner,pn=Ps.ReactCurrentBatchConfig,$e=0,Wt=null,jt=null,sr=0,Vr=0,ya=Hi(0),Pt=0,Cu=null,jo=0,jh=0,Pg=0,Vl=null,Rr=null,$g=0,$a=1/0,vs=null,l0=!1,Wm=null,Ti=null,Dc=!1,hi=null,u0=0,Wl=0,qm=null,Cd=-1,Ed=0;function kr(){return $e&6?Ct():Cd!==-1?Cd:Cd=Ct()}function Ci(t){return t.mode&1?$e&2&&sr!==0?sr&-sr:V9.transition!==null?(Ed===0&&(Ed=p3()),Ed):(t=We,t!==0||(t=window.event,t=t===void 0?16:w3(t.type)),t):1}function Ln(t,e,r,n){if(50<Wl)throw Wl=0,qm=null,Error(X(185));tc(t,r,n),(!($e&2)||t!==Wt)&&(t===Wt&&(!($e&2)&&(jh|=r),Pt===4&&ai(t,sr)),zr(t,n),r===1&&$e===0&&!(e.mode&1)&&($a=Ct()+500,Eh&&Ui()))}function zr(t,e){var r=t.callbackNode;VS(t,e);var n=qd(t,t===Wt?sr:0);if(n===0)r!==null&&My(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&My(r),e===1)t.tag===0?U9(b2.bind(null,t)):B3(b2.bind(null,t)),$9(function(){!($e&6)&&Ui()}),r=null;else{switch(m3(n)){case 1:r=dg;break;case 4:r=h3;break;case 16:r=Wd;break;case 536870912:r=f3;break;default:r=Wd}r=P5(r,R5.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function R5(t,e){if(Cd=-1,Ed=0,$e&6)throw Error(X(327));var r=t.callbackNode;if(Ea()&&t.callbackNode!==r)return null;var n=qd(t,t===Wt?sr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=c0(t,n);else{e=n;var s=$e;$e|=2;var i=O5();(Wt!==t||sr!==e)&&(vs=null,$a=Ct()+500,xo(t,e));do try{cT();break}catch(a){_5(t,a)}while(!0);Tg(),a0.current=i,$e=s,jt!==null?e=0:(Wt=null,sr=0,e=Pt)}if(e!==0){if(e===2&&(s=xm(t),s!==0&&(n=s,e=Km(t,s))),e===1)throw r=Cu,xo(t,0),ai(t,n),zr(t,Ct()),r;if(e===6)ai(t,n);else{if(s=t.current.alternate,!(n&30)&&!lT(s)&&(e=c0(t,n),e===2&&(i=xm(t),i!==0&&(n=i,e=Km(t,i))),e===1))throw r=Cu,xo(t,0),ai(t,n),zr(t,Ct()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(X(345));case 2:ro(t,Rr,vs);break;case 3:if(ai(t,n),(n&130023424)===n&&(e=$g+500-Ct(),10<e)){if(qd(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){kr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nm(ro.bind(null,t,Rr,vs),e);break}ro(t,Rr,vs);break;case 4:if(ai(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-zn(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=Ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*aT(n/1960))-n,10<n){t.timeoutHandle=Nm(ro.bind(null,t,Rr,vs),n);break}ro(t,Rr,vs);break;case 5:ro(t,Rr,vs);break;default:throw Error(X(329))}}}return zr(t,Ct()),t.callbackNode===r?R5.bind(null,t):null}function Km(t,e){var r=Vl;return t.current.memoizedState.isDehydrated&&(xo(t,e).flags|=256),t=c0(t,e),t!==2&&(e=Rr,Rr=r,e!==null&&Gm(e)),t}function Gm(t){Rr===null?Rr=t:Rr.push.apply(Rr,t)}function lT(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e){for(e&=~Pg,e&=~jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-zn(e),n=1<<r;t[r]=-1,e&=~n}}function b2(t){if($e&6)throw Error(X(327));Ea();var e=qd(t,0);if(!(e&1))return zr(t,Ct()),null;var r=c0(t,e);if(t.tag!==0&&r===2){var n=xm(t);n!==0&&(e=n,r=Km(t,n))}if(r===1)throw r=Cu,xo(t,0),ai(t,e),zr(t,Ct()),r;if(r===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,Rr,vs),zr(t,Ct()),null}function Bg(t,e){var r=$e;$e|=1;try{return t(e)}finally{$e=r,$e===0&&($a=Ct()+500,Eh&&Ui())}}function Ro(t){hi!==null&&hi.tag===0&&!($e&6)&&Ea();var e=$e;$e|=1;var r=pn.transition,n=We;try{if(pn.transition=null,We=1,t)return t()}finally{We=n,pn.transition=r,$e=e,!($e&6)&&Ui()}}function Fg(){Vr=ya.current,it(ya)}function xo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,P9(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(wg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xd();break;case 3:La(),it(Dr),it(hr),jg();break;case 5:Ag(n);break;case 4:La();break;case 13:it(dt);break;case 19:it(dt);break;case 10:Cg(n.type._context);break;case 22:case 23:Fg()}r=r.return}if(Wt=t,jt=t=Ei(t.current,null),sr=Vr=e,Pt=0,Cu=null,Pg=jh=jo=0,Rr=Vl=null,uo!==null){for(e=0;e<uo.length;e++)if(r=uo[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}uo=null}return t}function _5(t,e){do{var r=jt;try{if(Tg(),kd.current=o0,i0){for(var n=pt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}i0=!1}if(Ao=0,Ft=zt=pt=null,Hl=!1,ku=0,Lg.current=null,r===null||r.return===null){Pt=1,Cu=e,jt=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=sr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=a2(o);if(p!==null){p.flags&=-257,l2(p,o,a,i,e),p.mode&1&&o2(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){o2(i,u,e),Hg();break e}l=Error(X(426))}}else if(ot&&a.mode&1){var x=a2(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),l2(x,o,a,i,e),kg(Pa(l,a));break e}}i=l=Pa(l,a),Pt!==4&&(Pt=2),Vl===null?Vl=[i]:Vl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=m5(i,l,e);e2(i,v);break e;case 1:a=l;var w=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ti===null||!Ti.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=g5(i,a,e);e2(i,E);break e}}i=i.return}while(i!==null)}I5(r)}catch(M){e=M,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function O5(){var t=a0.current;return a0.current=o0,t===null?o0:t}function Hg(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Wt===null||!(jo&268435455)&&!(jh&268435455)||ai(Wt,sr)}function c0(t,e){var r=$e;$e|=2;var n=O5();(Wt!==t||sr!==e)&&(vs=null,xo(t,e));do try{uT();break}catch(s){_5(t,s)}while(!0);if(Tg(),$e=r,a0.current=n,jt!==null)throw Error(X(261));return Wt=null,sr=0,Pt}function uT(){for(;jt!==null;)D5(jt)}function cT(){for(;jt!==null&&!IS();)D5(jt)}function D5(t){var e=L5(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?I5(t):jt=e,Lg.current=null}function I5(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=nT(r,e),r!==null){r.flags&=32767,jt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pt=6,jt=null;return}}else if(r=rT(r,e,Vr),r!==null){jt=r;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);Pt===0&&(Pt=5)}function ro(t,e,r){var n=We,s=pn.transition;try{pn.transition=null,We=1,dT(t,e,r,n)}finally{pn.transition=s,We=n}return null}function dT(t,e,r,n){do Ea();while(hi!==null);if($e&6)throw Error(X(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(WS(t,i),t===Wt&&(jt=Wt=null,sr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Dc||(Dc=!0,P5(Wd,function(){return Ea(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=pn.transition,pn.transition=null;var o=We;We=1;var a=$e;$e|=4,Lg.current=null,iT(t,r),A5(r,t),R9(Cm),Kd=!!Tm,Cm=Tm=null,t.current=r,oT(r),zS(),$e=a,We=o,pn.transition=i}else t.current=r;if(Dc&&(Dc=!1,hi=t,u0=s),i=t.pendingLanes,i===0&&(Ti=null),$S(r.stateNode),zr(t,Ct()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(l0)throw l0=!1,t=Wm,Wm=null,t;return u0&1&&t.tag!==0&&Ea(),i=t.pendingLanes,i&1?t===qm?Wl++:(Wl=0,qm=t):Wl=0,Ui(),null}function Ea(){if(hi!==null){var t=m3(u0),e=pn.transition,r=We;try{if(pn.transition=null,We=16>t?16:t,hi===null)var n=!1;else{if(t=hi,hi=null,u0=0,$e&6)throw Error(X(331));var s=$e;for($e|=4,le=t.current;le!==null;){var i=le,o=i.child;if(le.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(le=u;le!==null;){var c=le;switch(c.tag){case 0:case 11:case 15:Ul(8,c,i)}var d=c.child;if(d!==null)d.return=c,le=d;else for(;le!==null;){c=le;var h=c.sibling,p=c.return;if(E5(c),c===u){le=null;break}if(h!==null){h.return=p,le=h;break}le=p}}}var m=i.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}le=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,le=o;else e:for(;le!==null;){if(i=le,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ul(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,le=v;break e}le=i.return}}var w=t.current;for(le=w;le!==null;){o=le;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,le=k;else e:for(o=w;le!==null;){if(a=le,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ah(9,a)}}catch(M){St(a,a.return,M)}if(a===o){le=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,le=E;break e}le=a.return}}if($e=s,Ui(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(wh,t)}catch{}n=!0}return n}finally{We=r,pn.transition=e}}return!1}function w2(t,e,r){e=Pa(r,e),e=m5(t,e,1),t=Si(t,e,1),e=kr(),t!==null&&(tc(t,1,e),zr(t,e))}function St(t,e,r){if(t.tag===3)w2(t,t,r);else for(;e!==null;){if(e.tag===3){w2(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ti===null||!Ti.has(n))){t=Pa(r,t),t=g5(e,t,1),e=Si(e,t,1),t=kr(),e!==null&&(tc(e,1,t),zr(e,t));break}}e=e.return}}function hT(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=kr(),t.pingedLanes|=t.suspendedLanes&r,Wt===t&&(sr&r)===r&&(Pt===4||Pt===3&&(sr&130023424)===sr&&500>Ct()-$g?xo(t,0):Pg|=r),zr(t,e)}function z5(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var r=kr();t=_s(t,e),t!==null&&(tc(t,e,r),zr(t,r))}function fT(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),z5(t,r)}function pT(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(e),z5(t,r)}var L5;L5=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Dr.current)Or=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Or=!1,tT(t,e,r);Or=!!(t.flags&131072)}else Or=!1,ot&&e.flags&1048576&&F3(e,e0,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Td(t,e),t=e.pendingProps;var s=Da(e,hr.current);Ca(e,r),s=_g(null,e,n,t,s,r);var i=Og();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ir(n)?(i=!0,Qd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ng(e),s.updater=Mh,e.stateNode=s,s._reactInternals=e,Dm(e,n,t,r),e=Lm(null,e,n,!0,i,r)):(e.tag=0,ot&&i&&bg(e),xr(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=gT(n),t=Mn(n,t),s){case 0:e=zm(null,e,n,t,r);break e;case 1:e=d2(null,e,n,t,r);break e;case 11:e=u2(null,e,n,t,r);break e;case 14:e=c2(null,e,n,Mn(n.type,t),r);break e}throw Error(X(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),zm(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),d2(t,e,n,s,r);case 3:e:{if(b5(e),t===null)throw Error(X(387));n=e.pendingProps,i=e.memoizedState,s=i.element,K3(t,e),n0(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pa(Error(X(423)),e),e=h2(t,e,n,r,s);break e}else if(n!==s){s=Pa(Error(X(424)),e),e=h2(t,e,n,r,s);break e}else for(Gr=ki(e.stateNode.containerInfo.firstChild),Jr=e,ot=!0,On=null,r=W3(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ia(),n===s){e=Os(t,e,r);break e}xr(t,e,n,r)}e=e.child}return e;case 5:return G3(e),t===null&&Rm(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Em(n,s)?o=null:i!==null&&Em(n,i)&&(e.flags|=32),x5(t,e),xr(t,e,o,r),e.child;case 6:return t===null&&Rm(e),null;case 13:return w5(t,e,r);case 4:return Mg(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=za(e,null,n,r):xr(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),u2(t,e,n,s,r);case 7:return xr(t,e,e.pendingProps,r),e.child;case 8:return xr(t,e,e.pendingProps.children,r),e.child;case 12:return xr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,et(t0,n._currentValue),n._currentValue=o,i!==null)if($n(i.value,o)){if(i.children===s.children&&!Dr.current){e=Os(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=Ts(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),_m(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(X(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),_m(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}xr(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Ca(e,r),s=vn(s),n=n(s),e.flags|=1,xr(t,e,n,r),e.child;case 14:return n=e.type,s=Mn(n,e.pendingProps),s=Mn(n.type,s),c2(t,e,n,s,r);case 15:return v5(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Mn(n,s),Td(t,e),e.tag=1,Ir(n)?(t=!0,Qd(e)):t=!1,Ca(e,r),p5(e,n,s),Dm(e,n,s,r),Lm(null,e,n,!0,t,r);case 19:return k5(t,e,r);case 22:return y5(t,e,r)}throw Error(X(156,e.tag))};function P5(t,e){return d3(t,e)}function mT(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(t,e,r,n){return new mT(t,e,r,n)}function Ug(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gT(t){if(typeof t=="function")return Ug(t)?1:0;if(t!=null){if(t=t.$$typeof,t===lg)return 11;if(t===ug)return 14}return 2}function Ei(t,e){var r=t.alternate;return r===null?(r=hn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Nd(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Ug(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case la:return bo(r.children,s,i,e);case ag:o=8,s|=8;break;case sm:return t=hn(12,r,e,s|2),t.elementType=sm,t.lanes=i,t;case im:return t=hn(13,r,e,s),t.elementType=im,t.lanes=i,t;case om:return t=hn(19,r,e,s),t.elementType=om,t.lanes=i,t;case Gb:return Rh(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qb:o=10;break e;case Kb:o=9;break e;case lg:o=11;break e;case ug:o=14;break e;case Zs:o=16,n=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=hn(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function bo(t,e,r,n){return t=hn(7,t,n,e),t.lanes=r,t}function Rh(t,e,r,n){return t=hn(22,t,n,e),t.elementType=Gb,t.lanes=r,t.stateNode={isHidden:!1},t}function Jf(t,e,r){return t=hn(6,t,null,e),t.lanes=r,t}function Yf(t,e,r){return e=hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vT(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jf(0),this.expirationTimes=jf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Vg(t,e,r,n,s,i,o,a,l){return t=new vT(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=hn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(i),t}function yT(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function $5(t){if(!t)return _i;t=t._reactInternals;e:{if($o(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var r=t.type;if(Ir(r))return $3(t,r,e)}return e}function B5(t,e,r,n,s,i,o,a,l){return t=Vg(r,n,!0,t,s,i,o,a,l),t.context=$5(null),r=t.current,n=kr(),s=Ci(r),i=Ts(n,s),i.callback=e??null,Si(r,i,s),t.current.lanes=s,tc(t,s,n),zr(t,n),t}function _h(t,e,r,n){var s=e.current,i=kr(),o=Ci(s);return r=$5(r),e.context===null?e.context=r:e.pendingContext=r,e=Ts(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Si(s,e,o),t!==null&&(Ln(t,s,o,i),wd(t,s,o)),o}function d0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k2(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Wg(t,e){k2(t,e),(t=t.alternate)&&k2(t,e)}function xT(){return null}var F5=typeof reportError=="function"?reportError:function(t){console.error(t)};function qg(t){this._internalRoot=t}Oh.prototype.render=qg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));_h(t,e,null,null)};Oh.prototype.unmount=qg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ro(function(){_h(null,t,null,null)}),e[Rs]=null}};function Oh(t){this._internalRoot=t}Oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=y3();t={blockedOn:null,target:t,priority:e};for(var r=0;r<oi.length&&e!==0&&e<oi[r].priority;r++);oi.splice(r,0,t),r===0&&b3(t)}};function Kg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function S2(){}function bT(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=d0(o);i.call(u)}}var o=B5(e,n,t,0,null,!1,!1,"",S2);return t._reactRootContainer=o,t[Rs]=o.current,vu(t.nodeType===8?t.parentNode:t),Ro(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=d0(l);a.call(u)}}var l=Vg(t,0,!1,null,null,!1,!1,"",S2);return t._reactRootContainer=l,t[Rs]=l.current,vu(t.nodeType===8?t.parentNode:t),Ro(function(){_h(e,l,r,n)}),l}function Ih(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=d0(o);a.call(l)}}_h(e,o,t,s)}else o=bT(r,e,t,s,n);return d0(o)}g3=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ml(e.pendingLanes);r!==0&&(hg(e,r|1),zr(e,Ct()),!($e&6)&&($a=Ct()+500,Ui()))}break;case 13:Ro(function(){var n=_s(t,1);if(n!==null){var s=kr();Ln(n,t,1,s)}}),Wg(t,1)}};fg=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var r=kr();Ln(e,t,134217728,r)}Wg(t,134217728)}};v3=function(t){if(t.tag===13){var e=Ci(t),r=_s(t,e);if(r!==null){var n=kr();Ln(r,t,e,n)}Wg(t,e)}};y3=function(){return We};x3=function(t,e){var r=We;try{return We=t,e()}finally{We=r}};gm=function(t,e,r){switch(e){case"input":if(um(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Ch(n);if(!s)throw Error(X(90));Yb(n),um(n,s)}}}break;case"textarea":Qb(t,r);break;case"select":e=r.value,e!=null&&wa(t,!!r.multiple,e,!1)}};i3=Bg;o3=Ro;var wT={usingClientEntryPoint:!1,Events:[nc,ha,Ch,n3,s3,Bg]},xl={findFiberByHostInstance:lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kT={bundleType:xl.bundleType,version:xl.version,rendererPackageName:xl.rendererPackageName,rendererConfig:xl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u3(t),t===null?null:t.stateNode},findFiberByHostInstance:xl.findFiberByHostInstance||xT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ic.isDisabled&&Ic.supportsFiber)try{wh=Ic.inject(kT),es=Ic}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wT;Zr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kg(e))throw Error(X(200));return yT(t,e,null,r)};Zr.createRoot=function(t,e){if(!Kg(t))throw Error(X(299));var r=!1,n="",s=F5;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Vg(t,1,!1,null,null,r,!1,n,s),t[Rs]=e.current,vu(t.nodeType===8?t.parentNode:t),new qg(e)};Zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=u3(e),t=t===null?null:t.stateNode,t};Zr.flushSync=function(t){return Ro(t)};Zr.hydrate=function(t,e,r){if(!Dh(e))throw Error(X(200));return Ih(null,t,e,!0,r)};Zr.hydrateRoot=function(t,e,r){if(!Kg(t))throw Error(X(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=F5;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=B5(e,null,t,1,r??null,s,!1,i,o),t[Rs]=e.current,vu(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Oh(e)};Zr.render=function(t,e,r){if(!Dh(e))throw Error(X(200));return Ih(null,t,e,!1,r)};Zr.unmountComponentAtNode=function(t){if(!Dh(t))throw Error(X(40));return t._reactRootContainer?(Ro(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Rs]=null})}),!0):!1};Zr.unstable_batchedUpdates=Bg;Zr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Dh(r))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Ih(t,e,r,!1,n)};Zr.version="18.3.1-next-f1338f8080-20240426";function H5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H5)}catch(t){console.error(t)}}H5(),Hb.exports=Zr;var ho=Hb.exports;const ST=jb(ho);var T2=ho;rm.createRoot=T2.createRoot,rm.hydrateRoot=T2.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C2="popstate";function TT(t={}){function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Jm("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Eu(s)}return ET(e,r,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CT(){return Math.random().toString(36).substring(2,10)}function E2(t,e){return{usr:t.state,key:t.key,idx:e}}function Jm(t,e,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Qa(e):e,state:r,key:e&&e.key||n||CT()}}function Eu({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Qa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function ET(t,e,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",l=null,u=c();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function c(){return(o.state||{idx:null}).idx}function d(){a="POP";let x=c(),v=x==null?null:x-u;u=x,l&&l({action:a,location:y.location,delta:v})}function h(x,v){a="PUSH";let w=Jm(y.location,x,v);u=c()+1;let k=E2(w,u),E=y.createHref(w);try{o.pushState(k,"",E)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(E)}i&&l&&l({action:a,location:y.location,delta:1})}function p(x,v){a="REPLACE";let w=Jm(y.location,x,v);u=c();let k=E2(w,u),E=y.createHref(w);o.replaceState(k,"",E),i&&l&&l({action:a,location:y.location,delta:0})}function m(x){return NT(x)}let y={get action(){return a},get location(){return t(s,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(C2,d),l=x,()=>{s.removeEventListener(C2,d),l=null}},createHref(x){return e(s,x)},createURL:m,encodeLocation(x){let v=m(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(x){return o.go(x)}};return y}function NT(t,e=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),mt(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Eu(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function U5(t,e,r="/"){return MT(t,e,r,!1)}function MT(t,e,r,n){let s=typeof e=="string"?Qa(e):e,i=Ds(s.pathname||"/",r);if(i==null)return null;let o=V5(t);AT(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=BT(i);a=PT(o[l],u,n)}return a}function V5(t,e=[],r=[],n="",s=!1){let i=(o,a,l=s,u)=>{let c={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(n)&&l)return;mt(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length)}let d=Cs([n,c.relativePath]),h=r.concat(c);o.children&&o.children.length>0&&(mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),V5(o.children,e,h,d,l)),!(o.path==null&&!o.index)&&e.push({path:d,score:zT(d,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let u of W5(o.path))i(o,a,!0,u)}),e}function W5(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=W5(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function AT(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:LT(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var jT=/^:[\w-]+$/,RT=3,_T=2,OT=1,DT=10,IT=-2,N2=t=>t==="*";function zT(t,e){let r=t.split("/"),n=r.length;return r.some(N2)&&(n+=IT),e&&(n+=_T),r.filter(s=>!N2(s)).reduce((s,i)=>s+(jT.test(i)?RT:i===""?OT:DT),n)}function LT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function PT(t,e,r=!1){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",d=h0({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!d&&u&&r&&!n[n.length-1].route.index&&(d=h0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Cs([i,d.pathname]),pathnameBase:VT(Cs([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Cs([i,d.pathnameBase]))}return o}function h0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=$T(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,{paramName:c,isOptional:d},h)=>{if(c==="*"){let m=a[h]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[h];return d&&!p?u[c]=void 0:u[c]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function $T(t,e=!1,r=!0){rs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function BT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rs(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ds(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}var FT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function HT(t,e="/"){let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?Qa(t):t,i;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?i=M2(r.substring(1),"/"):i=M2(r,e)):i=e,{pathname:i,search:WT(n),hash:qT(s)}}function M2(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Xf(t,e,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UT(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function q5(t){let e=UT(t);return e.map((r,n)=>n===e.length-1?r.pathname:r.pathnameBase)}function K5(t,e,r,n=!1){let s;typeof t=="string"?s=Qa(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),Xf("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),Xf("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),Xf("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let d=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=HT(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Cs=t=>t.join("/").replace(/\/\/+/g,"/"),VT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,KT=class{constructor(t,e,r,n=!1){this.status=t,this.statusText=e||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function GT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function JT(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var G5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function J5(t,e){let r=t;if(typeof r!="string"||!FT.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,s=!1;if(G5)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),a=Ds(o.pathname,e);o.origin===i.origin&&a!=null?r=a+o.search+o.hash:s=!0}catch{rs(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:s,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Y5=["POST","PUT","PATCH","DELETE"];new Set(Y5);var YT=["GET",...Y5];new Set(YT);var Za=T.createContext(null);Za.displayName="DataRouter";var zh=T.createContext(null);zh.displayName="DataRouterState";var XT=T.createContext(!1),X5=T.createContext({isTransitioning:!1});X5.displayName="ViewTransition";var QT=T.createContext(new Map);QT.displayName="Fetchers";var ZT=T.createContext(null);ZT.displayName="Await";var kn=T.createContext(null);kn.displayName="Navigation";var ic=T.createContext(null);ic.displayName="Location";var as=T.createContext({outlet:null,matches:[],isDataRoute:!1});as.displayName="Route";var Gg=T.createContext(null);Gg.displayName="RouteError";var Q5="REACT_ROUTER_ERROR",eC="REDIRECT",tC="ROUTE_ERROR_RESPONSE";function rC(t){if(t.startsWith(`${Q5}:${eC}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function nC(t){if(t.startsWith(`${Q5}:${tC}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new KT(e.status,e.statusText,e.data)}catch{}}function sC(t,{relative:e}={}){mt(oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(kn),{hash:s,pathname:i,search:o}=ac(t,{relative:e}),a=i;return r!=="/"&&(a=i==="/"?r:Cs([r,i])),n.createHref({pathname:a,search:o,hash:s})}function oc(){return T.useContext(ic)!=null}function $s(){return mt(oc(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(ic).location}var Z5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ew(t){T.useContext(kn).static||T.useLayoutEffect(t)}function el(){let{isDataRoute:t}=T.useContext(as);return t?vC():iC()}function iC(){mt(oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=T.useContext(Za),{basename:e,navigator:r}=T.useContext(kn),{matches:n}=T.useContext(as),{pathname:s}=$s(),i=JSON.stringify(q5(n)),o=T.useRef(!1);return ew(()=>{o.current=!0}),T.useCallback((l,u={})=>{if(rs(o.current,Z5),!o.current)return;if(typeof l=="number"){r.go(l);return}let c=K5(l,JSON.parse(i),s,u.relative==="path");t==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Cs([e,c.pathname])),(u.replace?r.replace:r.push)(c,u.state,u)},[e,r,i,s,t])}T.createContext(null);function Lh(){let{matches:t}=T.useContext(as),e=t[t.length-1];return e?e.params:{}}function ac(t,{relative:e}={}){let{matches:r}=T.useContext(as),{pathname:n}=$s(),s=JSON.stringify(q5(r));return T.useMemo(()=>K5(t,JSON.parse(s),n,e==="path"),[t,s,n,e])}function oC(t,e){return tw(t,e)}function tw(t,e,r,n,s){var w;mt(oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(kn),{matches:o}=T.useContext(as),a=o[o.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",d=a&&a.route;{let k=d&&d.path||"";nw(u,!d||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let h=$s(),p;if(e){let k=typeof e=="string"?Qa(e):e;mt(c==="/"||((w=k.pathname)==null?void 0:w.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${k.pathname}" was given in the \`location\` prop.`),p=k}else p=h;let m=p.pathname||"/",y=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=U5(t,{pathname:y});rs(d||x!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),rs(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=dC(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Cs([c,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Cs([c,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),o,r,n,s);return e&&v?T.createElement(ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},v):v}function aC(){let t=gC(),e=GT(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},e),r?T.createElement("pre",{style:s},r):null,o)}var lC=T.createElement(aC,null),rw=class extends T.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const r=nC(t.digest);r&&(t=r)}let e=t!==void 0?T.createElement(as.Provider,{value:this.props.routeContext},T.createElement(Gg.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?T.createElement(uC,{error:t},e):e}};rw.contextType=XT;var Qf=new WeakMap;function uC({children:t,error:e}){let{basename:r}=T.useContext(kn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=rC(e.digest);if(n){let s=Qf.get(e);if(s)throw s;let i=J5(n.location,r);if(G5&&!Qf.get(e))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw Qf.set(e,o),o}return T.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function cC({routeContext:t,match:e,children:r}){let n=T.useContext(Za);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),T.createElement(as.Provider,{value:t},r)}function dC(t,e=[],r=null,n=null,s=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let i=t,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);mt(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<i.length;c++){let d=i[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:h,errors:p}=r,m=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||m){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}let u=r&&n?(c,d)=>{var h,p;n(c,{location:r.location,params:((p=(h=r.matches)==null?void 0:h[0])==null?void 0:p.params)??{},unstable_pattern:JT(r.matches),errorInfo:d})}:void 0;return i.reduceRight((c,d,h)=>{let p,m=!1,y=null,x=null;r&&(p=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||lC,a&&(l<0&&h===0?(nw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,x=null):l===h&&(m=!0,x=d.route.hydrateFallbackElement||null)));let v=e.concat(i.slice(0,h+1)),w=()=>{let k;return p?k=y:m?k=x:d.route.Component?k=T.createElement(d.route.Component,null):d.route.element?k=d.route.element:k=c,T.createElement(cC,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:r!=null},children:k})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?T.createElement(rw,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0},onError:u}):w()},null)}function Jg(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(t){let e=T.useContext(Za);return mt(e,Jg(t)),e}function fC(t){let e=T.useContext(zh);return mt(e,Jg(t)),e}function pC(t){let e=T.useContext(as);return mt(e,Jg(t)),e}function Yg(t){let e=pC(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function mC(){return Yg("useRouteId")}function gC(){var n;let t=T.useContext(Gg),e=fC("useRouteError"),r=Yg("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[r]}function vC(){let{router:t}=hC("useNavigate"),e=Yg("useNavigate"),r=T.useRef(!1);return ew(()=>{r.current=!0}),T.useCallback(async(s,i={})=>{rs(r.current,Z5),r.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var A2={};function nw(t,e,r){!e&&!A2[t]&&(A2[t]=!0,rs(!1,r))}T.memo(yC);function yC({routes:t,future:e,state:r,onError:n}){return tw(t,void 0,r,n,e)}function Xs(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function xC({basename:t="/",children:e=null,location:r,navigationType:n="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){mt(!oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:a,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[a,s,i,o]);typeof r=="string"&&(r=Qa(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:p="default"}=r,m=T.useMemo(()=>{let y=Ds(u,a);return y==null?null:{location:{pathname:y,search:c,hash:d,state:h,key:p},navigationType:n}},[a,u,c,d,h,p,n]);return rs(m!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:T.createElement(kn.Provider,{value:l},T.createElement(ic.Provider,{children:e,value:m}))}function bC({children:t,location:e}){return oC(Ym(t),e)}function Ym(t,e=[]){let r=[];return T.Children.forEach(t,(n,s)=>{if(!T.isValidElement(n))return;let i=[...e,s];if(n.type===T.Fragment){r.push.apply(r,Ym(n.props.children,i));return}mt(n.type===Xs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ym(n.props.children,i)),r.push(o)}),r}var Md="get",Ad="application/x-www-form-urlencoded";function Ph(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function wC(t){return Ph(t)&&t.tagName.toLowerCase()==="button"}function kC(t){return Ph(t)&&t.tagName.toLowerCase()==="form"}function SC(t){return Ph(t)&&t.tagName.toLowerCase()==="input"}function TC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function CC(t,e){return t.button===0&&(!e||e==="_self")&&!TC(t)}var zc=null;function EC(){if(zc===null)try{new FormData(document.createElement("form"),0),zc=!1}catch{zc=!0}return zc}var NC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zf(t){return t!=null&&!NC.has(t)?(rs(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ad}"`),null):t}function MC(t,e){let r,n,s,i,o;if(kC(t)){let a=t.getAttribute("action");n=a?Ds(a,e):null,r=t.getAttribute("method")||Md,s=Zf(t.getAttribute("enctype"))||Ad,i=new FormData(t)}else if(wC(t)||SC(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(n=l?Ds(l,e):null,r=t.getAttribute("formmethod")||a.getAttribute("method")||Md,s=Zf(t.getAttribute("formenctype"))||Zf(a.getAttribute("enctype"))||Ad,i=new FormData(a,t),!EC()){let{name:u,type:c,value:d}=t;if(c==="image"){let h=u?`${u}.`:"";i.append(`${h}x`,"0"),i.append(`${h}y`,"0")}else u&&i.append(u,d)}}else{if(Ph(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Md,n=null,s=Ad,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xg(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AC(t,e,r,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${n}`:s.pathname=`${s.pathname}.${n}`:s.pathname==="/"?s.pathname=`_root.${n}`:e&&Ds(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function jC(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function RC(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _C(t,e,r){let n=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await jC(i,r);return o.links?o.links():[]}return[]}));return zC(n.flat(1).filter(RC).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function j2(t,e,r,n,s,i){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,a=(l,u)=>{var c;return r[u].pathname!==l.pathname||((c=r[u].route.path)==null?void 0:c.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return i==="assets"?e.filter((l,u)=>o(l,u)||a(l,u)):i==="data"?e.filter((l,u)=>{var d;let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(o(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((d=r[0])==null?void 0:d.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function OC(t,e,{includeHydrateFallback:r}={}){return DC(t.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function DC(t){return[...new Set(t)]}function IC(t){let e={},r=Object.keys(t).sort();for(let n of r)e[n]=t[n];return e}function zC(t,e){let r=new Set;return new Set(e),t.reduce((n,s)=>{let i=JSON.stringify(IC(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function sw(){let t=T.useContext(Za);return Xg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function LC(){let t=T.useContext(zh);return Xg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Qg=T.createContext(void 0);Qg.displayName="FrameworkContext";function iw(){let t=T.useContext(Qg);return Xg(t,"You must render this element inside a <HydratedRouter> element"),t}function PC(t,e){let r=T.useContext(Qg),[n,s]=T.useState(!1),[i,o]=T.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:d}=e,h=T.useRef(null);T.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=v=>{v.forEach(w=>{o(w.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),T.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return r?t!=="intent"?[i,h,{}]:[i,h,{onFocus:bl(a,p),onBlur:bl(l,m),onMouseEnter:bl(u,p),onMouseLeave:bl(c,m),onTouchStart:bl(d,p)}]:[!1,h,{}]}function bl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function $C({page:t,...e}){let{router:r}=sw(),n=T.useMemo(()=>U5(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?T.createElement(FC,{page:t,matches:n,...e}):null}function BC(t){let{manifest:e,routeModules:r}=iw(),[n,s]=T.useState([]);return T.useEffect(()=>{let i=!1;return _C(t,e,r).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,r]),n}function FC({page:t,matches:e,...r}){let n=$s(),{future:s,manifest:i,routeModules:o}=iw(),{basename:a}=sw(),{loaderData:l,matches:u}=LC(),c=T.useMemo(()=>j2(t,e,u,i,n,"data"),[t,e,u,i,n]),d=T.useMemo(()=>j2(t,e,u,i,n,"assets"),[t,e,u,i,n]),h=T.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let y=new Set,x=!1;if(e.forEach(w=>{var E;let k=i.routes[w.route.id];!k||!k.hasLoader||(!c.some(M=>M.route.id===w.route.id)&&w.route.id in l&&((E=o[w.route.id])!=null&&E.shouldRevalidate)||k.hasClientLoader?x=!0:y.add(w.route.id))}),y.size===0)return[];let v=AC(t,a,s.unstable_trailingSlashAwareDataRequests,"data");return x&&y.size>0&&v.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[v.pathname+v.search]},[a,s.unstable_trailingSlashAwareDataRequests,l,n,i,c,e,t,o]),p=T.useMemo(()=>OC(d,i),[d,i]),m=BC(d);return T.createElement(T.Fragment,null,h.map(y=>T.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),p.map(y=>T.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),m.map(({key:y,link:x})=>T.createElement("link",{key:y,nonce:r.nonce,...x,crossOrigin:x.crossOrigin??r.crossOrigin})))}function HC(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var UC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{UC&&(window.__reactRouterVersion="7.13.0")}catch{}function VC({basename:t,children:e,unstable_useTransitions:r,window:n}){let s=T.useRef();s.current==null&&(s.current=TT({window:n,v5Compat:!0}));let i=s.current,[o,a]=T.useState({action:i.action,location:i.location}),l=T.useCallback(u=>{r===!1?a(u):T.startTransition(()=>a(u))},[r]);return T.useLayoutEffect(()=>i.listen(l),[i,l]),T.createElement(xC,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,At=T.forwardRef(function({onClick:e,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h,...p},m){let{basename:y,unstable_useTransitions:x}=T.useContext(kn),v=typeof u=="string"&&ow.test(u),w=J5(u,y);u=w.to;let k=sC(u,{relative:s}),[E,M,j]=PC(n,p),N=GC(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:x});function _(V){e&&e(V),V.defaultPrevented||N(V)}let L=T.createElement("a",{...p,...j,href:w.absoluteURL||k,onClick:w.isExternal||i?e:_,ref:HC(m,M),target:l,"data-discover":!v&&r==="render"?"true":void 0});return E&&!v?T.createElement(T.Fragment,null,L,T.createElement($C,{page:k})):L});At.displayName="Link";var WC=T.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:l,...u},c){let d=ac(o,{relative:u.relative}),h=$s(),p=T.useContext(zh),{navigator:m,basename:y}=T.useContext(kn),x=p!=null&&ZC(d)&&a===!0,v=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,w=h.pathname,k=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(w=w.toLowerCase(),k=k?k.toLowerCase():null,v=v.toLowerCase()),k&&y&&(k=Ds(k,y)||k);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=w===v||!s&&w.startsWith(v)&&w.charAt(E)==="/",j=k!=null&&(k===v||!s&&k.startsWith(v)&&k.charAt(v.length)==="/"),N={isActive:M,isPending:j,isTransitioning:x},_=M?e:void 0,L;typeof n=="function"?L=n(N):L=[n,M?"active":null,j?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(N):i;return T.createElement(At,{...u,"aria-current":_,className:L,ref:c,style:V,to:o,viewTransition:a},typeof l=="function"?l(N):l)});WC.displayName="NavLink";var qC=T.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:n,replace:s,state:i,method:o=Md,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h,...p},m)=>{let{unstable_useTransitions:y}=T.useContext(kn),x=XC(),v=QC(a,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",k=typeof a=="string"&&ow.test(a),E=M=>{if(l&&l(M),M.defaultPrevented)return;M.preventDefault();let j=M.nativeEvent.submitter,N=(j==null?void 0:j.getAttribute("formmethod"))||o,_=()=>x(j||M.currentTarget,{fetcherKey:e,method:N,navigate:r,replace:s,state:i,relative:u,preventScrollReset:c,viewTransition:d,unstable_defaultShouldRevalidate:h});y&&r!==!1?T.startTransition(()=>_()):_()};return T.createElement("form",{ref:m,method:w,action:v,onSubmit:n?l:E,...p,"data-discover":!k&&t==="render"?"true":void 0})});qC.displayName="Form";function KC(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aw(t){let e=T.useContext(Za);return mt(e,KC(t)),e}function GC(t,{target:e,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a,unstable_useTransitions:l}={}){let u=el(),c=$s(),d=ac(t,{relative:i});return T.useCallback(h=>{if(CC(h,e)){h.preventDefault();let p=r!==void 0?r:Eu(c)===Eu(d),m=()=>u(t,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:a});l?T.startTransition(()=>m()):m()}},[c,u,d,r,n,e,t,s,i,o,a,l])}var JC=0,YC=()=>`__${String(++JC)}__`;function XC(){let{router:t}=aw("useSubmit"),{basename:e}=T.useContext(kn),r=mC(),n=t.fetch,s=t.navigate;return T.useCallback(async(i,o={})=>{let{action:a,method:l,encType:u,formData:c,body:d}=MC(i,e);if(o.navigate===!1){let h=o.fetcherKey||YC();await n(h,r,o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,flushSync:o.flushSync})}else await s(o.action||a,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:c,body:d,formMethod:o.method||l,formEncType:o.encType||u,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,s,e,r])}function QC(t,{relative:e}={}){let{basename:r}=T.useContext(kn),n=T.useContext(as);mt(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...ac(t||".",{relative:e})},o=$s();if(t==null){i.search=o.search;let a=new URLSearchParams(i.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(d=>d).forEach(d=>a.append("index",d));let c=a.toString();i.search=c?`?${c}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Cs([r,i.pathname])),Eu(i)}function ZC(t,{relative:e}={}){let r=T.useContext(X5);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=aw("useViewTransitionState"),s=ac(t,{relative:e});if(!r.isTransitioning)return!1;let i=Ds(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Ds(r.nextLocation.pathname,n)||r.nextLocation.pathname;return h0(s.pathname,o)!=null||h0(s.pathname,i)!=null}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(t,e)=>{const r=T.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>T.createElement("svg",{ref:c,...eE,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${tE(t)}`,a].join(" "),...u},[...e.map(([d,h])=>T.createElement(d,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=oe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=oe("AlignCenter",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"17",x2:"7",y1:"12",y2:"12",key:"rsh8ii"}],["line",{x1:"19",x2:"5",y1:"18",y2:"18",key:"1t0tuv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=oe("AlignLeft",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}],["line",{x1:"17",x2:"3",y1:"18",y2:"18",key:"1awlsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=oe("AlignRight",[["line",{x1:"21",x2:"3",y1:"6",y2:"6",key:"1fp77t"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}],["line",{x1:"21",x2:"7",y1:"18",y2:"18",key:"1g9eri"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=oe("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=oe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=oe("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $h=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=oe("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=oe("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=oe("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=oe("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=oe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=oe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=oe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bh=oe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=oe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=oe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _2=oe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=oe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=oe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=oe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=oe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=oe("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=oe("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=oe("Heading3",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M17.5 10.5c1.7-1 3.5 0 3.5 1.5a2 2 0 0 1-2 2",key:"68ncm8"}],["path",{d:"M17 17.5c2 1.5 4 .3 4-1.5a2 2 0 0 0-2-2",key:"1ejuhz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=oe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=oe("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lc=oe("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=oe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=oe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=oe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=oe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=oe("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=oe("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=oe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=oe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=oe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=oe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=oe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=oe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=oe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=oe("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=oe("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=oe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=oe("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=oe("Sigma",[["path",{d:"M18 7V4H6l6 8-6 8h12v-3",key:"zis8ev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=oe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=oe("Strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=oe("Subscript",[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=oe("Superscript",[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=oe("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=oe("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=oe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pc=oe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_E=({lang:t,setLang:e,t:r})=>{const[n,s]=T.useState(!1),[i,o]=T.useState(!1);T.useEffect(()=>{const l=()=>o(window.scrollY>20);return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const a=()=>e(l=>l==="ru"?"tj":"ru");return f.jsxs("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${i?"bg-gaming-bg/80 backdrop-blur-xl border-b border-white/5 py-3":"bg-transparent py-6"}`,children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs(At,{to:"/",className:"flex items-center gap-3 group cursor-pointer",children:[f.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-gaming-primary to-gaming-pink rounded-xl flex items-center justify-center shadow-lg shadow-gaming-primary/20 group-hover:scale-105 transition-transform duration-300",children:f.jsx(er,{className:"text-white w-6 h-6"})}),f.jsx("span",{className:"font-bold text-2xl tracking-tight text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:to-gaming-primary/80 transition-all",children:"Donishmand"})]}),f.jsxs("div",{className:"hidden md:flex items-center bg-white/5 backdrop-blur-md rounded-full border border-white/5 p-1.5 shadow-sm",children:[f.jsxs(At,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[r.navCourses,f.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),f.jsxs(At,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[r.navLibrary,f.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),f.jsxs(At,{to:"/",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[r.navAbout,f.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),f.jsxs(At,{to:"/creator",className:"px-5 py-2 text-sm font-medium text-gaming-textMuted hover:text-white transition-colors relative group",children:[r.navCreator,f.jsx("span",{className:"absolute bottom-1 left-1/2 w-0 h-0.5 bg-gaming-accent -translate-x-1/2 group-hover:w-1/2 transition-all duration-300"})]}),f.jsx("div",{className:"w-px h-4 bg-white/10 mx-2"}),f.jsx("button",{onClick:a,className:"px-3 py-1.5 text-xs font-bold bg-white/5 rounded-full text-white hover:bg-gaming-primary hover:text-white transition-colors uppercase ring-1 ring-white/10",children:t})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"hidden md:block",children:f.jsx("button",{className:"bg-gradient-to-r from-gaming-primary to-gaming-pink text-white px-6 py-2.5 rounded-full font-medium text-sm transition-all shadow-lg shadow-gaming-primary/25 hover:shadow-gaming-pink/25 hover:scale-105 active:scale-95",children:r.navLogin})}),f.jsx("button",{onClick:()=>s(!n),className:"md:hidden p-2 text-white hover:bg-white/10 rounded-lg transition-colors",children:n?f.jsx(Di,{}):f.jsx(pw,{})})]})]})}),n&&f.jsx("div",{className:"absolute top-full left-0 right-0 bg-gaming-card border-b border-white/5 p-4 shadow-xl md:hidden glass-panel",children:f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx(At,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:r.navCourses}),f.jsx(At,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:r.navLibrary}),f.jsx(At,{to:"/",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:r.navAbout}),f.jsx(At,{to:"/creator",className:"font-medium text-white/80 hover:text-white px-4 py-2 hover:bg-white/5 rounded-lg transition-colors",children:r.navCreator}),f.jsxs("div",{className:"border-t border-white/5 pt-4 flex items-center justify-between px-4",children:[f.jsx("button",{onClick:a,className:"px-3 py-1 bg-white/5 text-white rounded-md text-xs font-bold uppercase ring-1 ring-white/10",children:t}),f.jsx("button",{className:"text-sm font-medium text-gaming-primary",children:r.navLogin})]})]})})]})},OE=({t})=>f.jsxs("footer",{className:"relative bg-gaming-bg border-t border-white/5 py-12 mt-20",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gaming-primary/5 to-transparent pointer-events-none"}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 text-center relative z-10",children:f.jsx("p",{className:"text-gaming-textMuted text-sm font-medium",children:t.footerText})})]}),DE=({lang:t,t:e})=>f.jsxs("div",{className:"relative w-full overflow-hidden pt-36 pb-20 lg:pt-48 lg:pb-32",children:[f.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-gaming-primary/20 rounded-full blur-[150px] pointer-events-none translate-x-1/3 -translate-y-1/3 animate-pulse-slow"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-[600px] h-[600px] bg-gaming-pink/10 rounded-full blur-[120px] pointer-events-none -translate-x-1/3 translate-y-1/3 animate-pulse-slow"}),f.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center z-10",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md shadow-sm text-gaming-accent text-sm font-medium mb-8 animate-fade-in-up",children:[f.jsx(er,{size:16,className:"text-gaming-gold"}),f.jsx("span",{className:"tracking-wide uppercase text-[11px] font-bold",children:e.badge})]}),f.jsx("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-[1.1] animate-fade-in-up delay-[100ms] drop-shadow-2xl",children:e.heroTitle}),f.jsx("p",{className:"text-lg md:text-xl text-gaming-textMuted mb-12 max-w-2xl mx-auto leading-relaxed animate-fade-in-up delay-[200ms]",children:e.heroSubtitle}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center items-center w-full animate-fade-in-up delay-[300ms]",children:[f.jsxs("button",{className:"group relative bg-gaming-primary hover:bg-gaming-primary/90 text-white px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 shadow-lg shadow-gaming-primary/25 flex items-center justify-center gap-2 text-lg overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),f.jsx("span",{children:e.ctaStart}),f.jsx($h,{size:20,className:"text-gaming-gold group-hover:translate-x-1 transition-transform"})]}),f.jsx("button",{className:"group bg-transparent hover:bg-white/5 text-white border border-white/10 px-8 py-4 rounded-2xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 text-lg backdrop-blur-sm",children:e.ctaCatalog})]}),f.jsx("div",{className:"absolute top-1/2 left-10 hidden lg:block animate-float opacity-30",children:f.jsx(dw,{size:80,className:"text-gaming-accent rotate-12 drop-shadow-[0_0_15px_rgba(0,224,255,0.5)]"})}),f.jsx("div",{className:"absolute top-1/3 right-10 hidden lg:block animate-float opacity-30",style:{animationDelay:"2s"},children:f.jsx(cw,{size:80,className:"text-gaming-pink -rotate-12 drop-shadow-[0_0_15px_rgba(255,73,219,0.5)]"})})]})]}),IE={ru:{heroTitle:f.jsxs(f.Fragment,{children:[",  ",f.jsx("span",{className:"text-gradient",children:" "})]}),heroSubtitle:"     .  5 ,      .",ctaStart:" ",ctaCatalog:" ",badge:"  ",popularTitle:" ",popularSubtitle:"      ",lessons:"",cluster:"",allSubjects:" ",footerText:" 2026 Donishmand Platform. .",navCourses:"",navLibrary:"",navAbout:" ",navLogin:"",navCreator:"",errorTitle:"  ",errorSubtitle:",     . ,   ,    .",errorHome:" ",errorBack:" "},tj:{heroTitle:f.jsxs(f.Fragment,{children:[",   ",f.jsx("span",{className:"text-gradient",children:" "})]}),heroSubtitle:"     .  5 ,       .",ctaStart:" ",ctaCatalog:" ",badge:"  ",popularTitle:" ",popularSubtitle:"       ",lessons:"",cluster:"",allSubjects:" ",footerText:" 2026 Donishmand Platform. .",navCourses:"",navLibrary:"",navAbout:"  ",navLogin:" ",navCreator:"",errorTitle:"  ",errorSubtitle:"  ,       . ,   ,     .",errorHome:"  ",errorBack:" "}},vw={"tj-lang":{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:R2},lit:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:R2},math:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:dw},phys:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:cw},chem:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:aE},bio:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:xE},geo:{color:"text-gaming-gold",bg:"bg-gaming-gold/10",icon:Xm},hist:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:CE},eng:{color:"text-gaming-accent",bg:"bg-gaming-accent/10",icon:Lc},ger:{color:"text-gaming-text",bg:"bg-gaming-text/10",icon:Lc},fra:{color:"text-gaming-pink",bg:"bg-gaming-pink/10",icon:Lc},ara:{color:"text-gaming-primary",bg:"bg-gaming-primary/10",icon:Lc}},Hh={"tj-lang":{ru:" ",tj:" "},math:{ru:"",tj:""},phys:{ru:"",tj:""},chem:{ru:"",tj:""},geo:{ru:"",tj:""},hist:{ru:"",tj:""},lit:{ru:"",tj:""},bio:{ru:"",tj:""},eng:{ru:"",tj:" "},ger:{ru:"",tj:" "},fra:{ru:"",tj:" "},ara:{ru:"",tj:" "}},yw=[{id:1,titleRu:"  .",titleTj:"  ",subjects:["tj-lang","math","phys","chem"]},{id:2,titleRu:"  .",titleTj:"  ",subjects:["tj-lang","math","geo","eng","fra","ger","ara"]},{id:3,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","hist","lit","eng","fra","ger","ara"]},{id:4,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","hist","eng","fra","ger","ara"]},{id:5,titleRu:"  ",titleTj:"  ",subjects:["tj-lang","bio","chem","phys"]}],Qm=Object.keys(vw),zE=({activeClusterId:t,setActiveClusterId:e,lang:r,t:n})=>f.jsx("div",{className:"sticky top-20 z-30 transition-all mt-8",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4",children:f.jsx("div",{className:"glass-panel rounded-2xl p-2 overflow-x-auto no-scrollbar",children:f.jsxs("div",{className:"flex space-x-1 min-w-max",children:[f.jsxs("button",{onClick:()=>e(0),className:`
                px-4 py-2.5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 border
                ${t===0?"bg-gaming-card border-gaming-primary/50 text-white shadow-lg shadow-gaming-primary/10":"border-transparent text-gaming-textMuted hover:text-white hover:bg-white/5"}
              `,children:[f.jsx(yE,{size:18,className:t===0?"text-gaming-accent":""}),n.allSubjects]}),f.jsx("div",{className:"w-px h-8 bg-white/10 mx-2 self-center"}),yw.map(s=>f.jsxs("button",{onClick:()=>e(s.id),className:`
                  px-4 py-2.5 rounded-xl text-sm font-semibold transition-all flex items-center gap-2 border
                  ${t===s.id?"bg-gaming-card border-gaming-primary/50 text-white shadow-lg shadow-gaming-primary/10":"border-transparent text-gaming-textMuted hover:text-white hover:bg-white/5"}
                `,children:[f.jsx("span",{className:`
                  flex items-center justify-center w-5 h-5 rounded-md text-[10px] font-bold transition-colors
                  ${t===s.id?"bg-gaming-primary text-white":"bg-white/10 text-white/50"}
                `,children:s.id}),r==="ru"?s.titleRu:s.titleTj]},s.id))]})})})}),_o={"tj-lang":{sections:[{id:"sec1",title:"",topics:[{id:"top1",title:" ",lessons:[{id:"les1",title:"   ",type:"video"},{id:"les2",title:"",type:"text"}]},{id:"top2",title:"",lessons:[{id:"les3",title:" ",type:"video"}]}]},{id:"sec2",title:"",topics:[{id:"top3",title:"",lessons:[{id:"les4",title:" ",type:"text"}]}]}]},math:{sections:[{id:"math_sec1",title:"",topics:[{id:"math_top1",title:"",lessons:[{id:"math_les1",title:" ",type:"video"}]}]}]},chem:{sections:[{id:"chem_sec1",title:" ",titleTj:" ",topics:[{id:"chem_top1",title:"  ",titleTj:"  ",lessons:[{id:"chem_les1",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les2",title:" ",titleTj:" ",type:"text"}]},{id:"chem_top2",title:" ",titleTj:" ",lessons:[{id:"chem_les3",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les4",title:" ",titleTj:" ",type:"text"}]}]},{id:"chem_sec2",title:" ",titleTj:" ",topics:[{id:"chem_top3",title:"  ",titleTj:"  ",lessons:[{id:"chem_les5",title:"  ",titleTj:"  ",type:"video"},{id:"chem_les6",title:"  ",titleTj:"  ",type:"text"}]},{id:"chem_top4",title:"  ",titleTj:"  ",lessons:[{id:"chem_les7",title:" ",titleTj:" ",type:"video"}]}]},{id:"chem_sec3",title:" ",titleTj:" ",topics:[{id:"chem_top5",title:"  ",titleTj:"  ",lessons:[{id:"chem_les8",title:"",titleTj:"",type:"video"},{id:"chem_les9",title:"  ",titleTj:"  ",type:"text"}]}]}]}},LE=({subjectId:t,lang:e,t:r})=>{const n=vw[t],s=Hh[t][e],i=n.icon,o=_o[t],a=(o==null?void 0:o.sections.reduce((l,u)=>l+u.topics.reduce((c,d)=>c+d.lessons.length,0),0))||0;return f.jsxs(At,{to:`/subject/${t}`,className:"block group relative bg-gaming-card rounded-3xl p-6 border border-white/5 hover:border-gaming-primary/30 shadow-lg shadow-black/20 hover:shadow-gaming-primary/10 transition-all duration-500 hover:-translate-y-2 cursor-pointer overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/0 via-gaming-primary/0 to-gaming-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),f.jsxs("div",{className:"relative z-10 flex items-start justify-between mb-6",children:[f.jsx("div",{className:`w-14 h-14 rounded-2xl ${n.bg} flex items-center justify-center group-hover:scale-110 transition-transform duration-300 ring-1 ring-white/5`,children:f.jsx(i,{size:28,className:n.color})}),f.jsx("div",{className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-white/40 group-hover:bg-gaming-primary group-hover:text-white transition-all duration-300",children:f.jsx(Oi,{size:16})})]}),f.jsx("h3",{className:"relative z-10 text-xl font-bold text-white mb-2 leading-tight group-hover:text-gaming-accent transition-colors",children:s}),f.jsx("div",{className:"relative z-10 flex items-center gap-3 text-sm font-medium text-gaming-textMuted mb-4",children:f.jsxs("span",{className:"flex items-center gap-1",children:[f.jsx(SE,{size:14,className:"fill-gaming-primary text-gaming-primary"})," ",a," ",r.lessons]})}),f.jsx("div",{className:"relative z-10 w-full h-1.5 bg-white/5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink w-1/3 rounded-full"})})]})},PE=({lang:t,t:e,setLang:r,userRole:n,setUserRole:s})=>{const[i,o]=T.useState(0);let a=[],l="";if(i===0)a=Qm,l=e.allSubjects;else{const u=yw.find(c=>c.id===i);a=u?u.subjects:[],l=`${e.cluster} ${i}: ${t==="ru"?u.titleRu:u.titleTj}`}return f.jsxs("main",{className:"relative",children:[f.jsxs("div",{className:"absolute top-24 right-4 z-40 bg-black/60 backdrop-blur-md p-1.5 rounded-xl border border-white/10 flex gap-1 shadow-2xl",children:[f.jsx("button",{onClick:()=>s("student"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${n==="student"?"bg-gaming-primary text-white shadow-lg":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:t==="ru"?"":""}),f.jsx("button",{onClick:()=>s("teacher"),className:`px-3 py-1.5 rounded-lg text-xs font-bold transition-all ${n==="teacher"?"bg-gaming-pink text-white shadow-lg":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:t==="ru"?"":""})]}),f.jsx(DE,{lang:t,t:e}),f.jsx(zE,{activeClusterId:i,setActiveClusterId:o,lang:t,t:e}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 min-h-[600px] mt-10",children:[f.jsx("div",{className:"flex items-end justify-between mb-8 px-2",children:f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight drop-shadow-lg",children:l}),f.jsx("p",{className:"text-gaming-textMuted mt-2 text-lg",children:e.popularSubtitle})]})}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",children:a.map((u,c)=>f.jsx(LE,{subjectId:u,lang:t,t:e},`${i}-${u}-${c}`))})]})]})},D2=({subjectId:t,lang:e})=>{var x;const r=$s(),n=_o[t],s=((x=Hh[t])==null?void 0:x[e])||t,i=r.pathname.split("/"),o=i[i.indexOf("section")+1],a=i[i.indexOf("topic")+1],l=i[i.indexOf("lesson")+1],[u,c]=T.useState(()=>o?{[o]:!0}:{}),[d,h]=T.useState(()=>a?{[a]:!0}:{}),p=v=>{c(w=>({...w,[v]:!w[v]}))},m=(v,w)=>{w.preventDefault(),w.stopPropagation(),h(k=>({...k,[v]:!k[v]}))};if(!n)return null;const y=v=>e==="tj"&&v.titleTj?v.titleTj:v.title;return f.jsxs("aside",{className:"w-72 lg:w-80 h-full bg-gaming-card/50 backdrop-blur-xl border-r border-white/5 flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"p-4 border-b border-white/5",children:[f.jsxs(At,{to:"/",className:"flex items-center gap-2 text-gaming-textMuted hover:text-white text-sm mb-3 transition-colors",children:[f.jsx(hw,{size:14}),f.jsx("span",{children:e==="ru"?"":""})]}),f.jsxs(At,{to:`/subject/${t}`,className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary",children:f.jsx(Zg,{size:20})}),f.jsx("span",{className:"font-bold text-lg text-white truncate",children:s})]})]}),f.jsx("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1 custom-scrollbar",children:n.sections.map((v,w)=>{const k=o===v.id,E=u[v.id]||k;return f.jsxs("div",{className:"mb-1",children:[f.jsxs("button",{onClick:()=>p(v.id),className:`w-full flex items-center gap-2 p-2.5 rounded-xl text-left transition-all group ${k?"bg-gaming-primary/20 text-white":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[f.jsx("span",{className:`transition-transform ${E?"rotate-90":""}`,children:f.jsx(Oi,{size:16})}),f.jsxs("span",{className:"font-semibold text-sm truncate",children:[w+1,". ",y(v)]})]}),E&&f.jsx("div",{className:"ml-4 mt-1 space-y-0.5 border-l border-white/5 pl-3",children:v.topics.map((M,j)=>{const N=a===M.id,_=d[M.id]||N||l;return f.jsxs("div",{children:[f.jsxs(At,{to:`/subject/${t}/section/${v.id}/topic/${M.id}`,className:`w-full flex items-center gap-2 p-2 rounded-lg text-left text-sm transition-all group ${N&&!l?"bg-gaming-accent/20 text-gaming-accent":"hover:bg-white/5 text-gaming-textMuted hover:text-white"}`,children:[f.jsx("button",{onClick:L=>m(M.id,L),className:`transition-transform ${_?"rotate-90":""}`,children:f.jsx(Oi,{size:14})}),f.jsx(xn,{size:14,className:"opacity-50 shrink-0"}),f.jsxs("span",{className:"truncate",children:[w+1,".",j+1,". ",y(M)]})]}),_&&f.jsx("div",{className:"ml-5 mt-0.5 space-y-0.5 border-l border-white/5 pl-2",children:M.lessons.map((L,V)=>{const ee=l===L.id;return f.jsxs(At,{to:`/lesson/${L.id}`,className:`flex items-center gap-2 p-1.5 rounded-lg text-xs transition-all ${ee?"bg-gaming-pink/20 text-gaming-pink font-semibold":"text-gaming-textMuted hover:text-white hover:bg-white/5"}`,children:[L.type==="video"?f.jsx(mw,{size:12}):f.jsx(xn,{size:12}),f.jsxs("span",{className:"truncate",children:[V+1,". ",y(L)]})]},L.id)})})]},M.id)})})]},v.id)})})]})},Uh=({subjectId:t,lang:e,children:r})=>{const[n,s]=T.useState(!1);return f.jsxs("div",{className:"flex min-h-[calc(100vh-6rem)]",children:[f.jsx("div",{className:"hidden lg:block sticky top-24 h-[calc(100vh-6rem)]",children:f.jsx(D2,{subjectId:t,lang:e})}),n&&f.jsx("div",{className:"lg:hidden fixed inset-0 z-40 bg-black/60 backdrop-blur-sm",onClick:()=>s(!1)}),f.jsx("div",{className:`lg:hidden fixed inset-y-0 left-0 z-50 transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"-translate-x-full"}`,children:f.jsx(D2,{subjectId:t,lang:e})}),f.jsxs("main",{className:"flex-1 p-6 overflow-x-hidden",children:[f.jsx("button",{onClick:()=>s(!n),className:"lg:hidden fixed bottom-6 left-6 z-30 w-14 h-14 rounded-full bg-gaming-primary text-white flex items-center justify-center shadow-xl shadow-gaming-primary/30",children:n?f.jsx(Di,{size:24}):f.jsx(pw,{size:24})}),r]})]})},xw=t=>{try{const e=JSON.parse(localStorage.getItem(`test_history_${t}`)||"[]");if(!e||e.length===0)return null;const r=e.length,n=Math.max(...e.map(a=>a.score)),s=e.reduce((a,l)=>a+l.score,0)/r,i=Math.round(100-s),o=e[e.length-1].timestamp;return{totalAttempts:r,bestScore:n,avgErrorRate:i,avgScore:s,lastAttemptAt:o}}catch(e){return console.error("Error parsing lesson stats:",e),null}},p0=t=>{if(!t||t.length===0)return null;let e=0,r=0;if(t.forEach(i=>{const o=xw(i);o&&(e+=o.avgScore,r++)}),r===0)return null;const n=e/r,s=Math.round(100-n);return{completedLessons:r,totalLessons:t.length,avgErrorRate:s}};function Vh(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function $E(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})}const BE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class tv extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class FE extends tv{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class I2 extends tv{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class z2 extends tv{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zm||(Zm={}));class HE{constructor(e,{headers:r={},customFetch:n,region:s=Zm.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=BE(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return $E(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:a,method:l,body:u,signal:c,timeout:d}=n;let h={},{region:p}=n;p||(p=this.region);const m=new URL(`${this.url}/${r}`);p&&p!=="any"&&(h["x-region"]=p,m.searchParams.set("forceFunctionRegion",p));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(h["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(h["Content-Type"]="application/json",y=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?y=JSON.stringify(u):y=u;let x=c;d&&(o=new AbortController,i=setTimeout(()=>o.abort(),d),c?(x=o.signal,c.addEventListener("abort",()=>o.abort())):x=o.signal);const v=yield this.fetch(m.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:y,signal:x}).catch(M=>{throw new FE(M)}),w=v.headers.get("x-relay-error");if(w&&w==="true")throw new I2(v);if(!v.ok)throw new z2(v);let k=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),E;return k==="application/json"?E=yield v.json():k==="application/octet-stream"||k==="application/pdf"?E=yield v.blob():k==="text/event-stream"?E=v:k==="multipart/form-data"?E=yield v.formData():E=yield v.text(),{data:E,error:null,response:v}}catch(a){return{data:null,error:a,response:a instanceof z2||a instanceof I2?a.context:void 0}}finally{i&&clearTimeout(i)}})}}var UE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},VE=class{constructor(t){var e,r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,this.urlLengthLimit=(n=t.urlLengthLimit)!==null&&n!==void 0?n:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,a=null,l=null,u=i.status,c=i.statusText;if(i.ok){var d,h;if(r.method!=="HEAD"){var p;const v=await i.text();v===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((p=r.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?a=v:a=JSON.parse(v))}const y=(d=r.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),x=(h=i.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&x&&x.length>1&&(l=parseInt(x[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(a)&&(a.length>1?(o={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,l=null,u=406,c="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var m;const y=await i.text();try{o=JSON.parse(y),Array.isArray(o)&&i.status===404&&(a=[],o=null,u=200,c="OK")}catch{i.status===404&&y===""?(u=204,c="No Content"):o={message:y}}if(o&&r.isMaybeSingle&&(!(o==null||(m=o.details)===null||m===void 0)&&m.includes("0 rows"))&&(o=null,u=200,c="OK"),o&&r.shouldThrowOnError)throw new UE(o)}return{error:o,data:a,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(s=s.catch(i=>{var o;let a="",l="",u="";const c=i==null?void 0:i.cause;if(c){var d,h,p,m;const v=(d=c==null?void 0:c.message)!==null&&d!==void 0?d:"",w=(h=c==null?void 0:c.code)!==null&&h!==void 0?h:"";a=`${(p=i==null?void 0:i.name)!==null&&p!==void 0?p:"FetchError"}: ${i==null?void 0:i.message}`,a+=`

Caused by: ${(m=c==null?void 0:c.name)!==null&&m!==void 0?m:"Error"}: ${v}`,w&&(a+=` (${w})`),c!=null&&c.stack&&(a+=`
${c.stack}`)}else{var y;a=(y=i==null?void 0:i.stack)!==null&&y!==void 0?y:""}const x=this.url.toString().length;return(i==null?void 0:i.name)==="AbortError"||(i==null?void 0:i.code)==="ABORT_ERR"?(u="",l="Request was aborted (timeout or manual cancellation)",x>this.urlLengthLimit&&(l+=`. Note: Your request URL is ${x} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((c==null?void 0:c.name)==="HeadersOverflowError"||(c==null?void 0:c.code)==="UND_ERR_HEADERS_OVERFLOW")&&(u="",l="HTTP headers exceeded server limits (typically 16KB)",x>this.urlLengthLimit&&(l+=`. Your request URL is ${x} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:a,hint:l,code:u},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}returns(){return this}overrideTypes(){return this}},WE=class extends VE{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const i=s?`${s}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(i,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){var o;const a=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${l}"; options=${a};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const L2=new RegExp("[,()]");var ta=class extends WE{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&L2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}notIn(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&L2.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let s="";n==="plain"?s="pl":n==="phrase"?s="ph":n==="websearch"&&(s="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${s}fts${i}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}},qE=class{constructor(t,{headers:e={},schema:r,fetch:n,urlLengthLimit:s=8e3}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,e){const{head:r=!1,count:n}=e??{},s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join(""),{url:a,headers:l}=this.cloneRequestState();return a.searchParams.set("select",o),n&&l.append("Prefer",`count=${n}`),new ta({method:s,url:a,headers:l,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const s="POST",{url:i,headers:o}=this.cloneRequestState();if(e&&o.append("Prefer",`count=${e}`),r||o.append("Prefer","missing=default"),Array.isArray(t)){const a=t.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(a.length>0){const l=[...new Set(a)].map(u=>`"${u}"`);i.searchParams.set("columns",l.join(","))}}return new ta({method:s,url:i,headers:o,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:s=!0}={}){var i;const o="POST",{url:a,headers:l}=this.cloneRequestState();if(l.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&a.searchParams.set("on_conflict",e),n&&l.append("Prefer",`count=${n}`),s||l.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",c.join(","))}}return new ta({method:o,url:a,headers:l,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:e}={}){var r;const n="PATCH",{url:s,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new ta({method:n,url:s,headers:i,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var e;const r="DELETE",{url:n,headers:s}=this.cloneRequestState();return t&&s.append("Prefer",`count=${t}`),new ta({method:r,url:n,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function ju(t){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(t)}function KE(t,e){if(ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(ju(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GE(t){var e=KE(t,"string");return ju(e)=="symbol"?e:e+""}function JE(t,e,r){return(e=GE(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function P2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function $c(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P2(Object(r),!0).forEach(function(n){JE(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var YE=class bw{constructor(e,{headers:r={},schema:n,fetch:s,timeout:i,urlLengthLimit:o=8e3}={}){this.url=e,this.headers=new Headers(r),this.schemaName=n,this.urlLengthLimit=o;const a=s??globalThis.fetch;i!==void 0&&i>0?this.fetch=(l,u)=>{const c=new AbortController,d=setTimeout(()=>c.abort(),i),h=u==null?void 0:u.signal;if(h){if(h.aborted)return clearTimeout(d),a(l,u);const p=()=>{clearTimeout(d),c.abort()};return h.addEventListener("abort",p,{once:!0}),a(l,$c($c({},u),{},{signal:c.signal})).finally(()=>{clearTimeout(d),h.removeEventListener("abort",p)})}return a(l,$c($c({},u),{},{signal:c.signal})).finally(()=>clearTimeout(d))}:this.fetch=a}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new qE(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new bw(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;const c=p=>p!==null&&typeof p=="object"&&(!Array.isArray(p)||p.some(c)),d=n&&Object.values(r).some(c);d?(a="POST",u=r):n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([p,m])=>m!==void 0).map(([p,m])=>[p,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([p,m])=>{l.searchParams.append(p,m)})):(a="POST",u=r);const h=new Headers(this.headers);return d?h.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&h.set("Prefer",`count=${i}`),new ta({method:a,url:l,headers:h,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};class XE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const s=n.node,i=parseInt(s.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const QE="2.95.3",ZE=`realtime-js/${QE}`,eN="1.0.0",ww="2.0.0",$2=ww,e1=1e4,tN=1e3,rN=100;var ti;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ti||(ti={}));var Dt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Dt||(Dt={}));var Rn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Rn||(Rn={}));var t1;(function(t){t.websocket="websocket"})(t1||(t1={}));var io;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(io||(io={}));class nN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var r,n;const s=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(e,r,n){var s,i;const o=e.topic,a=(s=e.ref)!==null&&s!==void 0?s:"",l=(i=e.join_ref)!==null&&i!==void 0?i:"",u=e.payload.event,c=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(c).length===0?"":JSON.stringify(c);if(l.length>255)throw new Error(`joinRef length ${l.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+u.length+d.length,p=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(p),y=0;m.setUint8(y++,this.KINDS.userBroadcastPush),m.setUint8(y++,l.length),m.setUint8(y++,a.length),m.setUint8(y++,o.length),m.setUint8(y++,u.length),m.setUint8(y++,d.length),m.setUint8(y++,r),Array.from(l,v=>m.setUint8(y++,v.charCodeAt(0))),Array.from(a,v=>m.setUint8(y++,v.charCodeAt(0))),Array.from(o,v=>m.setUint8(y++,v.charCodeAt(0))),Array.from(u,v=>m.setUint8(y++,v.charCodeAt(0))),Array.from(d,v=>m.setUint8(y++,v.charCodeAt(0)));var x=new Uint8Array(p.byteLength+n.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(n),p.byteLength),x.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[s,i,o,a,l]=n;return r({join_ref:s,ref:i,topic:o,event:a,payload:l})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,s)}}_decodeUserBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),a=r.getUint8(4);let l=this.HEADER_LENGTH+4;const u=n.decode(e.slice(l,l+s));l=l+s;const c=n.decode(e.slice(l,l+i));l=l+i;const d=n.decode(e.slice(l,l+o));l=l+o;const h=e.slice(l,e.byteLength),p=a===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,m={type:this.BROADCAST_EVENT,event:c,payload:p};return o>0&&(m.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:m}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}class kw{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ze||(Ze={}));const B2=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=sN(o,t,e,s),i),{}):{}},sN=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?Sw(i,o):r1(o)},Sw=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return lN(e,r)}switch(t){case Ze.bool:return iN(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return oN(e);case Ze.json:case Ze.jsonb:return aN(e);case Ze.timestamp:return uN(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return r1(e);default:return r1(e)}},r1=t=>t,iN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},oN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},aN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},lN=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Sw(e,a))}return t},uN=t=>typeof t=="string"?t.replace(" ","T"):t,Tw=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class tp{constructor(e,r,n={},s=e1){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var F2;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(F2||(F2={}));class Kl{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kl.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=Kl.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Kl.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const d=i[u];if(d){const h=c.map(x=>x.presence_ref),p=d.map(x=>x.presence_ref),m=c.filter(x=>p.indexOf(x.presence_ref)<0),y=d.filter(x=>h.indexOf(x.presence_ref)<0);m.length>0&&(a[u]=m),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const d=e[a].map(p=>p.presence_ref),h=c.filter(p=>d.indexOf(p.presence_ref)<0);e[a].unshift(...h)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(d=>d.presence_ref);u=u.filter(d=>c.indexOf(d.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var H2;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(H2||(H2={}));var Gl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Gl||(Gl={}));var ys;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ys||(ys={}));class xa{constructor(e,r={config:{}},n){var s,i;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new tp(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new kw(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Kl(this),this.broadcastEndpointURL=Tw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Dt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],c=!!this.bindings[Gl.PRESENCE]&&this.bindings[Gl.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,d={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:c}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(ys.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(ys.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket._isManualToken()||this.socket.setAuth(),p===void 0){e==null||e(ys.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,v=[];for(let w=0;w<x;w++){const k=y[w],{filter:{event:E,schema:M,table:j,filter:N}}=k,_=p&&p[w];if(_&&_.event===E&&xa.isFilterValueEqual(_.schema,M)&&xa.isFilterValueEqual(_.table,j)&&xa.isFilterValueEqual(_.filter,N))v.push(Object.assign(Object.assign({},k),{id:_.id}));else{this.unsubscribe(),this.state=Dt.errored,e==null||e(ys.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(ys.SUBSCRIBED);return}}).receive("error",p=>{this.state=Dt.errored,e==null||e(ys.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ys.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Dt.joined&&e===Gl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var s;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const u=await a.json();l=u.error||u.message||l}catch{}return Promise.reject(new Error(l))}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);const l={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Dt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new tp(this,Rn.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dt.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new tp(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>rN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Rn;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,y,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,y,x,v,w,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,M=(m=p.filter)===null||m===void 0?void 0:m.event;return E&&((y=r.ids)===null||y===void 0?void 0:y.includes(E))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const E=(w=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return E==="*"||E===((k=r==null?void 0:r.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const m=h.data,{schema:y,table:x,commit_timestamp:v,type:w,errors:k}=m;h=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:v,eventType:w,new:{},old:{},errors:k}),this._getPayloadRecords(m))}p.callback(h,n)})}_isClosed(){return this.state===Dt.closed}_isJoined(){return this.state===Dt.joined}_isJoining(){return this.state===Dt.joining}_isLeaving(){return this.state===Dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&xa.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}static isFilterValueEqual(e,r){return(e??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rn.close,{},e)}_onError(e){this._on(Rn.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=B2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=B2(e.columns,e.old_record)),r}}const rp=()=>{},Bc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cN=[1e3,2e3,5e3,1e4],dN=1e4,hN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fN{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=e1,this.transport=null,this.heartbeatIntervalMs=Bc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rp,this.ref=0,this.reconnectTimer=null,this.vsn=$2,this.logger=rp,this.conn=null,this.sendBuffer=[],this.serializer=new nN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${t1.websocket}`,this.httpEndpoint=Tw(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=XE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return r==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ti.connecting:return io.Connecting;case ti.open:return io.Open;case ti.closing:return io.Closing;default:return io.Closed}}isConnected(){return this.connectionState()===io.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new xa(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(tN,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Bc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",u)}catch(c){this.log("error","error in heartbeat callback",c)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${n} ${s} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ti.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ti.open||this.conn.readyState===ti.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rn.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([hN],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r,n=!1;if(e)r=e,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{const i={access_token:r,version:ZE};r&&s.updateJoinPayload(i),s.joinedOnce&&s._isJoined()&&s._push(Rn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new kw(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,l,u,c,d,h,p;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:e1,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Bc.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:rp,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:$2,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:m=>cN[m-1]||dN,this.vsn){case eN:this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(m,y)=>y(JSON.stringify(m)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(m,y)=>y(JSON.parse(m));break;case ww:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Ru=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pN(t,e,r){const n=new URL(e,t);if(r)for(const[s,i]of Object.entries(r))i!==void 0&&n.searchParams.set(s,i);return n.toString()}async function mN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function gN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:s,body:i,headers:o}){const a=pN(t.baseUrl,n,s),l=await mN(t.auth),u=await e(a,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...l,...o},body:i?JSON.stringify(i):void 0}),c=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&c?JSON.parse(c):c;if(!u.ok){const p=d?h:void 0,m=p==null?void 0:p.error;throw new Ru((m==null?void 0:m.message)??`Request failed with status ${u.status}`,{status:u.status,icebergType:m==null?void 0:m.type,icebergCode:m==null?void 0:m.code,details:p})}return{status:u.status,headers:u.headers,data:h}}}}function Fc(t){return t.join("")}var vN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Fc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fc(t.namespace)}`}),!0}catch(e){if(e instanceof Ru&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ru&&r.status===409)return;throw r}}};function Wo(t){return t.join("")}var yN=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Wo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ru&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ru&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},xN=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=gN({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new vN(this.client,e),this.tableOps=new yN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Wh=class extends Error{constructor(t,e="storage",r,n){super(t),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function qh(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var Hc=class extends Wh{constructor(t,e,r,n="storage"){super(t,n,e,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Cw=class extends Wh{constructor(t,e,r="storage"){super(t,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const bN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),wN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},n1=t=>{if(Array.isArray(t))return t.map(r=>n1(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=n1(n)}),e},kN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function _u(t){"@babel/helpers - typeof";return _u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_u(t)}function SN(t,e){if(_u(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(_u(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function TN(t){var e=SN(t,"string");return _u(e)=="symbol"?e:e+""}function CN(t,e,r){return(e=TN(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function U2(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function we(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U2(Object(r),!0).forEach(function(n){CN(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const V2=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},EN=async(t,e,r,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const s=t,i=s.status||500;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Hc(V2(o),i,a,n))}).catch(()=>{if(n==="vectors"){const o=i+"";e(new Hc(s.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";e(new Hc(s.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";e(new Hc(s.statusText||`HTTP ${i} error`,i,o,n))}}else e(new Cw(V2(t),t,n))},NN=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||t==="HEAD"||!n?we(we({},s),r):(wN(n)?(s.headers=we({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),we(we({},s),r))};async function kl(t,e,r,n,s,i,o){return new Promise((a,l)=>{t(r,NN(e,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;if(o==="vectors"){const c=u.headers.get("content-type");if(u.headers.get("content-length")==="0"||u.status===204)return{};if(!c||!c.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>EN(u,l,n,o))})}function Ew(t="storage"){return{get:async(e,r,n,s)=>kl(e,"GET",r,n,s,void 0,t),post:async(e,r,n,s,i)=>kl(e,"POST",r,s,i,n,t),put:async(e,r,n,s,i)=>kl(e,"PUT",r,s,i,n,t),head:async(e,r,n,s)=>kl(e,"HEAD",r,we(we({},n),{},{noResolveJson:!0}),s,void 0,t),remove:async(e,r,n,s,i)=>kl(e,"DELETE",r,s,i,n,t)}}const MN=Ew("storage"),{get:Ou,post:An,put:s1,head:AN,remove:rv}=MN,Wr=Ew("vectors");var tl=class{constructor(t,e={},r,n="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.fetch=bN(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(t){var e=this;try{return{data:await t(),error:null}}catch(r){if(e.shouldThrowOnError)throw r;if(qh(r))return{data:null,error:r};throw r}}},jN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qh(e))return{data:null,error:e};throw e}}};let Nw;Nw=Symbol.toStringTag;var RN=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Nw]="BlobDownloadBuilder",this.promise=null}asStream(){return new jN(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(qh(e))return{data:null,error:e};throw e}}};const _N={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var ON=class extends tl{constructor(t,e={},r,n){super(t,e,n,"storage"),this.bucketId=r}async uploadOrUpdate(t,e,r,n){var s=this;return s.handleOperation(async()=>{let i;const o=we(we({},W2),n);let a=we(we({},s.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",s.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),l&&!i.has("metadata")&&i.append("metadata",s.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=s.toBase64(s.encodeMetadata(l))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n!=null&&n.headers&&(a=we(we({},a),n.headers));const u=s._removeEmptyFolders(e),c=s._getFinalPath(u),d=await(t=="PUT"?s1:An)(s.fetch,`${s.url}/object/${c}`,i,we({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(t,e,r){return this.uploadOrUpdate("POST",t,e,r)}async uploadToSignedUrl(t,e,r,n){var s=this;const i=s._removeEmptyFolders(t),o=s._getFinalPath(i),a=new URL(s.url+`/object/upload/sign/${o}`);return a.searchParams.set("token",e),s.handleOperation(async()=>{let l;const u=we({upsert:W2.upsert},n),c=we(we({},s.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType),{path:i,fullPath:(await s1(s.fetch,a.toString(),l,{headers:c})).Key}})}async createSignedUploadUrl(t,e){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(t);const s=we({},r.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=await An(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(r.url+i.url),a=o.searchParams.get("token");if(!a)throw new Wh("No token returned by API");return{signedUrl:o.toString(),path:t,token:a}})}async update(t,e,r){return this.uploadOrUpdate("PUT",t,e,r)}async move(t,e,r){var n=this;return n.handleOperation(async()=>await An(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers}))}async copy(t,e,r){var n=this;return n.handleOperation(async()=>({path:(await An(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(t,e,r){var n=this;return n.handleOperation(async()=>{let s=n._getFinalPath(t),i=await An(n.fetch,`${n.url}/object/sign/${s}`,we({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(t,e,r){var n=this;return n.handleOperation(async()=>{const s=await An(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s.map(o=>we(we({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(t,e,r){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=s?`?${s}`:"",o=this._getFinalPath(t),a=()=>Ou(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0},r);return new RN(a,this.shouldThrowOnError)}async info(t){var e=this;const r=e._getFinalPath(t);return e.handleOperation(async()=>n1(await Ou(e.fetch,`${e.url}/object/info/${r}`,{headers:e.headers})))}async exists(t){var e=this;const r=e._getFinalPath(t);try{return await AN(e.fetch,`${e.url}/object/${r}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(qh(n)&&n instanceof Cw){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&n.push(s);const i=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",o=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});o!==""&&n.push(o);let a=n.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}async remove(t){var e=this;return e.handleOperation(async()=>await rv(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}))}async list(t,e,r){var n=this;return n.handleOperation(async()=>{const s=we(we(we({},_N),e),{},{prefix:t||""});return await An(n.fetch,`${n.url}/object/list/${n.bucketId}`,s,{headers:n.headers},r)})}async listV2(t,e){var r=this;return r.handleOperation(async()=>{const n=we({},t);return await An(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},e)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const DN="2.95.3",lc={"X-Client-Info":`storage-js/${DN}`};var IN=class extends tl{constructor(t,e={},r,n){const s=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const i=s.href.replace(/\/$/,""),o=we(we({},lc),e);super(i,o,r,"storage")}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=e.listBucketOptionsToQueryString(t);return await Ou(e.fetch,`${e.url}/bucket${r}`,{headers:e.headers})})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Ou(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}))}async createBucket(t,e={public:!1}){var r=this;return r.handleOperation(async()=>await An(r.fetch,`${r.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async updateBucket(t,e){var r=this;return r.handleOperation(async()=>await s1(r.fetch,`${r.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(t){var e=this;return e.handleOperation(async()=>await An(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await rv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},zN=class extends tl{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=we(we({},lc),e);super(n,s,r,"storage")}async createBucket(t){var e=this;return e.handleOperation(async()=>await An(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}))}async listBuckets(t){var e=this;return e.handleOperation(async()=>{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return await Ou(e.fetch,s,{headers:e.headers})})}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await rv(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}))}from(t){var e=this;if(!kN(t))throw new Wh("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new xN({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(s,i){const o=s[i];return typeof o!="function"?o:async(...a)=>{try{return{data:await o.apply(s,a),error:null}}catch(l){if(n)throw l;return{data:null,error:l}}}}})}},LN=class extends tl{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=we(we({},lc),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createIndex(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{})}async getIndex(t,e){var r=this;return r.handleOperation(async()=>await Wr.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers}))}async listIndexes(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}))}async deleteIndex(t,e){var r=this;return r.handleOperation(async()=>await Wr.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:r.headers})||{})}},PN=class extends tl{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=we(we({},lc),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async putVectors(t){var e=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{})}async getVectors(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}))}async listVectors(t){var e=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}))}async queryVectors(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}))}async deleteVectors(t){var e=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{})}},$N=class extends tl{constructor(t,e={},r){const n=t.replace(/\/$/,""),s=we(we({},lc),{},{"Content-Type":"application/json"},e);super(n,s,r,"vectors")}async createBucket(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}async getBucket(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}))}async listBuckets(t={}){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}))}async deleteBucket(t){var e=this;return e.handleOperation(async()=>await Wr.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{})}},BN=class extends $N{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new FN(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,r=this;return e().call(r,t)}async getBucket(t){var e=()=>super.getBucket,r=this;return e().call(r,t)}async listBuckets(t={}){var e=()=>super.listBuckets,r=this;return e().call(r,t)}async deleteBucket(t){var e=()=>super.deleteBucket,r=this;return e().call(r,t)}},FN=class extends LN{constructor(t,e,r,n){super(t,e,n),this.vectorBucketName=r}async createIndex(t){var e=()=>super.createIndex,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,r=this;return e().call(r,r.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,r=this;return e().call(r,r.vectorBucketName,t)}index(t){return new HN(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},HN=class extends PN{constructor(t,e,r,n,s){super(t,e,s),this.vectorBucketName=r,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(t){var e=()=>super.getVectors,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,r=this;return e().call(r,we(we({},t),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},UN=class extends IN{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new ON(this.url,this.headers,t,this.fetch)}get vectors(){return new BN(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new zN(this.url+"/iceberg",this.headers,this.fetch)}};const Mw="2.95.3",ra=30*1e3,i1=3,np=i1*ra,VN="http://localhost:9999",WN="supabase.auth.token",qN={"X-Client-Info":`gotrue-js/${Mw}`},o1="X-Supabase-Api-Version",Aw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GN=10*60*1e3;class Du extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function he(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class JN extends Du{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function YN(t){return he(t)&&t.name==="AuthApiError"}class oo extends Du{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class Bs extends Du{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Ur extends Bs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sp(t){return he(t)&&t.name==="AuthSessionMissingError"}class qo extends Bs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Uc extends Bs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vc extends Bs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function XN(t){return he(t)&&t.name==="AuthImplicitGrantRedirectError"}class q2 extends Bs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class QN extends Bs{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class a1 extends Bs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function ip(t){return he(t)&&t.name==="AuthRetryableFetchError"}class K2 extends Bs{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class l1 extends Bs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const m0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),G2=` 	
\r=`.split(""),ZN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<G2.length;e+=1)t[G2[e].charCodeAt(0)]=-2;for(let e=0;e<m0.length;e+=1)t[m0[e].charCodeAt(0)]=e;return t})();function J2(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(m0[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(m0[n]),e.queuedBits-=6}}function jw(t,e,r){const n=ZN[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Y2(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{rM(o,n,r)};for(let o=0;o<t.length;o+=1)jw(t.charCodeAt(o),s,i);return e.join("")}function eM(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tM(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}eM(n,e)}}function rM(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Na(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)jw(t.charCodeAt(s),r,n);return new Uint8Array(e)}function nM(t){const e=[];return tM(t,r=>e.push(r)),new Uint8Array(e)}function fo(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>J2(s,r,n)),J2(null,r,n),e.join("")}function sM(t){return Math.round(Date.now()/1e3)+t}function iM(){return Symbol("auth-callback")}const Xt=()=>typeof window<"u"&&typeof document<"u",Yi={tested:!1,writable:!1},Rw=()=>{if(!Xt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yi.tested)return Yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yi.tested=!0,Yi.writable=!0}catch{Yi.tested=!0,Yi.writable=!1}return Yi.writable};function oM(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const _w=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aM=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",na=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Xi=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Yt=async(t,e)=>{await t.removeItem(e)};class Kh{constructor(){this.promise=new Kh.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Kh.promiseConstructor=Promise;function Wc(t){const e=t.split(".");if(e.length!==3)throw new l1("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!KN.test(e[n]))throw new l1("JWT not in base64url format");return{header:JSON.parse(Y2(e[0])),payload:JSON.parse(Y2(e[1])),signature:Na(e[2]),raw:{header:e[0],payload:e[1]}}}async function lM(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function uM(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function cM(t){return("0"+t.toString(16)).substr(-2)}function dM(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,cM).join("")}async function hM(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function fM(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await hM(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ko(t,e,r=!1){const n=dM();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await na(t,`${e}-code-verifier`,s);const i=await fM(n);return[i,n===i?"plain":"s256"]}const pM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mM(t){const e=t.headers.get(o1);if(!e||!e.match(pM))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gM(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vM(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const yM=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Go(t){if(!yM.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function op(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function xM(t,e){return new Proxy(t,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,s)}})}function X2(t){return JSON.parse(JSON.stringify(t))}const no=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),bM=[502,503,504];async function Q2(t){var e;if(!aM(t))throw new a1(no(t),0);if(bM.includes(t.status))throw new a1(no(t),t.status);let r;try{r=await t.json()}catch(i){throw new oo(no(i),i)}let n;const s=mM(t);if(s&&s.getTime()>=Aw["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new K2(no(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ur}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new K2(no(r),t.status,r.weak_password.reasons);throw new JN(no(r),t.status||500,n)}const wM=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function be(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[o1]||(i[o1]=Aw["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await kM(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function kM(t,e,r,n,s,i){const o=wM(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(l){throw console.error(l),new a1(no(l),0)}if(a.ok||await Q2(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Q2(l)}}function En(t){var e;let r=null;CM(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=sM(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Z2(t){const e=En(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function li(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SM(t){return{data:t,error:null}}function TM(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=Vh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function e4(t){return t}function CM(t){return t.access_token&&t.refresh_token&&t.expires_in}const ap=["global","local","others"];class EM{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=_w(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=ap[0]){if(ap.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ap.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:li})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Vh(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:TM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(he(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:li})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:e4});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Go(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:li})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Go(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:li})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Go(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:li})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Go(e.userId);try{const{data:r,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Go(e.userId),Go(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:e4});if(c.error)throw c.error;const d=await c.json(),h=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);u[`${x}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(he(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}}function t4(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const Jo={debug:!!(globalThis&&Rw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ow extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NM extends Ow{}async function MM(t,e,r){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new NM(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Jo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function AM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Dw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function jM(t){return parseInt(t,16)}function RM(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function _M(t){var e;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:l,resources:u,scheme:c,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const p=Dw(t.address),m=c?`${c}://${n}`:n,y=t.statement?`${t.statement}
`:"",x=`${m} wants you to sign in with your Ethereum account:
${p}

${y}`;let v=`URI: ${d}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),a&&(v+=`
Not Before: ${a.toISOString()}`),l&&(v+=`
Request ID: ${l}`),u){let w=`
Resources:`;for(const k of u){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);w+=`
- ${k}`}v+=w}return`${x}
${v}`}class Mt extends Error{constructor({message:e,code:r,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class g0 extends Mt{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function OM({error:t,options:e}){var r,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(Iw(o)){if(i.rp.id!==o)return new Mt({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function DM({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Iw(n)){if(r.rpId!==n)return new Mt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class IM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const zM=new IM;function LM(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,s=Vh(t,["challenge","user","excludeCredentials"]),i=Na(e).buffer,o=Object.assign(Object.assign({},r),{id:Na(r.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.excludeCredentials[l]=Object.assign(Object.assign({},u),{id:Na(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function PM(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=Vh(t,["challenge","allowCredentials"]),s=Na(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const a=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Na(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function $M(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:fo(new Uint8Array(t.response.attestationObject)),clientDataJSON:fo(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BM(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:fo(new Uint8Array(s.authenticatorData)),clientDataJSON:fo(new Uint8Array(s.clientDataJSON)),signature:fo(new Uint8Array(s.signature)),userHandle:s.userHandle?fo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Iw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function r4(){var t,e;return!!(Xt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function FM(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new g0("Browser returned unexpected credential type",e)}:{data:null,error:new g0("Empty credential response",e)}}catch(e){return{data:null,error:OM({error:e,options:t})}}}async function HM(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new g0("Browser returned unexpected credential type",e)}:{data:null,error:new g0("Empty credential response",e)}}catch(e){return{data:null,error:DM({error:e,options:t})}}}const UM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},VM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function v0(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of t)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=v0(a,o):n[i]=v0(o)}else n[i]=o}return n}function WM(t,e){return v0(UM,t,e||{})}function qM(t,e){return v0(VM,t,e||{})}class KM{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:s},i){var o;try{const{data:a,error:l}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:l};const u=s??zM.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:c}=a.webauthn.credential_options.publicKey;if(!c.name){const d=n;if(d)c.name=`${c.id}:${d}`;else{const p=(await this.client.getUser()).data.user,m=((o=p==null?void 0:p.user_metadata)===null||o===void 0?void 0:o.name)||(p==null?void 0:p.email)||(p==null?void 0:p.id)||"User";c.name=`${c.id}:${m}`}}c.displayName||(c.displayName=c.name)}switch(a.webauthn.type){case"create":{const c=WM(a.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await FM({publicKey:c,signal:u});return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const c=qM(a.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await HM(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:c,signal:u}));return d?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(a){return he(a)?{data:null,error:a}:{data:null,error:new oo("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Du("rpId is required for WebAuthn authentication")};try{if(!r4())return{data:null,error:new oo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:r,rpOrigins:n,credential_response:l.credential_response}})}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new oo("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Du("rpId is required for WebAuthn registration")};try{if(!r4())return{data:null,error:new oo("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(c=>{var d;return(d=c.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(c=>c?this.client.mfa.unenroll({factorId:c==null?void 0:c.id}):void 0),{data:null,error:a};const{data:l,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:r,rpOrigins:n,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:u}}catch(o){return he(o)?{data:null,error:o}:{data:null,error:new oo("Unexpected error in register",o)}}}}AM();const GM={url:VN,storageKey:WN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function n4(t,e,r){return await r()}const Yo={};class Iu{get jwks(){var e,r;return(r=(e=Yo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Yo[this.storageKey]=Object.assign(Object.assign({},Yo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Yo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yo[this.storageKey]=Object.assign(Object.assign({},Yo[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},GM),e);if(this.storageKey=i.storageKey,this.instanceID=(r=Iu.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Iu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Xt()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new EM({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=_w(i.fetch),this.lock=i.lock||n4,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&Xt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=MM:this.lock=n4,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new KM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Rw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=t4(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=t4(this.memoryStorage)),Xt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(a){this._debug("#broadcastChannel","error",a)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Mw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(Xt()&&(r=oM(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Xt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),XN(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return he(r)?this._returnResult({error:r}):this._returnResult({error:new oo("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:En}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:c,password:d,options:h}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ko(this.storage,this.storageKey)),i=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:c,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:m},xform:En})}else if("phone"in e){const{phone:c,password:d,options:h}=e;i=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:En})}else throw new Uc("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return await Yt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:a});const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(i){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Z2})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Z2})}else throw new Uc("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new qo;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,s,i,o,a,l,u,c,d,h;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:y,wallet:x,statement:v,options:w}=e;let k;if(Xt())if(typeof x=="object")k=x;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")k=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=x}const E=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href),M=await k.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const j=Dw(M[0]);let N=(n=w==null?void 0:w.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const L=await k.request({method:"eth_chainId"});N=jM(L)}const _={domain:E.host,address:j,statement:v,uri:E.href,version:"1",chainId:N,nonce:(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.resources};p=_M(_),m=await k.request({method:"personal_sign",params:[RM(p),j]})}try{const{data:y,error:x}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:En});if(x)throw x;if(!y||!y.session||!y.user){const v=new qo;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:x})}catch(y){if(he(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(e){var r,n,s,i,o,a,l,u,c,d,h,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:x,wallet:v,statement:w,options:k}=e;let E;if(Xt())if(typeof v=="object")E=v;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))E=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=v}const M=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const j=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),w?{statement:w}:null));let N;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")N=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)N=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)m=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${M.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(s=(n=k==null?void 0:k.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k==null?void 0:k.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((a=k==null?void 0:k.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((d=(c=k==null?void 0:k.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||d===void 0)&&d.length?["Resources",...k.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const j=await E.signMessage(new TextEncoder().encode(m),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=j}}try{const{data:x,error:v}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:fo(y)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:En});if(v)throw v;if(!x||!x.session||!x.user){const w=new qo;return this._returnResult({data:{user:null,session:null},error:w})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:v})}catch(x){if(he(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async _exchangeCodeForSession(e){const r=await Xi(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new QN;const{data:i,error:o}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:En});if(await Yt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new qo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:En}),{data:l,error:u}=a;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!l||!l.session||!l.user){const c=new qo;return this._returnResult({data:{user:null,session:null},error:c})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:u})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Ko(this.storage,this.storageKey));const{error:d}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c})}throw new Uc("You must provide either an email or phone number.")}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:En});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:u,session:l},error:null})}catch(s){if(he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var r,n,s,i,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ko(this.storage,this.storageKey));const u=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:SM});return!((i=u.data)===null||i===void 0)&&i.url&&Xt()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(a){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Ur;const{error:s}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(he(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new Uc("You must provide either an email or phone number and a type")}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Xi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<np:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Xi(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=op()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=xM(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:li}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:li})})}catch(r){if(he(r))return sp(r)&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ur;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ko(this.storage,this.storageKey));const{data:u,error:c}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:li});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ur;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Wc(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(he(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ur;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(he(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!Xt())throw new Vc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new q2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new q2("No code detected.");const{data:w,error:k}=await this._exchangeCodeForSession(e.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Vc("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;l&&(h=parseInt(l));const p=h-c;p*1e3<=ra&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const m=h-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,h,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,h,c);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:e.type},error:null})}catch(n){if(he(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Xi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i&&!sp(i))return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(YN(a)&&(a.status===404||a.status===401||a.status===403)||sp(a)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Yt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=iM(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ko(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:d,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return Xt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(he(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:a,token:l,access_token:u,nonce:c}=e,d=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:l,access_token:u,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:En}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new qo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(s){if(await Yt(this.storage,`${this.storageKey}-code-verifier`),he(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await uM(async s=>(s>0&&await lM(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:En})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ip(i)&&Date.now()+o-n<ra})}catch(n){if(this._debug(r,"error",n),he(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Xt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Xi(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Xi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await na(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:op()}else if(s&&!s.user&&!s.user){const o=await Xi(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Yt(this.storage,this.storageKey+"-user"),await na(this.storage,this.storageKey,s)):s.user=op()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<np;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${np}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ip(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Kh;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ur;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),he(i)){const o={data:null,error:i};return ip(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Yt(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await na(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=X2(s);await na(this.storage,this.storageKey,i)}else{const s=X2(r);await na(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Yt(this.storage,this.storageKey),await Yt(this.storage,this.storageKey+"-code-verifier"),await Yt(this.storage,this.storageKey+"-user"),this.userStorage&&await Yt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Xt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ra);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/ra);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ra}ms, refresh threshold is ${i1} ticks`),s<=i1&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ow)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ko(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:u}=await be(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(e.factorType==="totp"&&l.type==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$M(e.webauthn.credential_response):BM(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:LM(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:PM(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var r,n,s,i;if(e)try{const{payload:p}=Wc(e);let m=null;p.aal&&(m=p.aal);let y=m;const{data:{user:x},error:v}=await this.getUser(e);if(v)return this._returnResult({data:null,error:v});((n=(r=x==null?void 0:x.factors)===null||r===void 0?void 0:r.filter(E=>E.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(y="aal2");const k=p.amr||[];return{data:{currentLevel:m,nextLevel:y,currentAuthenticationMethods:k},error:null}}catch(p){if(he(p))return this._returnResult({data:null,error:p});throw p}const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Wc(o.access_token);let u=null;l.aal&&(u=l.aal);let c=u;((i=(s=o.user.factors)===null||s===void 0?void 0:s.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");const h=l.amr||[];return{data:{currentLevel:u,nextLevel:c,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ur});const o=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ur});const o=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&Xt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(e){if(he(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ur})})}catch(r){if(he(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+GN>s)return n;const{data:i,error:o}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Wc(n);r!=null&&r.allowExpired||gM(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const c=vM(s.alg),d=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,o,nM(`${a}.${l}`)))throw new l1("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(he(n))return this._returnResult({data:null,error:n});throw n}}}Iu.nextInstanceID={};const JM=Iu,YM="2.95.3";let jl="";typeof Deno<"u"?jl="deno":typeof document<"u"?jl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?jl="react-native":jl="node";const XM={"X-Client-Info":`supabase-js-${jl}/${YM}`},QM={headers:XM},ZM={schema:"public"},eA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tA={};function zu(t){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(t)}function rA(t,e){if(zu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(zu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nA(t){var e=rA(t,"string");return zu(e)=="symbol"?e:e+""}function sA(t,e,r){return(e=nA(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function s4(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?s4(Object(r),!0).forEach(function(n){sA(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s4(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}const iA=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oA=()=>Headers,aA=(t,e,r)=>{const n=iA(r),s=oA();return async(i,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,kt(kt({},o),{},{headers:u}))}};function lA(t){return t.endsWith("/")?t:t+"/"}function uA(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:d}=e,h={db:kt(kt({},l),s),auth:kt(kt({},u),i),realtime:kt(kt({},c),o),storage:{},global:kt(kt(kt({},d),a),{},{headers:kt(kt({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function cA(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(lA(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var dA=class extends JM{constructor(t){super(t)}},hA=class{constructor(t,e,r){var n,s;this.supabaseUrl=t,this.supabaseKey=e;const i=cA(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,a={db:ZM,realtime:tA,auth:kt(kt({},eA),{},{storageKey:o}),global:QM},l=uA(r??{},a);if(this.storageKey=(n=l.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(s=l.global.headers)!==null&&s!==void 0?s:{},l.accessToken)this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(c,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=l.auth)!==null&&u!==void 0?u:{},this.headers,l.global.fetch)}this.fetch=aA(e,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(kt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(c=>this.realtime.setAuth(c)).catch(c=>console.warn("Failed to set initial Realtime auth token:",c)),this.rest=new YE(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch,timeout:l.db.timeout,urlLengthLimit:l.db.urlLengthLimit}),this.storage=new UN(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new HE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,r;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:i,flowType:o,lock:a,debug:l,throwOnError:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dA({url:this.authUrl.href,headers:kt(kt({},h),c),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:s,flowType:o,lock:a,debug:l,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new fN(this.realtimeUrl.href,kt(kt({},t),{},{params:kt(kt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const fA=(t,e,r)=>new hA(t,e,r);function pA(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const e=t.version;if(e==null)return!1;const r=e.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}pA()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mA="https://holeptxxbmpmhlkgzpoa.supabase.co",gA="sb_publishable_p6Y6Ff7daOq0qNRUwD_aWQ_a14jcoFg",pi=fA(mA,gA),po={async saveStructure(t,e){const r=e.sections.map(s=>({id:s.id,title:s.title,titleTj:s.titleTj,topics:s.topics.map(i=>({id:i.id,title:i.title,titleTj:i.titleTj,lessons:i.lessons.map(o=>({id:o.id,title:o.title,titleTj:o.titleTj,type:o.type}))}))})),{error:n}=await pi.from("subject_syllabus").upsert({subject:t,data:{sections:r},updated_at:new Date},{onConflict:"subject"});if(n)throw console.error("  :",n),n;return!0},async getStructure(t){const{data:e,error:r}=await pi.from("subject_syllabus").select("data").eq("subject",t).single();if(r){if(r.code==="PGRST116")return null;throw r}return e.data},async saveLesson(t,e){const{error:r}=await pi.from("lessons").upsert({id:t.id,title_ru:t.title,title_tj:t.titleTj,subject:e,content_ru:t.content,is_published:!0,updated_at:new Date},{onConflict:"id"});if(r)throw r;return!0},async getLesson(t){const{data:e,error:r}=await pi.from("lessons").select("*").eq("id",t).single();if(r){if(r.code==="PGRST116")return null;throw r}return{id:e.id,title:e.title_ru,titleTj:e.title_tj,content:e.content_ru,subject:e.subject}}},vA=({lang:t,t:e,userRole:r})=>{var h;const{subjectId:n}=Lh(),s=el(),[i,o]=T.useState(null),[a,l]=T.useState(!0),u=r==="teacher",c=((h=Hh[n])==null?void 0:h[t])||n;if(T.useEffect(()=>{(async()=>{l(!0);try{const m=await po.getStructure(n);if(m)o(m);else{console.warn(`No structure found in Supabase for ${n}, using Mock data`);const y=_o[n];y&&o(y)}}catch(m){console.error("Error fetching subject data:",m)}finally{l(!1)}})()},[n]),a)return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:f.jsx(It,{size:40,className:"text-gaming-primary animate-spin"})});if(!i)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white bg-gaming-bg",children:[f.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),f.jsx("button",{onClick:()=>s("/"),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const d=p=>t==="tj"&&p.titleTj?p.titleTj:p.title;return f.jsx(Uh,{subjectId:n,lang:t,children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-4xl font-bold mb-2 text-white",children:c}),f.jsx("p",{className:"text-gaming-textMuted text-lg mb-8",children:t==="ru"?"   ":"    "}),f.jsx("div",{className:"space-y-4",children:i.sections.map((p,m)=>{const y=p.topics.flatMap(v=>v.lessons.map(w=>w.id)),x=p0(y);return f.jsxs(At,{to:`/subject/${n}/section/${p.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-primary/50 transition-all duration-300 hover:bg-gaming-card/60",children:[f.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-primary/10 flex items-center justify-center text-gaming-primary group-hover:scale-110 transition-transform",children:f.jsx(Zg,{size:24})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-primary transition-colors truncate",children:[m+1,". ",d(p)]}),f.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[p.topics.length," ",t==="ru"?"":"","  ",p.topics.reduce((v,w)=>v+w.lessons.length,0)," ",t==="ru"?"":""]})]}),x&&!u&&f.jsxs("div",{className:"mr-2 text-right",children:[f.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[x.avgErrorRate,"%"]}),f.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),f.jsx($h,{className:"text-white/20 group-hover:text-gaming-primary transition-colors shrink-0"})]},p.id)})})]})})},yA=({lang:t,t:e,userRole:r})=>{const{subjectId:n,sectionId:s}=Lh(),i=el(),o=_o[n],a=o==null?void 0:o.sections.find(d=>d.id===s),l=r==="teacher",u=(o==null?void 0:o.sections.findIndex(d=>d.id===s))??-1;if(!a)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white",children:[f.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),f.jsx("button",{onClick:()=>i(`/subject/${n}`),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const c=d=>t==="tj"&&d.titleTj?d.titleTj:d.title;return f.jsx(Uh,{subjectId:n,lang:t,children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-primary",children:[u+1,". ",c(a)]}),f.jsxs("p",{className:"text-gaming-textMuted mb-8",children:[a.topics.length," ",t==="ru"?"":""]}),(()=>{const d=a.topics.flatMap(p=>p.lessons.map(m=>m.id)),h=p0(d);return h&&!l?f.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gaming-accent/10 to-gaming-blue/10 rounded-2xl border border-white/5 flex items-center gap-6",children:[f.jsx("div",{className:"p-4 bg-gaming-accent/20 rounded-full text-gaming-accent",children:f.jsx(xn,{size:32})}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:[h.avgErrorRate,"%"]}),f.jsx("div",{className:"text-gaming-textMuted text-sm",children:t==="ru"?" %   ":" %   "}),f.jsx("div",{className:"text-xs text-gaming-textMuted mt-1 opacity-70",children:t==="ru"?`  ${h.completedLessons}  `:`  ${h.completedLessons}  `})]})]}):null})(),f.jsx("div",{className:"space-y-4",children:a.topics.map((d,h)=>{const p=d.lessons.map(y=>y.id),m=p0(p);return f.jsxs(At,{to:`/subject/${n}/section/${s}/topic/${d.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-accent/50 transition-all duration-300 hover:bg-gaming-card/60",children:[f.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-accent/10 flex items-center justify-center text-gaming-accent group-hover:scale-110 transition-transform",children:f.jsx(xn,{size:24})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-accent transition-colors truncate",children:[u+1,".",h+1,". ",c(d)]}),f.jsxs("p",{className:"text-sm text-gaming-textMuted",children:[d.lessons.length," ",t==="ru"?"":""]})]}),m&&!l&&f.jsxs("div",{className:"mr-2 text-right",children:[f.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[m.avgErrorRate,"%"]}),f.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),f.jsx($h,{className:"text-white/20 group-hover:text-gaming-accent transition-colors shrink-0"})]},d.id)})})]})})},xA=({lang:t,t:e,userRole:r})=>{const{subjectId:n,sectionId:s,topicId:i}=Lh(),o=el(),a=_o[n],l=a==null?void 0:a.sections.find(m=>m.id===s),u=r==="teacher",c=(a==null?void 0:a.sections.findIndex(m=>m.id===s))??-1,d=l==null?void 0:l.topics.find(m=>m.id===i),h=(l==null?void 0:l.topics.findIndex(m=>m.id===i))??-1;if(!d)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white",children:[f.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),f.jsx("button",{onClick:()=>o(`/subject/${n}/section/${s}`),className:"text-gaming-primary hover:underline",children:t==="ru"?" ":" "})]});const p=m=>t==="tj"&&m.titleTj?m.titleTj:m.title;return f.jsx(Uh,{subjectId:n,lang:t,children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-accent",children:[c+1,".",h+1,". ",p(d)]}),f.jsxs("p",{className:"text-gaming-textMuted mb-8",children:[d.lessons.length," ",t==="ru"?"":""]}),(()=>{const m=p0(d.lessons.map(y=>y.id));return m&&!u?f.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-gaming-primary/10 to-gaming-purple/10 rounded-2xl border border-white/5 flex items-center gap-6",children:[f.jsx("div",{className:"p-4 bg-gaming-primary/20 rounded-full text-gaming-primary",children:f.jsx(xn,{size:32})}),f.jsxs("div",{children:[f.jsxs("div",{className:"text-3xl font-bold text-white mb-1",children:[m.avgErrorRate,"%"]}),f.jsx("div",{className:"text-gaming-textMuted text-sm",children:t==="ru"?" %   ":" %   "}),f.jsx("div",{className:"text-xs text-gaming-textMuted mt-1 opacity-70",children:t==="ru"?`  ${m.completedLessons}  `:`  ${m.completedLessons}  `})]})]}):null})(),f.jsx("div",{className:"space-y-4",children:d.lessons.map((m,y)=>{const x=xw(m.id);return f.jsxs(At,{to:`/lesson/${m.id}`,className:"group flex items-center gap-4 bg-gaming-card/40 backdrop-blur-xl border border-white/5 p-5 rounded-2xl hover:border-gaming-pink/50 transition-all duration-300 hover:bg-gaming-card/60",children:[f.jsx("div",{className:"w-12 h-12 rounded-xl bg-gaming-pink/10 flex items-center justify-center text-gaming-pink group-hover:scale-110 transition-transform",children:m.type==="video"?f.jsx(mw,{size:24}):f.jsx(xn,{size:24})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("h3",{className:"text-lg font-bold group-hover:text-gaming-pink transition-colors truncate",children:[y+1,". ",p(m)]}),f.jsx("span",{className:"uppercase text-[10px] font-bold bg-white/5 border border-white/10 px-2 py-0.5 rounded text-gaming-textMuted tracking-wider",children:m.type==="video"?"":t==="ru"?"":""})]}),x&&!u&&f.jsxs("div",{className:"mr-2 text-right",children:[f.jsxs("div",{className:"text-xl font-bold text-white leading-none",children:[x.avgErrorRate,"%"]}),f.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider opacity-70",children:t==="ru"?"":""})]}),f.jsx($h,{className:"text-white/20 group-hover:text-gaming-pink transition-colors shrink-0"})]},m.id)})})]})})},bA=({slides:t,lessonId:e,lang:r,onClose:n,onSlideView:s})=>{const i=Ve.useRef(null),[o,a]=T.useState(0),[l,u]=T.useState(!1),[c,d]=T.useState(()=>{const N=localStorage.getItem(`viewed_slides_${e}`);return N?JSON.parse(N):[]}),h=t[o];T.useEffect(()=>{if(h&&!c.includes(h.id)){const N=[...c,h.id];d(N),localStorage.setItem(`viewed_slides_${e}`,JSON.stringify(N)),s&&s(h.id)}},[o,h,c,e,s]);const p=T.useCallback(N=>{N.key==="ArrowLeft"||N.key==="ArrowUp"?a(_=>_>0?_-1:_):N.key==="ArrowRight"||N.key==="ArrowDown"||N.key===" "?a(_=>_<t.length-1?_+1:_):N.key==="Escape"?l?u(!1):n():(N.key==="f"||N.key==="F")&&u(_=>!_)},[t.length,l,n]);T.useEffect(()=>(window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)),[p]),T.useEffect(()=>{const N=()=>{u(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",N),i.current&&i.current.requestFullscreen().catch(_=>{console.log("Auto-fullscreen blocked:",_)}),()=>{document.removeEventListener("fullscreenchange",N),document.fullscreenElement&&document.exitFullscreen().catch(_=>console.log("Exit fullscreen error:",_))}},[]);const[m,y]=T.useState(null),x=N=>{y(N.touches[0].clientX)},v=N=>{if(!m)return;const _=N.changedTouches[0].clientX,L=m-_;Math.abs(L)>50&&(L>0&&o<t.length-1?a(V=>V+1):L<0&&o>0&&a(V=>V-1)),y(null)},w=()=>a(N=>N>0?N-1:N),k=()=>a(N=>N<t.length-1?N+1:N),E=()=>{var N;document.fullscreenElement?document.exitFullscreen().catch(_=>console.log(_)):(N=i.current)==null||N.requestFullscreen().catch(_=>console.log(_))},M=l?"fixed inset-0 z-[100] bg-black":"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",j=l?"w-full h-full flex items-center justify-center":"w-full max-w-5xl max-h-[80vh] flex items-center justify-center";return f.jsxs("div",{ref:i,className:M,onTouchStart:x,onTouchEnd:v,children:[!l&&f.jsxs("div",{className:"absolute top-4 left-4 right-4 flex items-center justify-between z-10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"text-white/70 text-sm",children:[o+1," / ",t.length]}),c.includes(h==null?void 0:h.id)&&f.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-500/20 text-green-400 rounded-full text-xs",children:[f.jsx(Nn,{size:12}),r==="ru"?"":" "]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:E,className:"p-2 text-white/70 hover:text-white transition-colors rounded-lg hover:bg-white/10",title:"Fullscreen (F)",children:f.jsx(wE,{size:20})}),f.jsx("button",{onClick:n,className:"p-2 text-white/70 hover:text-white transition-colors rounded-lg hover:bg-white/10",children:f.jsx(Di,{size:24})})]})]}),l&&f.jsx("div",{className:"absolute top-4 right-4 z-10",children:f.jsx("button",{onClick:n,className:"p-2 text-white/50 hover:text-white transition-colors",children:f.jsx(Di,{size:24})})}),f.jsx("div",{className:j,children:h&&f.jsx("img",{src:h.imageUrl,alt:r==="tj"&&h.captionTj||h.captionRu,className:l?"max-w-full max-h-full object-contain":"max-w-full max-h-[70vh] object-contain rounded-lg"})}),!l&&h&&(h.captionRu||h.captionTj)&&f.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 max-w-2xl text-center",children:f.jsx("p",{className:"text-white/90 text-lg bg-black/50 px-6 py-3 rounded-xl backdrop-blur-sm",children:r==="tj"&&h.captionTj||h.captionRu})}),f.jsx("button",{onClick:w,disabled:o===0,className:`absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full transition-all ${o===0?"text-white/20 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"}`,children:f.jsx(Bh,{size:32})}),f.jsx("button",{onClick:k,disabled:o===t.length-1,className:`absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full transition-all ${o===t.length-1?"text-white/20 cursor-not-allowed":"text-white/70 hover:text-white hover:bg-white/10"}`,children:f.jsx(Oi,{size:32})}),f.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 flex items-center gap-2",children:t.map((N,_)=>f.jsx("button",{onClick:()=>a(_),className:`w-2 h-2 rounded-full transition-all ${_===o?"bg-white w-4":c.includes(N.id)?"bg-green-500/70 hover:bg-green-500":"bg-white/30 hover:bg-white/50"}`},N.id))}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/10",children:f.jsx("div",{className:"h-full bg-gaming-primary transition-all duration-300",style:{width:`${(o+1)/t.length*100}%`}})})]})},Ks=t=>{const e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e};class jr{constructor(e,r,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=r,this.end=n}static range(e,r){return r?!e||!e.loc||!r.loc||e.loc.lexer!==r.loc.lexer?null:new jr(e.loc.lexer,e.loc.start,r.loc.end):e&&e.loc}}class Yr{constructor(e,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=r}range(e,r){return new Yr(r,jr.range(this,e))}}class Y{constructor(e,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,s,i,o=r&&r.loc;if(o&&o.start<=o.end){var a=o.lexer.input;s=o.start,i=o.end,s===a.length?n+=" at end of input: ":n+=" at position "+(s+1)+": ";var l=a.slice(s,i).replace(/[^]/g,"$&"),u;s>15?u=""+a.slice(s-15,s):u=a.slice(0,s);var c;i+15<a.length?c=a.slice(i,i+15)+"":c=a.slice(i),n+=u+l+c}var d=new Error(n);return d.name="ParseError",d.__proto__=Y.prototype,d.position=s,s!=null&&i!=null&&(d.length=i-s),d.rawMessage=e,d}}Y.prototype.__proto__=Error.prototype;var wA=function(e,r){return e===void 0?r:e},kA=/([A-Z])/g,SA=function(e){return e.replace(kA,"-$1").toLowerCase()},TA={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},CA=/[&><"']/g;function EA(t){return String(t).replace(CA,e=>TA[e])}var zw=function t(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?t(e.body[0]):e:e.type==="font"?t(e.body):e},NA=function(e){var r=zw(e);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},MA=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},AA=function(e){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Fe={deflt:wA,escape:EA,hyphenate:SA,getBaseElem:zw,isCharacterBox:NA,protocolFromUrl:AA},_d={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:t=>"#"+t},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(t,e)=>(e.push(t),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:t=>Math.max(0,t),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:t=>Math.max(0,t),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:t=>Math.max(0,t),cli:"-e, --max-expand <n>",cliProcessor:t=>t==="Infinity"?1/0:parseInt(t)},globalGroup:{type:"boolean",cli:!1}};function jA(t){if(t.default)return t.default;var e=t.type,r=Array.isArray(e)?e[0]:e;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class nv{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var r in _d)if(_d.hasOwnProperty(r)){var n=_d[r];this[r]=e[r]!==void 0?n.processor?n.processor(e[r]):e[r]:jA(n)}}reportNonstrict(e,r,n){var s=this.strict;if(typeof s=="function"&&(s=s(e,r,n)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new Y("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+e+"]"),n);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+e+"]"))}}useStrictBehavior(e,r,n){var s=this.strict;if(typeof s=="function")try{s=s(e,r,n)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var r=Fe.protocolFromUrl(e.url);if(r==null)return!1;e.protocol=r}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Gs{constructor(e,r,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=r,this.cramped=n}sup(){return Yn[RA[this.id]]}sub(){return Yn[_A[this.id]]}fracNum(){return Yn[OA[this.id]]}fracDen(){return Yn[DA[this.id]]}cramp(){return Yn[IA[this.id]]}text(){return Yn[zA[this.id]]}isTight(){return this.size>=2}}var sv=0,y0=1,Ma=2,Es=3,Lu=4,fn=5,Ba=6,br=7,Yn=[new Gs(sv,0,!1),new Gs(y0,0,!0),new Gs(Ma,1,!1),new Gs(Es,1,!0),new Gs(Lu,2,!1),new Gs(fn,2,!0),new Gs(Ba,3,!1),new Gs(br,3,!0)],RA=[Lu,fn,Lu,fn,Ba,br,Ba,br],_A=[fn,fn,fn,fn,br,br,br,br],OA=[Ma,Es,Lu,fn,Ba,br,Ba,br],DA=[Es,Es,fn,fn,br,br,br,br],IA=[y0,y0,Es,Es,fn,fn,br,br],zA=[sv,y0,Ma,Es,Ma,Es,Ma,Es],ye={DISPLAY:Yn[sv],TEXT:Yn[Ma],SCRIPT:Yn[Lu],SCRIPTSCRIPT:Yn[Ba]},u1=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function LA(t){for(var e=0;e<u1.length;e++)for(var r=u1[e],n=0;n<r.blocks.length;n++){var s=r.blocks[n];if(t>=s[0]&&t<=s[1])return r.name}return null}var Od=[];u1.forEach(t=>t.blocks.forEach(e=>Od.push(...e)));function Lw(t){for(var e=0;e<Od.length;e+=2)if(t>=Od[e]&&t<=Od[e+1])return!0;return!1}var Xo=80,PA=function(e,r){return"M95,"+(622+e+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},$A=function(e,r){return"M263,"+(601+e+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},BA=function(e,r){return"M983 "+(10+e+r)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+r+"h400000v"+(40+e)+"h-400000z"},FA=function(e,r){return"M424,"+(2398+e+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+r+`
h400000v`+(40+e)+"h-400000z"},HA=function(e,r){return"M473,"+(2713+e+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+r+"h400000v"+(40+e)+"H1017.7z"},UA=function(e){var r=e/2;return"M400000 "+e+" H0 L"+r+" 0 l65 45 L145 "+(e-80)+" H400000z"},VA=function(e,r,n){var s=n-54-r-e;return"M702 "+(e+r)+"H400000"+(40+e)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+e)+"H742z"},WA=function(e,r,n){r=1e3*r;var s="";switch(e){case"sqrtMain":s=PA(r,Xo);break;case"sqrtSize1":s=$A(r,Xo);break;case"sqrtSize2":s=BA(r,Xo);break;case"sqrtSize3":s=FA(r,Xo);break;case"sqrtSize4":s=HA(r,Xo);break;case"sqrtTall":s=VA(r,Xo,n)}return s},qA=function(e,r){switch(e){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},i4={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},KA=function(e,r){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class uc{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),r=0;r<this.children.length;r++)e.appendChild(this.children[r].toNode());return e}toMarkup(){for(var e="",r=0;r<this.children.length;r++)e+=this.children[r].toMarkup();return e}toText(){var e=r=>r.toText();return this.children.map(e).join("")}}var Qn={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},qc={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},o4={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function GA(t,e){Qn[t]=e}function iv(t,e,r){if(!Qn[e])throw new Error("Font metrics not found for font: "+e+".");var n=t.charCodeAt(0),s=Qn[e][n];if(!s&&t[0]in o4&&(n=o4[t[0]].charCodeAt(0),s=Qn[e][n]),!s&&r==="text"&&Lw(n)&&(s=Qn[e][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var lp={};function JA(t){var e;if(t>=5?e=0:t>=3?e=1:e=2,!lp[e]){var r=lp[e]={cssEmPerMu:qc.quad[e]/18};for(var n in qc)qc.hasOwnProperty(n)&&(r[n]=qc[n][e])}return lp[e]}var YA=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],a4=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],l4=function(e,r){return r.size<2?e:YA[e-1][r.size-1]};let Pw=class so{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||so.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=a4[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return new so(r)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:l4(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:a4[e-1]})}havingBaseStyle(e){e=e||this.style.text();var r=l4(so.BASESIZE,e);return this.size===r&&this.textSize===so.BASESIZE&&this.style===e?this:this.extend({style:e,size:r})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==so.BASESIZE?["sizing","reset-size"+this.size,"size"+so.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=JA(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}};Pw.BASESIZE=6;var c1={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},XA={ex:!0,em:!0,mu:!0},$w=function(e){return typeof e!="string"&&(e=e.unit),e in c1||e in XA||e==="ex"},ft=function(e,r){var n;if(e.unit in c1)n=c1[e.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(e.unit==="mu")n=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,e.unit==="ex")n=s.fontMetrics().xHeight;else if(e.unit==="em")n=s.fontMetrics().quad;else throw new Y("Invalid unit: '"+e.unit+"'");s!==r&&(n*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(e.number*n,r.maxSize)},Q=function(e){return+e.toFixed(4)+"em"},Ii=function(e){return e.filter(r=>r).join(" ")},Bw=function(e,r,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},Fw=function(e){var r=document.createElement(e);r.className=Ii(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(r.style[n]=this.style[n]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var i=0;i<this.children.length;i++)r.appendChild(this.children[i].toNode());return r},QA=/[\s"'>/=\x00-\x1f]/,Hw=function(e){var r="<"+e;this.classes.length&&(r+=' class="'+Fe.escape(Ii(this.classes))+'"');var n="";for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Fe.hyphenate(s)+":"+this.style[s]+";");n&&(r+=' style="'+Fe.escape(n)+'"');for(var i in this.attributes)if(this.attributes.hasOwnProperty(i)){if(QA.test(i))throw new Y("Invalid attribute name '"+i+"'");r+=" "+i+'="'+Fe.escape(this.attributes[i])+'"'}r+=">";for(var o=0;o<this.children.length;o++)r+=this.children[o].toMarkup();return r+="</"+e+">",r};class cc{constructor(e,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Bw.call(this,e,n,s),this.children=r||[]}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return Fw.call(this,"span")}toMarkup(){return Hw.call(this,"span")}}class ov{constructor(e,r,n,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Bw.call(this,r,s),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,r){this.attributes[e]=r}hasClass(e){return this.classes.includes(e)}toNode(){return Fw.call(this,"a")}toMarkup(){return Hw.call(this,"a")}}class ZA{constructor(e,r,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(e.style[r]=this.style[r]);return e}toMarkup(){var e='<img src="'+Fe.escape(this.src)+'"'+(' alt="'+Fe.escape(this.alt)+'"'),r="";for(var n in this.style)this.style.hasOwnProperty(n)&&(r+=Fe.hyphenate(n)+":"+this.style[n]+";");return r&&(e+=' style="'+Fe.escape(r)+'"'),e+="'/>",e}}var ej={:"",:"",:"",:""};class bn{constructor(e,r,n,s,i,o,a,l){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=r||0,this.depth=n||0,this.italic=s||0,this.skew=i||0,this.width=o||0,this.classes=a||[],this.style=l||{},this.maxFontSize=0;var u=LA(this.text.charCodeAt(0));u&&this.classes.push(u+"_fallback"),/[]/.test(this.text)&&(this.text=ej[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=Q(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Ii(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(r=r||document.createElement("span"),r.style[n]=this.style[n]);return r?(r.appendChild(e),r):e}toMarkup(){var e=!1,r="<span";this.classes.length&&(e=!0,r+=' class="',r+=Fe.escape(Ii(this.classes)),r+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(n+=Fe.hyphenate(s)+":"+this.style[s]+";");n&&(e=!0,r+=' style="'+Fe.escape(n)+'"');var i=Fe.escape(this.text);return e?(r+=">",r+=i,r+="</span>",r):i}}class Is{constructor(e,r){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=r||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Fe.escape(this.attributes[r])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class zi{constructor(e,r){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=r}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",i4[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Fe.escape(this.alternate)+'"/>':'<path d="'+Fe.escape(i4[this.pathName])+'"/>'}}class d1{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",r=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&r.setAttribute(n,this.attributes[n]);return r}toMarkup(){var e="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="'+Fe.escape(this.attributes[r])+'"');return e+="/>",e}}function u4(t){if(t instanceof bn)return t;throw new Error("Expected symbolNode but got "+String(t)+".")}function tj(t){if(t instanceof cc)return t;throw new Error("Expected span<HtmlDomNode> but got "+String(t)+".")}var rj={bin:1,close:1,inner:1,open:1,punct:1,rel:1},nj={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},tt={math:{},text:{}};function g(t,e,r,n,s,i){tt[t][s]={font:e,group:r,replace:n},i&&n&&(tt[t][n]=tt[t][s])}var b="math",W="text",S="main",A="ams",at="accent-token",se="bin",Nr="close",rl="inner",ve="mathord",Ot="op-token",tn="open",Gh="punct",R="rel",Fs="spacing",O="textord";g(b,S,R,"","\\equiv",!0);g(b,S,R,"","\\prec",!0);g(b,S,R,"","\\succ",!0);g(b,S,R,"","\\sim",!0);g(b,S,R,"","\\perp");g(b,S,R,"","\\preceq",!0);g(b,S,R,"","\\succeq",!0);g(b,S,R,"","\\simeq",!0);g(b,S,R,"","\\mid",!0);g(b,S,R,"","\\ll",!0);g(b,S,R,"","\\gg",!0);g(b,S,R,"","\\asymp",!0);g(b,S,R,"","\\parallel");g(b,S,R,"","\\bowtie",!0);g(b,S,R,"","\\smile",!0);g(b,S,R,"","\\sqsubseteq",!0);g(b,S,R,"","\\sqsupseteq",!0);g(b,S,R,"","\\doteq",!0);g(b,S,R,"","\\frown",!0);g(b,S,R,"","\\ni",!0);g(b,S,R,"","\\propto",!0);g(b,S,R,"","\\vdash",!0);g(b,S,R,"","\\dashv",!0);g(b,S,R,"","\\owns");g(b,S,Gh,".","\\ldotp");g(b,S,Gh,"","\\cdotp");g(b,S,O,"#","\\#");g(W,S,O,"#","\\#");g(b,S,O,"&","\\&");g(W,S,O,"&","\\&");g(b,S,O,"","\\aleph",!0);g(b,S,O,"","\\forall",!0);g(b,S,O,"","\\hbar",!0);g(b,S,O,"","\\exists",!0);g(b,S,O,"","\\nabla",!0);g(b,S,O,"","\\flat",!0);g(b,S,O,"","\\ell",!0);g(b,S,O,"","\\natural",!0);g(b,S,O,"","\\clubsuit",!0);g(b,S,O,"","\\wp",!0);g(b,S,O,"","\\sharp",!0);g(b,S,O,"","\\diamondsuit",!0);g(b,S,O,"","\\Re",!0);g(b,S,O,"","\\heartsuit",!0);g(b,S,O,"","\\Im",!0);g(b,S,O,"","\\spadesuit",!0);g(b,S,O,"","\\S",!0);g(W,S,O,"","\\S");g(b,S,O,"","\\P",!0);g(W,S,O,"","\\P");g(b,S,O,"","\\dag");g(W,S,O,"","\\dag");g(W,S,O,"","\\textdagger");g(b,S,O,"","\\ddag");g(W,S,O,"","\\ddag");g(W,S,O,"","\\textdaggerdbl");g(b,S,Nr,"","\\rmoustache",!0);g(b,S,tn,"","\\lmoustache",!0);g(b,S,Nr,"","\\rgroup",!0);g(b,S,tn,"","\\lgroup",!0);g(b,S,se,"","\\mp",!0);g(b,S,se,"","\\ominus",!0);g(b,S,se,"","\\uplus",!0);g(b,S,se,"","\\sqcap",!0);g(b,S,se,"","\\ast");g(b,S,se,"","\\sqcup",!0);g(b,S,se,"","\\bigcirc",!0);g(b,S,se,"","\\bullet",!0);g(b,S,se,"","\\ddagger");g(b,S,se,"","\\wr",!0);g(b,S,se,"","\\amalg");g(b,S,se,"&","\\And");g(b,S,R,"","\\longleftarrow",!0);g(b,S,R,"","\\Leftarrow",!0);g(b,S,R,"","\\Longleftarrow",!0);g(b,S,R,"","\\longrightarrow",!0);g(b,S,R,"","\\Rightarrow",!0);g(b,S,R,"","\\Longrightarrow",!0);g(b,S,R,"","\\leftrightarrow",!0);g(b,S,R,"","\\longleftrightarrow",!0);g(b,S,R,"","\\Leftrightarrow",!0);g(b,S,R,"","\\Longleftrightarrow",!0);g(b,S,R,"","\\mapsto",!0);g(b,S,R,"","\\longmapsto",!0);g(b,S,R,"","\\nearrow",!0);g(b,S,R,"","\\hookleftarrow",!0);g(b,S,R,"","\\hookrightarrow",!0);g(b,S,R,"","\\searrow",!0);g(b,S,R,"","\\leftharpoonup",!0);g(b,S,R,"","\\rightharpoonup",!0);g(b,S,R,"","\\swarrow",!0);g(b,S,R,"","\\leftharpoondown",!0);g(b,S,R,"","\\rightharpoondown",!0);g(b,S,R,"","\\nwarrow",!0);g(b,S,R,"","\\rightleftharpoons",!0);g(b,A,R,"","\\nless",!0);g(b,A,R,"","\\@nleqslant");g(b,A,R,"","\\@nleqq");g(b,A,R,"","\\lneq",!0);g(b,A,R,"","\\lneqq",!0);g(b,A,R,"","\\@lvertneqq");g(b,A,R,"","\\lnsim",!0);g(b,A,R,"","\\lnapprox",!0);g(b,A,R,"","\\nprec",!0);g(b,A,R,"","\\npreceq",!0);g(b,A,R,"","\\precnsim",!0);g(b,A,R,"","\\precnapprox",!0);g(b,A,R,"","\\nsim",!0);g(b,A,R,"","\\@nshortmid");g(b,A,R,"","\\nmid",!0);g(b,A,R,"","\\nvdash",!0);g(b,A,R,"","\\nvDash",!0);g(b,A,R,"","\\ntriangleleft");g(b,A,R,"","\\ntrianglelefteq",!0);g(b,A,R,"","\\subsetneq",!0);g(b,A,R,"","\\@varsubsetneq");g(b,A,R,"","\\subsetneqq",!0);g(b,A,R,"","\\@varsubsetneqq");g(b,A,R,"","\\ngtr",!0);g(b,A,R,"","\\@ngeqslant");g(b,A,R,"","\\@ngeqq");g(b,A,R,"","\\gneq",!0);g(b,A,R,"","\\gneqq",!0);g(b,A,R,"","\\@gvertneqq");g(b,A,R,"","\\gnsim",!0);g(b,A,R,"","\\gnapprox",!0);g(b,A,R,"","\\nsucc",!0);g(b,A,R,"","\\nsucceq",!0);g(b,A,R,"","\\succnsim",!0);g(b,A,R,"","\\succnapprox",!0);g(b,A,R,"","\\ncong",!0);g(b,A,R,"","\\@nshortparallel");g(b,A,R,"","\\nparallel",!0);g(b,A,R,"","\\nVDash",!0);g(b,A,R,"","\\ntriangleright");g(b,A,R,"","\\ntrianglerighteq",!0);g(b,A,R,"","\\@nsupseteqq");g(b,A,R,"","\\supsetneq",!0);g(b,A,R,"","\\@varsupsetneq");g(b,A,R,"","\\supsetneqq",!0);g(b,A,R,"","\\@varsupsetneqq");g(b,A,R,"","\\nVdash",!0);g(b,A,R,"","\\precneqq",!0);g(b,A,R,"","\\succneqq",!0);g(b,A,R,"","\\@nsubseteqq");g(b,A,se,"","\\unlhd");g(b,A,se,"","\\unrhd");g(b,A,R,"","\\nleftarrow",!0);g(b,A,R,"","\\nrightarrow",!0);g(b,A,R,"","\\nLeftarrow",!0);g(b,A,R,"","\\nRightarrow",!0);g(b,A,R,"","\\nleftrightarrow",!0);g(b,A,R,"","\\nLeftrightarrow",!0);g(b,A,R,"","\\vartriangle");g(b,A,O,"","\\hslash");g(b,A,O,"","\\triangledown");g(b,A,O,"","\\lozenge");g(b,A,O,"","\\circledS");g(b,A,O,"","\\circledR");g(W,A,O,"","\\circledR");g(b,A,O,"","\\measuredangle",!0);g(b,A,O,"","\\nexists");g(b,A,O,"","\\mho");g(b,A,O,"","\\Finv",!0);g(b,A,O,"","\\Game",!0);g(b,A,O,"","\\backprime");g(b,A,O,"","\\blacktriangle");g(b,A,O,"","\\blacktriangledown");g(b,A,O,"","\\blacksquare");g(b,A,O,"","\\blacklozenge");g(b,A,O,"","\\bigstar");g(b,A,O,"","\\sphericalangle",!0);g(b,A,O,"","\\complement",!0);g(b,A,O,"","\\eth",!0);g(W,S,O,"","");g(b,A,O,"","\\diagup");g(b,A,O,"","\\diagdown");g(b,A,O,"","\\square");g(b,A,O,"","\\Box");g(b,A,O,"","\\Diamond");g(b,A,O,"","\\yen",!0);g(W,A,O,"","\\yen",!0);g(b,A,O,"","\\checkmark",!0);g(W,A,O,"","\\checkmark");g(b,A,O,"","\\beth",!0);g(b,A,O,"","\\daleth",!0);g(b,A,O,"","\\gimel",!0);g(b,A,O,"","\\digamma",!0);g(b,A,O,"","\\varkappa");g(b,A,tn,"","\\@ulcorner",!0);g(b,A,Nr,"","\\@urcorner",!0);g(b,A,tn,"","\\@llcorner",!0);g(b,A,Nr,"","\\@lrcorner",!0);g(b,A,R,"","\\leqq",!0);g(b,A,R,"","\\leqslant",!0);g(b,A,R,"","\\eqslantless",!0);g(b,A,R,"","\\lesssim",!0);g(b,A,R,"","\\lessapprox",!0);g(b,A,R,"","\\approxeq",!0);g(b,A,se,"","\\lessdot");g(b,A,R,"","\\lll",!0);g(b,A,R,"","\\lessgtr",!0);g(b,A,R,"","\\lesseqgtr",!0);g(b,A,R,"","\\lesseqqgtr",!0);g(b,A,R,"","\\doteqdot");g(b,A,R,"","\\risingdotseq",!0);g(b,A,R,"","\\fallingdotseq",!0);g(b,A,R,"","\\backsim",!0);g(b,A,R,"","\\backsimeq",!0);g(b,A,R,"","\\subseteqq",!0);g(b,A,R,"","\\Subset",!0);g(b,A,R,"","\\sqsubset",!0);g(b,A,R,"","\\preccurlyeq",!0);g(b,A,R,"","\\curlyeqprec",!0);g(b,A,R,"","\\precsim",!0);g(b,A,R,"","\\precapprox",!0);g(b,A,R,"","\\vartriangleleft");g(b,A,R,"","\\trianglelefteq");g(b,A,R,"","\\vDash",!0);g(b,A,R,"","\\Vvdash",!0);g(b,A,R,"","\\smallsmile");g(b,A,R,"","\\smallfrown");g(b,A,R,"","\\bumpeq",!0);g(b,A,R,"","\\Bumpeq",!0);g(b,A,R,"","\\geqq",!0);g(b,A,R,"","\\geqslant",!0);g(b,A,R,"","\\eqslantgtr",!0);g(b,A,R,"","\\gtrsim",!0);g(b,A,R,"","\\gtrapprox",!0);g(b,A,se,"","\\gtrdot");g(b,A,R,"","\\ggg",!0);g(b,A,R,"","\\gtrless",!0);g(b,A,R,"","\\gtreqless",!0);g(b,A,R,"","\\gtreqqless",!0);g(b,A,R,"","\\eqcirc",!0);g(b,A,R,"","\\circeq",!0);g(b,A,R,"","\\triangleq",!0);g(b,A,R,"","\\thicksim");g(b,A,R,"","\\thickapprox");g(b,A,R,"","\\supseteqq",!0);g(b,A,R,"","\\Supset",!0);g(b,A,R,"","\\sqsupset",!0);g(b,A,R,"","\\succcurlyeq",!0);g(b,A,R,"","\\curlyeqsucc",!0);g(b,A,R,"","\\succsim",!0);g(b,A,R,"","\\succapprox",!0);g(b,A,R,"","\\vartriangleright");g(b,A,R,"","\\trianglerighteq");g(b,A,R,"","\\Vdash",!0);g(b,A,R,"","\\shortmid");g(b,A,R,"","\\shortparallel");g(b,A,R,"","\\between",!0);g(b,A,R,"","\\pitchfork",!0);g(b,A,R,"","\\varpropto");g(b,A,R,"","\\blacktriangleleft");g(b,A,R,"","\\therefore",!0);g(b,A,R,"","\\backepsilon");g(b,A,R,"","\\blacktriangleright");g(b,A,R,"","\\because",!0);g(b,A,R,"","\\llless");g(b,A,R,"","\\gggtr");g(b,A,se,"","\\lhd");g(b,A,se,"","\\rhd");g(b,A,R,"","\\eqsim",!0);g(b,S,R,"","\\Join");g(b,A,R,"","\\Doteq",!0);g(b,A,se,"","\\dotplus",!0);g(b,A,se,"","\\smallsetminus");g(b,A,se,"","\\Cap",!0);g(b,A,se,"","\\Cup",!0);g(b,A,se,"","\\doublebarwedge",!0);g(b,A,se,"","\\boxminus",!0);g(b,A,se,"","\\boxplus",!0);g(b,A,se,"","\\divideontimes",!0);g(b,A,se,"","\\ltimes",!0);g(b,A,se,"","\\rtimes",!0);g(b,A,se,"","\\leftthreetimes",!0);g(b,A,se,"","\\rightthreetimes",!0);g(b,A,se,"","\\curlywedge",!0);g(b,A,se,"","\\curlyvee",!0);g(b,A,se,"","\\circleddash",!0);g(b,A,se,"","\\circledast",!0);g(b,A,se,"","\\centerdot");g(b,A,se,"","\\intercal",!0);g(b,A,se,"","\\doublecap");g(b,A,se,"","\\doublecup");g(b,A,se,"","\\boxtimes",!0);g(b,A,R,"","\\dashrightarrow",!0);g(b,A,R,"","\\dashleftarrow",!0);g(b,A,R,"","\\leftleftarrows",!0);g(b,A,R,"","\\leftrightarrows",!0);g(b,A,R,"","\\Lleftarrow",!0);g(b,A,R,"","\\twoheadleftarrow",!0);g(b,A,R,"","\\leftarrowtail",!0);g(b,A,R,"","\\looparrowleft",!0);g(b,A,R,"","\\leftrightharpoons",!0);g(b,A,R,"","\\curvearrowleft",!0);g(b,A,R,"","\\circlearrowleft",!0);g(b,A,R,"","\\Lsh",!0);g(b,A,R,"","\\upuparrows",!0);g(b,A,R,"","\\upharpoonleft",!0);g(b,A,R,"","\\downharpoonleft",!0);g(b,S,R,"","\\origof",!0);g(b,S,R,"","\\imageof",!0);g(b,A,R,"","\\multimap",!0);g(b,A,R,"","\\leftrightsquigarrow",!0);g(b,A,R,"","\\rightrightarrows",!0);g(b,A,R,"","\\rightleftarrows",!0);g(b,A,R,"","\\twoheadrightarrow",!0);g(b,A,R,"","\\rightarrowtail",!0);g(b,A,R,"","\\looparrowright",!0);g(b,A,R,"","\\curvearrowright",!0);g(b,A,R,"","\\circlearrowright",!0);g(b,A,R,"","\\Rsh",!0);g(b,A,R,"","\\downdownarrows",!0);g(b,A,R,"","\\upharpoonright",!0);g(b,A,R,"","\\downharpoonright",!0);g(b,A,R,"","\\rightsquigarrow",!0);g(b,A,R,"","\\leadsto");g(b,A,R,"","\\Rrightarrow",!0);g(b,A,R,"","\\restriction");g(b,S,O,"","`");g(b,S,O,"$","\\$");g(W,S,O,"$","\\$");g(W,S,O,"$","\\textdollar");g(b,S,O,"%","\\%");g(W,S,O,"%","\\%");g(b,S,O,"_","\\_");g(W,S,O,"_","\\_");g(W,S,O,"_","\\textunderscore");g(b,S,O,"","\\angle",!0);g(b,S,O,"","\\infty",!0);g(b,S,O,"","\\prime");g(b,S,O,"","\\triangle");g(b,S,O,"","\\Gamma",!0);g(b,S,O,"","\\Delta",!0);g(b,S,O,"","\\Theta",!0);g(b,S,O,"","\\Lambda",!0);g(b,S,O,"","\\Xi",!0);g(b,S,O,"","\\Pi",!0);g(b,S,O,"","\\Sigma",!0);g(b,S,O,"","\\Upsilon",!0);g(b,S,O,"","\\Phi",!0);g(b,S,O,"","\\Psi",!0);g(b,S,O,"","\\Omega",!0);g(b,S,O,"A","");g(b,S,O,"B","");g(b,S,O,"E","");g(b,S,O,"Z","");g(b,S,O,"H","");g(b,S,O,"I","");g(b,S,O,"K","");g(b,S,O,"M","");g(b,S,O,"N","");g(b,S,O,"O","");g(b,S,O,"P","");g(b,S,O,"T","");g(b,S,O,"X","");g(b,S,O,"","\\neg",!0);g(b,S,O,"","\\lnot");g(b,S,O,"","\\top");g(b,S,O,"","\\bot");g(b,S,O,"","\\emptyset");g(b,A,O,"","\\varnothing");g(b,S,ve,"","\\alpha",!0);g(b,S,ve,"","\\beta",!0);g(b,S,ve,"","\\gamma",!0);g(b,S,ve,"","\\delta",!0);g(b,S,ve,"","\\epsilon",!0);g(b,S,ve,"","\\zeta",!0);g(b,S,ve,"","\\eta",!0);g(b,S,ve,"","\\theta",!0);g(b,S,ve,"","\\iota",!0);g(b,S,ve,"","\\kappa",!0);g(b,S,ve,"","\\lambda",!0);g(b,S,ve,"","\\mu",!0);g(b,S,ve,"","\\nu",!0);g(b,S,ve,"","\\xi",!0);g(b,S,ve,"","\\omicron",!0);g(b,S,ve,"","\\pi",!0);g(b,S,ve,"","\\rho",!0);g(b,S,ve,"","\\sigma",!0);g(b,S,ve,"","\\tau",!0);g(b,S,ve,"","\\upsilon",!0);g(b,S,ve,"","\\phi",!0);g(b,S,ve,"","\\chi",!0);g(b,S,ve,"","\\psi",!0);g(b,S,ve,"","\\omega",!0);g(b,S,ve,"","\\varepsilon",!0);g(b,S,ve,"","\\vartheta",!0);g(b,S,ve,"","\\varpi",!0);g(b,S,ve,"","\\varrho",!0);g(b,S,ve,"","\\varsigma",!0);g(b,S,ve,"","\\varphi",!0);g(b,S,se,"","*",!0);g(b,S,se,"+","+");g(b,S,se,"","-",!0);g(b,S,se,"","\\cdot",!0);g(b,S,se,"","\\circ",!0);g(b,S,se,"","\\div",!0);g(b,S,se,"","\\pm",!0);g(b,S,se,"","\\times",!0);g(b,S,se,"","\\cap",!0);g(b,S,se,"","\\cup",!0);g(b,S,se,"","\\setminus",!0);g(b,S,se,"","\\land");g(b,S,se,"","\\lor");g(b,S,se,"","\\wedge",!0);g(b,S,se,"","\\vee",!0);g(b,S,O,"","\\surd");g(b,S,tn,"","\\langle",!0);g(b,S,tn,"","\\lvert");g(b,S,tn,"","\\lVert");g(b,S,Nr,"?","?");g(b,S,Nr,"!","!");g(b,S,Nr,"","\\rangle",!0);g(b,S,Nr,"","\\rvert");g(b,S,Nr,"","\\rVert");g(b,S,R,"=","=");g(b,S,R,":",":");g(b,S,R,"","\\approx",!0);g(b,S,R,"","\\cong",!0);g(b,S,R,"","\\ge");g(b,S,R,"","\\geq",!0);g(b,S,R,"","\\gets");g(b,S,R,">","\\gt",!0);g(b,S,R,"","\\in",!0);g(b,S,R,"","\\@not");g(b,S,R,"","\\subset",!0);g(b,S,R,"","\\supset",!0);g(b,S,R,"","\\subseteq",!0);g(b,S,R,"","\\supseteq",!0);g(b,A,R,"","\\nsubseteq",!0);g(b,A,R,"","\\nsupseteq",!0);g(b,S,R,"","\\models");g(b,S,R,"","\\leftarrow",!0);g(b,S,R,"","\\le");g(b,S,R,"","\\leq",!0);g(b,S,R,"<","\\lt",!0);g(b,S,R,"","\\rightarrow",!0);g(b,S,R,"","\\to");g(b,A,R,"","\\ngeq",!0);g(b,A,R,"","\\nleq",!0);g(b,S,Fs,"","\\ ");g(b,S,Fs,"","\\space");g(b,S,Fs,"","\\nobreakspace");g(W,S,Fs,"","\\ ");g(W,S,Fs,""," ");g(W,S,Fs,"","\\space");g(W,S,Fs,"","\\nobreakspace");g(b,S,Fs,null,"\\nobreak");g(b,S,Fs,null,"\\allowbreak");g(b,S,Gh,",",",");g(b,S,Gh,";",";");g(b,A,se,"","\\barwedge",!0);g(b,A,se,"","\\veebar",!0);g(b,S,se,"","\\odot",!0);g(b,S,se,"","\\oplus",!0);g(b,S,se,"","\\otimes",!0);g(b,S,O,"","\\partial",!0);g(b,S,se,"","\\oslash",!0);g(b,A,se,"","\\circledcirc",!0);g(b,A,se,"","\\boxdot",!0);g(b,S,se,"","\\bigtriangleup");g(b,S,se,"","\\bigtriangledown");g(b,S,se,"","\\dagger");g(b,S,se,"","\\diamond");g(b,S,se,"","\\star");g(b,S,se,"","\\triangleleft");g(b,S,se,"","\\triangleright");g(b,S,tn,"{","\\{");g(W,S,O,"{","\\{");g(W,S,O,"{","\\textbraceleft");g(b,S,Nr,"}","\\}");g(W,S,O,"}","\\}");g(W,S,O,"}","\\textbraceright");g(b,S,tn,"{","\\lbrace");g(b,S,Nr,"}","\\rbrace");g(b,S,tn,"[","\\lbrack",!0);g(W,S,O,"[","\\lbrack",!0);g(b,S,Nr,"]","\\rbrack",!0);g(W,S,O,"]","\\rbrack",!0);g(b,S,tn,"(","\\lparen",!0);g(b,S,Nr,")","\\rparen",!0);g(W,S,O,"<","\\textless",!0);g(W,S,O,">","\\textgreater",!0);g(b,S,tn,"","\\lfloor",!0);g(b,S,Nr,"","\\rfloor",!0);g(b,S,tn,"","\\lceil",!0);g(b,S,Nr,"","\\rceil",!0);g(b,S,O,"\\","\\backslash");g(b,S,O,"","|");g(b,S,O,"","\\vert");g(W,S,O,"|","\\textbar",!0);g(b,S,O,"","\\|");g(b,S,O,"","\\Vert");g(W,S,O,"","\\textbardbl");g(W,S,O,"~","\\textasciitilde");g(W,S,O,"\\","\\textbackslash");g(W,S,O,"^","\\textasciicircum");g(b,S,R,"","\\uparrow",!0);g(b,S,R,"","\\Uparrow",!0);g(b,S,R,"","\\downarrow",!0);g(b,S,R,"","\\Downarrow",!0);g(b,S,R,"","\\updownarrow",!0);g(b,S,R,"","\\Updownarrow",!0);g(b,S,Ot,"","\\coprod");g(b,S,Ot,"","\\bigvee");g(b,S,Ot,"","\\bigwedge");g(b,S,Ot,"","\\biguplus");g(b,S,Ot,"","\\bigcap");g(b,S,Ot,"","\\bigcup");g(b,S,Ot,"","\\int");g(b,S,Ot,"","\\intop");g(b,S,Ot,"","\\iint");g(b,S,Ot,"","\\iiint");g(b,S,Ot,"","\\prod");g(b,S,Ot,"","\\sum");g(b,S,Ot,"","\\bigotimes");g(b,S,Ot,"","\\bigoplus");g(b,S,Ot,"","\\bigodot");g(b,S,Ot,"","\\oint");g(b,S,Ot,"","\\oiint");g(b,S,Ot,"","\\oiiint");g(b,S,Ot,"","\\bigsqcup");g(b,S,Ot,"","\\smallint");g(W,S,rl,"","\\textellipsis");g(b,S,rl,"","\\mathellipsis");g(W,S,rl,"","\\ldots",!0);g(b,S,rl,"","\\ldots",!0);g(b,S,rl,"","\\@cdots",!0);g(b,S,rl,"","\\ddots",!0);g(b,S,O,"","\\varvdots");g(W,S,O,"","\\varvdots");g(b,S,at,"","\\acute");g(b,S,at,"","\\grave");g(b,S,at,"","\\ddot");g(b,S,at,"~","\\tilde");g(b,S,at,"","\\bar");g(b,S,at,"","\\breve");g(b,S,at,"","\\check");g(b,S,at,"^","\\hat");g(b,S,at,"","\\vec");g(b,S,at,"","\\dot");g(b,S,at,"","\\mathring");g(b,S,ve,"","\\@imath");g(b,S,ve,"","\\@jmath");g(b,S,O,"","");g(b,S,O,"","");g(W,S,O,"","\\i",!0);g(W,S,O,"","\\j",!0);g(W,S,O,"","\\ss",!0);g(W,S,O,"","\\ae",!0);g(W,S,O,"","\\oe",!0);g(W,S,O,"","\\o",!0);g(W,S,O,"","\\AE",!0);g(W,S,O,"","\\OE",!0);g(W,S,O,"","\\O",!0);g(W,S,at,"","\\'");g(W,S,at,"","\\`");g(W,S,at,"","\\^");g(W,S,at,"","\\~");g(W,S,at,"","\\=");g(W,S,at,"","\\u");g(W,S,at,"","\\.");g(W,S,at,"","\\c");g(W,S,at,"","\\r");g(W,S,at,"","\\v");g(W,S,at,"",'\\"');g(W,S,at,"","\\H");g(W,S,at,"","\\textcircled");var Uw={"--":!0,"---":!0,"``":!0,"''":!0};g(W,S,O,"","--",!0);g(W,S,O,"","\\textendash");g(W,S,O,"","---",!0);g(W,S,O,"","\\textemdash");g(W,S,O,"","`",!0);g(W,S,O,"","\\textquoteleft");g(W,S,O,"","'",!0);g(W,S,O,"","\\textquoteright");g(W,S,O,"","``",!0);g(W,S,O,"","\\textquotedblleft");g(W,S,O,"","''",!0);g(W,S,O,"","\\textquotedblright");g(b,S,O,"","\\degree",!0);g(W,S,O,"","\\degree");g(W,S,O,"","\\textdegree",!0);g(b,S,O,"","\\pounds");g(b,S,O,"","\\mathsterling",!0);g(W,S,O,"","\\pounds");g(W,S,O,"","\\textsterling",!0);g(b,A,O,"","\\maltese");g(W,A,O,"","\\maltese");var c4='0123456789/@."';for(var up=0;up<c4.length;up++){var d4=c4.charAt(up);g(b,S,O,d4,d4)}var h4='0123456789!@*()-=+";:?/.,';for(var cp=0;cp<h4.length;cp++){var f4=h4.charAt(cp);g(W,S,O,f4,f4)}var x0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var dp=0;dp<x0.length;dp++){var Kc=x0.charAt(dp);g(b,S,ve,Kc,Kc),g(W,S,O,Kc,Kc)}g(b,A,O,"C","");g(W,A,O,"C","");g(b,A,O,"H","");g(W,A,O,"H","");g(b,A,O,"N","");g(W,A,O,"N","");g(b,A,O,"P","");g(W,A,O,"P","");g(b,A,O,"Q","");g(W,A,O,"Q","");g(b,A,O,"R","");g(W,A,O,"R","");g(b,A,O,"Z","");g(W,A,O,"Z","");g(b,S,ve,"h","");g(W,S,ve,"h","");var Se="";for(var yr=0;yr<x0.length;yr++){var bt=x0.charAt(yr);Se=String.fromCharCode(55349,56320+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56372+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56424+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56580+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56684+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56736+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56788+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56840+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56944+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),yr<26&&(Se=String.fromCharCode(55349,56632+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se),Se=String.fromCharCode(55349,56476+yr),g(b,S,ve,bt,Se),g(W,S,O,bt,Se))}Se="";g(b,S,ve,"k",Se);g(W,S,O,"k",Se);for(var Qi=0;Qi<10;Qi++){var Js=Qi.toString();Se=String.fromCharCode(55349,57294+Qi),g(b,S,ve,Js,Se),g(W,S,O,Js,Se),Se=String.fromCharCode(55349,57314+Qi),g(b,S,ve,Js,Se),g(W,S,O,Js,Se),Se=String.fromCharCode(55349,57324+Qi),g(b,S,ve,Js,Se),g(W,S,O,Js,Se),Se=String.fromCharCode(55349,57334+Qi),g(b,S,ve,Js,Se),g(W,S,O,Js,Se)}var h1="";for(var hp=0;hp<h1.length;hp++){var Gc=h1.charAt(hp);g(b,S,ve,Gc,Gc),g(W,S,O,Gc,Gc)}var Jc=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],p4=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],sj=function(e,r){var n=e.charCodeAt(0),s=e.charCodeAt(1),i=(n-55296)*1024+(s-56320)+65536,o=r==="math"?0:1;if(119808<=i&&i<120484){var a=Math.floor((i-119808)/26);return[Jc[a][2],Jc[a][o]]}else if(120782<=i&&i<=120831){var l=Math.floor((i-120782)/10);return[p4[l][2],p4[l][o]]}else{if(i===120485||i===120486)return[Jc[0][2],Jc[0][o]];if(120486<i&&i<120782)return["",""];throw new Y("Unsupported character: "+e)}},Jh=function(e,r,n){return tt[n][e]&&tt[n][e].replace&&(e=tt[n][e].replace),{value:e,metrics:iv(e,r,n)}},_n=function(e,r,n,s,i){var o=Jh(e,r,n),a=o.metrics;e=o.value;var l;if(a){var u=a.italic;(n==="text"||s&&s.font==="mathit")&&(u=0),l=new bn(e,a.height,a.depth,u,a.skew,a.width,i)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+r+"' and mode '"+n+"'")),l=new bn(e,0,0,0,0,0,i);if(s){l.maxFontSize=s.sizeMultiplier,s.style.isTight()&&l.classes.push("mtight");var c=s.getColor();c&&(l.style.color=c)}return l},ij=function(e,r,n,s){return s===void 0&&(s=[]),n.font==="boldsymbol"&&Jh(e,"Main-Bold",r).metrics?_n(e,"Main-Bold",r,n,s.concat(["mathbf"])):e==="\\"||tt[r][e].font==="main"?_n(e,"Main-Regular",r,n,s):_n(e,"AMS-Regular",r,n,s.concat(["amsrm"]))},oj=function(e,r,n,s,i){return i!=="textord"&&Jh(e,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},aj=function(e,r,n){var s=e.mode,i=e.text,o=["mord"],a=s==="math"||s==="text"&&r.font,l=a?r.font:r.fontFamily,u="",c="";if(i.charCodeAt(0)===55349&&([u,c]=sj(i,s)),u.length>0)return _n(i,u,s,r,o.concat(c));if(l){var d,h;if(l==="boldsymbol"){var p=oj(i,s,r,o,n);d=p.fontName,h=[p.fontClass]}else a?(d=qw[l].fontName,h=[l]):(d=Yc(l,r.fontWeight,r.fontShape),h=[l,r.fontWeight,r.fontShape]);if(Jh(i,d,s).metrics)return _n(i,d,s,r,o.concat(h));if(Uw.hasOwnProperty(i)&&d.slice(0,10)==="Typewriter"){for(var m=[],y=0;y<i.length;y++)m.push(_n(i[y],d,s,r,o.concat(h)));return Ww(m)}}if(n==="mathord")return _n(i,"Math-Italic",s,r,o.concat(["mathnormal"]));if(n==="textord"){var x=tt[s][i]&&tt[s][i].font;if(x==="ams"){var v=Yc("amsrm",r.fontWeight,r.fontShape);return _n(i,v,s,r,o.concat("amsrm",r.fontWeight,r.fontShape))}else if(x==="main"||!x){var w=Yc("textrm",r.fontWeight,r.fontShape);return _n(i,w,s,r,o.concat(r.fontWeight,r.fontShape))}else{var k=Yc(x,r.fontWeight,r.fontShape);return _n(i,k,s,r,o.concat(k,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},lj=(t,e)=>{if(Ii(t.classes)!==Ii(e.classes)||t.skew!==e.skew||t.maxFontSize!==e.maxFontSize)return!1;if(t.classes.length===1){var r=t.classes[0];if(r==="mbin"||r==="mord")return!1}for(var n in t.style)if(t.style.hasOwnProperty(n)&&t.style[n]!==e.style[n])return!1;for(var s in e.style)if(e.style.hasOwnProperty(s)&&t.style[s]!==e.style[s])return!1;return!0},uj=t=>{for(var e=0;e<t.length-1;e++){var r=t[e],n=t[e+1];r instanceof bn&&n instanceof bn&&lj(r,n)&&(r.text+=n.text,r.height=Math.max(r.height,n.height),r.depth=Math.max(r.depth,n.depth),r.italic=n.italic,t.splice(e+1,1),e--)}return t},av=function(e){for(var r=0,n=0,s=0,i=0;i<e.children.length;i++){var o=e.children[i];o.height>r&&(r=o.height),o.depth>n&&(n=o.depth),o.maxFontSize>s&&(s=o.maxFontSize)}e.height=r,e.depth=n,e.maxFontSize=s},Ar=function(e,r,n,s){var i=new cc(e,r,n,s);return av(i),i},Vw=(t,e,r,n)=>new cc(t,e,r,n),cj=function(e,r,n){var s=Ar([e],[],r);return s.height=Math.max(n||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=Q(s.height),s.maxFontSize=1,s},dj=function(e,r,n,s){var i=new ov(e,r,n,s);return av(i),i},Ww=function(e){var r=new uc(e);return av(r),r},hj=function(e,r){return e instanceof uc?Ar([],[e],r):e},fj=function(e){if(e.positionType==="individualShift"){for(var r=e.children,n=[r[0]],s=-r[0].shift-r[0].elem.depth,i=s,o=1;o<r.length;o++){var a=-r[o].shift-i-r[o].elem.depth,l=a-(r[o-1].elem.height+r[o-1].elem.depth);i=i+a,n.push({type:"kern",size:l}),n.push(r[o])}return{children:n,depth:s}}var u;if(e.positionType==="top"){for(var c=e.positionData,d=0;d<e.children.length;d++){var h=e.children[d];c-=h.type==="kern"?h.size:h.elem.height+h.elem.depth}u=c}else if(e.positionType==="bottom")u=-e.positionData;else{var p=e.children[0];if(p.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")u=-p.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")u=-p.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:u}},pj=function(e,r){for(var{children:n,depth:s}=fj(e),i=0,o=0;o<n.length;o++){var a=n[o];if(a.type==="elem"){var l=a.elem;i=Math.max(i,l.maxFontSize,l.height)}}i+=2;var u=Ar(["pstrut"],[]);u.style.height=Q(i);for(var c=[],d=s,h=s,p=s,m=0;m<n.length;m++){var y=n[m];if(y.type==="kern")p+=y.size;else{var x=y.elem,v=y.wrapperClasses||[],w=y.wrapperStyle||{},k=Ar(v,[u,x],void 0,w);k.style.top=Q(-i-p-x.depth),y.marginLeft&&(k.style.marginLeft=y.marginLeft),y.marginRight&&(k.style.marginRight=y.marginRight),c.push(k),p+=x.height+x.depth}d=Math.min(d,p),h=Math.max(h,p)}var E=Ar(["vlist"],c);E.style.height=Q(h);var M;if(d<0){var j=Ar([],[]),N=Ar(["vlist"],[j]);N.style.height=Q(-d);var _=Ar(["vlist-s"],[new bn("")]);M=[Ar(["vlist-r"],[E,_]),Ar(["vlist-r"],[N])]}else M=[Ar(["vlist-r"],[E])];var L=Ar(["vlist-t"],M);return M.length===2&&L.classes.push("vlist-t2"),L.height=h,L.depth=-d,L},mj=(t,e)=>{var r=Ar(["mspace"],[],e),n=ft(t,e);return r.style.marginRight=Q(n),r},Yc=function(e,r,n){var s="";switch(e){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=e}var i;return r==="textbf"&&n==="textit"?i="BoldItalic":r==="textbf"?i="Bold":r==="textit"?i="Italic":i="Regular",s+"-"+i},qw={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Kw={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},gj=function(e,r){var[n,s,i]=Kw[e],o=new zi(n),a=new Is([o],{width:Q(s),height:Q(i),style:"width:"+Q(s),viewBox:"0 0 "+1e3*s+" "+1e3*i,preserveAspectRatio:"xMinYMin"}),l=Vw(["overlay"],[a],r);return l.height=i,l.style.height=Q(i),l.style.width=Q(s),l},z={fontMap:qw,makeSymbol:_n,mathsym:ij,makeSpan:Ar,makeSvgSpan:Vw,makeLineSpan:cj,makeAnchor:dj,makeFragment:Ww,wrapFragment:hj,makeVList:pj,makeOrd:aj,makeGlue:mj,staticSvg:gj,svgData:Kw,tryCombineChars:uj},ct={number:3,unit:"mu"},Zi={number:4,unit:"mu"},hs={number:5,unit:"mu"},vj={mord:{mop:ct,mbin:Zi,mrel:hs,minner:ct},mop:{mord:ct,mop:ct,mrel:hs,minner:ct},mbin:{mord:Zi,mop:Zi,mopen:Zi,minner:Zi},mrel:{mord:hs,mop:hs,mopen:hs,minner:hs},mopen:{},mclose:{mop:ct,mbin:Zi,mrel:hs,minner:ct},mpunct:{mord:ct,mop:ct,mrel:hs,mopen:ct,mclose:ct,mpunct:ct,minner:ct},minner:{mord:ct,mop:ct,mbin:Zi,mrel:hs,mopen:ct,mpunct:ct,minner:ct}},yj={mord:{mop:ct},mop:{mord:ct,mop:ct},mbin:{},mrel:{},mopen:{},mclose:{mop:ct},mpunct:{},minner:{mop:ct}},Gw={},b0={},w0={};function te(t){for(var{type:e,names:r,props:n,handler:s,htmlBuilder:i,mathmlBuilder:o}=t,a={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:s},l=0;l<r.length;++l)Gw[r[l]]=a;e&&(i&&(b0[e]=i),o&&(w0[e]=o))}function Bo(t){var{type:e,htmlBuilder:r,mathmlBuilder:n}=t;te({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:n})}var k0=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},Et=function(e){return e.type==="ordgroup"?e.body:[e]},zs=z.makeSpan,xj=["leftmost","mbin","mopen","mrel","mop","mpunct"],bj=["rightmost","mrel","mclose","mpunct"],wj={display:ye.DISPLAY,text:ye.TEXT,script:ye.SCRIPT,scriptscript:ye.SCRIPTSCRIPT},kj={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},$t=function(e,r,n,s){s===void 0&&(s=[null,null]);for(var i=[],o=0;o<e.length;o++){var a=Be(e[o],r);if(a instanceof uc){var l=a.children;i.push(...l)}else i.push(a)}if(z.tryCombineChars(i),!n)return i;var u=r;if(e.length===1){var c=e[0];c.type==="sizing"?u=r.havingSize(c.size):c.type==="styling"&&(u=r.havingStyle(wj[c.style]))}var d=zs([s[0]||"leftmost"],[],r),h=zs([s[1]||"rightmost"],[],r),p=n==="root";return m4(i,(m,y)=>{var x=y.classes[0],v=m.classes[0];x==="mbin"&&bj.includes(v)?y.classes[0]="mord":v==="mbin"&&xj.includes(x)&&(m.classes[0]="mord")},{node:d},h,p),m4(i,(m,y)=>{var x=f1(y),v=f1(m),w=x&&v?m.hasClass("mtight")?yj[x][v]:vj[x][v]:null;if(w)return z.makeGlue(w,u)},{node:d},h,p),i},m4=function t(e,r,n,s,i){s&&e.push(s);for(var o=0;o<e.length;o++){var a=e[o],l=Jw(a);if(l){t(l.children,r,n,null,i);continue}var u=!a.hasClass("mspace");if(u){var c=r(a,n.node);c&&(n.insertAfter?n.insertAfter(c):(e.unshift(c),o++))}u?n.node=a:i&&a.hasClass("newline")&&(n.node=zs(["leftmost"])),n.insertAfter=(d=>h=>{e.splice(d+1,0,h),o++})(o)}s&&e.pop()},Jw=function(e){return e instanceof uc||e instanceof ov||e instanceof cc&&e.hasClass("enclosing")?e:null},Sj=function t(e,r){var n=Jw(e);if(n){var s=n.children;if(s.length){if(r==="right")return t(s[s.length-1],"right");if(r==="left")return t(s[0],"left")}}return e},f1=function(e,r){return e?(r&&(e=Sj(e,r)),kj[e.classes[0]]||null):null},Pu=function(e,r){var n=["nulldelimiter"].concat(e.baseSizingClasses());return zs(r.concat(n))},Be=function(e,r,n){if(!e)return zs();if(b0[e.type]){var s=b0[e.type](e,r);if(n&&r.size!==n.size){s=zs(r.sizingClasses(n),[s],r);var i=r.sizeMultiplier/n.sizeMultiplier;s.height*=i,s.depth*=i}return s}else throw new Y("Got group of unknown type: '"+e.type+"'")};function Xc(t,e){var r=zs(["base"],t,e),n=zs(["strut"]);return n.style.height=Q(r.height+r.depth),r.depth&&(n.style.verticalAlign=Q(-r.depth)),r.children.unshift(n),r}function p1(t,e){var r=null;t.length===1&&t[0].type==="tag"&&(r=t[0].tag,t=t[0].body);var n=$t(t,e,"root"),s;n.length===2&&n[1].hasClass("tag")&&(s=n.pop());for(var i=[],o=[],a=0;a<n.length;a++)if(o.push(n[a]),n[a].hasClass("mbin")||n[a].hasClass("mrel")||n[a].hasClass("allowbreak")){for(var l=!1;a<n.length-1&&n[a+1].hasClass("mspace")&&!n[a+1].hasClass("newline");)a++,o.push(n[a]),n[a].hasClass("nobreak")&&(l=!0);l||(i.push(Xc(o,e)),o=[])}else n[a].hasClass("newline")&&(o.pop(),o.length>0&&(i.push(Xc(o,e)),o=[]),i.push(n[a]));o.length>0&&i.push(Xc(o,e));var u;r?(u=Xc($t(r,e,!0)),u.classes=["tag"],i.push(u)):s&&i.push(s);var c=zs(["katex-html"],i);if(c.setAttribute("aria-hidden","true"),u){var d=u.children[0];d.style.height=Q(c.height+c.depth),c.depth&&(d.style.verticalAlign=Q(-c.depth))}return c}function Yw(t){return new uc(t)}class qr{constructor(e,r,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=r||[],this.classes=n||[]}setAttribute(e,r){this.attributes[e]=r}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&e.setAttribute(r,this.attributes[r]);this.classes.length>0&&(e.className=Ii(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Zn&&this.children[n+1]instanceof Zn){for(var s=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Zn;)s+=this.children[++n].toText();e.appendChild(new Zn(s).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(e+=" "+r+'="',e+=Fe.escape(this.attributes[r]),e+='"');this.classes.length>0&&(e+=' class ="'+Fe.escape(Ii(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}let Zn=class{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Fe.escape(this.toText())}toText(){return this.text}};class Tj{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",Q(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Q(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var G={MathNode:qr,TextNode:Zn,SpaceNode:Tj,newDocumentFragment:Yw},wn=function(e,r,n){return tt[r][e]&&tt[r][e].replace&&e.charCodeAt(0)!==55349&&!(Uw.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=tt[r][e].replace),new G.TextNode(e)},lv=function(e){return e.length===1?e[0]:new G.MathNode("mrow",e)},uv=function(e,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var n=r.font;if(!n||n==="mathnormal")return null;var s=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var i=e.text;if(["\\imath","\\jmath"].includes(i))return null;tt[s][i]&&tt[s][i].replace&&(i=tt[s][i].replace);var o=z.fontMap[n].fontName;return iv(i,o,s)?z.fontMap[n].variant:null};function fp(t){if(!t)return!1;if(t.type==="mi"&&t.children.length===1){var e=t.children[0];return e instanceof Zn&&e.text==="."}else if(t.type==="mo"&&t.children.length===1&&t.getAttribute("separator")==="true"&&t.getAttribute("lspace")==="0em"&&t.getAttribute("rspace")==="0em"){var r=t.children[0];return r instanceof Zn&&r.text===","}else return!1}var Pr=function(e,r,n){if(e.length===1){var s=Qe(e[0],r);return n&&s instanceof qr&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var i=[],o,a=0;a<e.length;a++){var l=Qe(e[a],r);if(l instanceof qr&&o instanceof qr){if(l.type==="mtext"&&o.type==="mtext"&&l.getAttribute("mathvariant")===o.getAttribute("mathvariant")){o.children.push(...l.children);continue}else if(l.type==="mn"&&o.type==="mn"){o.children.push(...l.children);continue}else if(fp(l)&&o.type==="mn"){o.children.push(...l.children);continue}else if(l.type==="mn"&&fp(o))l.children=[...o.children,...l.children],i.pop();else if((l.type==="msup"||l.type==="msub")&&l.children.length>=1&&(o.type==="mn"||fp(o))){var u=l.children[0];u instanceof qr&&u.type==="mn"&&(u.children=[...o.children,...u.children],i.pop())}else if(o.type==="mi"&&o.children.length===1){var c=o.children[0];if(c instanceof Zn&&c.text===""&&(l.type==="mo"||l.type==="mi"||l.type==="mn")){var d=l.children[0];d instanceof Zn&&d.text.length>0&&(d.text=d.text.slice(0,1)+""+d.text.slice(1),i.pop())}}}i.push(l),o=l}return i},Li=function(e,r,n){return lv(Pr(e,r,n))},Qe=function(e,r){if(!e)return new G.MathNode("mrow");if(w0[e.type]){var n=w0[e.type](e,r);return n}else throw new Y("Got group of unknown type: '"+e.type+"'")};function g4(t,e,r,n,s){var i=Pr(t,r),o;i.length===1&&i[0]instanceof qr&&["mrow","mtable"].includes(i[0].type)?o=i[0]:o=new G.MathNode("mrow",i);var a=new G.MathNode("annotation",[new G.TextNode(e)]);a.setAttribute("encoding","application/x-tex");var l=new G.MathNode("semantics",[o,a]),u=new G.MathNode("math",[l]);u.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&u.setAttribute("display","block");var c=s?"katex":"katex-mathml";return z.makeSpan([c],[u])}var Xw=function(e){return new Pw({style:e.displayMode?ye.DISPLAY:ye.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Qw=function(e,r){if(r.displayMode){var n=["katex-display"];r.leqno&&n.push("leqno"),r.fleqn&&n.push("fleqn"),e=z.makeSpan(n,[e])}return e},Cj=function(e,r,n){var s=Xw(n),i;if(n.output==="mathml")return g4(e,r,s,n.displayMode,!0);if(n.output==="html"){var o=p1(e,s);i=z.makeSpan(["katex"],[o])}else{var a=g4(e,r,s,n.displayMode,!1),l=p1(e,s);i=z.makeSpan(["katex"],[a,l])}return Qw(i,n)},Ej=function(e,r,n){var s=Xw(n),i=p1(e,s),o=z.makeSpan(["katex"],[i]);return Qw(o,n)},Nj={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},Mj=function(e){var r=new G.MathNode("mo",[new G.TextNode(Nj[e.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},Aj={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},jj=function(e){return e.type==="ordgroup"?e.body.length:1},Rj=function(e,r){function n(){var a=4e5,l=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(l)){var u=e,c=jj(u.base),d,h,p;if(c>5)l==="widehat"||l==="widecheck"?(d=420,a=2364,p=.42,h=l+"4"):(d=312,a=2340,p=.34,h="tilde4");else{var m=[1,1,2,2,3,3][c];l==="widehat"||l==="widecheck"?(a=[0,1062,2364,2364,2364][m],d=[0,239,300,360,420][m],p=[0,.24,.3,.3,.36,.42][m],h=l+m):(a=[0,600,1033,2339,2340][m],d=[0,260,286,306,312][m],p=[0,.26,.286,.3,.306,.34][m],h="tilde"+m)}var y=new zi(h),x=new Is([y],{width:"100%",height:Q(p),viewBox:"0 0 "+a+" "+d,preserveAspectRatio:"none"});return{span:z.makeSvgSpan([],[x],r),minWidth:0,height:p}}else{var v=[],w=Aj[l],[k,E,M]=w,j=M/1e3,N=k.length,_,L;if(N===1){var V=w[3];_=["hide-tail"],L=[V]}else if(N===2)_=["halfarrow-left","halfarrow-right"],L=["xMinYMin","xMaxYMin"];else if(N===3)_=["brace-left","brace-center","brace-right"],L=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+N+" children.");for(var ee=0;ee<N;ee++){var P=new zi(k[ee]),D=new Is([P],{width:"400em",height:Q(j),viewBox:"0 0 "+a+" "+M,preserveAspectRatio:L[ee]+" slice"}),B=z.makeSvgSpan([_[ee]],[D],r);if(N===1)return{span:B,minWidth:E,height:j};B.style.height=Q(j),v.push(B)}return{span:z.makeSpan(["stretchy"],v,r),minWidth:E,height:j}}}var{span:s,minWidth:i,height:o}=n();return s.height=o,s.style.height=Q(o),i>0&&(s.style.minWidth=Q(i)),s},_j=function(e,r,n,s,i){var o,a=e.height+e.depth+n+s;if(/fbox|color|angl/.test(r)){if(o=z.makeSpan(["stretchy",r],[],i),r==="fbox"){var l=i.color&&i.getColor();l&&(o.style.borderColor=l)}}else{var u=[];/^[bx]cancel$/.test(r)&&u.push(new d1({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&u.push(new d1({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var c=new Is(u,{width:"100%",height:Q(a)});o=z.makeSvgSpan([],[c],i)}return o.height=a,o.style.height=Q(a),o},Ls={encloseSpan:_j,mathMLnode:Mj,svgSpan:Rj};function Ne(t,e){if(!t||t.type!==e)throw new Error("Expected node of type "+e+", but got "+(t?"node of type "+t.type:String(t)));return t}function cv(t){var e=Yh(t);if(!e)throw new Error("Expected node of symbol group type, but got "+(t?"node of type "+t.type:String(t)));return e}function Yh(t){return t&&(t.type==="atom"||nj.hasOwnProperty(t.type))?t:null}var dv=(t,e)=>{var r,n,s;t&&t.type==="supsub"?(n=Ne(t.base,"accent"),r=n.base,t.base=r,s=tj(Be(t,e)),t.base=n):(n=Ne(t,"accent"),r=n.base);var i=Be(r,e.havingCrampedStyle()),o=n.isShifty&&Fe.isCharacterBox(r),a=0;if(o){var l=Fe.getBaseElem(r),u=Be(l,e.havingCrampedStyle());a=u4(u).skew}var c=n.label==="\\c",d=c?i.height+i.depth:Math.min(i.height,e.fontMetrics().xHeight),h;if(n.isStretchy)h=Ls.svgSpan(n,e),h=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"elem",elem:h,wrapperClasses:["svg-align"],wrapperStyle:a>0?{width:"calc(100% - "+Q(2*a)+")",marginLeft:Q(2*a)}:void 0}]},e);else{var p,m;n.label==="\\vec"?(p=z.staticSvg("vec",e),m=z.svgData.vec[1]):(p=z.makeOrd({mode:n.mode,text:n.label},e,"textord"),p=u4(p),p.italic=0,m=p.width,c&&(d+=p.depth)),h=z.makeSpan(["accent-body"],[p]);var y=n.label==="\\textcircled";y&&(h.classes.push("accent-full"),d=i.height);var x=a;y||(x-=m/2),h.style.left=Q(x),n.label==="\\textcircled"&&(h.style.top=".2em"),h=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:-d},{type:"elem",elem:h}]},e)}var v=z.makeSpan(["mord","accent"],[h],e);return s?(s.children[0]=v,s.height=Math.max(v.height,s.height),s.classes[0]="mord",s):v},Zw=(t,e)=>{var r=t.isStretchy?Ls.mathMLnode(t.label):new G.MathNode("mo",[wn(t.label,t.mode)]),n=new G.MathNode("mover",[Qe(t.base,e),r]);return n.setAttribute("accent","true"),n},Oj=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(t=>"\\"+t).join("|"));te({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(t,e)=>{var r=k0(e[0]),n=!Oj.test(t.funcName),s=!n||t.funcName==="\\widehat"||t.funcName==="\\widetilde"||t.funcName==="\\widecheck";return{type:"accent",mode:t.parser.mode,label:t.funcName,isStretchy:n,isShifty:s,base:r}},htmlBuilder:dv,mathmlBuilder:Zw});te({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(t,e)=>{var r=e[0],n=t.parser.mode;return n==="math"&&(t.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+t.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:t.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:dv,mathmlBuilder:Zw});te({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0];return{type:"accentUnder",mode:r.mode,label:n,base:s}},htmlBuilder:(t,e)=>{var r=Be(t.base,e),n=Ls.svgSpan(t,e),s=t.label==="\\utilde"?.12:0,i=z.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},e);return z.makeSpan(["mord","accentunder"],[i],e)},mathmlBuilder:(t,e)=>{var r=Ls.mathMLnode(t.label),n=new G.MathNode("munder",[Qe(t.base,e),r]);return n.setAttribute("accentunder","true"),n}});var Qc=t=>{var e=new G.MathNode("mpadded",t?[t]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};te({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n,funcName:s}=t;return{type:"xArrow",mode:n.mode,label:s,body:e[0],below:r[0]}},htmlBuilder(t,e){var r=e.style,n=e.havingStyle(r.sup()),s=z.wrapFragment(Be(t.body,n,e),e),i=t.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(i+"-arrow-pad");var o;t.below&&(n=e.havingStyle(r.sub()),o=z.wrapFragment(Be(t.below,n,e),e),o.classes.push(i+"-arrow-pad"));var a=Ls.svgSpan(t,e),l=-e.fontMetrics().axisHeight+.5*a.height,u=-e.fontMetrics().axisHeight-.5*a.height-.111;(s.depth>.25||t.label==="\\xleftequilibrium")&&(u-=s.depth);var c;if(o){var d=-e.fontMetrics().axisHeight+o.height+.5*a.height+.111;c=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:a,shift:l},{type:"elem",elem:o,shift:d}]},e)}else c=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:u},{type:"elem",elem:a,shift:l}]},e);return c.children[0].children[0].children[1].classes.push("svg-align"),z.makeSpan(["mrel","x-arrow"],[c],e)},mathmlBuilder(t,e){var r=Ls.mathMLnode(t.label);r.setAttribute("minsize",t.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(t.body){var s=Qc(Qe(t.body,e));if(t.below){var i=Qc(Qe(t.below,e));n=new G.MathNode("munderover",[r,i,s])}else n=new G.MathNode("mover",[r,s])}else if(t.below){var o=Qc(Qe(t.below,e));n=new G.MathNode("munder",[r,o])}else n=Qc(),n=new G.MathNode("mover",[r,n]);return n}});var Dj=z.makeSpan;function e6(t,e){var r=$t(t.body,e,!0);return Dj([t.mclass],r,e)}function t6(t,e){var r,n=Pr(t.body,e);return t.mclass==="minner"?r=new G.MathNode("mpadded",n):t.mclass==="mord"?t.isCharacterBox?(r=n[0],r.type="mi"):r=new G.MathNode("mi",n):(t.isCharacterBox?(r=n[0],r.type="mo"):r=new G.MathNode("mo",n),t.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):t.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):t.mclass==="mopen"||t.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):t.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}te({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(t,e){var{parser:r,funcName:n}=t,s=e[0];return{type:"mclass",mode:r.mode,mclass:"m"+n.slice(5),body:Et(s),isCharacterBox:Fe.isCharacterBox(s)}},htmlBuilder:e6,mathmlBuilder:t6});var Xh=t=>{var e=t.type==="ordgroup"&&t.body.length?t.body[0]:t;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};te({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(t,e){var{parser:r}=t;return{type:"mclass",mode:r.mode,mclass:Xh(e[0]),body:Et(e[1]),isCharacterBox:Fe.isCharacterBox(e[1])}}});te({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(t,e){var{parser:r,funcName:n}=t,s=e[1],i=e[0],o;n!=="\\stackrel"?o=Xh(s):o="mrel";var a={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:Et(s)},l={type:"supsub",mode:i.mode,base:a,sup:n==="\\underset"?null:i,sub:n==="\\underset"?i:null};return{type:"mclass",mode:r.mode,mclass:o,body:[l],isCharacterBox:Fe.isCharacterBox(l)}},htmlBuilder:e6,mathmlBuilder:t6});te({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"pmb",mode:r.mode,mclass:Xh(e[0]),body:Et(e[0])}},htmlBuilder(t,e){var r=$t(t.body,e,!0),n=z.makeSpan([t.mclass],r,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(t,e){var r=Pr(t.body,e),n=new G.MathNode("mstyle",r);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var Ij={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},v4=()=>({type:"styling",body:[],mode:"math",style:"display"}),y4=t=>t.type==="textord"&&t.text==="@",zj=(t,e)=>(t.type==="mathord"||t.type==="atom")&&t.text===e;function Lj(t,e,r){var n=Ij[t];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[e[0]],[]),i={type:"atom",text:n,mode:"math",family:"rel"},o=r.callFunction("\\Big",[i],[]),a=r.callFunction("\\\\cdright",[e[1]],[]),l={type:"ordgroup",mode:"math",body:[s,o,a]};return r.callFunction("\\\\cdparent",[l],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var u={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[u],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Pj(t){var e=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){e.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();var r=t.fetch().text;if(r==="&"||r==="\\\\")t.consume();else if(r==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new Y("Expected \\\\ or \\cr or \\end",t.nextToken)}for(var n=[],s=[n],i=0;i<e.length;i++){for(var o=e[i],a=v4(),l=0;l<o.length;l++)if(!y4(o[l]))a.body.push(o[l]);else{n.push(a),l+=1;var u=cv(o[l]).text,c=new Array(2);if(c[0]={type:"ordgroup",mode:"math",body:[]},c[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(u)>-1))if("<>AV".indexOf(u)>-1)for(var d=0;d<2;d++){for(var h=!0,p=l+1;p<o.length;p++){if(zj(o[p],u)){h=!1,l=p;break}if(y4(o[p]))throw new Y("Missing a "+u+" character to complete a CD arrow.",o[p]);c[d].body.push(o[p])}if(h)throw new Y("Missing a "+u+" character to complete a CD arrow.",o[l])}else throw new Y('Expected one of "<>AV=|." after @',o[l]);var m=Lj(u,c,t),y={type:"styling",body:[m],mode:"math",style:"display"};n.push(y),a=v4()}i%2===0?n.push(a):n.shift(),n=[],s.push(n)}t.gullet.endGroup(),t.gullet.endGroup();var x=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:x,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}te({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"cdlabel",mode:r.mode,side:n.slice(4),label:e[0]}},htmlBuilder(t,e){var r=e.havingStyle(e.style.sup()),n=z.wrapFragment(Be(t.label,r,e),e);return n.classes.push("cd-label-"+t.side),n.style.bottom=Q(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(t,e){var r=new G.MathNode("mrow",[Qe(t.label,e)]);return r=new G.MathNode("mpadded",[r]),r.setAttribute("width","0"),t.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new G.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});te({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(t,e){var{parser:r}=t;return{type:"cdlabelparent",mode:r.mode,fragment:e[0]}},htmlBuilder(t,e){var r=z.wrapFragment(Be(t.fragment,e),e);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(t,e){return new G.MathNode("mrow",[Qe(t.fragment,e)])}});te({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(t,e){for(var{parser:r}=t,n=Ne(e[0],"ordgroup"),s=n.body,i="",o=0;o<s.length;o++){var a=Ne(s[o],"textord");i+=a.text}var l=parseInt(i),u;if(isNaN(l))throw new Y("\\@char has non-numeric argument "+i);if(l<0||l>=1114111)throw new Y("\\@char with invalid code point "+i);return l<=65535?u=String.fromCharCode(l):(l-=65536,u=String.fromCharCode((l>>10)+55296,(l&1023)+56320)),{type:"textord",mode:r.mode,text:u}}});var r6=(t,e)=>{var r=$t(t.body,e.withColor(t.color),!1);return z.makeFragment(r)},n6=(t,e)=>{var r=Pr(t.body,e.withColor(t.color)),n=new G.MathNode("mstyle",r);return n.setAttribute("mathcolor",t.color),n};te({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(t,e){var{parser:r}=t,n=Ne(e[0],"color-token").color,s=e[1];return{type:"color",mode:r.mode,color:n,body:Et(s)}},htmlBuilder:r6,mathmlBuilder:n6});te({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(t,e){var{parser:r,breakOnTokenText:n}=t,s=Ne(e[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var i=r.parseExpression(!0,n);return{type:"color",mode:r.mode,color:s,body:i}},htmlBuilder:r6,mathmlBuilder:n6});te({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(t,e,r){var{parser:n}=t,s=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,i=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:i,size:s&&Ne(s,"size").value}},htmlBuilder(t,e){var r=z.makeSpan(["mspace"],[],e);return t.newLine&&(r.classes.push("newline"),t.size&&(r.style.marginTop=Q(ft(t.size,e)))),r},mathmlBuilder(t,e){var r=new G.MathNode("mspace");return t.newLine&&(r.setAttribute("linebreak","newline"),t.size&&r.setAttribute("height",Q(ft(t.size,e)))),r}});var m1={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},s6=t=>{var e=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new Y("Expected a control sequence",t);return e},$j=t=>{var e=t.gullet.popToken();return e.text==="="&&(e=t.gullet.popToken(),e.text===" "&&(e=t.gullet.popToken())),e},i6=(t,e,r,n)=>{var s=t.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!t.gullet.isExpandable(r.text)}),t.gullet.macros.set(e,s,n)};te({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(t){var{parser:e,funcName:r}=t;e.consumeSpaces();var n=e.fetch();if(m1[n.text])return(r==="\\global"||r==="\\\\globallong")&&(n.text=m1[n.text]),Ne(e.parseFunction(),"internal");throw new Y("Invalid token after macro prefix",n)}});te({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=e.gullet.popToken(),s=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new Y("Expected a control sequence",n);for(var i=0,o,a=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){o=e.gullet.future(),a[i].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new Y('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==i+1)throw new Y('Argument number "'+n.text+'" out of order');i++,a.push([])}else{if(n.text==="EOF")throw new Y("Expected a macro definition");a[i].push(n.text)}var{tokens:l}=e.gullet.consumeArg();return o&&l.unshift(o),(r==="\\edef"||r==="\\xdef")&&(l=e.gullet.expandTokens(l),l.reverse()),e.gullet.macros.set(s,{tokens:l,numArgs:i,delimiters:a},r===m1[r]),{type:"internal",mode:e.mode}}});te({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=s6(e.gullet.popToken());e.gullet.consumeSpaces();var s=$j(e);return i6(e,n,s,r==="\\\\globallet"),{type:"internal",mode:e.mode}}});te({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t){var{parser:e,funcName:r}=t,n=s6(e.gullet.popToken()),s=e.gullet.popToken(),i=e.gullet.popToken();return i6(e,n,i,r==="\\\\globalfuture"),e.gullet.pushToken(i),e.gullet.pushToken(s),{type:"internal",mode:e.mode}}});var Rl=function(e,r,n){var s=tt.math[e]&&tt.math[e].replace,i=iv(s||e,r,n);if(!i)throw new Error("Unsupported symbol "+e+" and font size "+r+".");return i},hv=function(e,r,n,s){var i=n.havingBaseStyle(r),o=z.makeSpan(s.concat(i.sizingClasses(n)),[e],n),a=i.sizeMultiplier/n.sizeMultiplier;return o.height*=a,o.depth*=a,o.maxFontSize=i.sizeMultiplier,o},o6=function(e,r,n){var s=r.havingBaseStyle(n),i=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=Q(i),e.height-=i,e.depth+=i},Bj=function(e,r,n,s,i,o){var a=z.makeSymbol(e,"Main-Regular",i,s),l=hv(a,r,s,o);return n&&o6(l,s,r),l},Fj=function(e,r,n,s){return z.makeSymbol(e,"Size"+r+"-Regular",n,s)},a6=function(e,r,n,s,i,o){var a=Fj(e,r,i,s),l=hv(z.makeSpan(["delimsizing","size"+r],[a],s),ye.TEXT,s,o);return n&&o6(l,s,ye.TEXT),l},pp=function(e,r,n){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var i=z.makeSpan(["delimsizinginner",s],[z.makeSpan([],[z.makeSymbol(e,r,n)])]);return{type:"elem",elem:i}},mp=function(e,r,n){var s=Qn["Size4-Regular"][e.charCodeAt(0)]?Qn["Size4-Regular"][e.charCodeAt(0)][4]:Qn["Size1-Regular"][e.charCodeAt(0)][4],i=new zi("inner",qA(e,Math.round(1e3*r))),o=new Is([i],{width:Q(s),height:Q(r),style:"width:"+Q(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),a=z.makeSvgSpan([],[o],n);return a.height=r,a.style.height=Q(r),a.style.width=Q(s),{type:"elem",elem:a}},g1=.008,Zc={type:"kern",size:-1*g1},Hj=["|","\\lvert","\\rvert","\\vert"],Uj=["\\|","\\lVert","\\rVert","\\Vert"],l6=function(e,r,n,s,i,o){var a,l,u,c,d="",h=0;a=u=c=e,l=null;var p="Size1-Regular";e==="\\uparrow"?u=c="":e==="\\Uparrow"?u=c="":e==="\\downarrow"?a=u="":e==="\\Downarrow"?a=u="":e==="\\updownarrow"?(a="\\uparrow",u="",c="\\downarrow"):e==="\\Updownarrow"?(a="\\Uparrow",u="",c="\\Downarrow"):Hj.includes(e)?(u="",d="vert",h=333):Uj.includes(e)?(u="",d="doublevert",h=556):e==="["||e==="\\lbrack"?(a="",u="",c="",p="Size4-Regular",d="lbrack",h=667):e==="]"||e==="\\rbrack"?(a="",u="",c="",p="Size4-Regular",d="rbrack",h=667):e==="\\lfloor"||e===""?(u=a="",c="",p="Size4-Regular",d="lfloor",h=667):e==="\\lceil"||e===""?(a="",u=c="",p="Size4-Regular",d="lceil",h=667):e==="\\rfloor"||e===""?(u=a="",c="",p="Size4-Regular",d="rfloor",h=667):e==="\\rceil"||e===""?(a="",u=c="",p="Size4-Regular",d="rceil",h=667):e==="("||e==="\\lparen"?(a="",u="",c="",p="Size4-Regular",d="lparen",h=875):e===")"||e==="\\rparen"?(a="",u="",c="",p="Size4-Regular",d="rparen",h=875):e==="\\{"||e==="\\lbrace"?(a="",l="",c="",u="",p="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(a="",l="",c="",u="",p="Size4-Regular"):e==="\\lgroup"||e===""?(a="",c="",u="",p="Size4-Regular"):e==="\\rgroup"||e===""?(a="",c="",u="",p="Size4-Regular"):e==="\\lmoustache"||e===""?(a="",c="",u="",p="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(a="",c="",u="",p="Size4-Regular");var m=Rl(a,p,i),y=m.height+m.depth,x=Rl(u,p,i),v=x.height+x.depth,w=Rl(c,p,i),k=w.height+w.depth,E=0,M=1;if(l!==null){var j=Rl(l,p,i);E=j.height+j.depth,M=2}var N=y+k+E,_=Math.max(0,Math.ceil((r-N)/(M*v))),L=N+_*M*v,V=s.fontMetrics().axisHeight;n&&(V*=s.sizeMultiplier);var ee=L/2-V,P=[];if(d.length>0){var D=L-y-k,B=Math.round(L*1e3),I=KA(d,Math.round(D*1e3)),H=new zi(d,I),Z=(h/1e3).toFixed(3)+"em",q=(B/1e3).toFixed(3)+"em",ue=new Is([H],{width:Z,height:q,viewBox:"0 0 "+h+" "+B}),ne=z.makeSvgSpan([],[ue],s);ne.height=B/1e3,ne.style.width=Z,ne.style.height=q,P.push({type:"elem",elem:ne})}else{if(P.push(pp(c,p,i)),P.push(Zc),l===null){var $=L-y-k+2*g1;P.push(mp(u,$,s))}else{var U=(L-y-k-E)/2+2*g1;P.push(mp(u,U,s)),P.push(Zc),P.push(pp(l,p,i)),P.push(Zc),P.push(mp(u,U,s))}P.push(Zc),P.push(pp(a,p,i))}var fe=s.havingBaseStyle(ye.TEXT),ie=z.makeVList({positionType:"bottom",positionData:ee,children:P},fe);return hv(z.makeSpan(["delimsizing","mult"],[ie],fe),ye.TEXT,s,o)},gp=80,vp=.08,yp=function(e,r,n,s,i){var o=WA(e,s,n),a=new zi(e,o),l=new Is([a],{width:"400em",height:Q(r),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return z.makeSvgSpan(["hide-tail"],[l],i)},Vj=function(e,r){var n=r.havingBaseSizing(),s=h6("\\surd",e*n.sizeMultiplier,d6,n),i=n.sizeMultiplier,o=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),a,l=0,u=0,c=0,d;return s.type==="small"?(c=1e3+1e3*o+gp,e<1?i=1:e<1.4&&(i=.7),l=(1+o+vp)/i,u=(1+o)/i,a=yp("sqrtMain",l,c,o,r),a.style.minWidth="0.853em",d=.833/i):s.type==="large"?(c=(1e3+gp)*Jl[s.size],u=(Jl[s.size]+o)/i,l=(Jl[s.size]+o+vp)/i,a=yp("sqrtSize"+s.size,l,c,o,r),a.style.minWidth="1.02em",d=1/i):(l=e+o+vp,u=e+o,c=Math.floor(1e3*e+o)+gp,a=yp("sqrtTall",l,c,o,r),a.style.minWidth="0.742em",d=1.056),a.height=u,a.style.height=Q(l),{span:a,advanceWidth:d,ruleWidth:(r.fontMetrics().sqrtRuleThickness+o)*i}},u6=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],Wj=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],c6=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Jl=[0,1.2,1.8,2.4,3],qj=function(e,r,n,s,i){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),u6.includes(e)||c6.includes(e))return a6(e,r,!1,n,s,i);if(Wj.includes(e))return l6(e,Jl[r],!1,n,s,i);throw new Y("Illegal delimiter: '"+e+"'")},Kj=[{type:"small",style:ye.SCRIPTSCRIPT},{type:"small",style:ye.SCRIPT},{type:"small",style:ye.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Gj=[{type:"small",style:ye.SCRIPTSCRIPT},{type:"small",style:ye.SCRIPT},{type:"small",style:ye.TEXT},{type:"stack"}],d6=[{type:"small",style:ye.SCRIPTSCRIPT},{type:"small",style:ye.SCRIPT},{type:"small",style:ye.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Jj=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},h6=function(e,r,n,s){for(var i=Math.min(2,3-s.style.size),o=i;o<n.length&&n[o].type!=="stack";o++){var a=Rl(e,Jj(n[o]),"math"),l=a.height+a.depth;if(n[o].type==="small"){var u=s.havingBaseStyle(n[o].style);l*=u.sizeMultiplier}if(l>r)return n[o]}return n[n.length-1]},f6=function(e,r,n,s,i,o){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var a;c6.includes(e)?a=Kj:u6.includes(e)?a=d6:a=Gj;var l=h6(e,r,a,s);return l.type==="small"?Bj(e,l.style,n,s,i,o):l.type==="large"?a6(e,l.size,n,s,i,o):l6(e,r,n,s,i,o)},Yj=function(e,r,n,s,i,o){var a=s.fontMetrics().axisHeight*s.sizeMultiplier,l=901,u=5/s.fontMetrics().ptPerEm,c=Math.max(r-a,n+a),d=Math.max(c/500*l,2*c-u);return f6(e,d,!0,s,i,o)},Ns={sqrtImage:Vj,sizedDelim:qj,sizeToMaxHeight:Jl,customSizedDelim:f6,leftRightDelim:Yj},x4={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Xj=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Qh(t,e){var r=Yh(t);if(r&&Xj.includes(r.text))return r;throw r?new Y("Invalid delimiter '"+r.text+"' after '"+e.funcName+"'",t):new Y("Invalid delimiter type '"+t.type+"'",t)}te({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,e)=>{var r=Qh(e[0],t);return{type:"delimsizing",mode:t.parser.mode,size:x4[t.funcName].size,mclass:x4[t.funcName].mclass,delim:r.text}},htmlBuilder:(t,e)=>t.delim==="."?z.makeSpan([t.mclass]):Ns.sizedDelim(t.delim,t.size,e,t.mode,[t.mclass]),mathmlBuilder:t=>{var e=[];t.delim!=="."&&e.push(wn(t.delim,t.mode));var r=new G.MathNode("mo",e);t.mclass==="mopen"||t.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var n=Q(Ns.sizeToMaxHeight[t.size]);return r.setAttribute("minsize",n),r.setAttribute("maxsize",n),r}});function b4(t){if(!t.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}te({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=t.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new Y("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:t.parser.mode,delim:Qh(e[0],t).text,color:r}}});te({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Qh(e[0],t),n=t.parser;++n.leftrightDepth;var s=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var i=Ne(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:s,left:r.text,right:i.delim,rightColor:i.color}},htmlBuilder:(t,e)=>{b4(t);for(var r=$t(t.body,e,!0,["mopen","mclose"]),n=0,s=0,i=!1,o=0;o<r.length;o++)r[o].isMiddle?i=!0:(n=Math.max(r[o].height,n),s=Math.max(r[o].depth,s));n*=e.sizeMultiplier,s*=e.sizeMultiplier;var a;if(t.left==="."?a=Pu(e,["mopen"]):a=Ns.leftRightDelim(t.left,n,s,e,t.mode,["mopen"]),r.unshift(a),i)for(var l=1;l<r.length;l++){var u=r[l],c=u.isMiddle;c&&(r[l]=Ns.leftRightDelim(c.delim,n,s,c.options,t.mode,[]))}var d;if(t.right===".")d=Pu(e,["mclose"]);else{var h=t.rightColor?e.withColor(t.rightColor):e;d=Ns.leftRightDelim(t.right,n,s,h,t.mode,["mclose"])}return r.push(d),z.makeSpan(["minner"],r,e)},mathmlBuilder:(t,e)=>{b4(t);var r=Pr(t.body,e);if(t.left!=="."){var n=new G.MathNode("mo",[wn(t.left,t.mode)]);n.setAttribute("fence","true"),r.unshift(n)}if(t.right!=="."){var s=new G.MathNode("mo",[wn(t.right,t.mode)]);s.setAttribute("fence","true"),t.rightColor&&s.setAttribute("mathcolor",t.rightColor),r.push(s)}return lv(r)}});te({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var r=Qh(e[0],t);if(!t.parser.leftrightDepth)throw new Y("\\middle without preceding \\left",r);return{type:"middle",mode:t.parser.mode,delim:r.text}},htmlBuilder:(t,e)=>{var r;if(t.delim===".")r=Pu(e,[]);else{r=Ns.sizedDelim(t.delim,1,e,t.mode,[]);var n={delim:t.delim,options:e};r.isMiddle=n}return r},mathmlBuilder:(t,e)=>{var r=t.delim==="\\vert"||t.delim==="|"?wn("|","text"):wn(t.delim,t.mode),n=new G.MathNode("mo",[r]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var fv=(t,e)=>{var r=z.wrapFragment(Be(t.body,e),e),n=t.label.slice(1),s=e.sizeMultiplier,i,o=0,a=Fe.isCharacterBox(t.body);if(n==="sout")i=z.makeSpan(["stretchy","sout"]),i.height=e.fontMetrics().defaultRuleThickness/s,o=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var l=ft({number:.6,unit:"pt"},e),u=ft({number:.35,unit:"ex"},e),c=e.havingBaseSizing();s=s/c.sizeMultiplier;var d=r.height+r.depth+l+u;r.style.paddingLeft=Q(d/2+l);var h=Math.floor(1e3*d*s),p=UA(h),m=new Is([new zi("phase",p)],{width:"400em",height:Q(h/1e3),viewBox:"0 0 400000 "+h,preserveAspectRatio:"xMinYMin slice"});i=z.makeSvgSpan(["hide-tail"],[m],e),i.style.height=Q(d),o=r.depth+l+u}else{/cancel/.test(n)?a||r.classes.push("cancel-pad"):n==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var y=0,x=0,v=0;/box/.test(n)?(v=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),y=e.fontMetrics().fboxsep+(n==="colorbox"?0:v),x=y):n==="angl"?(v=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),y=4*v,x=Math.max(0,.25-r.depth)):(y=a?.2:0,x=y),i=Ls.encloseSpan(r,n,y,x,e),/fbox|boxed|fcolorbox/.test(n)?(i.style.borderStyle="solid",i.style.borderWidth=Q(v)):n==="angl"&&v!==.049&&(i.style.borderTopWidth=Q(v),i.style.borderRightWidth=Q(v)),o=r.depth+x,t.backgroundColor&&(i.style.backgroundColor=t.backgroundColor,t.borderColor&&(i.style.borderColor=t.borderColor))}var w;if(t.backgroundColor)w=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:o},{type:"elem",elem:r,shift:0}]},e);else{var k=/cancel|phase/.test(n)?["svg-align"]:[];w=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:i,shift:o,wrapperClasses:k}]},e)}return/cancel/.test(n)&&(w.height=r.height,w.depth=r.depth),/cancel/.test(n)&&!a?z.makeSpan(["mord","cancel-lap"],[w],e):z.makeSpan(["mord"],[w],e)},pv=(t,e)=>{var r=0,n=new G.MathNode(t.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Qe(t.body,e)]);switch(t.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*r+"pt"),n.setAttribute("height","+"+2*r+"pt"),n.setAttribute("lspace",r+"pt"),n.setAttribute("voffset",r+"pt"),t.label==="\\fcolorbox"){var s=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+s+"em solid "+String(t.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return t.backgroundColor&&n.setAttribute("mathbackground",t.backgroundColor),n};te({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(t,e,r){var{parser:n,funcName:s}=t,i=Ne(e[0],"color-token").color,o=e[1];return{type:"enclose",mode:n.mode,label:s,backgroundColor:i,body:o}},htmlBuilder:fv,mathmlBuilder:pv});te({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(t,e,r){var{parser:n,funcName:s}=t,i=Ne(e[0],"color-token").color,o=Ne(e[1],"color-token").color,a=e[2];return{type:"enclose",mode:n.mode,label:s,backgroundColor:o,borderColor:i,body:a}},htmlBuilder:fv,mathmlBuilder:pv});te({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\fbox",body:e[0]}}});te({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t,s=e[0];return{type:"enclose",mode:r.mode,label:n,body:s}},htmlBuilder:fv,mathmlBuilder:pv});te({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"enclose",mode:r.mode,label:"\\angl",body:e[0]}}});var p6={};function ls(t){for(var{type:e,names:r,props:n,handler:s,htmlBuilder:i,mathmlBuilder:o}=t,a={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},l=0;l<r.length;++l)p6[r[l]]=a;i&&(b0[e]=i),o&&(w0[e]=o)}var m6={};function C(t,e){m6[t]=e}function w4(t){var e=[];t.consumeSpaces();var r=t.fetch().text;for(r==="\\relax"&&(t.consume(),t.consumeSpaces(),r=t.fetch().text);r==="\\hline"||r==="\\hdashline";)t.consume(),e.push(r==="\\hdashline"),t.consumeSpaces(),r=t.fetch().text;return e}var Zh=t=>{var e=t.parser.settings;if(!e.displayMode)throw new Y("{"+t.envName+"} can be used only in display mode.")};function mv(t){if(t.indexOf("ed")===-1)return t.indexOf("*")===-1}function Vi(t,e,r){var{hskipBeforeAndAfter:n,addJot:s,cols:i,arraystretch:o,colSeparationType:a,autoTag:l,singleRow:u,emptySingleRow:c,maxNumCols:d,leqno:h}=e;if(t.gullet.beginGroup(),u||t.gullet.macros.set("\\cr","\\\\\\relax"),!o){var p=t.gullet.expandMacroAsText("\\arraystretch");if(p==null)o=1;else if(o=parseFloat(p),!o||o<0)throw new Y("Invalid \\arraystretch: "+p)}t.gullet.beginGroup();var m=[],y=[m],x=[],v=[],w=l!=null?[]:void 0;function k(){l&&t.gullet.macros.set("\\@eqnsw","1",!0)}function E(){w&&(t.gullet.macros.get("\\df@tag")?(w.push(t.subparse([new Yr("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!l&&t.gullet.macros.get("\\@eqnsw")==="1"))}for(k(),v.push(w4(t));;){var M=t.parseExpression(!1,u?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),M={type:"ordgroup",mode:t.mode,body:M},r&&(M={type:"styling",mode:t.mode,style:r,body:[M]}),m.push(M);var j=t.fetch().text;if(j==="&"){if(d&&m.length===d){if(u||a)throw new Y("Too many tab characters: &",t.nextToken);t.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}t.consume()}else if(j==="\\end"){E(),m.length===1&&M.type==="styling"&&M.body[0].body.length===0&&(y.length>1||!c)&&y.pop(),v.length<y.length+1&&v.push([]);break}else if(j==="\\\\"){t.consume();var N=void 0;t.gullet.future().text!==" "&&(N=t.parseSizeGroup(!0)),x.push(N?N.value:null),E(),v.push(w4(t)),m=[],y.push(m),k()}else throw new Y("Expected & or \\\\ or \\cr or \\end",t.nextToken)}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,addJot:s,arraystretch:o,body:y,cols:i,rowGaps:x,hskipBeforeAndAfter:n,hLinesBeforeRow:v,colSeparationType:a,tags:w,leqno:h}}function gv(t){return t.slice(0,1)==="d"?"display":"text"}var us=function(e,r){var n,s,i=e.body.length,o=e.hLinesBeforeRow,a=0,l=new Array(i),u=[],c=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),d=1/r.fontMetrics().ptPerEm,h=5*d;if(e.colSeparationType&&e.colSeparationType==="small"){var p=r.havingStyle(ye.SCRIPT).sizeMultiplier;h=.2778*(p/r.sizeMultiplier)}var m=e.colSeparationType==="CD"?ft({number:3,unit:"ex"},r):12*d,y=3*d,x=e.arraystretch*m,v=.7*x,w=.3*x,k=0;function E(rn){for(var or=0;or<rn.length;++or)or>0&&(k+=.25),u.push({pos:k,isDashed:rn[or]})}for(E(o[0]),n=0;n<e.body.length;++n){var M=e.body[n],j=v,N=w;a<M.length&&(a=M.length);var _=new Array(M.length);for(s=0;s<M.length;++s){var L=Be(M[s],r);N<L.depth&&(N=L.depth),j<L.height&&(j=L.height),_[s]=L}var V=e.rowGaps[n],ee=0;V&&(ee=ft(V,r),ee>0&&(ee+=w,N<ee&&(N=ee),ee=0)),e.addJot&&(N+=y),_.height=j,_.depth=N,k+=j,_.pos=k,k+=N+ee,l[n]=_,E(o[n+1])}var P=k/2+r.fontMetrics().axisHeight,D=e.cols||[],B=[],I,H,Z=[];if(e.tags&&e.tags.some(rn=>rn))for(n=0;n<i;++n){var q=l[n],ue=q.pos-P,ne=e.tags[n],$=void 0;ne===!0?$=z.makeSpan(["eqn-num"],[],r):ne===!1?$=z.makeSpan([],[],r):$=z.makeSpan([],$t(ne,r,!0),r),$.depth=q.depth,$.height=q.height,Z.push({type:"elem",elem:$,shift:ue})}for(s=0,H=0;s<a||H<D.length;++s,++H){for(var U=D[H]||{},fe=!0;U.type==="separator";){if(fe||(I=z.makeSpan(["arraycolsep"],[]),I.style.width=Q(r.fontMetrics().doubleRuleSep),B.push(I)),U.separator==="|"||U.separator===":"){var ie=U.separator==="|"?"solid":"dashed",_e=z.makeSpan(["vertical-separator"],[],r);_e.style.height=Q(k),_e.style.borderRightWidth=Q(c),_e.style.borderRightStyle=ie,_e.style.margin="0 "+Q(-c/2);var Ee=k-P;Ee&&(_e.style.verticalAlign=Q(-Ee)),B.push(_e)}else throw new Y("Invalid separator type: "+U.separator);H++,U=D[H]||{},fe=!1}if(!(s>=a)){var Ge=void 0;(s>0||e.hskipBeforeAndAfter)&&(Ge=Fe.deflt(U.pregap,h),Ge!==0&&(I=z.makeSpan(["arraycolsep"],[]),I.style.width=Q(Ge),B.push(I)));var yt=[];for(n=0;n<i;++n){var ze=l[n],ge=ze[s];if(ge){var He=ze.pos-P;ge.depth=ze.depth,ge.height=ze.height,yt.push({type:"elem",elem:ge,shift:He})}}yt=z.makeVList({positionType:"individualShift",children:yt},r),yt=z.makeSpan(["col-align-"+(U.align||"c")],[yt]),B.push(yt),(s<a-1||e.hskipBeforeAndAfter)&&(Ge=Fe.deflt(U.postgap,h),Ge!==0&&(I=z.makeSpan(["arraycolsep"],[]),I.style.width=Q(Ge),B.push(I)))}}if(l=z.makeSpan(["mtable"],B),u.length>0){for(var Nt=z.makeLineSpan("hline",r,c),Gt=z.makeLineSpan("hdashline",r,c),Jt=[{type:"elem",elem:l,shift:0}];u.length>0;){var Br=u.pop(),gr=Br.pos-P;Br.isDashed?Jt.push({type:"elem",elem:Gt,shift:gr}):Jt.push({type:"elem",elem:Nt,shift:gr})}l=z.makeVList({positionType:"individualShift",children:Jt},r)}if(Z.length===0)return z.makeSpan(["mord"],[l],r);var Sn=z.makeVList({positionType:"individualShift",children:Z},r);return Sn=z.makeSpan(["tag"],[Sn],r),z.makeFragment([l,Sn])},Qj={c:"center ",l:"left ",r:"right "},cs=function(e,r){for(var n=[],s=new G.MathNode("mtd",[],["mtr-glue"]),i=new G.MathNode("mtd",[],["mml-eqn-num"]),o=0;o<e.body.length;o++){for(var a=e.body[o],l=[],u=0;u<a.length;u++)l.push(new G.MathNode("mtd",[Qe(a[u],r)]));e.tags&&e.tags[o]&&(l.unshift(s),l.push(s),e.leqno?l.unshift(i):l.push(i)),n.push(new G.MathNode("mtr",l))}var c=new G.MathNode("mtable",n),d=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);c.setAttribute("rowspacing",Q(d));var h="",p="";if(e.cols&&e.cols.length>0){var m=e.cols,y="",x=!1,v=0,w=m.length;m[0].type==="separator"&&(h+="top ",v=1),m[m.length-1].type==="separator"&&(h+="bottom ",w-=1);for(var k=v;k<w;k++)m[k].type==="align"?(p+=Qj[m[k].align],x&&(y+="none "),x=!0):m[k].type==="separator"&&x&&(y+=m[k].separator==="|"?"solid ":"dashed ",x=!1);c.setAttribute("columnalign",p.trim()),/[sd]/.test(y)&&c.setAttribute("columnlines",y.trim())}if(e.colSeparationType==="align"){for(var E=e.cols||[],M="",j=1;j<E.length;j++)M+=j%2?"0em ":"1em ";c.setAttribute("columnspacing",M.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?c.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?c.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?c.setAttribute("columnspacing","0.5em"):c.setAttribute("columnspacing","1em");var N="",_=e.hLinesBeforeRow;h+=_[0].length>0?"left ":"",h+=_[_.length-1].length>0?"right ":"";for(var L=1;L<_.length-1;L++)N+=_[L].length===0?"none ":_[L][0]?"dashed ":"solid ";return/[sd]/.test(N)&&c.setAttribute("rowlines",N.trim()),h!==""&&(c=new G.MathNode("menclose",[c]),c.setAttribute("notation",h.trim())),e.arraystretch&&e.arraystretch<1&&(c=new G.MathNode("mstyle",[c]),c.setAttribute("scriptlevel","1")),c},g6=function(e,r){e.envName.indexOf("ed")===-1&&Zh(e);var n=[],s=e.envName.indexOf("at")>-1?"alignat":"align",i=e.envName==="split",o=Vi(e.parser,{cols:n,addJot:!0,autoTag:i?void 0:mv(e.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:i?2:void 0,leqno:e.parser.settings.leqno},"display"),a,l=0,u={type:"ordgroup",mode:e.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var c="",d=0;d<r[0].body.length;d++){var h=Ne(r[0].body[d],"textord");c+=h.text}a=Number(c),l=a*2}var p=!l;o.body.forEach(function(v){for(var w=1;w<v.length;w+=2){var k=Ne(v[w],"styling"),E=Ne(k.body[0],"ordgroup");E.body.unshift(u)}if(p)l<v.length&&(l=v.length);else{var M=v.length/2;if(a<M)throw new Y("Too many math in a row: "+("expected "+a+", but got "+M),v[0])}});for(var m=0;m<l;++m){var y="r",x=0;m%2===1?y="l":m>0&&p&&(x=1),n[m]={type:"align",align:y,pregap:x,postgap:0}}return o.colSeparationType=p?"align":"alignat",o};ls({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,e){var r=Yh(e[0]),n=r?[e[0]]:Ne(e[0],"ordgroup").body,s=n.map(function(o){var a=cv(o),l=a.text;if("lcr".indexOf(l)!==-1)return{type:"align",align:l};if(l==="|")return{type:"separator",separator:"|"};if(l===":")return{type:"separator",separator:":"};throw new Y("Unknown column alignment: "+l,o)}),i={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return Vi(t.parser,i,gv(t.envName))},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")],r="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(t.envName.charAt(t.envName.length-1)==="*"){var s=t.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new Y("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),n.cols=[{type:"align",align:r}]}}var i=Vi(t.parser,n,gv(t.envName)),o=Math.max(0,...i.body.map(a=>a.length));return i.cols=new Array(o).fill({type:"align",align:r}),e?{type:"leftright",mode:t.mode,body:[i],left:e[0],right:e[1],rightColor:void 0}:i},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(t){var e={arraystretch:.5},r=Vi(t.parser,e,"script");return r.colSeparationType="small",r},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["subarray"],props:{numArgs:1},handler(t,e){var r=Yh(e[0]),n=r?[e[0]]:Ne(e[0],"ordgroup").body,s=n.map(function(o){var a=cv(o),l=a.text;if("lc".indexOf(l)!==-1)return{type:"align",align:l};throw new Y("Unknown column alignment: "+l,o)});if(s.length>1)throw new Y("{subarray} can contain only one column");var i={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(i=Vi(t.parser,i,"script"),i.body.length>0&&i.body[0].length>1)throw new Y("{subarray} can contain only one column");return i},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(t){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=Vi(t.parser,e,gv(t.envName));return{type:"leftright",mode:t.mode,body:[r],left:t.envName.indexOf("r")>-1?".":"\\{",right:t.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:g6,htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(t){["gather","gather*"].includes(t.envName)&&Zh(t);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:mv(t.envName),emptySingleRow:!0,leqno:t.parser.settings.leqno};return Vi(t.parser,e,"display")},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:g6,htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(t){Zh(t);var e={autoTag:mv(t.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:t.parser.settings.leqno};return Vi(t.parser,e,"display")},htmlBuilder:us,mathmlBuilder:cs});ls({type:"array",names:["CD"],props:{numArgs:0},handler(t){return Zh(t),Pj(t.parser)},htmlBuilder:us,mathmlBuilder:cs});C("\\nonumber","\\gdef\\@eqnsw{0}");C("\\notag","\\nonumber");te({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,e){throw new Y(t.funcName+" valid only within array environment")}});var k4=p6;te({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(t,e){var{parser:r,funcName:n}=t,s=e[0];if(s.type!=="ordgroup")throw new Y("Invalid environment name",s);for(var i="",o=0;o<s.body.length;++o)i+=Ne(s.body[o],"textord").text;if(n==="\\begin"){if(!k4.hasOwnProperty(i))throw new Y("No such environment: "+i,s);var a=k4[i],{args:l,optArgs:u}=r.parseArguments("\\begin{"+i+"}",a),c={mode:r.mode,envName:i,parser:r},d=a.handler(c,l,u);r.expect("\\end",!1);var h=r.nextToken,p=Ne(r.parseFunction(),"environment");if(p.name!==i)throw new Y("Mismatch: \\begin{"+i+"} matched by \\end{"+p.name+"}",h);return d}return{type:"environment",mode:r.mode,name:i,nameGroup:s}}});var v6=(t,e)=>{var r=t.font,n=e.withFont(r);return Be(t.body,n)},y6=(t,e)=>{var r=t.font,n=e.withFont(r);return Qe(t.body,n)},S4={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};te({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=k0(e[0]),i=n;return i in S4&&(i=S4[i]),{type:"font",mode:r.mode,font:i.slice(1),body:s}},htmlBuilder:v6,mathmlBuilder:y6});te({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(t,e)=>{var{parser:r}=t,n=e[0],s=Fe.isCharacterBox(n);return{type:"mclass",mode:r.mode,mclass:Xh(n),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:n}],isCharacterBox:s}}});te({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,breakOnTokenText:s}=t,{mode:i}=r,o=r.parseExpression(!0,s),a="math"+n.slice(1);return{type:"font",mode:i,font:a,body:{type:"ordgroup",mode:r.mode,body:o}}},htmlBuilder:v6,mathmlBuilder:y6});var x6=(t,e)=>{var r=e;return t==="display"?r=r.id>=ye.SCRIPT.id?r.text():ye.DISPLAY:t==="text"&&r.size===ye.DISPLAY.size?r=ye.TEXT:t==="script"?r=ye.SCRIPT:t==="scriptscript"&&(r=ye.SCRIPTSCRIPT),r},vv=(t,e)=>{var r=x6(t.size,e.style),n=r.fracNum(),s=r.fracDen(),i;i=e.havingStyle(n);var o=Be(t.numer,i,e);if(t.continued){var a=8.5/e.fontMetrics().ptPerEm,l=3.5/e.fontMetrics().ptPerEm;o.height=o.height<a?a:o.height,o.depth=o.depth<l?l:o.depth}i=e.havingStyle(s);var u=Be(t.denom,i,e),c,d,h;t.hasBarLine?(t.barSize?(d=ft(t.barSize,e),c=z.makeLineSpan("frac-line",e,d)):c=z.makeLineSpan("frac-line",e),d=c.height,h=c.height):(c=null,d=0,h=e.fontMetrics().defaultRuleThickness);var p,m,y;r.size===ye.DISPLAY.size||t.size==="display"?(p=e.fontMetrics().num1,d>0?m=3*h:m=7*h,y=e.fontMetrics().denom1):(d>0?(p=e.fontMetrics().num2,m=h):(p=e.fontMetrics().num3,m=3*h),y=e.fontMetrics().denom2);var x;if(c){var w=e.fontMetrics().axisHeight;p-o.depth-(w+.5*d)<m&&(p+=m-(p-o.depth-(w+.5*d))),w-.5*d-(u.height-y)<m&&(y+=m-(w-.5*d-(u.height-y)));var k=-(w-.5*d);x=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:c,shift:k},{type:"elem",elem:o,shift:-p}]},e)}else{var v=p-o.depth-(u.height-y);v<m&&(p+=.5*(m-v),y+=.5*(m-v)),x=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:u,shift:y},{type:"elem",elem:o,shift:-p}]},e)}i=e.havingStyle(r),x.height*=i.sizeMultiplier/e.sizeMultiplier,x.depth*=i.sizeMultiplier/e.sizeMultiplier;var E;r.size===ye.DISPLAY.size?E=e.fontMetrics().delim1:r.size===ye.SCRIPTSCRIPT.size?E=e.havingStyle(ye.SCRIPT).fontMetrics().delim2:E=e.fontMetrics().delim2;var M,j;return t.leftDelim==null?M=Pu(e,["mopen"]):M=Ns.customSizedDelim(t.leftDelim,E,!0,e.havingStyle(r),t.mode,["mopen"]),t.continued?j=z.makeSpan([]):t.rightDelim==null?j=Pu(e,["mclose"]):j=Ns.customSizedDelim(t.rightDelim,E,!0,e.havingStyle(r),t.mode,["mclose"]),z.makeSpan(["mord"].concat(i.sizingClasses(e)),[M,z.makeSpan(["mfrac"],[x]),j],e)},yv=(t,e)=>{var r=new G.MathNode("mfrac",[Qe(t.numer,e),Qe(t.denom,e)]);if(!t.hasBarLine)r.setAttribute("linethickness","0px");else if(t.barSize){var n=ft(t.barSize,e);r.setAttribute("linethickness",Q(n))}var s=x6(t.size,e.style);if(s.size!==e.style.size){r=new G.MathNode("mstyle",[r]);var i=s.size===ye.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",i),r.setAttribute("scriptlevel","0")}if(t.leftDelim!=null||t.rightDelim!=null){var o=[];if(t.leftDelim!=null){var a=new G.MathNode("mo",[new G.TextNode(t.leftDelim.replace("\\",""))]);a.setAttribute("fence","true"),o.push(a)}if(o.push(r),t.rightDelim!=null){var l=new G.MathNode("mo",[new G.TextNode(t.rightDelim.replace("\\",""))]);l.setAttribute("fence","true"),o.push(l)}return lv(o)}return r};te({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0],i=e[1],o,a=null,l=null,u="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":o=!1,a="(",l=")";break;case"\\\\bracefrac":o=!1,a="\\{",l="\\}";break;case"\\\\brackfrac":o=!1,a="[",l="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":u="display";break;case"\\tfrac":case"\\tbinom":u="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:i,hasBarLine:o,leftDelim:a,rightDelim:l,size:u,barSize:null}},htmlBuilder:vv,mathmlBuilder:yv});te({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0],i=e[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:i,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});te({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(t){var{parser:e,funcName:r,token:n}=t,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:s,token:n}}});var T4=["display","text","script","scriptscript"],C4=function(e){var r=null;return e.length>0&&(r=e,r=r==="."?null:r),r};te({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(t,e){var{parser:r}=t,n=e[4],s=e[5],i=k0(e[0]),o=i.type==="atom"&&i.family==="open"?C4(i.text):null,a=k0(e[1]),l=a.type==="atom"&&a.family==="close"?C4(a.text):null,u=Ne(e[2],"size"),c,d=null;u.isBlank?c=!0:(d=u.value,c=d.number>0);var h="auto",p=e[3];if(p.type==="ordgroup"){if(p.body.length>0){var m=Ne(p.body[0],"textord");h=T4[Number(m.text)]}}else p=Ne(p,"textord"),h=T4[Number(p.text)];return{type:"genfrac",mode:r.mode,numer:n,denom:s,continued:!1,hasBarLine:c,barSize:d,leftDelim:o,rightDelim:l,size:h}},htmlBuilder:vv,mathmlBuilder:yv});te({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(t,e){var{parser:r,funcName:n,token:s}=t;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:Ne(e[0],"size").value,token:s}}});te({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0],i=MA(Ne(e[1],"infix").size),o=e[2],a=i.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:o,continued:!1,hasBarLine:a,barSize:i,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:vv,mathmlBuilder:yv});var b6=(t,e)=>{var r=e.style,n,s;t.type==="supsub"?(n=t.sup?Be(t.sup,e.havingStyle(r.sup()),e):Be(t.sub,e.havingStyle(r.sub()),e),s=Ne(t.base,"horizBrace")):s=Ne(t,"horizBrace");var i=Be(s.base,e.havingBaseStyle(ye.DISPLAY)),o=Ls.svgSpan(s,e),a;if(s.isOver?(a=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:i},{type:"kern",size:.1},{type:"elem",elem:o}]},e),a.children[0].children[0].children[1].classes.push("svg-align")):(a=z.makeVList({positionType:"bottom",positionData:i.depth+.1+o.height,children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:i}]},e),a.children[0].children[0].children[0].classes.push("svg-align")),n){var l=z.makeSpan(["mord",s.isOver?"mover":"munder"],[a],e);s.isOver?a=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:l},{type:"kern",size:.2},{type:"elem",elem:n}]},e):a=z.makeVList({positionType:"bottom",positionData:l.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:l}]},e)}return z.makeSpan(["mord",s.isOver?"mover":"munder"],[a],e)},Zj=(t,e)=>{var r=Ls.mathMLnode(t.label);return new G.MathNode(t.isOver?"mover":"munder",[Qe(t.base,e),r])};te({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(t,e){var{parser:r,funcName:n}=t;return{type:"horizBrace",mode:r.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:b6,mathmlBuilder:Zj});te({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[1],s=Ne(e[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:Et(n)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(t,e)=>{var r=$t(t.body,e,!1);return z.makeAnchor(t.href,[],r,e)},mathmlBuilder:(t,e)=>{var r=Li(t.body,e);return r instanceof qr||(r=new qr("mrow",[r])),r.setAttribute("href",t.href),r}});te({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=Ne(e[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:n}))return r.formatUnsupportedCmd("\\url");for(var s=[],i=0;i<n.length;i++){var o=n[i];o==="~"&&(o="\\textasciitilde"),s.push({type:"textord",mode:"text",text:o})}var a={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:n,body:Et(a)}}});te({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(t,e){var{parser:r}=t;return{type:"hbox",mode:r.mode,body:Et(e[0])}},htmlBuilder(t,e){var r=$t(t.body,e,!1);return z.makeFragment(r)},mathmlBuilder(t,e){return new G.MathNode("mrow",Pr(t.body,e))}});te({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n,token:s}=t,i=Ne(e[0],"raw").string,o=e[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var a,l={};switch(n){case"\\htmlClass":l.class=i,a={command:"\\htmlClass",class:i};break;case"\\htmlId":l.id=i,a={command:"\\htmlId",id:i};break;case"\\htmlStyle":l.style=i,a={command:"\\htmlStyle",style:i};break;case"\\htmlData":{for(var u=i.split(","),c=0;c<u.length;c++){var d=u[c],h=d.indexOf("=");if(h<0)throw new Y("\\htmlData key/value '"+d+"' missing equals sign");var p=d.slice(0,h),m=d.slice(h+1);l["data-"+p.trim()]=m}a={command:"\\htmlData",attributes:l};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(a)?{type:"html",mode:r.mode,attributes:l,body:Et(o)}:r.formatUnsupportedCmd(n)},htmlBuilder:(t,e)=>{var r=$t(t.body,e,!1),n=["enclosing"];t.attributes.class&&n.push(...t.attributes.class.trim().split(/\s+/));var s=z.makeSpan(n,r,e);for(var i in t.attributes)i!=="class"&&t.attributes.hasOwnProperty(i)&&s.setAttribute(i,t.attributes[i]);return s},mathmlBuilder:(t,e)=>Li(t.body,e)});te({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"htmlmathml",mode:r.mode,html:Et(e[0]),mathml:Et(e[1])}},htmlBuilder:(t,e)=>{var r=$t(t.html,e,!1);return z.makeFragment(r)},mathmlBuilder:(t,e)=>Li(t.mathml,e)});var xp=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!r)throw new Y("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(r[1]+r[2]),unit:r[3]};if(!$w(n))throw new Y("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};te({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(t,e,r)=>{var{parser:n}=t,s={number:0,unit:"em"},i={number:.9,unit:"em"},o={number:0,unit:"em"},a="";if(r[0])for(var l=Ne(r[0],"raw").string,u=l.split(","),c=0;c<u.length;c++){var d=u[c].split("=");if(d.length===2){var h=d[1].trim();switch(d[0].trim()){case"alt":a=h;break;case"width":s=xp(h);break;case"height":i=xp(h);break;case"totalheight":o=xp(h);break;default:throw new Y("Invalid key: '"+d[0]+"' in \\includegraphics.")}}}var p=Ne(e[0],"url").url;return a===""&&(a=p,a=a.replace(/^.*[\\/]/,""),a=a.substring(0,a.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:p})?{type:"includegraphics",mode:n.mode,alt:a,width:s,height:i,totalheight:o,src:p}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(t,e)=>{var r=ft(t.height,e),n=0;t.totalheight.number>0&&(n=ft(t.totalheight,e)-r);var s=0;t.width.number>0&&(s=ft(t.width,e));var i={height:Q(r+n)};s>0&&(i.width=Q(s)),n>0&&(i.verticalAlign=Q(-n));var o=new ZA(t.src,t.alt,i);return o.height=r,o.depth=n,o},mathmlBuilder:(t,e)=>{var r=new G.MathNode("mglyph",[]);r.setAttribute("alt",t.alt);var n=ft(t.height,e),s=0;if(t.totalheight.number>0&&(s=ft(t.totalheight,e)-n,r.setAttribute("valign",Q(-s))),r.setAttribute("height",Q(n+s)),t.width.number>0){var i=ft(t.width,e);r.setAttribute("width",Q(i))}return r.setAttribute("src",t.src),r}});te({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,s=Ne(e[0],"size");if(r.settings.strict){var i=n[1]==="m",o=s.value.unit==="mu";i?(o||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):o&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(t,e){return z.makeGlue(t.dimension,e)},mathmlBuilder(t,e){var r=ft(t.dimension,e);return new G.SpaceNode(r)}});te({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0];return{type:"lap",mode:r.mode,alignment:n.slice(5),body:s}},htmlBuilder:(t,e)=>{var r;t.alignment==="clap"?(r=z.makeSpan([],[Be(t.body,e)]),r=z.makeSpan(["inner"],[r],e)):r=z.makeSpan(["inner"],[Be(t.body,e)]);var n=z.makeSpan(["fix"],[]),s=z.makeSpan([t.alignment],[r,n],e),i=z.makeSpan(["strut"]);return i.style.height=Q(s.height+s.depth),s.depth&&(i.style.verticalAlign=Q(-s.depth)),s.children.unshift(i),s=z.makeSpan(["thinbox"],[s],e),z.makeSpan(["mord","vbox"],[s],e)},mathmlBuilder:(t,e)=>{var r=new G.MathNode("mpadded",[Qe(t.body,e)]);if(t.alignment!=="rlap"){var n=t.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",n+"width")}return r.setAttribute("width","0px"),r}});te({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){var{funcName:r,parser:n}=t,s=n.mode;n.switchMode("math");var i=r==="\\("?"\\)":"$",o=n.parseExpression(!1,i);return n.expect(i),n.switchMode(s),{type:"styling",mode:n.mode,style:"text",body:o}}});te({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,e){throw new Y("Mismatched "+t.funcName)}});var E4=(t,e)=>{switch(e.style.size){case ye.DISPLAY.size:return t.display;case ye.TEXT.size:return t.text;case ye.SCRIPT.size:return t.script;case ye.SCRIPTSCRIPT.size:return t.scriptscript;default:return t.text}};te({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(t,e)=>{var{parser:r}=t;return{type:"mathchoice",mode:r.mode,display:Et(e[0]),text:Et(e[1]),script:Et(e[2]),scriptscript:Et(e[3])}},htmlBuilder:(t,e)=>{var r=E4(t,e),n=$t(r,e,!1);return z.makeFragment(n)},mathmlBuilder:(t,e)=>{var r=E4(t,e);return Li(r,e)}});var w6=(t,e,r,n,s,i,o)=>{t=z.makeSpan([],[t]);var a=r&&Fe.isCharacterBox(r),l,u;if(e){var c=Be(e,n.havingStyle(s.sup()),n);u={elem:c,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-c.depth)}}if(r){var d=Be(r,n.havingStyle(s.sub()),n);l={elem:d,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-d.height)}}var h;if(u&&l){var p=n.fontMetrics().bigOpSpacing5+l.elem.height+l.elem.depth+l.kern+t.depth+o;h=z.makeVList({positionType:"bottom",positionData:p,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Q(-i)},{type:"kern",size:l.kern},{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Q(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(l){var m=t.height-o;h=z.makeVList({positionType:"top",positionData:m,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:l.elem,marginLeft:Q(-i)},{type:"kern",size:l.kern},{type:"elem",elem:t}]},n)}else if(u){var y=t.depth+o;h=z.makeVList({positionType:"bottom",positionData:y,children:[{type:"elem",elem:t},{type:"kern",size:u.kern},{type:"elem",elem:u.elem,marginLeft:Q(i)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return t;var x=[h];if(l&&i!==0&&!a){var v=z.makeSpan(["mspace"],[],n);v.style.marginRight=Q(i),x.unshift(v)}return z.makeSpan(["mop","op-limits"],x,n)},k6=["\\smallint"],nl=(t,e)=>{var r,n,s=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Ne(t.base,"op"),s=!0):i=Ne(t,"op");var o=e.style,a=!1;o.size===ye.DISPLAY.size&&i.symbol&&!k6.includes(i.name)&&(a=!0);var l;if(i.symbol){var u=a?"Size2-Regular":"Size1-Regular",c="";if((i.name==="\\oiint"||i.name==="\\oiiint")&&(c=i.name.slice(1),i.name=c==="oiint"?"\\iint":"\\iiint"),l=z.makeSymbol(i.name,u,"math",e,["mop","op-symbol",a?"large-op":"small-op"]),c.length>0){var d=l.italic,h=z.staticSvg(c+"Size"+(a?"2":"1"),e);l=z.makeVList({positionType:"individualShift",children:[{type:"elem",elem:l,shift:0},{type:"elem",elem:h,shift:a?.08:0}]},e),i.name="\\"+c,l.classes.unshift("mop"),l.italic=d}}else if(i.body){var p=$t(i.body,e,!0);p.length===1&&p[0]instanceof bn?(l=p[0],l.classes[0]="mop"):l=z.makeSpan(["mop"],p,e)}else{for(var m=[],y=1;y<i.name.length;y++)m.push(z.mathsym(i.name[y],i.mode,e));l=z.makeSpan(["mop"],m,e)}var x=0,v=0;return(l instanceof bn||i.name==="\\oiint"||i.name==="\\oiiint")&&!i.suppressBaseShift&&(x=(l.height-l.depth)/2-e.fontMetrics().axisHeight,v=l.italic),s?w6(l,r,n,e,o,v,x):(x&&(l.style.position="relative",l.style.top=Q(x)),l)},dc=(t,e)=>{var r;if(t.symbol)r=new qr("mo",[wn(t.name,t.mode)]),k6.includes(t.name)&&r.setAttribute("largeop","false");else if(t.body)r=new qr("mo",Pr(t.body,e));else{r=new qr("mi",[new Zn(t.name.slice(1))]);var n=new qr("mo",[wn("","text")]);t.parentIsSupSub?r=new qr("mrow",[r,n]):r=Yw([r,n])}return r},eR={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};te({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=n;return s.length===1&&(s=eR[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:nl,mathmlBuilder:dc});te({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Et(n)}},htmlBuilder:nl,mathmlBuilder:dc});var tR={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};te({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:nl,mathmlBuilder:dc});te({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(t){var{parser:e,funcName:r}=t;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:nl,mathmlBuilder:dc});te({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(t){var{parser:e,funcName:r}=t,n=r;return n.length===1&&(n=tR[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:nl,mathmlBuilder:dc});var S6=(t,e)=>{var r,n,s=!1,i;t.type==="supsub"?(r=t.sup,n=t.sub,i=Ne(t.base,"operatorname"),s=!0):i=Ne(t,"operatorname");var o;if(i.body.length>0){for(var a=i.body.map(d=>{var h=d.text;return typeof h=="string"?{type:"textord",mode:d.mode,text:h}:d}),l=$t(a,e.withFont("mathrm"),!0),u=0;u<l.length;u++){var c=l[u];c instanceof bn&&(c.text=c.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}o=z.makeSpan(["mop"],l,e)}else o=z.makeSpan(["mop"],[],e);return s?w6(o,r,n,e,e.style,0,0):o},rR=(t,e)=>{for(var r=Pr(t.body,e.withFont("mathrm")),n=!0,s=0;s<r.length;s++){var i=r[s];if(!(i instanceof G.SpaceNode))if(i instanceof G.MathNode)switch(i.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var o=i.children[0];i.children.length===1&&o instanceof G.TextNode?o.text=o.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var a=r.map(c=>c.toText()).join("");r=[new G.TextNode(a)]}var l=new G.MathNode("mi",r);l.setAttribute("mathvariant","normal");var u=new G.MathNode("mo",[wn("","text")]);return t.parentIsSupSub?new G.MathNode("mrow",[l,u]):G.newDocumentFragment([l,u])};te({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(t,e)=>{var{parser:r,funcName:n}=t,s=e[0];return{type:"operatorname",mode:r.mode,body:Et(s),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:S6,mathmlBuilder:rR});C("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Bo({type:"ordgroup",htmlBuilder(t,e){return t.semisimple?z.makeFragment($t(t.body,e,!1)):z.makeSpan(["mord"],$t(t.body,e,!0),e)},mathmlBuilder(t,e){return Li(t.body,e,!0)}});te({type:"overline",names:["\\overline"],props:{numArgs:1},handler(t,e){var{parser:r}=t,n=e[0];return{type:"overline",mode:r.mode,body:n}},htmlBuilder(t,e){var r=Be(t.body,e.havingCrampedStyle()),n=z.makeLineSpan("overline-line",e),s=e.fontMetrics().defaultRuleThickness,i=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:n},{type:"kern",size:s}]},e);return z.makeSpan(["mord","overline"],[i],e)},mathmlBuilder(t,e){var r=new G.MathNode("mo",[new G.TextNode("")]);r.setAttribute("stretchy","true");var n=new G.MathNode("mover",[Qe(t.body,e),r]);return n.setAttribute("accent","true"),n}});te({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"phantom",mode:r.mode,body:Et(n)}},htmlBuilder:(t,e)=>{var r=$t(t.body,e.withPhantom(),!1);return z.makeFragment(r)},mathmlBuilder:(t,e)=>{var r=Pr(t.body,e);return new G.MathNode("mphantom",r)}});te({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"hphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=z.makeSpan([],[Be(t.body,e.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var n=0;n<r.children.length;n++)r.children[n].height=0,r.children[n].depth=0;return r=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e),z.makeSpan(["mord"],[r],e)},mathmlBuilder:(t,e)=>{var r=Pr(Et(t.body),e),n=new G.MathNode("mphantom",r),s=new G.MathNode("mpadded",[n]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});te({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(t,e)=>{var{parser:r}=t,n=e[0];return{type:"vphantom",mode:r.mode,body:n}},htmlBuilder:(t,e)=>{var r=z.makeSpan(["inner"],[Be(t.body,e.withPhantom())]),n=z.makeSpan(["fix"],[]);return z.makeSpan(["mord","rlap"],[r,n],e)},mathmlBuilder:(t,e)=>{var r=Pr(Et(t.body),e),n=new G.MathNode("mphantom",r),s=new G.MathNode("mpadded",[n]);return s.setAttribute("width","0px"),s}});te({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(t,e){var{parser:r}=t,n=Ne(e[0],"size").value,s=e[1];return{type:"raisebox",mode:r.mode,dy:n,body:s}},htmlBuilder(t,e){var r=Be(t.body,e),n=ft(t.dy,e);return z.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){var r=new G.MathNode("mpadded",[Qe(t.body,e)]),n=t.dy.number+t.dy.unit;return r.setAttribute("voffset",n),r}});te({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(t){var{parser:e}=t;return{type:"internal",mode:e.mode}}});te({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(t,e,r){var{parser:n}=t,s=r[0],i=Ne(e[0],"size"),o=Ne(e[1],"size");return{type:"rule",mode:n.mode,shift:s&&Ne(s,"size").value,width:i.value,height:o.value}},htmlBuilder(t,e){var r=z.makeSpan(["mord","rule"],[],e),n=ft(t.width,e),s=ft(t.height,e),i=t.shift?ft(t.shift,e):0;return r.style.borderRightWidth=Q(n),r.style.borderTopWidth=Q(s),r.style.bottom=Q(i),r.width=n,r.height=s+i,r.depth=-i,r.maxFontSize=s*1.125*e.sizeMultiplier,r},mathmlBuilder(t,e){var r=ft(t.width,e),n=ft(t.height,e),s=t.shift?ft(t.shift,e):0,i=e.color&&e.getColor()||"black",o=new G.MathNode("mspace");o.setAttribute("mathbackground",i),o.setAttribute("width",Q(r)),o.setAttribute("height",Q(n));var a=new G.MathNode("mpadded",[o]);return s>=0?a.setAttribute("height",Q(s)):(a.setAttribute("height",Q(s)),a.setAttribute("depth",Q(-s))),a.setAttribute("voffset",Q(s)),a}});function T6(t,e,r){for(var n=$t(t,e,!1),s=e.sizeMultiplier/r.sizeMultiplier,i=0;i<n.length;i++){var o=n[i].classes.indexOf("sizing");o<0?Array.prototype.push.apply(n[i].classes,e.sizingClasses(r)):n[i].classes[o+1]==="reset-size"+e.size&&(n[i].classes[o+1]="reset-size"+r.size),n[i].height*=s,n[i].depth*=s}return z.makeFragment(n)}var N4=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],nR=(t,e)=>{var r=e.havingSize(t.size);return T6(t.body,r,e)};te({type:"sizing",names:N4,props:{numArgs:0,allowedInText:!0},handler:(t,e)=>{var{breakOnTokenText:r,funcName:n,parser:s}=t,i=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:N4.indexOf(n)+1,body:i}},htmlBuilder:nR,mathmlBuilder:(t,e)=>{var r=e.havingSize(t.size),n=Pr(t.body,r),s=new G.MathNode("mstyle",n);return s.setAttribute("mathsize",Q(r.sizeMultiplier)),s}});te({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(t,e,r)=>{var{parser:n}=t,s=!1,i=!1,o=r[0]&&Ne(r[0],"ordgroup");if(o)for(var a="",l=0;l<o.body.length;++l){var u=o.body[l];if(a=u.text,a==="t")s=!0;else if(a==="b")i=!0;else{s=!1,i=!1;break}}else s=!0,i=!0;var c=e[0];return{type:"smash",mode:n.mode,body:c,smashHeight:s,smashDepth:i}},htmlBuilder:(t,e)=>{var r=z.makeSpan([],[Be(t.body,e)]);if(!t.smashHeight&&!t.smashDepth)return r;if(t.smashHeight&&(r.height=0,r.children))for(var n=0;n<r.children.length;n++)r.children[n].height=0;if(t.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var i=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},e);return z.makeSpan(["mord"],[i],e)},mathmlBuilder:(t,e)=>{var r=new G.MathNode("mpadded",[Qe(t.body,e)]);return t.smashHeight&&r.setAttribute("height","0px"),t.smashDepth&&r.setAttribute("depth","0px"),r}});te({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(t,e,r){var{parser:n}=t,s=r[0],i=e[0];return{type:"sqrt",mode:n.mode,body:i,index:s}},htmlBuilder(t,e){var r=Be(t.body,e.havingCrampedStyle());r.height===0&&(r.height=e.fontMetrics().xHeight),r=z.wrapFragment(r,e);var n=e.fontMetrics(),s=n.defaultRuleThickness,i=s;e.style.id<ye.TEXT.id&&(i=e.fontMetrics().xHeight);var o=s+i/4,a=r.height+r.depth+o+s,{span:l,ruleWidth:u,advanceWidth:c}=Ns.sqrtImage(a,e),d=l.height-u;d>r.height+r.depth+o&&(o=(o+d-r.height-r.depth)/2);var h=l.height-r.height-o-u;r.style.paddingLeft=Q(c);var p=z.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+h)},{type:"elem",elem:l},{type:"kern",size:u}]},e);if(t.index){var m=e.havingStyle(ye.SCRIPTSCRIPT),y=Be(t.index,m,e),x=.6*(p.height-p.depth),v=z.makeVList({positionType:"shift",positionData:-x,children:[{type:"elem",elem:y}]},e),w=z.makeSpan(["root"],[v]);return z.makeSpan(["mord","sqrt"],[w,p],e)}else return z.makeSpan(["mord","sqrt"],[p],e)},mathmlBuilder(t,e){var{body:r,index:n}=t;return n?new G.MathNode("mroot",[Qe(r,e),Qe(n,e)]):new G.MathNode("msqrt",[Qe(r,e)])}});var M4={display:ye.DISPLAY,text:ye.TEXT,script:ye.SCRIPT,scriptscript:ye.SCRIPTSCRIPT};te({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(t,e){var{breakOnTokenText:r,funcName:n,parser:s}=t,i=s.parseExpression(!0,r),o=n.slice(1,n.length-5);return{type:"styling",mode:s.mode,style:o,body:i}},htmlBuilder(t,e){var r=M4[t.style],n=e.havingStyle(r).withFont("");return T6(t.body,n,e)},mathmlBuilder(t,e){var r=M4[t.style],n=e.havingStyle(r),s=Pr(t.body,n),i=new G.MathNode("mstyle",s),o={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},a=o[t.style];return i.setAttribute("scriptlevel",a[0]),i.setAttribute("displaystyle",a[1]),i}});var sR=function(e,r){var n=e.base;if(n)if(n.type==="op"){var s=n.limits&&(r.style.size===ye.DISPLAY.size||n.alwaysHandleSupSub);return s?nl:null}else if(n.type==="operatorname"){var i=n.alwaysHandleSupSub&&(r.style.size===ye.DISPLAY.size||n.limits);return i?S6:null}else{if(n.type==="accent")return Fe.isCharacterBox(n.base)?dv:null;if(n.type==="horizBrace"){var o=!e.sub;return o===n.isOver?b6:null}else return null}else return null};Bo({type:"supsub",htmlBuilder(t,e){var r=sR(t,e);if(r)return r(t,e);var{base:n,sup:s,sub:i}=t,o=Be(n,e),a,l,u=e.fontMetrics(),c=0,d=0,h=n&&Fe.isCharacterBox(n);if(s){var p=e.havingStyle(e.style.sup());a=Be(s,p,e),h||(c=o.height-p.fontMetrics().supDrop*p.sizeMultiplier/e.sizeMultiplier)}if(i){var m=e.havingStyle(e.style.sub());l=Be(i,m,e),h||(d=o.depth+m.fontMetrics().subDrop*m.sizeMultiplier/e.sizeMultiplier)}var y;e.style===ye.DISPLAY?y=u.sup1:e.style.cramped?y=u.sup3:y=u.sup2;var x=e.sizeMultiplier,v=Q(.5/u.ptPerEm/x),w=null;if(l){var k=t.base&&t.base.type==="op"&&t.base.name&&(t.base.name==="\\oiint"||t.base.name==="\\oiiint");(o instanceof bn||k)&&(w=Q(-o.italic))}var E;if(a&&l){c=Math.max(c,y,a.depth+.25*u.xHeight),d=Math.max(d,u.sub2);var M=u.defaultRuleThickness,j=4*M;if(c-a.depth-(l.height-d)<j){d=j-(c-a.depth)+l.height;var N=.8*u.xHeight-(c-a.depth);N>0&&(c+=N,d-=N)}var _=[{type:"elem",elem:l,shift:d,marginRight:v,marginLeft:w},{type:"elem",elem:a,shift:-c,marginRight:v}];E=z.makeVList({positionType:"individualShift",children:_},e)}else if(l){d=Math.max(d,u.sub1,l.height-.8*u.xHeight);var L=[{type:"elem",elem:l,marginLeft:w,marginRight:v}];E=z.makeVList({positionType:"shift",positionData:d,children:L},e)}else if(a)c=Math.max(c,y,a.depth+.25*u.xHeight),E=z.makeVList({positionType:"shift",positionData:-c,children:[{type:"elem",elem:a,marginRight:v}]},e);else throw new Error("supsub must have either sup or sub.");var V=f1(o,"right")||"mord";return z.makeSpan([V],[o,z.makeSpan(["msupsub"],[E])],e)},mathmlBuilder(t,e){var r=!1,n,s;t.base&&t.base.type==="horizBrace"&&(s=!!t.sup,s===t.base.isOver&&(r=!0,n=t.base.isOver)),t.base&&(t.base.type==="op"||t.base.type==="operatorname")&&(t.base.parentIsSupSub=!0);var i=[Qe(t.base,e)];t.sub&&i.push(Qe(t.sub,e)),t.sup&&i.push(Qe(t.sup,e));var o;if(r)o=n?"mover":"munder";else if(t.sub)if(t.sup){var u=t.base;u&&u.type==="op"&&u.limits&&e.style===ye.DISPLAY||u&&u.type==="operatorname"&&u.alwaysHandleSupSub&&(e.style===ye.DISPLAY||u.limits)?o="munderover":o="msubsup"}else{var l=t.base;l&&l.type==="op"&&l.limits&&(e.style===ye.DISPLAY||l.alwaysHandleSupSub)||l&&l.type==="operatorname"&&l.alwaysHandleSupSub&&(l.limits||e.style===ye.DISPLAY)?o="munder":o="msub"}else{var a=t.base;a&&a.type==="op"&&a.limits&&(e.style===ye.DISPLAY||a.alwaysHandleSupSub)||a&&a.type==="operatorname"&&a.alwaysHandleSupSub&&(a.limits||e.style===ye.DISPLAY)?o="mover":o="msup"}return new G.MathNode(o,i)}});Bo({type:"atom",htmlBuilder(t,e){return z.mathsym(t.text,t.mode,e,["m"+t.family])},mathmlBuilder(t,e){var r=new G.MathNode("mo",[wn(t.text,t.mode)]);if(t.family==="bin"){var n=uv(t,e);n==="bold-italic"&&r.setAttribute("mathvariant",n)}else t.family==="punct"?r.setAttribute("separator","true"):(t.family==="open"||t.family==="close")&&r.setAttribute("stretchy","false");return r}});var C6={mi:"italic",mn:"normal",mtext:"normal"};Bo({type:"mathord",htmlBuilder(t,e){return z.makeOrd(t,e,"mathord")},mathmlBuilder(t,e){var r=new G.MathNode("mi",[wn(t.text,t.mode,e)]),n=uv(t,e)||"italic";return n!==C6[r.type]&&r.setAttribute("mathvariant",n),r}});Bo({type:"textord",htmlBuilder(t,e){return z.makeOrd(t,e,"textord")},mathmlBuilder(t,e){var r=wn(t.text,t.mode,e),n=uv(t,e)||"normal",s;return t.mode==="text"?s=new G.MathNode("mtext",[r]):/[0-9]/.test(t.text)?s=new G.MathNode("mn",[r]):t.text==="\\prime"?s=new G.MathNode("mo",[r]):s=new G.MathNode("mi",[r]),n!==C6[s.type]&&s.setAttribute("mathvariant",n),s}});var bp={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},wp={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Bo({type:"spacing",htmlBuilder(t,e){if(wp.hasOwnProperty(t.text)){var r=wp[t.text].className||"";if(t.mode==="text"){var n=z.makeOrd(t,e,"textord");return n.classes.push(r),n}else return z.makeSpan(["mspace",r],[z.mathsym(t.text,t.mode,e)],e)}else{if(bp.hasOwnProperty(t.text))return z.makeSpan(["mspace",bp[t.text]],[],e);throw new Y('Unknown type of space "'+t.text+'"')}},mathmlBuilder(t,e){var r;if(wp.hasOwnProperty(t.text))r=new G.MathNode("mtext",[new G.TextNode("")]);else{if(bp.hasOwnProperty(t.text))return new G.MathNode("mspace");throw new Y('Unknown type of space "'+t.text+'"')}return r}});var A4=()=>{var t=new G.MathNode("mtd",[]);return t.setAttribute("width","50%"),t};Bo({type:"tag",mathmlBuilder(t,e){var r=new G.MathNode("mtable",[new G.MathNode("mtr",[A4(),new G.MathNode("mtd",[Li(t.body,e)]),A4(),new G.MathNode("mtd",[Li(t.tag,e)])])]);return r.setAttribute("width","100%"),r}});var j4={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},R4={"\\textbf":"textbf","\\textmd":"textmd"},iR={"\\textit":"textit","\\textup":"textup"},_4=(t,e)=>{var r=t.font;if(r){if(j4[r])return e.withTextFontFamily(j4[r]);if(R4[r])return e.withTextFontWeight(R4[r]);if(r==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(iR[r])};te({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(t,e){var{parser:r,funcName:n}=t,s=e[0];return{type:"text",mode:r.mode,body:Et(s),font:n}},htmlBuilder(t,e){var r=_4(t,e),n=$t(t.body,r,!0);return z.makeSpan(["mord","text"],n,r)},mathmlBuilder(t,e){var r=_4(t,e);return Li(t.body,r)}});te({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(t,e){var{parser:r}=t;return{type:"underline",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Be(t.body,e),n=z.makeLineSpan("underline-line",e),s=e.fontMetrics().defaultRuleThickness,i=z.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:n},{type:"kern",size:3*s},{type:"elem",elem:r}]},e);return z.makeSpan(["mord","underline"],[i],e)},mathmlBuilder(t,e){var r=new G.MathNode("mo",[new G.TextNode("")]);r.setAttribute("stretchy","true");var n=new G.MathNode("munder",[Qe(t.body,e),r]);return n.setAttribute("accentunder","true"),n}});te({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(t,e){var{parser:r}=t;return{type:"vcenter",mode:r.mode,body:e[0]}},htmlBuilder(t,e){var r=Be(t.body,e),n=e.fontMetrics().axisHeight,s=.5*(r.height-n-(r.depth+n));return z.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},e)},mathmlBuilder(t,e){return new G.MathNode("mpadded",[Qe(t.body,e)],["vcenter"])}});te({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,e,r){throw new Y("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(t,e){for(var r=O4(t),n=[],s=e.havingStyle(e.style.text()),i=0;i<r.length;i++){var o=r[i];o==="~"&&(o="\\textasciitilde"),n.push(z.makeSymbol(o,"Typewriter-Regular",t.mode,s,["mord","texttt"]))}return z.makeSpan(["mord","text"].concat(s.sizingClasses(e)),z.tryCombineChars(n),s)},mathmlBuilder(t,e){var r=new G.TextNode(O4(t)),n=new G.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});var O4=t=>t.body.replace(/ /g,t.star?"":""),mi=Gw,E6=`[ \r
	]`,oR="\\\\[a-zA-Z@]+",aR="\\\\[^\uD800-\uDFFF]",lR="("+oR+")"+E6+"*",uR=`\\\\(
|[ \r	]+
?)[ \r	]*`,v1="[-]",cR=new RegExp(v1+"+$"),dR="("+E6+"+)|"+(uR+"|")+"([!-\\[\\]---]"+(v1+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(v1+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+lR)+("|"+aR+")");class D4{constructor(e,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=r,this.tokenRegex=new RegExp(dR,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,r){this.catcodes[e]=r}lex(){var e=this.input,r=this.tokenRegex.lastIndex;if(r===e.length)return new Yr("EOF",new jr(this,r,r));var n=this.tokenRegex.exec(e);if(n===null||n.index!==r)throw new Y("Unexpected character: '"+e[r]+"'",new Yr(e[r],new jr(this,r,r+1)));var s=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[s]===14){var i=e.indexOf(`
`,this.tokenRegex.lastIndex);return i===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=i+1,this.lex()}return new Yr(s,new jr(this,r,this.tokenRegex.lastIndex))}}class hR{constructor(e,r){e===void 0&&(e={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new Y("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var r in e)e.hasOwnProperty(r)&&(e[r]==null?delete this.current[r]:this.current[r]=e[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,r,n){if(n===void 0&&(n=!1),n){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=r)}else{var i=this.undefStack[this.undefStack.length-1];i&&!i.hasOwnProperty(e)&&(i[e]=this.current[e])}r==null?delete this.current[e]:this.current[e]=r}}var fR=m6;C("\\noexpand",function(t){var e=t.popToken();return t.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});C("\\expandafter",function(t){var e=t.popToken();return t.expandOnce(!0),{tokens:[e],numArgs:0}});C("\\@firstoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[0],numArgs:0}});C("\\@secondoftwo",function(t){var e=t.consumeArgs(2);return{tokens:e[1],numArgs:0}});C("\\@ifnextchar",function(t){var e=t.consumeArgs(3);t.consumeSpaces();var r=t.future();return e[0].length===1&&e[0][0].text===r.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});C("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");C("\\TextOrMath",function(t){var e=t.consumeArgs(2);return t.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var I4={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};C("\\char",function(t){var e=t.popToken(),r,n="";if(e.text==="'")r=8,e=t.popToken();else if(e.text==='"')r=16,e=t.popToken();else if(e.text==="`")if(e=t.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new Y("\\char` missing argument");n=e.text.charCodeAt(0)}else r=10;if(r){if(n=I4[e.text],n==null||n>=r)throw new Y("Invalid base-"+r+" digit "+e.text);for(var s;(s=I4[t.future().text])!=null&&s<r;)n*=r,n+=s,t.popToken()}return"\\@char{"+n+"}"});var xv=(t,e,r,n)=>{var s=t.consumeArg().tokens;if(s.length!==1)throw new Y("\\newcommand's first argument must be a macro name");var i=s[0].text,o=t.isDefined(i);if(o&&!e)throw new Y("\\newcommand{"+i+"} attempting to redefine "+(i+"; use \\renewcommand"));if(!o&&!r)throw new Y("\\renewcommand{"+i+"} when command "+i+" does not yet exist; use \\newcommand");var a=0;if(s=t.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var l="",u=t.expandNextToken();u.text!=="]"&&u.text!=="EOF";)l+=u.text,u=t.expandNextToken();if(!l.match(/^\s*[0-9]+\s*$/))throw new Y("Invalid number of arguments: "+l);a=parseInt(l),s=t.consumeArg().tokens}return o&&n||t.macros.set(i,{tokens:s,numArgs:a}),""};C("\\newcommand",t=>xv(t,!1,!0,!1));C("\\renewcommand",t=>xv(t,!0,!1,!1));C("\\providecommand",t=>xv(t,!0,!0,!0));C("\\message",t=>{var e=t.consumeArgs(1)[0];return console.log(e.reverse().map(r=>r.text).join("")),""});C("\\errmessage",t=>{var e=t.consumeArgs(1)[0];return console.error(e.reverse().map(r=>r.text).join("")),""});C("\\show",t=>{var e=t.popToken(),r=e.text;return console.log(e,t.macros.get(r),mi[r],tt.math[r],tt.text[r]),""});C("\\bgroup","{");C("\\egroup","}");C("~","\\nobreakspace");C("\\lq","`");C("\\rq","'");C("\\aa","\\r a");C("\\AA","\\r A");C("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");C("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");C("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");C("","\\mathscr{B}");C("","\\mathscr{E}");C("","\\mathscr{F}");C("","\\mathscr{H}");C("","\\mathscr{I}");C("","\\mathscr{L}");C("","\\mathscr{M}");C("","\\mathscr{R}");C("","\\mathfrak{C}");C("","\\mathfrak{H}");C("","\\mathfrak{Z}");C("\\Bbbk","\\Bbb{k}");C("","\\cdotp");C("\\llap","\\mathllap{\\textrm{#1}}");C("\\rlap","\\mathrlap{\\textrm{#1}}");C("\\clap","\\mathclap{\\textrm{#1}}");C("\\mathstrut","\\vphantom{(}");C("\\underbar","\\underline{\\text{#1}}");C("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');C("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");C("\\ne","\\neq");C("","\\neq");C("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");C("","\\notin");C("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");C("","\\perp");C("","\\mathclose{!\\mkern-0.8mu!}");C("","\\notni");C("","\\ulcorner");C("","\\urcorner");C("","\\llcorner");C("","\\lrcorner");C("","\\copyright");C("","\\textregistered");C("","\\textregistered");C("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');C("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');C("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');C("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');C("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");C("","\\vdots");C("\\varGamma","\\mathit{\\Gamma}");C("\\varDelta","\\mathit{\\Delta}");C("\\varTheta","\\mathit{\\Theta}");C("\\varLambda","\\mathit{\\Lambda}");C("\\varXi","\\mathit{\\Xi}");C("\\varPi","\\mathit{\\Pi}");C("\\varSigma","\\mathit{\\Sigma}");C("\\varUpsilon","\\mathit{\\Upsilon}");C("\\varPhi","\\mathit{\\Phi}");C("\\varPsi","\\mathit{\\Psi}");C("\\varOmega","\\mathit{\\Omega}");C("\\substack","\\begin{subarray}{c}#1\\end{subarray}");C("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");C("\\boxed","\\fbox{$\\displaystyle{#1}$}");C("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");C("\\implies","\\DOTSB\\;\\Longrightarrow\\;");C("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");C("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");C("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var z4={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};C("\\dots",function(t){var e="\\dotso",r=t.expandAfterFuture().text;return r in z4?e=z4[r]:(r.slice(0,4)==="\\not"||r in tt.math&&["bin","rel"].includes(tt.math[r].group))&&(e="\\dotsb"),e});var bv={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};C("\\dotso",function(t){var e=t.future().text;return e in bv?"\\ldots\\,":"\\ldots"});C("\\dotsc",function(t){var e=t.future().text;return e in bv&&e!==","?"\\ldots\\,":"\\ldots"});C("\\cdots",function(t){var e=t.future().text;return e in bv?"\\@cdots\\,":"\\@cdots"});C("\\dotsb","\\cdots");C("\\dotsm","\\cdots");C("\\dotsi","\\!\\cdots");C("\\dotsx","\\ldots\\,");C("\\DOTSI","\\relax");C("\\DOTSB","\\relax");C("\\DOTSX","\\relax");C("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");C("\\,","\\tmspace+{3mu}{.1667em}");C("\\thinspace","\\,");C("\\>","\\mskip{4mu}");C("\\:","\\tmspace+{4mu}{.2222em}");C("\\medspace","\\:");C("\\;","\\tmspace+{5mu}{.2777em}");C("\\thickspace","\\;");C("\\!","\\tmspace-{3mu}{.1667em}");C("\\negthinspace","\\!");C("\\negmedspace","\\tmspace-{4mu}{.2222em}");C("\\negthickspace","\\tmspace-{5mu}{.277em}");C("\\enspace","\\kern.5em ");C("\\enskip","\\hskip.5em\\relax");C("\\quad","\\hskip1em\\relax");C("\\qquad","\\hskip2em\\relax");C("\\tag","\\@ifstar\\tag@literal\\tag@paren");C("\\tag@paren","\\tag@literal{({#1})}");C("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new Y("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});C("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");C("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");C("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");C("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");C("\\newline","\\\\\\relax");C("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var N6=Q(Qn["Main-Regular"][84][1]-.7*Qn["Main-Regular"][65][1]);C("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+N6+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");C("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+N6+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");C("\\hspace","\\@ifstar\\@hspacer\\@hspace");C("\\@hspace","\\hskip #1\\relax");C("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");C("\\ordinarycolon",":");C("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");C("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');C("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');C("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');C("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');C("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');C("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');C("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');C("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');C("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');C("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');C("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');C("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');C("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');C("","\\dblcolon");C("","\\eqcolon");C("","\\coloneqq");C("","\\eqqcolon");C("","\\Coloneqq");C("\\ratio","\\vcentcolon");C("\\coloncolon","\\dblcolon");C("\\colonequals","\\coloneqq");C("\\coloncolonequals","\\Coloneqq");C("\\equalscolon","\\eqqcolon");C("\\equalscoloncolon","\\Eqqcolon");C("\\colonminus","\\coloneq");C("\\coloncolonminus","\\Coloneq");C("\\minuscolon","\\eqcolon");C("\\minuscoloncolon","\\Eqcolon");C("\\coloncolonapprox","\\Colonapprox");C("\\coloncolonsim","\\Colonsim");C("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");C("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");C("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");C("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");C("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");C("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");C("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");C("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");C("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");C("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");C("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");C("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");C("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");C("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");C("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");C("\\ngeqq","\\html@mathml{\\@ngeqq}{}");C("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");C("\\nleqq","\\html@mathml{\\@nleqq}{}");C("\\nleqslant","\\html@mathml{\\@nleqslant}{}");C("\\nshortmid","\\html@mathml{\\@nshortmid}{}");C("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");C("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");C("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");C("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");C("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");C("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");C("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");C("\\imath","\\html@mathml{\\@imath}{}");C("\\jmath","\\html@mathml{\\@jmath}{}");C("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");C("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");C("","\\llbracket");C("","\\rrbracket");C("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");C("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");C("","\\lBrace");C("","\\rBrace");C("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");C("","\\minuso");C("\\darr","\\downarrow");C("\\dArr","\\Downarrow");C("\\Darr","\\Downarrow");C("\\lang","\\langle");C("\\rang","\\rangle");C("\\uarr","\\uparrow");C("\\uArr","\\Uparrow");C("\\Uarr","\\Uparrow");C("\\N","\\mathbb{N}");C("\\R","\\mathbb{R}");C("\\Z","\\mathbb{Z}");C("\\alef","\\aleph");C("\\alefsym","\\aleph");C("\\Alpha","\\mathrm{A}");C("\\Beta","\\mathrm{B}");C("\\bull","\\bullet");C("\\Chi","\\mathrm{X}");C("\\clubs","\\clubsuit");C("\\cnums","\\mathbb{C}");C("\\Complex","\\mathbb{C}");C("\\Dagger","\\ddagger");C("\\diamonds","\\diamondsuit");C("\\empty","\\emptyset");C("\\Epsilon","\\mathrm{E}");C("\\Eta","\\mathrm{H}");C("\\exist","\\exists");C("\\harr","\\leftrightarrow");C("\\hArr","\\Leftrightarrow");C("\\Harr","\\Leftrightarrow");C("\\hearts","\\heartsuit");C("\\image","\\Im");C("\\infin","\\infty");C("\\Iota","\\mathrm{I}");C("\\isin","\\in");C("\\Kappa","\\mathrm{K}");C("\\larr","\\leftarrow");C("\\lArr","\\Leftarrow");C("\\Larr","\\Leftarrow");C("\\lrarr","\\leftrightarrow");C("\\lrArr","\\Leftrightarrow");C("\\Lrarr","\\Leftrightarrow");C("\\Mu","\\mathrm{M}");C("\\natnums","\\mathbb{N}");C("\\Nu","\\mathrm{N}");C("\\Omicron","\\mathrm{O}");C("\\plusmn","\\pm");C("\\rarr","\\rightarrow");C("\\rArr","\\Rightarrow");C("\\Rarr","\\Rightarrow");C("\\real","\\Re");C("\\reals","\\mathbb{R}");C("\\Reals","\\mathbb{R}");C("\\Rho","\\mathrm{P}");C("\\sdot","\\cdot");C("\\sect","\\S");C("\\spades","\\spadesuit");C("\\sub","\\subset");C("\\sube","\\subseteq");C("\\supe","\\supseteq");C("\\Tau","\\mathrm{T}");C("\\thetasym","\\vartheta");C("\\weierp","\\wp");C("\\Zeta","\\mathrm{Z}");C("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");C("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");C("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");C("\\bra","\\mathinner{\\langle{#1}|}");C("\\ket","\\mathinner{|{#1}\\rangle}");C("\\braket","\\mathinner{\\langle{#1}\\rangle}");C("\\Bra","\\left\\langle#1\\right|");C("\\Ket","\\left|#1\\right\\rangle");var M6=t=>e=>{var r=e.consumeArg().tokens,n=e.consumeArg().tokens,s=e.consumeArg().tokens,i=e.consumeArg().tokens,o=e.macros.get("|"),a=e.macros.get("\\|");e.macros.beginGroup();var l=d=>h=>{t&&(h.macros.set("|",o),s.length&&h.macros.set("\\|",a));var p=d;if(!d&&s.length){var m=h.future();m.text==="|"&&(h.popToken(),p=!0)}return{tokens:p?s:n,numArgs:0}};e.macros.set("|",l(!1)),s.length&&e.macros.set("\\|",l(!0));var u=e.consumeArg().tokens,c=e.expandTokens([...i,...u,...r]);return e.macros.endGroup(),{tokens:c.reverse(),numArgs:0}};C("\\bra@ket",M6(!1));C("\\bra@set",M6(!0));C("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");C("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");C("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");C("\\angln","{\\angl n}");C("\\blue","\\textcolor{##6495ed}{#1}");C("\\orange","\\textcolor{##ffa500}{#1}");C("\\pink","\\textcolor{##ff00af}{#1}");C("\\red","\\textcolor{##df0030}{#1}");C("\\green","\\textcolor{##28ae7b}{#1}");C("\\gray","\\textcolor{gray}{#1}");C("\\purple","\\textcolor{##9d38bd}{#1}");C("\\blueA","\\textcolor{##ccfaff}{#1}");C("\\blueB","\\textcolor{##80f6ff}{#1}");C("\\blueC","\\textcolor{##63d9ea}{#1}");C("\\blueD","\\textcolor{##11accd}{#1}");C("\\blueE","\\textcolor{##0c7f99}{#1}");C("\\tealA","\\textcolor{##94fff5}{#1}");C("\\tealB","\\textcolor{##26edd5}{#1}");C("\\tealC","\\textcolor{##01d1c1}{#1}");C("\\tealD","\\textcolor{##01a995}{#1}");C("\\tealE","\\textcolor{##208170}{#1}");C("\\greenA","\\textcolor{##b6ffb0}{#1}");C("\\greenB","\\textcolor{##8af281}{#1}");C("\\greenC","\\textcolor{##74cf70}{#1}");C("\\greenD","\\textcolor{##1fab54}{#1}");C("\\greenE","\\textcolor{##0d923f}{#1}");C("\\goldA","\\textcolor{##ffd0a9}{#1}");C("\\goldB","\\textcolor{##ffbb71}{#1}");C("\\goldC","\\textcolor{##ff9c39}{#1}");C("\\goldD","\\textcolor{##e07d10}{#1}");C("\\goldE","\\textcolor{##a75a05}{#1}");C("\\redA","\\textcolor{##fca9a9}{#1}");C("\\redB","\\textcolor{##ff8482}{#1}");C("\\redC","\\textcolor{##f9685d}{#1}");C("\\redD","\\textcolor{##e84d39}{#1}");C("\\redE","\\textcolor{##bc2612}{#1}");C("\\maroonA","\\textcolor{##ffbde0}{#1}");C("\\maroonB","\\textcolor{##ff92c6}{#1}");C("\\maroonC","\\textcolor{##ed5fa6}{#1}");C("\\maroonD","\\textcolor{##ca337c}{#1}");C("\\maroonE","\\textcolor{##9e034e}{#1}");C("\\purpleA","\\textcolor{##ddd7ff}{#1}");C("\\purpleB","\\textcolor{##c6b9fc}{#1}");C("\\purpleC","\\textcolor{##aa87ff}{#1}");C("\\purpleD","\\textcolor{##7854ab}{#1}");C("\\purpleE","\\textcolor{##543b78}{#1}");C("\\mintA","\\textcolor{##f5f9e8}{#1}");C("\\mintB","\\textcolor{##edf2df}{#1}");C("\\mintC","\\textcolor{##e0e5cc}{#1}");C("\\grayA","\\textcolor{##f6f7f7}{#1}");C("\\grayB","\\textcolor{##f0f1f2}{#1}");C("\\grayC","\\textcolor{##e3e5e6}{#1}");C("\\grayD","\\textcolor{##d6d8da}{#1}");C("\\grayE","\\textcolor{##babec2}{#1}");C("\\grayF","\\textcolor{##888d93}{#1}");C("\\grayG","\\textcolor{##626569}{#1}");C("\\grayH","\\textcolor{##3b3e40}{#1}");C("\\grayI","\\textcolor{##21242c}{#1}");C("\\kaBlue","\\textcolor{##314453}{#1}");C("\\kaGreen","\\textcolor{##71B307}{#1}");var A6={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class pR{constructor(e,r,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(e),this.macros=new hR(fR,r.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new D4(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var r,n,s;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:n}=this.consumeArg(["]"])}else({tokens:s,start:r,end:n}=this.consumeArg());return this.pushToken(new Yr("EOF",n.loc)),this.pushTokens(s),new Yr("",jr.range(r,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var r=[],n=e&&e.length>0;n||this.consumeSpaces();var s=this.future(),i,o=0,a=0;do{if(i=this.popToken(),r.push(i),i.text==="{")++o;else if(i.text==="}"){if(--o,o===-1)throw new Y("Extra }",i)}else if(i.text==="EOF")throw new Y("Unexpected end of input in a macro argument, expected '"+(e&&n?e[a]:"}")+"'",i);if(e&&n)if((o===0||o===1&&e[a]==="{")&&i.text===e[a]){if(++a,a===e.length){r.splice(-a,a);break}}else a=0}while(o!==0||n);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:i}}consumeArgs(e,r){if(r){if(r.length!==e+1)throw new Y("The length of delimiters doesn't match the number of args!");for(var n=r[0],s=0;s<n.length;s++){var i=this.popToken();if(n[s]!==i.text)throw new Y("Use of the macro doesn't match its definition",i)}}for(var o=[],a=0;a<e;a++)o.push(this.consumeArg(r&&r[a+1]).tokens);return o}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new Y("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var r=this.popToken(),n=r.text,s=r.noexpand?null:this._getExpansion(n);if(s==null||e&&s.unexpandable){if(e&&s==null&&n[0]==="\\"&&!this.isDefined(n))throw new Y("Undefined control sequence: "+n);return this.pushToken(r),!1}this.countExpansion(1);var i=s.tokens,o=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){i=i.slice();for(var a=i.length-1;a>=0;--a){var l=i[a];if(l.text==="#"){if(a===0)throw new Y("Incomplete placeholder at end of macro body",l);if(l=i[--a],l.text==="#")i.splice(a+1,1);else if(/^[1-9]$/.test(l.text))i.splice(a,2,...o[+l.text-1]);else throw new Y("Not a valid argument number",l)}}}return this.pushTokens(i),i.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Yr(e)]):void 0}expandTokens(e){var r=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(e){var r=this.expandMacro(e);return r&&r.map(n=>n.text).join("")}_getExpansion(e){var r=this.macros.get(e);if(r==null)return r;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var i=0;if(s.indexOf("#")!==-1)for(var o=s.replace(/##/g,"");o.indexOf("#"+(i+1))!==-1;)++i;for(var a=new D4(s,this.settings),l=[],u=a.lex();u.text!=="EOF";)l.push(u),u=a.lex();l.reverse();var c={tokens:l,numArgs:i};return c}return s}isDefined(e){return this.macros.has(e)||mi.hasOwnProperty(e)||tt.math.hasOwnProperty(e)||tt.text.hasOwnProperty(e)||A6.hasOwnProperty(e)}isExpandable(e){var r=this.macros.get(e);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:mi.hasOwnProperty(e)&&!mi[e].primitive}}var L4=/^[]/,ed=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),kp={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},P4={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class ef{constructor(e,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new pR(e,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(e,r){if(r===void 0&&(r=!0),this.fetch().text!==e)throw new Y("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Yr("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,n}parseExpression(e,r){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(ef.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||e&&mi[s.text]&&mi[s.text].infix)break;var i=this.parseAtom(r);if(i){if(i.type==="internal")continue}else break;n.push(i)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var r=-1,n,s=0;s<e.length;s++)if(e[s].type==="infix"){if(r!==-1)throw new Y("only one infix operator per group",e[s].token);r=s,n=e[s].replaceWith}if(r!==-1&&n){var i,o,a=e.slice(0,r),l=e.slice(r+1);a.length===1&&a[0].type==="ordgroup"?i=a[0]:i={type:"ordgroup",mode:this.mode,body:a},l.length===1&&l[0].type==="ordgroup"?o=l[0]:o={type:"ordgroup",mode:this.mode,body:l};var u;return n==="\\\\abovefrac"?u=this.callFunction(n,[i,e[r],o],[]):u=this.callFunction(n,[i,o],[]),[u]}else return e}handleSupSubscript(e){var r=this.fetch(),n=r.text;this.consume(),this.consumeSpaces();var s;do{var i;s=this.parseGroup(e)}while(((i=s)==null?void 0:i.type)==="internal");if(!s)throw new Y("Expected group after '"+n+"'",r);return s}formatUnsupportedCmd(e){for(var r=[],n=0;n<e.length;n++)r.push({type:"textord",mode:"text",text:e[n]});var s={type:"text",mode:this.mode,body:r},i={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return i}parseAtom(e){var r=this.parseGroup("atom",e);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var n,s;;){this.consumeSpaces();var i=this.fetch();if(i.text==="\\limits"||i.text==="\\nolimits"){if(r&&r.type==="op"){var o=i.text==="\\limits";r.limits=o,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=i.text==="\\limits");else throw new Y("Limit controls must follow a math operator",i);this.consume()}else if(i.text==="^"){if(n)throw new Y("Double superscript",i);n=this.handleSupSubscript("superscript")}else if(i.text==="_"){if(s)throw new Y("Double subscript",i);s=this.handleSupSubscript("subscript")}else if(i.text==="'"){if(n)throw new Y("Double superscript",i);var a={type:"textord",mode:this.mode,text:"\\prime"},l=[a];for(this.consume();this.fetch().text==="'";)l.push(a),this.consume();this.fetch().text==="^"&&l.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:l}}else if(ed[i.text]){var u=L4.test(i.text),c=[];for(c.push(new Yr(ed[i.text])),this.consume();;){var d=this.fetch().text;if(!ed[d]||L4.test(d)!==u)break;c.unshift(new Yr(ed[d])),this.consume()}var h=this.subparse(c);u?s={type:"ordgroup",mode:"math",body:h}:n={type:"ordgroup",mode:"math",body:h}}else break}return n||s?{type:"supsub",mode:this.mode,base:r,sup:n,sub:s}:r}parseFunction(e,r){var n=this.fetch(),s=n.text,i=mi[s];if(!i)return null;if(this.consume(),r&&r!=="atom"&&!i.allowedInArgument)throw new Y("Got function '"+s+"' with no arguments"+(r?" as "+r:""),n);if(this.mode==="text"&&!i.allowedInText)throw new Y("Can't use function '"+s+"' in text mode",n);if(this.mode==="math"&&i.allowedInMath===!1)throw new Y("Can't use function '"+s+"' in math mode",n);var{args:o,optArgs:a}=this.parseArguments(s,i);return this.callFunction(s,o,a,n,e)}callFunction(e,r,n,s,i){var o={funcName:e,parser:this,token:s,breakOnTokenText:i},a=mi[e];if(a&&a.handler)return a.handler(o,r,n);throw new Y("No function handler for "+e)}parseArguments(e,r){var n=r.numArgs+r.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var s=[],i=[],o=0;o<n;o++){var a=r.argTypes&&r.argTypes[o],l=o<r.numOptionalArgs;(r.primitive&&a==null||r.type==="sqrt"&&o===1&&i[0]==null)&&(a="primitive");var u=this.parseGroupOfType("argument to '"+e+"'",a,l);if(l)i.push(u);else if(u!=null)s.push(u);else throw new Y("Null argument, please report this as a bug")}return{args:s,optArgs:i}}parseGroupOfType(e,r,n){switch(r){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,r);case"hbox":{var s=this.parseArgumentGroup(n,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var i=this.parseStringGroup("raw",n);return i!=null?{type:"raw",mode:"text",string:i.text}:null}case"primitive":{if(n)throw new Y("A primitive argument cannot be optional");var o=this.parseGroup(e);if(o==null)throw new Y("Expected group as "+e,this.fetch());return o}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new Y("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,r){var n=this.gullet.scanArgument(r);if(n==null)return null;for(var s="",i;(i=this.fetch()).text!=="EOF";)s+=i.text,this.consume();return this.consume(),n.text=s,n}parseRegexGroup(e,r){for(var n=this.fetch(),s=n,i="",o;(o=this.fetch()).text!=="EOF"&&e.test(i+o.text);)s=o,i+=s.text,this.consume();if(i==="")throw new Y("Invalid "+r+": '"+n.text+"'",n);return n.range(s,i)}parseColorGroup(e){var r=this.parseStringGroup("color",e);if(r==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!n)throw new Y("Invalid color: '"+r.text+"'",r);var s=n[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(e){var r,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",e),!r)return null;!e&&r.text.length===0&&(r.text="0pt",n=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new Y("Invalid size: '"+r.text+"'",r);var i={number:+(s[1]+s[2]),unit:s[3]};if(!$w(i))throw new Y("Invalid unit: '"+i.unit+"'",r);return{type:"size",mode:this.mode,value:i,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var n=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,r){var n=this.gullet.scanArgument(e);if(n==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var i=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var o={type:"ordgroup",mode:this.mode,loc:n.loc,body:i};return r&&this.switchMode(s),o}parseGroup(e,r){var n=this.fetch(),s=n.text,i;if(s==="{"||s==="\\begingroup"){this.consume();var o=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var a=this.parseExpression(!1,o),l=this.fetch();this.expect(o),this.gullet.endGroup(),i={type:"ordgroup",mode:this.mode,loc:jr.range(n,l),body:a,semisimple:s==="\\begingroup"||void 0}}else if(i=this.parseFunction(r,e)||this.parseSymbol(),i==null&&s[0]==="\\"&&!A6.hasOwnProperty(s)){if(this.settings.throwOnError)throw new Y("Undefined control sequence: "+s,n);i=this.formatUnsupportedCmd(s),this.consume()}return i}formLigatures(e){for(var r=e.length-1,n=0;n<r;++n){var s=e[n],i=s.text;i==="-"&&e[n+1].text==="-"&&(n+1<r&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:jr.range(s,e[n+2]),text:"---"}),r-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:jr.range(s,e[n+1]),text:"--"}),r-=1)),(i==="'"||i==="`")&&e[n+1].text===i&&(e.splice(n,2,{type:"textord",mode:"text",loc:jr.range(s,e[n+1]),text:i+i}),r-=1)}}parseSymbol(){var e=this.fetch(),r=e.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var n=r.slice(5),s=n.charAt(0)==="*";if(s&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new Y(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:s}}P4.hasOwnProperty(r[0])&&!tt[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',e),r=P4[r[0]]+r.slice(1));var i=cR.exec(r);i&&(r=r.substring(0,i.index),r==="i"?r="":r==="j"&&(r=""));var o;if(tt[this.mode][r]){this.settings.strict&&this.mode==="math"&&h1.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',e);var a=tt[this.mode][r].group,l=jr.range(e),u;if(rj.hasOwnProperty(a)){var c=a;u={type:"atom",mode:this.mode,family:c,loc:l,text:r}}else u={type:a,mode:this.mode,loc:l,text:r};o=u}else if(r.charCodeAt(0)>=128)this.settings.strict&&(Lw(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),e)),o={type:"textord",mode:"text",loc:jr.range(e),text:r};else return null;if(this.consume(),i)for(var d=0;d<i[0].length;d++){var h=i[0][d];if(!kp[h])throw new Y("Unknown accent ' "+h+"'",e);var p=kp[h][this.mode]||kp[h].text;if(!p)throw new Y("Accent "+h+" unsupported in "+this.mode+" mode",e);o={type:"accent",mode:this.mode,loc:jr.range(e),label:p,isStretchy:!1,isShifty:!0,base:o}}return o}}ef.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var wv=function(e,r){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new ef(e,r);delete n.gullet.macros.current["\\df@tag"];var s=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new Y("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:n.subparse([new Yr("\\df@tag")])}]}return s},j6=function(e,r,n){r.textContent="";var s=kv(e,n).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),j6=function(){throw new Y("KaTeX doesn't work in quirks mode.")});var mR=function(e,r){var n=kv(e,r).toMarkup();return n},gR=function(e,r){var n=new nv(r);return wv(e,n)},R6=function(e,r,n){if(n.throwOnError||!(e instanceof Y))throw e;var s=z.makeSpan(["katex-error"],[new bn(r)]);return s.setAttribute("title",e.toString()),s.setAttribute("style","color:"+n.errorColor),s},kv=function(e,r){var n=new nv(r);try{var s=wv(e,n);return Cj(s,e,n)}catch(i){return R6(i,e,n)}},vR=function(e,r){var n=new nv(r);try{var s=wv(e,n);return Ej(s,e,n)}catch(i){return R6(i,e,n)}},yR="0.16.28",xR={Span:cc,Anchor:ov,SymbolNode:bn,SvgNode:Is,PathNode:zi,LineNode:d1},S0={version:yR,render:j6,renderToString:mR,ParseError:Y,SETTINGS_SCHEMA:_d,__parse:gR,__renderToDomTree:kv,__renderToHTMLTree:vR,__setFontMetrics:GA,__defineSymbol:g,__defineFunction:te,__defineMacro:C,__domTree:xR};const $u=t=>{if(!t||typeof t!="string")return t;let e=t.replace(/\$\$([^$]+?)\$\$/g,(r,n)=>{try{return S0.renderToString(n.trim(),{displayMode:!0,throwOnError:!1,output:"html"})}catch(s){return console.warn("  KaTeX:",s),r}});return e=e.replace(/\$([^$]+?)\$/g,(r,n)=>{try{return S0.renderToString(n.trim(),{displayMode:!1,throwOnError:!1,output:"html"})}catch(s){return console.warn("  KaTeX:",s),r}}),e},Sp=80,bR=({questions:t,lessonId:e,lang:r,onClose:n,onComplete:s})=>{const[i,o]=T.useState(0),[a,l]=T.useState({}),[u,c]=T.useState(!1),[d,h]=T.useState(0),[p,m]=T.useState(!1),[y,x]=T.useState(""),[v,w]=T.useState(new Set),[k,E]=T.useState(!0);Ve.useEffect(()=>{const $=()=>{const fe=document.hasFocus()&&!document.hidden;E(fe)};window.addEventListener("focus",$),window.addEventListener("blur",$),document.addEventListener("visibilitychange",$);const U=setInterval($,300);return()=>{window.removeEventListener("focus",$),window.removeEventListener("blur",$),document.removeEventListener("visibilitychange",$),clearInterval(U)}},[]);const M=`test_progress_${e}`,j=T.useMemo(()=>{if(!t)return[];const $=localStorage.getItem(M);if($&&d===0)try{const ie=JSON.parse($);if(ie.questions&&ie.answers&&ie.locked){l(ie.answers),w(new Set(ie.locked)),o(ie.currentIndex||0);const _e=new Set(ie.locked),Ee=ie.questions.filter(He=>_e.has(He.id)),Ge=new Set(Ee.map(He=>He.id)),yt=Ks(t.filter(He=>!Ge.has(He.id))),ze=Math.min(10,t.length)-Ee.length,ge=yt.slice(0,Math.max(0,ze)).map(He=>He.type==="multiple_choice"?{...He,options:Ks(He.options)}:He.type==="matching"?{...He,leftItems:Ks(He.leftItems),rightItems:Ks(He.rightItems)}:He);return[...Ee,...ge]}}catch(ie){console.warn("   :",ie)}return Ks(t).slice(0,10).map(ie=>ie.type==="multiple_choice"?{...ie,options:Ks(ie.options)}:ie.type==="matching"?{...ie,leftItems:Ks(ie.leftItems),rightItems:Ks(ie.rightItems)}:ie)},[t,d]),N=j[i],_=j.length;T.useEffect(()=>{if(j.length>0&&!u){const $={questions:j,answers:a,locked:[...v],currentIndex:i};localStorage.setItem(M,JSON.stringify($))}},[a,v,i,j,u]);const L=$=>v.has($),V=()=>{const $=j[i];if(!$)return;const U=a[$.id];U!=null&&U!==""&&w(fe=>new Set([...fe,$.id]))},ee=($,U)=>{L($)||l(fe=>({...fe,[$]:U}))},P=()=>{i<_-1&&(V(),o($=>$+1))},D=()=>{i>0&&o($=>$-1)},[B,I]=T.useState(null),H=T.useMemo(()=>j.filter($=>{const U=a[$.id];return U==null||U===""?!0:$.type==="matching"&&typeof U=="object"?Object.keys(U).length<$.leftItems.length:!1}).length,[a,j]);T.useEffect(()=>{if(p){const $=setTimeout(()=>{m(!1),x("")},3e3);return()=>clearTimeout($)}},[p]);const Z=()=>{if(V(),H>0){m(!0);const ze=r==="ru"?`    ${H} ${H===1?"":H<5?"":""}!`:`  ${H}   !`;x(ze);return}let $=0;const U=j.map(ze=>{const ge=a[ze.id];let He=!1;if(ze.type==="multiple_choice")He=ge===ze.correctId;else if(ze.type==="matching")He=Object.entries(ze.correctMatches).every(([Nt,Gt])=>(ge==null?void 0:ge[Nt])===Gt);else if(ze.type==="numeric"){const Nt=ze.digits.join("");He=ge===Nt}return He&&$++,{question:ze,userAnswer:ge,isCorrect:He}}),fe=Math.round($/_*100),ie=fe>=Sp,_e=`test_history_${e}`,Ee=JSON.parse(localStorage.getItem(_e)||"[]"),Ge={score:fe,correct:$,total:_,timestamp:Date.now(),passed:ie},yt=[...Ee,Ge];if(localStorage.setItem(_e,JSON.stringify(yt)),localStorage.setItem(`test_result_${e}`,JSON.stringify(Ge)),ie){const ze=parseInt(localStorage.getItem("user_coins")||"0");localStorage.setItem("user_coins",(ze+1).toString())}I({correct:$,total:_,score:fe,isPassed:ie,details:U}),c(!0),localStorage.removeItem(M)},q=()=>{localStorage.removeItem(M),o(0),l({}),m(!1),x(""),w(new Set),I(null),c(!1),h($=>$+1)},ue=$=>{const U=r==="tj"&&$.textTj||$.textRu;return $u(U||"")},ne=$=>{const U=r==="tj"&&$.textTj||$.textRu;return $u(U||"")};return!t||t.length===0?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"bg-gaming-card/95 rounded-2xl p-8 text-center max-w-md",children:[f.jsx(Pc,{size:48,className:"mx-auto mb-4 text-red-400"}),f.jsx("h3",{className:"text-xl font-bold mb-2",children:r==="ru"?" ":" "}),f.jsx("p",{className:"text-gaming-textMuted mb-4",children:r==="ru"?"    ":"   "}),f.jsx("button",{onClick:n,className:"px-6 py-2 bg-gaming-primary text-white rounded-xl",children:r==="ru"?"":""})]})}):u&&B?f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 overflow-y-auto",children:f.jsxs("div",{className:"w-full max-w-2xl bg-gaming-card/95 rounded-3xl border border-white/10 my-8",children:[f.jsxs("div",{className:"p-6 border-b border-white/10 text-center relative overflow-hidden",children:[B.isPassed?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute inset-0 bg-green-500/10"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-yellow-400 rounded-full flex items-center justify-center shadow-[0_0_30px_rgba(250,204,21,0.6)] animate-bounce",children:f.jsx("div",{className:"w-20 h-20 border-4 border-yellow-600 rounded-full flex items-center justify-center bg-yellow-300",children:f.jsx("span",{className:"text-4xl font-bold text-yellow-700",children:"$"})})}),f.jsx("h2",{className:"text-3xl font-bold mb-2 text-green-400",children:r==="ru"?" !":"  !"}),f.jsx("p",{className:"text-green-300/80 mb-2",children:r==="ru"?"+1   ":"+1   "})]})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"absolute inset-0 bg-red-500/10"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Pc,{size:64,className:"mx-auto mb-4 text-red-500"}),f.jsx("h2",{className:"text-3xl font-bold mb-2 text-red-400",children:r==="ru"?"  ":"  "}),f.jsx("p",{className:"text-red-300/80 mb-2",children:r==="ru"?`   ${Sp}%`:`   ${Sp}% `})]})]}),f.jsxs("div",{className:`text-5xl font-bold mb-2 relative z-10 ${B.isPassed?"text-green-400":"text-red-400"}`,children:[B.score,"%"]}),f.jsxs("p",{className:"text-gaming-textMuted relative z-10",children:[B.correct," / ",B.total," ",r==="ru"?" ":" "]})]}),f.jsx("div",{className:"p-6 max-h-[50vh] overflow-y-auto space-y-4",children:B.details.map(($,U)=>f.jsx("div",{className:`p-4 rounded-xl border ${$.isCorrect?"bg-green-500/10 border-green-500/30":"bg-red-500/10 border-red-500/30"}`,children:f.jsxs("div",{className:"flex items-start gap-3",children:[$.isCorrect?f.jsx(wo,{className:"text-green-400 mt-1",size:20}):f.jsx(Pc,{className:"text-red-400 mt-1",size:20}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"font-medium mb-1 flex gap-1",children:[f.jsxs("span",{children:[U+1,"."]}),f.jsx("div",{dangerouslySetInnerHTML:{__html:ue($.question)},className:"[&>p]:inline [&>p]:m-0"})]}),!$.isCorrect&&$.question.type==="multiple_choice"&&f.jsxs("div",{className:"text-sm text-green-400 flex flex-wrap gap-1",children:[f.jsx("span",{children:r==="ru"?" : ":" : "}),f.jsx("span",{className:"font-semibold",dangerouslySetInnerHTML:{__html:ne($.question.options.find(fe=>fe.id===$.question.correctId))}})]})]})]})},$.question.id))}),f.jsxs("div",{className:"p-6 border-t border-white/10 flex gap-4 justify-center",children:[f.jsxs("button",{onClick:q,className:"flex items-center gap-2 px-6 py-3 bg-white/10 text-white rounded-xl hover:bg-white/20",children:[f.jsx(gw,{size:18}),r==="ru"?" ":" "]}),B.isPassed&&f.jsxs("button",{onClick:()=>{s&&s(B),n()},className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 shadow-[0_0_15px_rgba(22,163,74,0.5)]",children:[f.jsx(wo,{size:18}),r==="ru"?" ":" "]})]})]})}):f.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 select-none",onContextMenu:$=>$.preventDefault(),style:{WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},children:[!k&&f.jsx("div",{className:"fixed inset-0 z-[100] backdrop-blur-3xl flex items-center justify-center bg-black/90 cursor-not-allowed",onClick:$=>$.stopPropagation(),children:f.jsxs("div",{className:"text-center p-6",children:[f.jsx(Pc,{size:64,className:"mx-auto mb-4 text-red-500 animate-pulse"}),f.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r==="ru"?"  !":"  !"}),f.jsx("p",{className:"text-white/80",children:r==="ru"?"    ":"       "})]})}),f.jsxs("div",{className:`w-full max-w-2xl bg-gaming-card/95 rounded-3xl border border-white/10 overflow-hidden relative transition-all duration-300 ${k?"":"opacity-0 pointer-events-none"}`,children:[f.jsx("div",{className:"absolute inset-0 z-0 pointer-events-none overflow-hidden opacity-[0.03] flex flex-wrap content-center justify-center gap-8 rotate-12 scale-150",children:Array.from({length:20}).map(($,U)=>f.jsx("div",{className:"text-2xl font-black text-white whitespace-nowrap",children:"DONISHMAND PLATFORM"},U))}),f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10 relative z-10",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("span",{className:"text-lg font-semibold",children:[r==="ru"?"":""," ",i+1," / ",_]}),f.jsx("div",{className:"flex gap-1",children:j.map(($,U)=>{const fe=(()=>{const _e=a[$==null?void 0:$.id];return _e==null||_e===""?!1:($==null?void 0:$.type)==="matching"&&typeof _e=="object"?Object.keys(_e).length>=$.leftItems.length:!0})(),ie=p&&!fe;return f.jsx("button",{onClick:()=>o(U),title:`${r==="ru"?"":""} ${U+1}${fe?"":r==="ru"?" ( )":" ( )"}`,className:`w-2.5 h-2.5 rounded-full transition-all duration-300 cursor-pointer hover:scale-150 ${U===i?"bg-gaming-primary scale-125":fe?"bg-white/60":ie?"bg-red-500 animate-pulse scale-125":"bg-white/20 hover:bg-white/40"}`},U)})})]}),f.jsx("button",{onClick:n,className:"p-2 text-gaming-textMuted hover:text-white",children:f.jsx(Di,{size:24})})]}),f.jsxs("div",{className:"p-6 relative z-10",children:[f.jsx("div",{className:"text-xl font-medium mb-6 prose prose-invert max-w-none [&>p]:inline [&>p]:m-0",dangerouslySetInnerHTML:{__html:ue(N)}}),N.image&&f.jsx("div",{className:"mb-6 rounded-xl overflow-hidden border border-white/10 bg-black/20 flex justify-center",children:f.jsx("img",{src:N.image,alt:"Question",className:"max-w-full max-h-[400px] object-contain"})}),N.type==="multiple_choice"&&(()=>{const $=L(N.id);return f.jsxs("div",{className:"space-y-3",children:[$&&f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-white/5 rounded-lg text-sm text-gaming-textMuted",children:[f.jsx(ep,{size:14}),f.jsx("span",{children:r==="ru"?" ":"  "})]}),N.options.map((U,fe)=>{const ie=a[N.id]===U.id;return f.jsxs("button",{onClick:()=>ee(N.id,U.id),disabled:$,className:`w-full flex items-center gap-4 p-4 rounded-xl border transition-all text-left ${ie?"bg-gaming-primary/20 border-gaming-primary":$?"bg-white/5 border-white/5 opacity-40 cursor-not-allowed":"bg-white/5 border-white/10 hover:bg-white/10"}`,children:[f.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold shrink-0 ${ie?"bg-gaming-primary text-white":"bg-white/10"}`,children:String.fromCharCode(65+fe)}),f.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[f.jsx("span",{dangerouslySetInnerHTML:{__html:ne(U)}}),U.image&&f.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-[200px]",children:f.jsx("img",{src:U.image,alt:"Option",className:"w-full h-auto object-cover"})})]}),ie&&$&&f.jsx(ep,{size:16,className:"text-gaming-textMuted shrink-0"})]},U.id)})]})})(),N.type==="matching"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4 border-b border-white/10",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs font-bold text-gaming-pink uppercase tracking-wider mb-2",children:r==="ru"?" 1":" 1"}),N.leftItems.map(($,U)=>f.jsxs("div",{className:"text-sm flex gap-2 items-start",children:[f.jsxs("span",{className:"font-bold text-gaming-pink min-w-[20px] pt-1",children:[String.fromCharCode(65+U),")"]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-gaming-textMuted leading-tight",dangerouslySetInnerHTML:{__html:ne($)}}),$.image&&f.jsx("img",{src:$.image,alt:"Item",className:"w-24 h-24 object-cover rounded-lg border border-white/10"})]})]},$.id))]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs font-bold text-gaming-accent uppercase tracking-wider mb-2",children:r==="ru"?" 2":" 2"}),N.rightItems.map(($,U)=>f.jsxs("div",{className:"text-sm flex gap-2 items-start",children:[f.jsxs("span",{className:"font-bold text-gaming-accent min-w-[20px] pt-1",children:[U+1,")"]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-gaming-textMuted leading-tight",dangerouslySetInnerHTML:{__html:ne($)}}),$.image&&f.jsx("img",{src:$.image,alt:"Item",className:"w-24 h-24 object-cover rounded-lg border border-white/10"})]})]},$.id))]})]}),f.jsx("p",{className:"text-sm text-gaming-textMuted text-center",children:r==="ru"?"   :":"    :"}),f.jsx("div",{className:"flex justify-center",children:f.jsx("div",{className:"overflow-x-auto max-w-full pb-2",children:f.jsxs("table",{className:"border-separate border-spacing-1",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-8"}),N.rightItems.map(($,U)=>f.jsx("th",{className:"text-center font-bold text-gaming-accent text-sm p-1",children:U+1},$.id))]})}),f.jsx("tbody",{children:N.leftItems.map(($,U)=>f.jsxs("tr",{children:[f.jsx("td",{className:"text-center font-bold text-gaming-pink text-sm p-1",children:String.fromCharCode(65+U)}),N.rightItems.map(fe=>{var Ee;const ie=((Ee=a[N.id])==null?void 0:Ee[$.id])===fe.id,_e=L(N.id);return f.jsx("td",{className:"text-center p-0.5",children:f.jsx("button",{onClick:()=>ee(N.id,{...a[N.id]||{},[$.id]:fe.id}),disabled:_e,className:`w-8 h-8 rounded-full border-2 transition-all flex items-center justify-center
                                                                        ${ie?"bg-gaming-primary border-gaming-primary":_e?"bg-white/5 border-white/10 opacity-30 cursor-not-allowed":"bg-white/5 border-white/20 hover:border-white/40"}`,children:ie&&f.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})},fe.id)})]},$.id))})]})})})]}),N.type==="numeric"&&(()=>{const $=L(N.id);return f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-sm text-gaming-textMuted",children:$?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(ep,{size:14})," ",r==="ru"?" ":"  "]}):r==="ru"?" :":"  :"}),f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[[0,1,2,3].map(U=>f.jsx("input",{type:"text",maxLength:1,disabled:$,value:(a[N.id]||"")[U]||"",onChange:fe=>{const ie=fe.target.value;if(ie&&!/^\d$/.test(ie))return;const Ee=(a[N.id]||"").split("");if(Ee[U]=ie,ee(N.id,Ee.join("")),ie&&U<3){const Ge=fe.target.nextElementSibling;Ge&&Ge.focus()}},className:`w-14 h-14 text-center text-2xl font-bold rounded-lg text-white focus:outline-none ${$?"bg-gaming-bg/50 border-2 border-gaming-primary/30 opacity-70 cursor-not-allowed":"bg-gaming-bg/50 border-2 border-white/20 focus:border-gaming-primary"}`},U)),N.unit&&f.jsx("span",{className:"text-xl text-gaming-textMuted ml-2",children:N.unit})]})]})})()]}),f.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-white/10 relative z-10",children:[i>0?f.jsxs("button",{onClick:D,className:"flex items-center gap-2 px-4 py-2 rounded-xl text-white hover:bg-white/10",children:[f.jsx(Bh,{size:18}),r==="ru"?"":""]}):f.jsx("div",{}),i===_-1?f.jsxs("div",{className:"flex flex-col items-end gap-2",children:[p&&y&&f.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-500/20 border border-red-500/40 text-red-400 rounded-xl text-sm animate-bounce",children:[f.jsx(lw,{size:16,className:"shrink-0"}),f.jsx("span",{children:y})]}),f.jsxs("button",{onClick:Z,className:`flex items-center gap-2 px-6 py-2 rounded-xl transition-all ${p?"bg-red-500/80 text-white animate-[shake_0.5s_ease-in-out]":"bg-gaming-primary text-white hover:bg-gaming-primary/80"}`,children:[f.jsx(wo,{size:18}),r==="ru"?" ":" "]})]}):f.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 text-white hover:bg-white/10 rounded-xl",children:[r==="ru"?"":"",f.jsx(Oi,{size:18})]})]})]})]})},wR=({questions:t,lang:e,onClose:r})=>{const[n,s]=T.useState(!1),[i,o]=T.useState({});if(!t||t.length===0)return null;const a=d=>{o(h=>({...h,[d]:!h[d]}))},l=()=>{const d=!n;s(d);const h={};t.forEach(p=>h[p.id]=d),o(h)},u=d=>{const h=e==="tj"&&d.textTj||d.textRu;return $u(h||"")},c=d=>{const h=e==="tj"&&d.textTj||d.textRu;return $u(h||"")};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4 overflow-y-auto",children:f.jsxs("div",{className:"w-full max-w-4xl bg-gaming-card/95 rounded-3xl border border-white/10 my-8 shadow-2xl flex flex-col max-h-[90vh]",children:[f.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 shrink-0",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:e==="ru"?" :  ":" :  "}),f.jsxs("p",{className:"text-gaming-textMuted text-sm",children:[t.length," ",e==="ru"?"":""]})]}),f.jsx("button",{onClick:r,className:"p-2 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:f.jsx(Di,{size:24})})]}),f.jsx("div",{className:"p-4 bg-black/20 border-b border-white/5 flex justify-between items-center shrink-0",children:f.jsxs("button",{onClick:l,className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-bold transition-all ${n?"bg-gaming-primary text-white":"bg-white/10 text-gaming-textMuted hover:text-white"}`,children:[n?f.jsx(_2,{size:18}):f.jsx(ql,{size:18}),n?e==="ru"?"  ":"  ":e==="ru"?"  ":"  "]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:t.map((d,h)=>{const p=i[d.id];return f.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/5",children:[f.jsxs("div",{className:"flex justify-between items-start gap-4 mb-4",children:[f.jsxs("div",{className:"flex gap-3",children:[f.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gaming-pink/10 text-gaming-pink rounded-lg flex items-center justify-center font-bold text-sm border border-gaming-pink/20",children:h+1}),f.jsx("div",{className:"text-lg font-medium text-white pt-1 prose prose-invert max-w-none [&>p]:inline [&>p]:m-0",dangerouslySetInnerHTML:{__html:u(d)}}),d.image&&f.jsx("div",{className:"mt-2 rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-md",children:f.jsx("img",{src:d.image,alt:"Question",className:"w-full h-auto object-cover"})})]}),f.jsx("button",{onClick:()=>a(d.id),className:`p-2 rounded-lg transition-colors ${p?"text-gaming-primary bg-gaming-primary/10":"text-gaming-textMuted hover:bg-white/5"}`,title:e==="ru"?"/ ":" / ",children:p?f.jsx(_2,{size:20}):f.jsx(ql,{size:20})})]}),f.jsxs("div",{className:"transition-all duration-300",children:[d.type==="multiple_choice"&&f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pl-11",children:d.options.map((m,y)=>{const v=m.id===d.correctId&&p;return f.jsxs("div",{className:`p-3 rounded-xl border flex items-center gap-3 transition-all duration-300 ${v?"bg-green-500/10 border-green-500/30 text-green-400 font-bold":"bg-black/20 border-white/5 text-gaming-textMuted"}`,children:[f.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs transition-colors ${v?"bg-green-500 text-white":"bg-white/10"}`,children:String.fromCharCode(65+y)}),f.jsxs("div",{className:"flex flex-col gap-1 w-full",children:[f.jsx("span",{dangerouslySetInnerHTML:{__html:c(m)}}),m.image&&f.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 bg-black/20 max-w-[150px]",children:f.jsx("img",{src:m.image,alt:"Option",className:"w-full h-auto object-cover"})})]}),v&&f.jsx(wo,{size:16,className:"ml-auto animate-in zoom-in duration-300 shrink-0"})]},m.id)})}),d.type==="matching"&&f.jsxs("div",{className:"pl-11 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gaming-textMuted uppercase mb-2",children:e==="ru"?"":""}),d.leftItems.map((m,y)=>f.jsxs("div",{className:"mb-2 text-sm flex gap-2 items-start",children:[f.jsxs("span",{className:"text-gaming-pink font-bold mt-0.5",children:[String.fromCharCode(65+y),")"]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-white/80",dangerouslySetInnerHTML:{__html:c(m)}}),m.image&&f.jsx("img",{src:m.image,alt:"Item",className:"w-16 h-16 object-cover rounded-md border border-white/10"})]})]},m.id))]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-gaming-textMuted uppercase mb-2",children:e==="ru"?"":""}),d.rightItems.map((m,y)=>f.jsxs("div",{className:"mb-2 text-sm flex gap-2 items-start",children:[f.jsxs("span",{className:"text-gaming-accent font-bold mt-0.5",children:[y+1,")"]}),f.jsxs("div",{className:"flex flex-col gap-1",children:[f.jsx("span",{className:"text-white/80",dangerouslySetInnerHTML:{__html:c(m)}}),m.image&&f.jsx("img",{src:m.image,alt:"Item",className:"w-16 h-16 object-cover rounded-md border border-white/10"})]})]},m.id))]})]}),p&&f.jsxs("div",{className:"p-4 bg-green-500/5 border border-green-500/20 rounded-xl animate-in fade-in slide-in-from-top-2 duration-300",children:[f.jsx("p",{className:"text-sm text-green-400 font-bold mb-2",children:e==="ru"?" :":" :"}),f.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries(d.correctMatches).map(([m,y])=>{const x=d.leftItems.findIndex(w=>w.id===m),v=d.rightItems.findIndex(w=>w.id===y);return f.jsxs("span",{className:"px-2 py-1 bg-green-500/10 rounded border border-green-500/20 text-sm",children:[String.fromCharCode(65+x),"  ",v+1]},m)})})]})]}),d.type==="numeric"&&f.jsx("div",{className:"pl-11",children:f.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-green-500/5 border border-white/5 rounded-xl transition-all duration-300",children:[f.jsx("span",{className:"text-sm text-gaming-textMuted",children:e==="ru"?":":":"}),f.jsx("span",{className:`text-xl font-bold tracking-widest transition-all duration-300 ${p?"text-green-400":"text-white/20"}`,children:p?d.digits.join(""):"****"}),d.unit&&f.jsx("span",{className:"text-gaming-textMuted",children:d.unit}),p&&f.jsx(wo,{size:16,className:"text-green-400 animate-in zoom-in"})]})})]})]},d.id)})})]})})},Qo=(t,e)=>`progress_${t}_${e}`,kR=({lang:t,t:e,userRole:r})=>{var Fr,Us,Fn,Gi,Vs,Ji,Uo,Hn,xt;const{lessonId:n}=Lh(),s=el(),i=80,[o,a]=T.useState(!0),[l,u]=T.useState(null),[c,d]=T.useState(()=>({videoWatched:localStorage.getItem(Qo(n,"video"))==="true",textRead:localStorage.getItem(Qo(n,"text"))==="true",slidesViewed:JSON.parse(localStorage.getItem(Qo(n,"slides"))||"[]"),testHistory:JSON.parse(localStorage.getItem(`test_history_${n}`)||"[]")})),[h,p]=T.useState("video"),[m,y]=T.useState(!1),[x,v]=T.useState(!1),[w,k]=T.useState(!1),E=r==="teacher";T.useEffect(()=>{(async()=>{a(!0);try{const Je=await po.getLesson(n);if(!Je){u(null),a(!1);return}const lt=Je.subject;let nn=null;if(lt){const Un=await po.getStructure(lt);if(Un&&Un.sections)for(let Vn=0;Vn<Un.sections.length;Vn++){const vr=Un.sections[Vn];for(let Tn=0;Tn<vr.topics.length;Tn++){const F=vr.topics[Tn],ae=F.lessons.findIndex(Ce=>Ce.id===n);if(ae!==-1){nn={lesson:{...Je,...F.lessons[ae],content:Je.content},topic:F,section:vr,subjectKey:lt,lessonIndex:ae,topicIndex:Tn,sectionIndex:Vn};break}}if(nn)break}}u(nn||{lesson:Je,subjectKey:lt})}catch(Je){console.error("Error fetching lesson:",Je)}finally{a(!1)}})()},[n]);const M=((Fr=l==null?void 0:l.lesson)==null?void 0:Fr.content)||{},j=!!((Us=M.video)!=null&&Us.url),N=!!((Fn=M.text)!=null&&Fn.bodyRu||(Gi=M.text)!=null&&Gi.bodyTj),_=t==="tj"?M.slidesTj||[]:M.slidesRu||[],L=_.length>0,V=((Ji=(Vs=M.test)==null?void 0:Vs.questions)==null?void 0:Ji.length)>0,ee=j||N||L,P=((Uo=M.test)==null?void 0:Uo.questions)||[],D=T.useMemo(()=>{if(!c.testHistory||c.testHistory.length===0)return null;const Oe=c.testHistory.length,Je=Math.max(...c.testHistory.map(vr=>vr.score)),lt=c.testHistory.reduce((vr,Tn)=>vr+Tn.score,0)/Oe,nn=Math.round(100-lt),Un=c.testHistory[c.testHistory.length-1].timestamp,Vn=Je>=i;return{totalAttempts:Oe,bestScore:Je,avgErrorRate:nn,lastAttemptAt:Un,isPassed:Vn}},[c.testHistory]),B=_.length,I=c.slidesViewed.length,H=B>0?I>=B:!0,Z=!j||c.videoWatched,q=!N||c.textRead,ne=E||Z&&q&&(!L||H),$=[j,N,L,V].filter(Boolean).length;let U=0;j&&c.videoWatched&&U++,N&&c.textRead&&U++,L&&H&&U++,V&&(D!=null&&D.isPassed)&&U++;const fe=$>0?Math.round(U/$*100):0;T.useEffect(()=>{!o&&l&&(j?p("video"):N?p("text"):L&&p("slides"))},[o,j,N,L]);const ie=()=>{E||(localStorage.setItem(Qo(n,"video"),"true"),d(Oe=>({...Oe,videoWatched:!0})))},_e=()=>{E||c.textRead||(localStorage.setItem(Qo(n,"text"),"true"),d(Oe=>({...Oe,textRead:!0})))},Ee=Oe=>{if(E)return;const Je=[...new Set([...c.slidesViewed,Oe])];localStorage.setItem(Qo(n,"slides"),JSON.stringify(Je)),d(lt=>({...lt,slidesViewed:Je}))},Ge=()=>{ne?k(!0):v(!0)},yt=Oe=>{console.log("Test completed:",Oe);const Je=JSON.parse(localStorage.getItem(`test_history_${n}`)||"[]");d(lt=>({...lt,testHistory:Je}))};if(o)return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gaming-bg",children:f.jsx(It,{size:40,className:"text-gaming-primary animate-spin"})});if(!l)return f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center text-white bg-gaming-bg",children:[f.jsx("h2",{className:"text-2xl mb-4",children:t==="ru"?"  ":"  "}),f.jsx("button",{onClick:()=>s(-1),className:"text-gaming-primary hover:underline",children:t==="ru"?"":""})]});const{lesson:ze,topic:ge,section:He,subjectKey:Nt,lessonIndex:Gt,sectionIndex:Jt,topicIndex:Br}=l,gr=Oe=>t==="tj"&&Oe.titleTj?Oe.titleTj:Oe.title,Sn=(Hn=ge==null?void 0:ge.lessons)==null?void 0:Hn[Gt-1],rn=(xt=ge==null?void 0:ge.lessons)==null?void 0:xt[Gt+1],or=[];return j&&or.push({id:"video",icon:Au,label:{ru:"",tj:""},complete:c.videoWatched}),N&&or.push({id:"text",icon:xn,label:{ru:"",tj:""},complete:c.textRead}),L&&or.push({id:"slides",icon:fi,label:{ru:"",tj:""},complete:H}),f.jsxs(Uh,{subjectId:Nt,lang:t,children:[f.jsxs("div",{className:"max-w-4xl",children:[f.jsx("header",{className:"mb-6",children:f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-sm text-gaming-textMuted mb-1",children:[t==="ru"?"":""," ",Gt+1," / ",ge.lessons.length]}),f.jsxs("h1",{className:"text-3xl font-bold mb-2 text-gaming-pink",children:[Gt+1,". ",gr(ze)]}),f.jsx("p",{className:"text-gaming-textMuted flex items-center gap-2 text-sm",children:f.jsxs("span",{children:[Jt+1,".",Br+1,". ",gr(ge)]})})]}),E&&f.jsx("div",{className:"px-3 py-1 bg-gaming-pink text-white text-xs font-bold rounded-full uppercase tracking-wider animate-pulse",children:t==="ru"?" ":" "})]})}),!E&&f.jsxs("div",{className:"mb-8 bg-gradient-to-br from-gaming-primary/20 to-gaming-pink/20 backdrop-blur-xl border border-white/10 rounded-2xl p-6 relative overflow-hidden",children:[f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex justify-between items-end mb-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-lg mb-1",children:t==="ru"?" ":" "}),f.jsxs("p",{className:"text-gaming-textMuted text-sm",children:[U," / ",$," ",t==="ru"?" ":"  "]})]}),f.jsx("div",{className:"text-right",children:f.jsxs("div",{className:"text-3xl font-bold text-gaming-primary",children:[fe,"%"]})})]}),f.jsx("div",{className:"w-full h-3 bg-black/30 rounded-full mb-6 overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-gaming-primary to-gaming-pink transition-all duration-1000 ease-out",style:{width:`${fe}%`}})}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[j&&f.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${c.videoWatched?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.videoWatched?"bg-green-500/20":"bg-white/10"}`,children:c.videoWatched?f.jsx(Nn,{size:20}):f.jsx(Au,{size:20})}),f.jsx("span",{className:"font-medium text-sm",children:""})]}),N&&f.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${c.textRead?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.textRead?"bg-green-500/20":"bg-white/10"}`,children:c.textRead?f.jsx(Nn,{size:20}):f.jsx(xn,{size:20})}),f.jsx("span",{className:"font-medium text-sm",children:t==="ru"?"":""})]}),L&&f.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${H?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${H?"bg-green-500/20":"bg-white/10"}`,children:H?f.jsx(Nn,{size:20}):f.jsx(fi,{size:20})}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"font-medium text-sm",children:t==="ru"?"":""}),f.jsxs("span",{className:"text-xs opacity-70",children:[I,"/",B]})]})]}),V&&f.jsxs("div",{className:`p-4 rounded-xl border flex flex-col items-center justify-center gap-2 transition-colors ${D!=null&&D.isPassed?"bg-green-500/10 border-green-500/30 text-green-400":"bg-white/5 border-white/10 text-gaming-textMuted"}`,children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${D!=null&&D.isPassed?"bg-green-500/20":"bg-white/10"}`,children:D!=null&&D.isPassed?f.jsx(Nn,{size:20}):f.jsx(wo,{size:20})}),f.jsxs("div",{className:"flex flex-col items-center",children:[f.jsx("span",{className:"font-medium text-sm",children:""}),D&&f.jsxs("span",{className:"text-xs font-bold",children:[D.bestScore,"%"]})]})]})]})]}),D&&f.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex flex-wrap gap-4",children:[f.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[f.jsx(gw,{size:18,className:"text-gaming-gold"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:t==="ru"?"":""}),f.jsx("div",{className:"font-bold text-white",children:D.totalAttempts})]})]}),f.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-xl border border-white/5",children:[f.jsx(uE,{size:18,className:"text-gaming-primary"}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[10px] text-gaming-textMuted uppercase tracking-wider",children:t==="ru"?"":""}),f.jsx("div",{className:"font-bold text-white",children:D.lastAttemptAt?new Intl.DateTimeFormat(t==="tj"?"tg-TJ":"ru-RU",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"}).format(new Date(D.lastAttemptAt)):"-"})]})]})]})]}),ee?f.jsxs(f.Fragment,{children:[or.length>0&&f.jsx("div",{className:"flex gap-4 mb-6 border-b border-white/5 overflow-x-auto",children:or.map(Oe=>{const Je=Oe.icon;return f.jsxs("button",{onClick:()=>p(Oe.id),className:`pb-3 px-2 text-base font-semibold transition-all relative flex items-center gap-2 whitespace-nowrap ${h===Oe.id?"text-white":"text-gaming-textMuted hover:text-white"}`,children:[f.jsx(Je,{size:18}),Oe.label[t],Oe.complete&&!E&&f.jsx(Nn,{size:14,className:"text-green-400"}),h===Oe.id&&f.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gaming-pink rounded-t-full shadow-[0_0_10px_rgba(236,72,153,0.5)]"})]},Oe.id)})}),f.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-6 mb-6 shadow-xl overflow-hidden relative group",children:[f.jsx("div",{className:"absolute -left-20 -top-20 w-64 h-64 bg-gaming-pink/5 rounded-full blur-3xl group-hover:bg-gaming-pink/10 transition-all duration-700"}),f.jsxs("div",{className:"relative z-10",children:[h==="video"&&j&&f.jsxs("div",{className:"aspect-video bg-black/60 rounded-xl flex flex-col items-center justify-center border border-white/10 shadow-inner overflow-hidden relative",children:[M.video.url.includes("youtube")||M.video.url.includes("youtu.be")?f.jsx("iframe",{src:M.video.url.replace("watch?v=","embed/"),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,onLoad:ie}):f.jsx("video",{src:M.video.url,controls:!0,className:"w-full h-full",onEnded:ie,onPlay:()=>setTimeout(ie,3e4)}),!c.videoWatched&&!E&&f.jsxs("button",{onClick:ie,className:"absolute bottom-4 right-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[f.jsx(ql,{size:16}),t==="ru"?"  ":"   "]})]}),h==="text"&&N&&f.jsxs("div",{className:"prose prose-invert max-w-none prose-p:text-gaming-textMuted prose-headings:text-white prose-li:text-gaming-textMuted",onScroll:Oe=>{const{scrollTop:Je,scrollHeight:lt,clientHeight:nn}=Oe.target;Je+nn>=lt-50&&_e()},children:[f.jsx("div",{dangerouslySetInnerHTML:{__html:$u(t==="tj"&&M.text.bodyTj||M.text.bodyRu)}}),!c.textRead&&!E&&f.jsxs("button",{onClick:_e,className:"mt-4 flex items-center gap-2 px-3 py-2 bg-green-500/20 text-green-400 rounded-lg hover:bg-green-500/30 transition-colors text-sm",children:[f.jsx(ql,{size:16}),t==="ru"?"  ":"   "]})]}),h==="slides"&&L&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("p",{className:"text-gaming-textMuted",children:[I," / ",B," ",t==="ru"?" ":"  "]}),f.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2 bg-gaming-gold/20 text-gaming-gold rounded-xl hover:bg-gaming-gold/30 transition-colors",children:[f.jsx(fi,{size:18}),t==="ru"?" ":" "]})]}),f.jsx("div",{className:"flex flex-col gap-6",children:_.map((Oe,Je)=>f.jsxs("button",{onClick:()=>{Ee(Oe.id),y(!0)},className:"relative w-full rounded-2xl overflow-hidden border border-white/5 hover:border-gaming-gold/30 transition-all group shadow-lg",children:[f.jsx("img",{src:Oe.imageUrl,alt:`Slide ${Je+1}`,className:"w-full h-auto object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-sm",children:f.jsx("div",{className:"bg-black/60 p-3 rounded-full border border-white/20 transform scale-90 group-hover:scale-100 transition-transform",children:f.jsx(fi,{size:24,className:"text-white"})})}),f.jsx("div",{className:"absolute top-4 left-4 bg-black/60 backdrop-blur px-3 py-1 rounded-full text-white font-bold text-sm border border-white/10",children:Je+1}),(c.slidesViewed.includes(Oe.id)||E)&&f.jsx("div",{className:"absolute top-4 right-4 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg animate-in fade-in zoom-in",children:f.jsx(Nn,{size:16,className:"text-white"})})]},Oe.id))})]})]})]})]}):f.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl rounded-2xl border border-white/5 p-8 mb-6 text-center",children:[f.jsx(Nu,{size:48,className:"mx-auto mb-4 text-gaming-primary opacity-50"}),f.jsx("h3",{className:"text-xl font-semibold mb-2",children:t==="ru"?"":""}),f.jsx("p",{className:"text-gaming-textMuted mb-4",children:t==="ru"?"    .":"    ."})]}),x&&f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"w-full max-w-md bg-gaming-card/95 backdrop-blur-xl rounded-2xl border border-red-500/30 p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 text-red-400 mb-4",children:[f.jsx(wl,{size:24}),f.jsx("h3",{className:"text-lg font-semibold",children:t==="ru"?" ":" "})]}),f.jsx("p",{className:"text-gaming-textMuted mb-4",children:t==="ru"?"       :":"        :"}),f.jsxs("ul",{className:"space-y-2 mb-6",children:[j&&f.jsxs("li",{className:`flex items-center gap-2 ${c.videoWatched?"text-green-400":"text-red-400"}`,children:[c.videoWatched?f.jsx(Nn,{size:16}):f.jsx(wl,{size:16}),""]}),N&&f.jsxs("li",{className:`flex items-center gap-2 ${c.textRead?"text-green-400":"text-red-400"}`,children:[c.textRead?f.jsx(Nn,{size:16}):f.jsx(wl,{size:16}),t==="ru"?"":""]}),L&&f.jsxs("li",{className:`flex items-center gap-2 ${H?"text-green-400":"text-red-400"}`,children:[H?f.jsx(Nn,{size:16}):f.jsx(wl,{size:16}),t==="ru"?` (${I}/${B})`:` (${I}/${B})`]})]}),f.jsx("button",{onClick:()=>v(!1),className:"w-full px-4 py-3 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors",children:t==="ru"?"":""})]})}),f.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[f.jsxs("div",{className:"flex gap-2",children:[Sn&&f.jsxs("button",{onClick:()=>s(`/lesson/${Sn.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[f.jsx(Bh,{size:16}),f.jsx("span",{className:"hidden sm:inline",children:t==="ru"?"":""})]}),rn&&f.jsxs("button",{onClick:()=>s(`/lesson/${rn.id}`),className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-white/5 hover:bg-white/10 text-gaming-textMuted hover:text-white transition-colors text-sm",children:[f.jsx("span",{className:"hidden sm:inline",children:t==="ru"?"":""}),f.jsx(Oi,{size:16})]})]}),f.jsxs("button",{onClick:Ge,className:`group font-bold py-3 px-8 rounded-xl flex items-center gap-2 transition-all transform hover:scale-[1.02] active:scale-95 shadow-lg border border-white/10 ${ne?E?"bg-gaming-pink hover:bg-gaming-pink/80 text-white shadow-gaming-pink/25":"bg-gaming-primary hover:bg-gaming-primary/80 text-white shadow-gaming-primary/25":"bg-gaming-card/60 text-gaming-textMuted cursor-not-allowed"}`,children:[E?f.jsx(ql,{size:20}):f.jsx(wo,{size:20}),f.jsx("span",{children:E?t==="ru"?" ":" ":t==="ru"?" ":" "}),!ne&&f.jsx(wl,{size:16,className:"text-yellow-400"})]})]})]}),m&&L&&f.jsx(bA,{slides:_,lessonId:n,lang:t,onClose:()=>y(!1),onSlideView:Ee}),w&&(E?f.jsx(wR,{questions:P,lang:t,onClose:()=>k(!1)}):f.jsx(bR,{questions:P,lessonId:n,lang:t,onClose:()=>k(!1),onComplete:yt}))]})};function SR(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>n=>{e.forEach(s=>s(n))},e)}const tf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function Sv(t){return"nodeType"in t}function $r(t){var e,r;return t?sl(t)?t:Sv(t)&&(e=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?e:window:window}function Tv(t){const{Document:e}=$r(t);return t instanceof e}function hc(t){return sl(t)?!1:t instanceof $r(t).HTMLElement}function _6(t){return t instanceof $r(t).SVGElement}function il(t){return t?sl(t)?t.document:Sv(t)?Tv(t)?t:hc(t)||_6(t)?t.ownerDocument:document:document:document}const ns=tf?T.useLayoutEffect:T.useEffect;function Cv(t){const e=T.useRef(t);return ns(()=>{e.current=t}),T.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return e.current==null?void 0:e.current(...n)},[])}function TR(){const t=T.useRef(null),e=T.useCallback((n,s)=>{t.current=setInterval(n,s)},[]),r=T.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,r]}function Bu(t,e){e===void 0&&(e=[t]);const r=T.useRef(t);return ns(()=>{r.current!==t&&(r.current=t)},e),r}function fc(t,e){const r=T.useRef();return T.useMemo(()=>{const n=t(r.current);return r.current=n,n},[...e])}function T0(t){const e=Cv(t),r=T.useRef(null),n=T.useCallback(s=>{s!==r.current&&(e==null||e(s,r.current)),r.current=s},[]);return[r,n]}function y1(t){const e=T.useRef();return T.useEffect(()=>{e.current=t},[t]),e.current}let Tp={};function pc(t,e){return T.useMemo(()=>{if(e)return e;const r=Tp[t]==null?0:Tp[t]+1;return Tp[t]=r,t+"-"+r},[t,e])}function O6(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,o)=>{const a=Object.entries(o);for(const[l,u]of a){const c=i[l];c!=null&&(i[l]=c+t*u)}return i},{...e})}}const Aa=O6(1),Fu=O6(-1);function CR(t){return"clientX"in t&&"clientY"in t}function Ev(t){if(!t)return!1;const{KeyboardEvent:e}=$r(t.target);return e&&t instanceof e}function ER(t){if(!t)return!1;const{TouchEvent:e}=$r(t.target);return e&&t instanceof e}function x1(t){if(ER(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:r}=t.touches[0];return{x:e,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:r}=t.changedTouches[0];return{x:e,y:r}}}return CR(t)?{x:t.clientX,y:t.clientY}:null}const Pi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:r}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:r}=t;return"scaleX("+e+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[Pi.Translate.toString(t),Pi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:r,easing:n}=t;return e+" "+r+"ms "+n}}}),$4="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function NR(t){return t.matches($4)?t:t.querySelector($4)}const MR={display:"none"};function AR(t){let{id:e,value:r}=t;return Ve.createElement("div",{id:e,style:MR},r)}function jR(t){let{id:e,announcement:r,ariaLiveType:n="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ve.createElement("div",{id:e,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function RR(){const[t,e]=T.useState("");return{announce:T.useCallback(n=>{n!=null&&e(n)},[]),announcement:t}}const D6=T.createContext(null);function _R(t){const e=T.useContext(D6);T.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function OR(){const[t]=T.useState(()=>new Set),e=T.useCallback(n=>(t.add(n),()=>t.delete(n)),[t]);return[T.useCallback(n=>{let{type:s,event:i}=n;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const DR={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},IR={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was moved over droppable area "+r.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:r}=t;return r?"Draggable item "+e.id+" was dropped over droppable area "+r.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function zR(t){let{announcements:e=IR,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=DR}=t;const{announce:i,announcement:o}=RR(),a=pc("DndLiveRegion"),[l,u]=T.useState(!1);if(T.useEffect(()=>{u(!0)},[]),_R(T.useMemo(()=>({onDragStart(d){let{active:h}=d;i(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;e.onDragMove&&i(e.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;i(e.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;i(e.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;i(e.onDragCancel({active:h,over:p}))}}),[i,e])),!l)return null;const c=Ve.createElement(Ve.Fragment,null,Ve.createElement(AR,{id:n,value:s.draggable}),Ve.createElement(jR,{id:a,announcement:o}));return r?ho.createPortal(c,r):c}var Lt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Lt||(Lt={}));function C0(){}function E0(t,e){return T.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function I6(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return T.useMemo(()=>[...e].filter(n=>n!=null),[...e])}const Bn=Object.freeze({x:0,y:0});function z6(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function L6(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return r-n}function LR(t,e){let{data:{value:r}}=t,{data:{value:n}}=e;return n-r}function B4(t){let{left:e,top:r,height:n,width:s}=t;return[{x:e,y:r},{x:e+s,y:r},{x:e,y:r+n},{x:e+s,y:r+n}]}function P6(t,e){if(!t||t.length===0)return null;const[r]=t;return r[e]}function F4(t,e,r){return e===void 0&&(e=t.left),r===void 0&&(r=t.top),{x:e+t.width*.5,y:r+t.height*.5}}const $6=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=F4(e,e.left,e.top),i=[];for(const o of n){const{id:a}=o,l=r.get(a);if(l){const u=z6(F4(l),s);i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(L6)},PR=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=B4(e),i=[];for(const o of n){const{id:a}=o,l=r.get(a);if(l){const u=B4(l),c=s.reduce((h,p,m)=>h+z6(u[m],p),0),d=Number((c/4).toFixed(4));i.push({id:a,data:{droppableContainer:o,value:d}})}}return i.sort(L6)};function $R(t,e){const r=Math.max(e.top,t.top),n=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-n,a=i-r;if(n<s&&r<i){const l=e.width*e.height,u=t.width*t.height,c=o*a,d=c/(l+u-c);return Number(d.toFixed(4))}return 0}const BR=t=>{let{collisionRect:e,droppableRects:r,droppableContainers:n}=t;const s=[];for(const i of n){const{id:o}=i,a=r.get(o);if(a){const l=$R(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(LR)};function FR(t,e,r){return{...t,scaleX:e&&r?e.width/r.width:1,scaleY:e&&r?e.height/r.height:1}}function B6(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Bn}function HR(t){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...r})}}const UR=HR(1);function VR(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function WR(t,e,r){const n=VR(e);if(!n)return t;const{scaleX:s,scaleY:i,x:o,y:a}=n,l=t.left-o-(1-s)*parseFloat(r),u=t.top-a-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),c=s?t.width/s:t.width,d=i?t.height/i:t.height;return{width:c,height:d,top:u,right:l+c,bottom:u+d,left:l}}const qR={ignoreTransform:!1};function ol(t,e){e===void 0&&(e=qR);let r=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:c}=$r(t).getComputedStyle(t);u&&(r=WR(r,u,c))}const{top:n,left:s,width:i,height:o,bottom:a,right:l}=r;return{top:n,left:s,width:i,height:o,bottom:a,right:l}}function H4(t){return ol(t,{ignoreTransform:!0})}function KR(t){const e=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:e,bottom:r,width:e,height:r}}function GR(t,e){return e===void 0&&(e=$r(t).getComputedStyle(t)),e.position==="fixed"}function JR(t,e){e===void 0&&(e=$r(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?r.test(i):!1})}function rf(t,e){const r=[];function n(s){if(e!=null&&r.length>=e||!s)return r;if(Tv(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!hc(s)||_6(s)||r.includes(s))return r;const i=$r(t).getComputedStyle(s);return s!==t&&JR(s,i)&&r.push(s),GR(s,i)?r:n(s.parentNode)}return t?n(t):r}function F6(t){const[e]=rf(t,1);return e??null}function Cp(t){return!tf||!t?null:sl(t)?t:Sv(t)?Tv(t)||t===il(t).scrollingElement?window:hc(t)?t:null:null}function H6(t){return sl(t)?t.scrollX:t.scrollLeft}function U6(t){return sl(t)?t.scrollY:t.scrollTop}function b1(t){return{x:H6(t),y:U6(t)}}var Ht;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ht||(Ht={}));function V6(t){return!tf||!t?!1:t===document.scrollingElement}function W6(t){const e={x:0,y:0},r=V6(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=n.y,a=t.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:n,minScroll:e}}const YR={x:.2,y:.2};function XR(t,e,r,n,s){let{top:i,left:o,right:a,bottom:l}=r;n===void 0&&(n=10),s===void 0&&(s=YR);const{isTop:u,isBottom:c,isLeft:d,isRight:h}=W6(t),p={x:0,y:0},m={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+y.height?(p.y=Ht.Backward,m.y=n*Math.abs((e.top+y.height-i)/y.height)):!c&&l>=e.bottom-y.height&&(p.y=Ht.Forward,m.y=n*Math.abs((e.bottom-y.height-l)/y.height)),!h&&a>=e.right-y.width?(p.x=Ht.Forward,m.x=n*Math.abs((e.right-y.width-a)/y.width)):!d&&o<=e.left+y.width&&(p.x=Ht.Backward,m.x=n*Math.abs((e.left+y.width-o)/y.width)),{direction:p,speed:m}}function QR(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:r,right:n,bottom:s}=t.getBoundingClientRect();return{top:e,left:r,right:n,bottom:s,width:t.clientWidth,height:t.clientHeight}}function q6(t){return t.reduce((e,r)=>Aa(e,b1(r)),Bn)}function ZR(t){return t.reduce((e,r)=>e+H6(r),0)}function e_(t){return t.reduce((e,r)=>e+U6(r),0)}function t_(t,e){if(e===void 0&&(e=ol),!t)return;const{top:r,left:n,bottom:s,right:i}=e(t);F6(t)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const r_=[["x",["left","right"],ZR],["y",["top","bottom"],e_]];class Nv{constructor(e,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=rf(r),s=q6(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of r_)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(n),c=s[i]-u;return this.rect[l]+c},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=e}add(e,r,n){var s;(s=this.target)==null||s.addEventListener(e,r,n),this.listeners.push([e,r,n])}}function n_(t){const{EventTarget:e}=$r(t);return t instanceof e?t:il(t)}function Ep(t,e){const r=Math.abs(t.x),n=Math.abs(t.y);return typeof e=="number"?Math.sqrt(r**2+n**2)>e:"x"in e&&"y"in e?r>e.x&&n>e.y:"x"in e?r>e.x:"y"in e?n>e.y:!1}var an;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(an||(an={}));function U4(t){t.preventDefault()}function s_(t){t.stopPropagation()}var Le;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Le||(Le={}));const K6={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},i_=(t,e)=>{let{currentCoordinates:r}=e;switch(t.code){case Le.Right:return{...r,x:r.x+25};case Le.Left:return{...r,x:r.x-25};case Le.Down:return{...r,y:r.y+25};case Le.Up:return{...r,y:r.y-25}}};class nf{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:r}}=e;this.props=e,this.listeners=new Yl(il(r)),this.windowListeners=new Yl($r(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(an.Resize,this.handleCancel),this.windowListeners.add(an.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(an.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:r}=this.props,n=e.node.current;n&&t_(n),r(Bn)}handleKeyDown(e){if(Ev(e)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=K6,coordinateGetter:o=i_,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:Bn;this.referenceCoordinates||(this.referenceCoordinates=c);const d=o(e,{active:r,context:n.current,currentCoordinates:c});if(d){const h=Fu(d,c),p={x:0,y:0},{scrollableAncestors:m}=n.current;for(const y of m){const x=e.code,{isTop:v,isRight:w,isLeft:k,isBottom:E,maxScroll:M,minScroll:j}=W6(y),N=QR(y),_={x:Math.min(x===Le.Right?N.right-N.width/2:N.right,Math.max(x===Le.Right?N.left:N.left+N.width/2,d.x)),y:Math.min(x===Le.Down?N.bottom-N.height/2:N.bottom,Math.max(x===Le.Down?N.top:N.top+N.height/2,d.y))},L=x===Le.Right&&!w||x===Le.Left&&!k,V=x===Le.Down&&!E||x===Le.Up&&!v;if(L&&_.x!==d.x){const ee=y.scrollLeft+h.x,P=x===Le.Right&&ee<=M.x||x===Le.Left&&ee>=j.x;if(P&&!h.y){y.scrollTo({left:ee,behavior:a});return}P?p.x=y.scrollLeft-ee:p.x=x===Le.Right?y.scrollLeft-M.x:y.scrollLeft-j.x,p.x&&y.scrollBy({left:-p.x,behavior:a});break}else if(V&&_.y!==d.y){const ee=y.scrollTop+h.y,P=x===Le.Down&&ee<=M.y||x===Le.Up&&ee>=j.y;if(P&&!h.x){y.scrollTo({top:ee,behavior:a});return}P?p.y=y.scrollTop-ee:p.y=x===Le.Down?y.scrollTop-M.y:y.scrollTop-j.y,p.y&&y.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(e,Aa(Fu(d,this.referenceCoordinates),p))}}}handleMove(e,r){const{onMove:n}=this.props;e.preventDefault(),n(r)}handleEnd(e){const{onEnd:r}=this.props;e.preventDefault(),this.detach(),r()}handleCancel(e){const{onCancel:r}=this.props;e.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}nf.activators=[{eventName:"onKeyDown",handler:(t,e,r)=>{let{keyboardCodes:n=K6,onActivation:s}=e,{active:i}=r;const{code:o}=t.nativeEvent;if(n.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function V4(t){return!!(t&&"distance"in t)}function W4(t){return!!(t&&"delay"in t)}class Mv{constructor(e,r,n){var s;n===void 0&&(n=n_(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=r;const{event:i}=e,{target:o}=i;this.props=e,this.events=r,this.document=il(o),this.documentListeners=new Yl(this.document),this.listeners=new Yl(n),this.windowListeners=new Yl($r(o)),this.initialCoordinates=(s=x1(i))!=null?s:Bn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(an.Resize,this.handleCancel),this.windowListeners.add(an.DragStart,U4),this.windowListeners.add(an.VisibilityChange,this.handleCancel),this.windowListeners.add(an.ContextMenu,U4),this.documentListeners.add(an.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(W4(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(V4(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,r){const{active:n,onPending:s}=this.props;s(n,e,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:e}=this,{onStart:r}=this.props;e&&(this.activated=!0,this.documentListeners.add(an.Click,s_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(an.SelectionChange,this.removeTextSelection),r(e))}handleMove(e){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(r=x1(e))!=null?r:Bn,u=Fu(s,l);if(!n&&a){if(V4(a)){if(a.tolerance!=null&&Ep(u,a.tolerance))return this.handleCancel();if(Ep(u,a.distance))return this.handleStart()}if(W4(a)&&Ep(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleCancel(){const{onAbort:e,onCancel:r}=this.props;this.detach(),this.activated||e(this.props.active),r()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const o_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class sf extends Mv{constructor(e){const{event:r}=e,n=il(r.target);super(e,o_,n)}}sf.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const a_={move:{name:"mousemove"},end:{name:"mouseup"}};var w1;(function(t){t[t.RightClick=2]="RightClick"})(w1||(w1={}));class l_ extends Mv{constructor(e){super(e,a_,il(e.event.target))}}l_.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;return r.button===w1.RightClick?!1:(n==null||n({event:r}),!0)}}];const Np={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class u_ extends Mv{constructor(e){super(e,Np)}static setup(){return window.addEventListener(Np.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Np.move.name,e)};function e(){}}}u_.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:r}=t,{onActivation:n}=e;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var Xl;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Xl||(Xl={}));var N0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(N0||(N0={}));function c_(t){let{acceleration:e,activator:r=Xl.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:o=5,order:a=N0.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:c,delta:d,threshold:h}=t;const p=h_({delta:d,disabled:!i}),[m,y]=TR(),x=T.useRef({x:0,y:0}),v=T.useRef({x:0,y:0}),w=T.useMemo(()=>{switch(r){case Xl.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Xl.DraggableRect:return s}},[r,s,l]),k=T.useRef(null),E=T.useCallback(()=>{const j=k.current;if(!j)return;const N=x.current.x*v.current.x,_=x.current.y*v.current.y;j.scrollBy(N,_)},[]),M=T.useMemo(()=>a===N0.TreeOrder?[...u].reverse():u,[a,u]);T.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const j of M){if((n==null?void 0:n(j))===!1)continue;const N=u.indexOf(j),_=c[N];if(!_)continue;const{direction:L,speed:V}=XR(j,_,w,e,h);for(const ee of["x","y"])p[ee][L[ee]]||(V[ee]=0,L[ee]=0);if(V.x>0||V.y>0){y(),k.current=j,m(E,o),x.current=V,v.current=L;return}}x.current={x:0,y:0},v.current={x:0,y:0},y()},[e,E,n,y,i,o,JSON.stringify(w),JSON.stringify(p),m,u,M,c,JSON.stringify(h)])}const d_={x:{[Ht.Backward]:!1,[Ht.Forward]:!1},y:{[Ht.Backward]:!1,[Ht.Forward]:!1}};function h_(t){let{delta:e,disabled:r}=t;const n=y1(e);return fc(s=>{if(r||!n||!s)return d_;const i={x:Math.sign(e.x-n.x),y:Math.sign(e.y-n.y)};return{x:{[Ht.Backward]:s.x[Ht.Backward]||i.x===-1,[Ht.Forward]:s.x[Ht.Forward]||i.x===1},y:{[Ht.Backward]:s.y[Ht.Backward]||i.y===-1,[Ht.Forward]:s.y[Ht.Forward]||i.y===1}}},[r,e,n])}function f_(t,e){const r=e!=null?t.get(e):void 0,n=r?r.node.current:null;return fc(s=>{var i;return e==null?null:(i=n??s)!=null?i:null},[n,e])}function p_(t,e){return T.useMemo(()=>t.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,n)}));return[...r,...i]},[]),[t,e])}var Hu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Hu||(Hu={}));var k1;(function(t){t.Optimized="optimized"})(k1||(k1={}));const q4=new Map;function m_(t,e){let{dragging:r,dependencies:n,config:s}=e;const[i,o]=T.useState(null),{frequency:a,measure:l,strategy:u}=s,c=T.useRef(t),d=x(),h=Bu(d),p=T.useCallback(function(v){v===void 0&&(v=[]),!h.current&&o(w=>w===null?v:w.concat(v.filter(k=>!w.includes(k))))},[h]),m=T.useRef(null),y=fc(v=>{if(d&&!r)return q4;if(!v||v===q4||c.current!==t||i!=null){const w=new Map;for(let k of t){if(!k)continue;if(i&&i.length>0&&!i.includes(k.id)&&k.rect.current){w.set(k.id,k.rect.current);continue}const E=k.node.current,M=E?new Nv(l(E),E):null;k.rect.current=M,M&&w.set(k.id,M)}return w}return v},[t,i,r,d,l]);return T.useEffect(()=>{c.current=t},[t]),T.useEffect(()=>{d||p()},[r,d]),T.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),T.useEffect(()=>{d||typeof a!="number"||m.current!==null||(m.current=setTimeout(()=>{p(),m.current=null},a))},[a,d,p,...n]),{droppableRects:y,measureDroppableContainers:p,measuringScheduled:i!=null};function x(){switch(u){case Hu.Always:return!1;case Hu.BeforeDragging:return r;default:return!r}}}function G6(t,e){return fc(r=>t?r||(typeof e=="function"?e(t):t):null,[e,t])}function g_(t,e){return G6(t,e)}function v_(t){let{callback:e,disabled:r}=t;const n=Cv(e),s=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return T.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function of(t){let{callback:e,disabled:r}=t;const n=Cv(e),s=T.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return T.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function y_(t){return new Nv(ol(t),t)}function K4(t,e,r){e===void 0&&(e=y_);const[n,s]=T.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??r)!=null?u:null}const c=e(t);return JSON.stringify(l)===JSON.stringify(c)?l:c})}const o=v_({callback(l){if(t)for(const u of l){const{type:c,target:d}=u;if(c==="childList"&&d instanceof HTMLElement&&d.contains(t)){i();break}}}}),a=of({callback:i});return ns(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),n}function x_(t){const e=G6(t);return B6(t,e)}const G4=[];function b_(t){const e=T.useRef(t),r=fc(n=>t?n&&n!==G4&&t&&e.current&&t.parentNode===e.current.parentNode?n:rf(t):G4,[t]);return T.useEffect(()=>{e.current=t},[t]),r}function w_(t){const[e,r]=T.useState(null),n=T.useRef(t),s=T.useCallback(i=>{const o=Cp(i.target);o&&r(a=>a?(a.set(o,b1(o)),new Map(a)):null)},[]);return T.useEffect(()=>{const i=n.current;if(t!==i){o(i);const a=t.map(l=>{const u=Cp(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,b1(u)]):null}).filter(l=>l!=null);r(a.length?new Map(a):null),n.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const u=Cp(l);u==null||u.removeEventListener("scroll",s)})}},[s,t]),T.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Aa(i,o),Bn):q6(t):Bn,[t,e])}function J4(t,e){e===void 0&&(e=[]);const r=T.useRef(null);return T.useEffect(()=>{r.current=null},e),T.useEffect(()=>{const n=t!==Bn;n&&!r.current&&(r.current=t),!n&&r.current&&(r.current=null)},[t]),r.current?Fu(t,r.current):Bn}function k_(t){T.useEffect(()=>{if(!tf)return;const e=t.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of e)r==null||r()}},t.map(e=>{let{sensor:r}=e;return r}))}function S_(t,e){return T.useMemo(()=>t.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=o=>{i(o,e)},r},{}),[t,e])}function J6(t){return T.useMemo(()=>t?KR(t):null,[t])}const Y4=[];function T_(t,e){e===void 0&&(e=ol);const[r]=t,n=J6(r?$r(r):null),[s,i]=T.useState(Y4);function o(){i(()=>t.length?t.map(l=>V6(l)?n:new Nv(e(l),l)):Y4)}const a=of({callback:o});return ns(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function C_(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return hc(e)?e:t}function E_(t){let{measure:e}=t;const[r,n]=T.useState(null),s=T.useCallback(u=>{for(const{target:c}of u)if(hc(c)){n(d=>{const h=e(c);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),i=of({callback:s}),o=T.useCallback(u=>{const c=C_(u);i==null||i.disconnect(),c&&(i==null||i.observe(c)),n(c?e(c):null)},[e,i]),[a,l]=T0(o);return T.useMemo(()=>({nodeRef:a,rect:r,setRef:l}),[r,a,l])}const N_=[{sensor:sf,options:{}},{sensor:nf,options:{}}],M_={current:{}},Dd={draggable:{measure:H4},droppable:{measure:H4,strategy:Hu.WhileDragging,frequency:k1.Optimized},dragOverlay:{measure:ol}};class Ql extends Map{get(e){var r;return e!=null&&(r=super.get(e))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:r}=e;return!r})}getNodeFor(e){var r,n;return(r=(n=this.get(e))==null?void 0:n.node.current)!=null?r:void 0}}const A_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ql,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:C0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Dd,measureDroppableContainers:C0,windowRect:null,measuringScheduled:!1},j_={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:C0,draggableNodes:new Map,over:null,measureDroppableContainers:C0},af=T.createContext(j_),Y6=T.createContext(A_);function R_(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ql}}}function __(t,e){switch(e.type){case Lt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Lt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Lt.DragEnd:case Lt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Lt.RegisterDroppable:{const{element:r}=e,{id:n}=r,s=new Ql(t.droppable.containers);return s.set(n,r),{...t,droppable:{...t.droppable,containers:s}}}case Lt.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=e,i=t.droppable.containers.get(r);if(!i||n!==i.key)return t;const o=new Ql(t.droppable.containers);return o.set(r,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Lt.UnregisterDroppable:{const{id:r,key:n}=e,s=t.droppable.containers.get(r);if(!s||n!==s.key)return t;const i=new Ql(t.droppable.containers);return i.delete(r),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function O_(t){let{disabled:e}=t;const{active:r,activatorEvent:n,draggableNodes:s}=T.useContext(af),i=y1(n),o=y1(r==null?void 0:r.id);return T.useEffect(()=>{if(!e&&!n&&i&&o!=null){if(!Ev(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const c of[l.current,u.current]){if(!c)continue;const d=NR(c);if(d){d.focus();break}}})}},[n,e,s,o,i]),null}function D_(t,e){let{transform:r,...n}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...n}),r):r}function I_(t){return T.useMemo(()=>({draggable:{...Dd.draggable,...t==null?void 0:t.draggable},droppable:{...Dd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Dd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function z_(t){let{activeNode:e,measure:r,initialRect:n,config:s=!0}=t;const i=T.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;ns(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!n)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const c=r(u),d=B6(c,n);if(o||(d.x=0),a||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=F6(u);h&&h.scrollBy({top:d.y,left:d.x})}},[e,o,a,n,r])}const X6=T.createContext({...Bn,scaleX:1,scaleY:1});var ri;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ri||(ri={}));const Q6=T.memo(function(e){var r,n,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:c=N_,collisionDetection:d=BR,measuring:h,modifiers:p,...m}=e;const y=T.useReducer(__,void 0,R_),[x,v]=y,[w,k]=OR(),[E,M]=T.useState(ri.Uninitialized),j=E===ri.Initialized,{draggable:{active:N,nodes:_,translate:L},droppable:{containers:V}}=x,ee=N!=null?_.get(N):null,P=T.useRef({initial:null,translated:null}),D=T.useMemo(()=>{var xe;return N!=null?{id:N,data:(xe=ee==null?void 0:ee.data)!=null?xe:M_,rect:P}:null},[N,ee]),B=T.useRef(null),[I,H]=T.useState(null),[Z,q]=T.useState(null),ue=Bu(m,Object.values(m)),ne=pc("DndDescribedBy",o),$=T.useMemo(()=>V.getEnabled(),[V]),U=I_(h),{droppableRects:fe,measureDroppableContainers:ie,measuringScheduled:_e}=m_($,{dragging:j,dependencies:[L.x,L.y],config:U.droppable}),Ee=f_(_,N),Ge=T.useMemo(()=>Z?x1(Z):null,[Z]),yt=ce(),ze=g_(Ee,U.draggable.measure);z_({activeNode:N!=null?_.get(N):null,config:yt.layoutShiftCompensation,initialRect:ze,measure:U.draggable.measure});const ge=K4(Ee,U.draggable.measure,ze),He=K4(Ee?Ee.parentElement:null),Nt=T.useRef({activatorEvent:null,active:null,activeNode:Ee,collisionRect:null,collisions:null,droppableRects:fe,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Gt=V.getNodeFor((r=Nt.current.over)==null?void 0:r.id),Jt=E_({measure:U.dragOverlay.measure}),Br=(n=Jt.nodeRef.current)!=null?n:Ee,gr=j?(s=Jt.rect)!=null?s:ge:null,Sn=!!(Jt.nodeRef.current&&Jt.rect),rn=x_(Sn?null:ge),or=J6(Br?$r(Br):null),Fr=b_(j?Gt??Ee:null),Us=T_(Fr),Fn=D_(p,{transform:{x:L.x-rn.x,y:L.y-rn.y,scaleX:1,scaleY:1},activatorEvent:Z,active:D,activeNodeRect:ge,containerNodeRect:He,draggingNodeRect:gr,over:Nt.current.over,overlayNodeRect:Jt.rect,scrollableAncestors:Fr,scrollableAncestorRects:Us,windowRect:or}),Gi=Ge?Aa(Ge,L):null,Vs=w_(Fr),Ji=J4(Vs),Uo=J4(Vs,[ge]),Hn=Aa(Fn,Ji),xt=gr?UR(gr,Fn):null,Oe=D&&xt?d({active:D,collisionRect:xt,droppableRects:fe,droppableContainers:$,pointerCoordinates:Gi}):null,Je=P6(Oe,"id"),[lt,nn]=T.useState(null),Un=Sn?Fn:Aa(Fn,Uo),Vn=FR(Un,(i=lt==null?void 0:lt.rect)!=null?i:null,ge),vr=T.useRef(null),Tn=T.useCallback((xe,Me)=>{let{sensor:Pe,options:de}=Me;if(B.current==null)return;const Ye=_.get(B.current);if(!Ye)return;const Ie=xe.nativeEvent,Ae=new Pe({active:B.current,activeNode:Ye,event:Ie,options:de,context:Nt,onAbort(Ke){if(!_.get(Ke))return;const{onDragAbort:ar}=ue.current,Hr={id:Ke};ar==null||ar(Hr),w({type:"onDragAbort",event:Hr})},onPending(Ke,Mr,ar,Hr){if(!_.get(Ke))return;const{onDragPending:cl}=ue.current,Ws={id:Ke,constraint:Mr,initialCoordinates:ar,offset:Hr};cl==null||cl(Ws),w({type:"onDragPending",event:Ws})},onStart(Ke){const Mr=B.current;if(Mr==null)return;const ar=_.get(Mr);if(!ar)return;const{onDragStart:Hr}=ue.current,ul={activatorEvent:Ie,active:{id:Mr,data:ar.data,rect:P}};ho.unstable_batchedUpdates(()=>{Hr==null||Hr(ul),M(ri.Initializing),v({type:Lt.DragStart,initialCoordinates:Ke,active:Mr}),w({type:"onDragStart",event:ul}),H(vr.current),q(Ie)})},onMove(Ke){v({type:Lt.DragMove,coordinates:Ke})},onEnd:ut(Lt.DragEnd),onCancel:ut(Lt.DragCancel)});vr.current=Ae;function ut(Ke){return async function(){const{active:ar,collisions:Hr,over:ul,scrollAdjustedTranslate:cl}=Nt.current;let Ws=null;if(ar&&cl){const{cancelDrop:dl}=ue.current;Ws={activatorEvent:Ie,active:ar,collisions:Hr,delta:cl,over:ul},Ke===Lt.DragEnd&&typeof dl=="function"&&await Promise.resolve(dl(Ws))&&(Ke=Lt.DragCancel)}B.current=null,ho.unstable_batchedUpdates(()=>{v({type:Ke}),M(ri.Uninitialized),nn(null),H(null),q(null),vr.current=null;const dl=Ke===Lt.DragEnd?"onDragEnd":"onDragCancel";if(Ws){const Tf=ue.current[dl];Tf==null||Tf(Ws),w({type:dl,event:Ws})}})}}},[_]),F=T.useCallback((xe,Me)=>(Pe,de)=>{const Ye=Pe.nativeEvent,Ie=_.get(de);if(B.current!==null||!Ie||Ye.dndKit||Ye.defaultPrevented)return;const Ae={active:Ie};xe(Pe,Me.options,Ae)===!0&&(Ye.dndKit={capturedBy:Me.sensor},B.current=de,Tn(Pe,Me))},[_,Tn]),ae=p_(c,F);k_(c),ns(()=>{ge&&E===ri.Initializing&&M(ri.Initialized)},[ge,E]),T.useEffect(()=>{const{onDragMove:xe}=ue.current,{active:Me,activatorEvent:Pe,collisions:de,over:Ye}=Nt.current;if(!Me||!Pe)return;const Ie={active:Me,activatorEvent:Pe,collisions:de,delta:{x:Hn.x,y:Hn.y},over:Ye};ho.unstable_batchedUpdates(()=>{xe==null||xe(Ie),w({type:"onDragMove",event:Ie})})},[Hn.x,Hn.y]),T.useEffect(()=>{const{active:xe,activatorEvent:Me,collisions:Pe,droppableContainers:de,scrollAdjustedTranslate:Ye}=Nt.current;if(!xe||B.current==null||!Me||!Ye)return;const{onDragOver:Ie}=ue.current,Ae=de.get(Je),ut=Ae&&Ae.rect.current?{id:Ae.id,rect:Ae.rect.current,data:Ae.data,disabled:Ae.disabled}:null,Ke={active:xe,activatorEvent:Me,collisions:Pe,delta:{x:Ye.x,y:Ye.y},over:ut};ho.unstable_batchedUpdates(()=>{nn(ut),Ie==null||Ie(Ke),w({type:"onDragOver",event:Ke})})},[Je]),ns(()=>{Nt.current={activatorEvent:Z,active:D,activeNode:Ee,collisionRect:xt,collisions:Oe,droppableRects:fe,draggableNodes:_,draggingNode:Br,draggingNodeRect:gr,droppableContainers:V,over:lt,scrollableAncestors:Fr,scrollAdjustedTranslate:Hn},P.current={initial:gr,translated:xt}},[D,Ee,Oe,xt,_,Br,gr,fe,V,lt,Fr,Hn]),c_({...yt,delta:L,draggingRect:xt,pointerCoordinates:Gi,scrollableAncestors:Fr,scrollableAncestorRects:Us});const Ce=T.useMemo(()=>({active:D,activeNode:Ee,activeNodeRect:ge,activatorEvent:Z,collisions:Oe,containerNodeRect:He,dragOverlay:Jt,draggableNodes:_,droppableContainers:V,droppableRects:fe,over:lt,measureDroppableContainers:ie,scrollableAncestors:Fr,scrollableAncestorRects:Us,measuringConfiguration:U,measuringScheduled:_e,windowRect:or}),[D,Ee,ge,Z,Oe,He,Jt,_,V,fe,lt,ie,Fr,Us,U,_e,or]),ke=T.useMemo(()=>({activatorEvent:Z,activators:ae,active:D,activeNodeRect:ge,ariaDescribedById:{draggable:ne},dispatch:v,draggableNodes:_,over:lt,measureDroppableContainers:ie}),[Z,ae,D,ge,v,ne,_,lt,ie]);return Ve.createElement(D6.Provider,{value:k},Ve.createElement(af.Provider,{value:ke},Ve.createElement(Y6.Provider,{value:Ce},Ve.createElement(X6.Provider,{value:Vn},u)),Ve.createElement(O_,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Ve.createElement(zR,{...a,hiddenTextDescribedById:ne}));function ce(){const xe=(I==null?void 0:I.autoScrollEnabled)===!1,Me=typeof l=="object"?l.enabled===!1:l===!1,Pe=j&&!xe&&!Me;return typeof l=="object"?{...l,enabled:Pe}:{enabled:Pe}}}),L_=T.createContext(null),X4="button",P_="Draggable";function $_(t){let{id:e,data:r,disabled:n=!1,attributes:s}=t;const i=pc(P_),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:h}=T.useContext(af),{role:p=X4,roleDescription:m="draggable",tabIndex:y=0}=s??{},x=(l==null?void 0:l.id)===e,v=T.useContext(x?X6:L_),[w,k]=T0(),[E,M]=T0(),j=S_(o,e),N=Bu(r);ns(()=>(d.set(e,{id:e,key:i,node:w,activatorNode:E,data:N}),()=>{const L=d.get(e);L&&L.key===i&&d.delete(e)}),[d,e]);const _=T.useMemo(()=>({role:p,tabIndex:y,"aria-disabled":n,"aria-pressed":x&&p===X4?!0:void 0,"aria-roledescription":m,"aria-describedby":c.draggable}),[n,p,y,x,m,c.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:_,isDragging:x,listeners:n?void 0:j,node:w,over:h,setNodeRef:k,setActivatorNodeRef:M,transform:v}}function B_(){return T.useContext(Y6)}const F_="Droppable",H_={timeout:25};function U_(t){let{data:e,disabled:r=!1,id:n,resizeObserverConfig:s}=t;const i=pc(F_),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=T.useContext(af),c=T.useRef({disabled:r}),d=T.useRef(!1),h=T.useRef(null),p=T.useRef(null),{disabled:m,updateMeasurementsFor:y,timeout:x}={...H_,...s},v=Bu(y??n),w=T.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),p.current=null},x)},[x]),k=of({callback:w,disabled:m||!o}),E=T.useCallback((_,L)=>{k&&(L&&(k.unobserve(L),d.current=!1),_&&k.observe(_))},[k]),[M,j]=T0(E),N=Bu(e);return T.useEffect(()=>{!k||!M.current||(k.disconnect(),d.current=!1,k.observe(M.current))},[M,k]),T.useEffect(()=>(a({type:Lt.RegisterDroppable,element:{id:n,key:i,disabled:r,node:M,rect:h,data:N}}),()=>a({type:Lt.UnregisterDroppable,key:i,id:n})),[n]),T.useEffect(()=>{r!==c.current.disabled&&(a({type:Lt.SetDroppableDisabled,id:n,key:i,disabled:r}),c.current.disabled=r)},[n,i,r,a]),{active:o,rect:h,isOver:(l==null?void 0:l.id)===n,node:M,over:l,setNodeRef:j}}function ja(t,e,r){const n=t.slice();return n.splice(r<0?n.length+r:r,0,n.splice(e,1)[0]),n}function V_(t,e){return t.reduce((r,n,s)=>{const i=e.get(n);return i&&(r[s]=i),r},Array(t.length))}function td(t){return t!==null&&t>=0}function W_(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function q_(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Z6=t=>{let{rects:e,activeIndex:r,overIndex:n,index:s}=t;const i=ja(e,n,r),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},rd={scaleX:1,scaleY:1},Id=t=>{var e;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:o}=t;const a=(e=i[r])!=null?e:n;if(!a)return null;if(s===r){const u=i[o];return u?{x:0,y:r<o?u.top+u.height-(a.top+a.height):u.top-a.top,...rd}:null}const l=K_(i,s,r);return s>r&&s<=o?{x:0,y:-a.height-l,...rd}:s<r&&s>=o?{x:0,y:a.height+l,...rd}:{x:0,y:0,...rd}};function K_(t,e,r){const n=t[e],s=t[e-1],i=t[e+1];return n?r<e?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const e7="Sortable",t7=Ve.createContext({activeIndex:-1,containerId:e7,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Z6,disabled:{draggable:!1,droppable:!1}});function zd(t){let{children:e,id:r,items:n,strategy:s=Z6,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:c}=B_(),d=pc(e7,r),h=a.rect!==null,p=T.useMemo(()=>n.map(j=>typeof j=="object"&&"id"in j?j.id:j),[n]),m=o!=null,y=o?p.indexOf(o.id):-1,x=u?p.indexOf(u.id):-1,v=T.useRef(p),w=!W_(p,v.current),k=x!==-1&&y===-1||w,E=q_(i);ns(()=>{w&&m&&c(p)},[w,p,m,c]),T.useEffect(()=>{v.current=p},[p]);const M=T.useMemo(()=>({activeIndex:y,containerId:d,disabled:E,disableTransforms:k,items:p,overIndex:x,useDragOverlay:h,sortedRects:V_(p,l),strategy:s}),[y,d,E.draggable,E.droppable,k,p,x,l,h,s]);return Ve.createElement(t7.Provider,{value:M},e)}const G_=t=>{let{id:e,items:r,activeIndex:n,overIndex:s}=t;return ja(r,n,s).indexOf(e)},J_=t=>{let{containerId:e,isSorting:r,wasDragging:n,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!n||a!==i&&s===o?!1:r?!0:o!==s&&e===l},Y_={duration:200,easing:"ease"},r7="transform",X_=Pi.Transition.toString({property:r7,duration:0,easing:"linear"}),Q_={roleDescription:"sortable"};function Z_(t){let{disabled:e,index:r,node:n,rect:s}=t;const[i,o]=T.useState(null),a=T.useRef(r);return ns(()=>{if(!e&&r!==a.current&&n.current){const l=s.current;if(l){const u=ol(n.current,{ignoreTransform:!0}),c={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(c.x||c.y)&&o(c)}}r!==a.current&&(a.current=r)},[e,r,n,s]),T.useEffect(()=>{i&&o(null)},[i]),i}function lf(t){let{animateLayoutChanges:e=J_,attributes:r,disabled:n,data:s,getNewIndex:i=G_,id:o,strategy:a,resizeObserverConfig:l,transition:u=Y_}=t;const{items:c,containerId:d,activeIndex:h,disabled:p,disableTransforms:m,sortedRects:y,overIndex:x,useDragOverlay:v,strategy:w}=T.useContext(t7),k=eO(n,p),E=c.indexOf(o),M=T.useMemo(()=>({sortable:{containerId:d,index:E,items:c},...s}),[d,s,E,c]),j=T.useMemo(()=>c.slice(c.indexOf(o)),[c,o]),{rect:N,node:_,isOver:L,setNodeRef:V}=U_({id:o,data:M,disabled:k.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...l}}),{active:ee,activatorEvent:P,activeNodeRect:D,attributes:B,setNodeRef:I,listeners:H,isDragging:Z,over:q,setActivatorNodeRef:ue,transform:ne}=$_({id:o,data:M,attributes:{...Q_,...r},disabled:k.draggable}),$=SR(V,I),U=!!ee,fe=U&&!m&&td(h)&&td(x),ie=!v&&Z,_e=ie&&fe?ne:null,Ge=fe?_e??(a??w)({rects:y,activeNodeRect:D,activeIndex:h,overIndex:x,index:E}):null,yt=td(h)&&td(x)?i({id:o,items:c,activeIndex:h,overIndex:x}):E,ze=ee==null?void 0:ee.id,ge=T.useRef({activeId:ze,items:c,newIndex:yt,containerId:d}),He=c!==ge.current.items,Nt=e({active:ee,containerId:d,isDragging:Z,isSorting:U,id:o,index:E,items:c,newIndex:ge.current.newIndex,previousItems:ge.current.items,previousContainerId:ge.current.containerId,transition:u,wasDragging:ge.current.activeId!=null}),Gt=Z_({disabled:!Nt,index:E,node:_,rect:N});return T.useEffect(()=>{U&&ge.current.newIndex!==yt&&(ge.current.newIndex=yt),d!==ge.current.containerId&&(ge.current.containerId=d),c!==ge.current.items&&(ge.current.items=c)},[U,yt,d,c]),T.useEffect(()=>{if(ze===ge.current.activeId)return;if(ze!=null&&ge.current.activeId==null){ge.current.activeId=ze;return}const Br=setTimeout(()=>{ge.current.activeId=ze},50);return()=>clearTimeout(Br)},[ze]),{active:ee,activeIndex:h,attributes:B,data:M,rect:N,index:E,newIndex:yt,items:c,isOver:L,isSorting:U,isDragging:Z,listeners:H,node:_,overIndex:x,over:q,setNodeRef:$,setActivatorNodeRef:ue,setDroppableNodeRef:V,setDraggableNodeRef:I,transform:Gt??Ge,transition:Jt()};function Jt(){if(Gt||He&&ge.current.newIndex===E)return X_;if(!(ie&&!Ev(P)||!u)&&(U||Nt))return Pi.Transition.toString({...u,property:r7})}}function eO(t,e){var r,n;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:e.draggable,droppable:(n=t==null?void 0:t.droppable)!=null?n:e.droppable}}function M0(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const tO=[Le.Down,Le.Right,Le.Up,Le.Left],n7=(t,e)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:o,scrollableAncestors:a}}=e;if(tO.includes(t.code)){if(t.preventDefault(),!r||!n)return;const l=[];i.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=s.get(d.id);if(h)switch(t.code){case Le.Down:n.top<h.top&&l.push(d);break;case Le.Up:n.top>h.top&&l.push(d);break;case Le.Left:n.left>h.left&&l.push(d);break;case Le.Right:n.left<h.left&&l.push(d);break}});const u=PR({collisionRect:n,droppableRects:s,droppableContainers:l});let c=P6(u,"id");if(c===(o==null?void 0:o.id)&&u.length>1&&(c=u[1].id),c!=null){const d=i.get(r.id),h=i.get(c),p=h?s.get(h.id):null,m=h==null?void 0:h.node.current;if(m&&p&&d&&h){const x=rf(m).some((j,N)=>a[N]!==j),v=s7(d,h),w=rO(d,h),k=x||!v?{x:0,y:0}:{x:w?n.width-p.width:0,y:w?n.height-p.height:0},E={x:p.left,y:p.top};return k.x&&k.y?E:Fu(E,k)}}}};function s7(t,e){return!M0(t)||!M0(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function rO(t,e){return!M0(t)||!M0(e)||!s7(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const nO="https://translate.googleapis.com/translate_a/single",i7={:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":" "," ":" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:" ",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""," ":" "," ":" "," ":" ",:""},sO=Object.entries(i7).reduce((t,[e,r])=>(t[r]=e,t),{}),iO=(t,e="ru",r="tj")=>{if(!t)return"";let n=t.toLowerCase();const o=Object.entries(e==="ru"&&r==="tj"||e==="ru"&&r==="tg"?i7:sO).sort((a,l)=>l[0].length-a[0].length);for(const[a,l]of o){const u=new RegExp(a,"gi");n=n.replace(u,l)}return n.charAt(0).toUpperCase()+n.slice(1)},oO=async(t,e="ru",r="tg")=>{try{const n=`${nO}?client=gtx&sl=${e}&tl=${r}&dt=t&q=${encodeURIComponent(t)}`,i=await(await fetch(n)).json();if(i&&i[0])return i[0].map(o=>o[0]).join("");throw new Error("Invalid response")}catch(n){return console.warn("Google Translate API failed, using dictionary:",n),null}},Ut=async(t,e="ru",r="tj")=>{if(!t||!t.trim())return"";const i=await oO(t,e==="tj"?"tg":e,r==="tj"?"tg":r);return i||iO(t,e,r)},aO=({data:t,onChange:e,lang:r})=>{const[n,s]=T.useState(!1),i=(u,c)=>{e({...t,[u]:c})},o=async()=>{s(!0);try{const u=await Ut(t.descriptionRu||"","ru","tj");i("descriptionTj",u)}finally{s(!1)}},a=async()=>{s(!0);try{const u=await Ut(t.descriptionTj||"","tj","ru");i("descriptionRu",u)}finally{s(!1)}},l=()=>{i("urlTj",t.url||"")};return f.jsxs("div",{className:"space-y-5",children:[f.jsxs("h4",{className:"text-lg font-semibold text-gaming-primary flex items-center gap-2",children:[f.jsx(Au,{size:20}),""]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm text-gaming-textMuted mb-2 flex items-center gap-2",children:[f.jsx(O2,{size:14}),r==="ru"?"   (RU)":"   (RU)"]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"url",value:t.url||"",onChange:u=>i("url",u.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors"}),f.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"RU"})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("label",{className:"block text-sm text-gaming-textMuted mb-2 flex items-center gap-2",children:[f.jsx(O2,{size:14}),r==="ru"?"   (TJ)":"   (TJ)"]}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"url",value:t.urlTj||"",onChange:u=>i("urlTj",u.target.value),placeholder:"https://youtube.com/...",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors"}),f.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"TJ"})]})]}),f.jsx("button",{type:"button",onClick:l,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors",title:r==="ru"?" ":"",children:f.jsx(er,{size:16})})]}),f.jsx("div",{className:"border-t border-white/5 pt-4"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:r==="ru"?"  (RU)":"  (RU)"}),f.jsx("textarea",{value:t.descriptionRu||"",onChange:u=>i("descriptionRu",u.target.value),placeholder:r==="ru"?"  ...":" ...",rows:3,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors resize-none"})]}),f.jsx("button",{type:"button",onClick:a,disabled:n,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:n?f.jsx(It,{size:16,className:"animate-spin"}):f.jsx(er,{size:16,className:"rotate-180"})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:r==="ru"?"  (TJ)":"  (TJ)"}),f.jsx("textarea",{value:t.descriptionTj||"",onChange:u=>i("descriptionTj",u.target.value),placeholder:" ...",rows:3,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors resize-none"})]}),f.jsx("button",{type:"button",onClick:o,disabled:n,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:n?f.jsx(It,{size:16,className:"animate-spin"}):f.jsx(er,{size:16})})]}),(t.url||t.urlTj)&&f.jsxs("div",{className:"bg-gaming-card/30 rounded-xl p-3 text-sm text-gaming-textMuted",children:[f.jsx("span",{className:"text-gaming-primary font-medium",children:" "}),r==="ru"?"     ":"      "]})]})};var o7={exports:{}},a7={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=T;function lO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uO=typeof Object.is=="function"?Object.is:lO,cO=Fa.useState,dO=Fa.useEffect,hO=Fa.useLayoutEffect,fO=Fa.useDebugValue;function pO(t,e){var r=e(),n=cO({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return hO(function(){s.value=r,s.getSnapshot=e,Mp(s)&&i({inst:s})},[t,r,e]),dO(function(){return Mp(s)&&i({inst:s}),t(function(){Mp(s)&&i({inst:s})})},[t]),fO(r),r}function Mp(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!uO(t,r)}catch{return!0}}function mO(t,e){return e()}var gO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?mO:pO;a7.useSyncExternalStore=Fa.useSyncExternalStore!==void 0?Fa.useSyncExternalStore:gO;o7.exports=a7;var Av=o7.exports;function Zt(t){this.content=t}Zt.prototype={constructor:Zt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,r){var n=r&&r!=t?this.remove(r):this,s=n.find(t),i=n.content.slice();return s==-1?i.push(r||t,e):(i[s+1]=e,r&&(i[s]=r)),new Zt(i)},remove:function(t){var e=this.find(t);if(e==-1)return this;var r=this.content.slice();return r.splice(e,2),new Zt(r)},addToStart:function(t,e){return new Zt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var r=this.remove(t).content.slice();return r.push(t,e),new Zt(r)},addBefore:function(t,e,r){var n=this.remove(e),s=n.content.slice(),i=n.find(t);return s.splice(i==-1?s.length:i,0,e,r),new Zt(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Zt.from(t),t.size?new Zt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Zt.from(t),t.size?new Zt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Zt.from(t);for(var r=0;r<t.content.length;r+=2)e=e.remove(t.content[r]);return e},toObject:function(){var t={};return this.forEach(function(e,r){t[e]=r}),t},get size(){return this.content.length>>1}};Zt.from=function(t){if(t instanceof Zt)return t;var e=[];if(t)for(var r in t)e.push(r,t[r]);return new Zt(e)};function l7(t,e,r){for(let n=0;;n++){if(n==t.childCount||n==e.childCount)return t.childCount==e.childCount?null:r;let s=t.child(n),i=e.child(n);if(s==i){r+=s.nodeSize;continue}if(!s.sameMarkup(i))return r;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)r++;return r}if(s.content.size||i.content.size){let o=l7(s.content,i.content,r+1);if(o!=null)return o}r+=s.nodeSize}}function u7(t,e,r,n){for(let s=t.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:r,b:n};let o=t.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){r-=l,n-=l;continue}if(!o.sameMarkup(a))return{a:r,b:n};if(o.isText&&o.text!=a.text){let u=0,c=Math.min(o.text.length,a.text.length);for(;u<c&&o.text[o.text.length-u-1]==a.text[a.text.length-u-1];)u++,r--,n--;return{a:r,b:n}}if(o.content.size||a.content.size){let u=u7(o.content,a.content,r-1,n-1);if(u)return u}r-=l,n-=l}}class K{constructor(e,r){if(this.content=e,this.size=r||0,r==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,r,n,s=0,i){for(let o=0,a=0;a<r;o++){let l=this.content[o],u=a+l.nodeSize;if(u>e&&n(l,s+a,i||null,o)!==!1&&l.content.size){let c=a+1;l.nodesBetween(Math.max(0,e-c),Math.min(l.content.size,r-c),n,s+c)}a=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,r,n,s){let i="",o=!0;return this.nodesBetween(e,r,(a,l)=>{let u=a.isText?a.text.slice(Math.max(e,l)-l,r-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&u||a.isTextblock)&&n&&(o?o=!1:i+=n),i+=u},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let r=this.lastChild,n=e.firstChild,s=this.content.slice(),i=0;for(r.isText&&r.sameMarkup(n)&&(s[s.length-1]=r.withText(r.text+n.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new K(s,this.size+e.size)}cut(e,r=this.size){if(e==0&&r==this.size)return this;let n=[],s=0;if(r>e)for(let i=0,o=0;o<r;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>r)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,r-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,r-o-1))),n.push(a),s+=a.nodeSize),o=l}return new K(n,s)}cutByIndex(e,r){return e==r?K.empty:e==0&&r==this.content.length?this:new K(this.content.slice(e,r))}replaceChild(e,r){let n=this.content[e];if(n==r)return this;let s=this.content.slice(),i=this.size+r.nodeSize-n.nodeSize;return s[e]=r,new K(s,i)}addToStart(e){return new K([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new K(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let r=0;r<this.content.length;r++)if(!this.content[r].eq(e.content[r]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let r=this.content[e];if(!r)throw new RangeError("Index "+e+" out of range for "+this);return r}maybeChild(e){return this.content[e]||null}forEach(e){for(let r=0,n=0;r<this.content.length;r++){let s=this.content[r];e(s,n,r),n+=s.nodeSize}}findDiffStart(e,r=0){return l7(this,e,r)}findDiffEnd(e,r=this.size,n=e.size){return u7(this,e,r,n)}findIndex(e){if(e==0)return nd(0,e);if(e==this.size)return nd(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,n=0;;r++){let s=this.child(r),i=n+s.nodeSize;if(i>=e)return i==e?nd(r+1,i):nd(r,n);n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,r){if(!r)return K.empty;if(!Array.isArray(r))throw new RangeError("Invalid input for Fragment.fromJSON");return new K(r.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return K.empty;let r,n=0;for(let s=0;s<e.length;s++){let i=e[s];n+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(r||(r=e.slice(0,s)),r[r.length-1]=i.withText(r[r.length-1].text+i.text)):r&&r.push(i)}return new K(r||e,n)}static from(e){if(!e)return K.empty;if(e instanceof K)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new K([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}K.empty=new K([],0);const Ap={index:0,offset:0};function nd(t,e){return Ap.index=t,Ap.offset=e,Ap}function A0(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let r=Array.isArray(t);if(Array.isArray(e)!=r)return!1;if(r){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!A0(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!A0(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}let Xe=class S1{constructor(e,r){this.type=e,this.attrs=r}addToSet(e){let r,n=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))r||(r=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(r||(r=e.slice(0,s)),r.push(this),n=!0),r&&r.push(i)}}return r||(r=e.slice()),n||r.push(this),r}removeFromSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return e.slice(0,r).concat(e.slice(r+1));return e}isInSet(e){for(let r=0;r<e.length;r++)if(this.eq(e[r]))return!0;return!1}eq(e){return this==e||this.type==e.type&&A0(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[r.type];if(!n)throw new RangeError(`There is no mark type ${r.type} in this schema`);let s=n.create(r.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,r){if(e==r)return!0;if(e.length!=r.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(r[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return S1.none;if(e instanceof S1)return[e];let r=e.slice();return r.sort((n,s)=>n.type.rank-s.type.rank),r}};Xe.none=[];class j0 extends Error{}class re{constructor(e,r,n){this.content=e,this.openStart=r,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,r){let n=d7(this.content,e+this.openStart,r);return n&&new re(n,this.openStart,this.openEnd)}removeBetween(e,r){return new re(c7(this.content,e+this.openStart,r+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,r){if(!r)return re.empty;let n=r.openStart||0,s=r.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new re(K.fromJSON(e,r.content),n,s)}static maxOpen(e,r=!0){let n=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(r||!i.type.spec.isolating);i=i.lastChild)s++;return new re(e,n,s)}}re.empty=new re(K.empty,0,0);function c7(t,e,r){let{index:n,offset:s}=t.findIndex(e),i=t.maybeChild(n),{index:o,offset:a}=t.findIndex(r);if(s==e||i.isText){if(a!=r&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(r))}if(n!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(n,i.copy(c7(i.content,e-s-1,r-s-1)))}function d7(t,e,r,n){let{index:s,offset:i}=t.findIndex(e),o=t.maybeChild(s);if(i==e||o.isText)return n&&!n.canReplace(s,s,r)?null:t.cut(0,e).append(r).append(t.cut(e));let a=d7(o.content,e-i-1,r,o);return a&&t.replaceChild(s,o.copy(a))}function vO(t,e,r){if(r.openStart>t.depth)throw new j0("Inserted content deeper than insertion position");if(t.depth-r.openStart!=e.depth-r.openEnd)throw new j0("Inconsistent open depths");return h7(t,e,r,0)}function h7(t,e,r,n){let s=t.index(n),i=t.node(n);if(s==e.index(n)&&n<t.depth-r.openStart){let o=h7(t,e,r,n+1);return i.copy(i.content.replaceChild(s,o))}else if(r.content.size)if(!r.openStart&&!r.openEnd&&t.depth==n&&e.depth==n){let o=t.parent,a=o.content;return So(o,a.cut(0,t.parentOffset).append(r.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=yO(r,t);return So(i,p7(t,o,a,e,n))}else return So(i,R0(t,e,n))}function f7(t,e){if(!e.type.compatibleContent(t.type))throw new j0("Cannot join "+e.type.name+" onto "+t.type.name)}function T1(t,e,r){let n=t.node(r);return f7(n,e.node(r)),n}function ko(t,e){let r=e.length-1;r>=0&&t.isText&&t.sameMarkup(e[r])?e[r]=t.withText(e[r].text+t.text):e.push(t)}function Zl(t,e,r,n){let s=(e||t).node(r),i=0,o=e?e.index(r):s.childCount;t&&(i=t.index(r),t.depth>r?i++:t.textOffset&&(ko(t.nodeAfter,n),i++));for(let a=i;a<o;a++)ko(s.child(a),n);e&&e.depth==r&&e.textOffset&&ko(e.nodeBefore,n)}function So(t,e){return t.type.checkContent(e),t.copy(e)}function p7(t,e,r,n,s){let i=t.depth>s&&T1(t,e,s+1),o=n.depth>s&&T1(r,n,s+1),a=[];return Zl(null,t,s,a),i&&o&&e.index(s)==r.index(s)?(f7(i,o),ko(So(i,p7(t,e,r,n,s+1)),a)):(i&&ko(So(i,R0(t,e,s+1)),a),Zl(e,r,s,a),o&&ko(So(o,R0(r,n,s+1)),a)),Zl(n,null,s,a),new K(a)}function R0(t,e,r){let n=[];if(Zl(null,t,r,n),t.depth>r){let s=T1(t,e,r+1);ko(So(s,R0(t,e,r+1)),n)}return Zl(e,null,r,n),new K(n)}function yO(t,e){let r=e.depth-t.openStart,s=e.node(r).copy(t.content);for(let i=r-1;i>=0;i--)s=e.node(i).copy(K.from(s));return{start:s.resolveNoCache(t.openStart+r),end:s.resolveNoCache(s.content.size-t.openEnd-r)}}class Uu{constructor(e,r,n){this.pos=e,this.path=r,this.parentOffset=n,this.depth=r.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,r=this.index(this.depth);if(r==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(r);return n?e.child(r).cut(n):s}get nodeBefore(){let e=this.index(this.depth),r=this.pos-this.path[this.path.length-1];return r?this.parent.child(e).cut(0,r):e==0?null:this.parent.child(e-1)}posAtIndex(e,r){r=this.resolveDepth(r);let n=this.path[r*3],s=r==0?0:this.path[r*3-1]+1;for(let i=0;i<e;i++)s+=n.child(i).nodeSize;return s}marks(){let e=this.parent,r=this.index();if(e.content.size==0)return Xe.none;if(this.textOffset)return e.child(r).marks;let n=e.maybeChild(r-1),s=e.maybeChild(r);if(!n){let a=n;n=s,s=a}let i=n.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let r=this.parent.maybeChild(this.index());if(!r||!r.isInline)return null;let n=r.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)n[i].type.spec.inclusive===!1&&(!s||!n[i].isInSet(s.marks))&&(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let r=this.depth;r>0;r--)if(this.start(r)<=e&&this.end(r)>=e)return r;return 0}blockRange(e=this,r){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!r||r(this.node(n))))return new _0(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let r=1;r<=this.depth;r++)e+=(e?"/":"")+this.node(r).type.name+"_"+this.index(r-1);return e+":"+this.parentOffset}static resolve(e,r){if(!(r>=0&&r<=e.content.size))throw new RangeError("Position "+r+" out of range");let n=[],s=0,i=r;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),u=i-l;if(n.push(o,a,s+l),!u||(o=o.child(a),o.isText))break;i=u-1,s+=l+1}return new Uu(r,n,i)}static resolveCached(e,r){let n=Q4.get(e);if(n)for(let i=0;i<n.elts.length;i++){let o=n.elts[i];if(o.pos==r)return o}else Q4.set(e,n=new xO);let s=n.elts[n.i]=Uu.resolve(e,r);return n.i=(n.i+1)%bO,s}}class xO{constructor(){this.elts=[],this.i=0}}const bO=12,Q4=new WeakMap;class _0{constructor(e,r,n){this.$from=e,this.$to=r,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const wO=Object.create(null);class Pn{constructor(e,r,n,s=Xe.none){this.type=e,this.attrs=r,this.marks=s,this.content=n||K.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,r,n,s=0){this.content.nodesBetween(e,r,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,r,n,s){return this.content.textBetween(e,r,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,r,n){return this.type==e&&A0(this.attrs,r||e.defaultAttrs||wO)&&Xe.sameSet(this.marks,n||Xe.none)}copy(e=null){return e==this.content?this:new Pn(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Pn(this.type,this.attrs,this.content,e)}cut(e,r=this.content.size){return e==0&&r==this.content.size?this:this.copy(this.content.cut(e,r))}slice(e,r=this.content.size,n=!1){if(e==r)return re.empty;let s=this.resolve(e),i=this.resolve(r),o=n?0:s.sharedDepth(r),a=s.start(o),u=s.node(o).content.cut(s.pos-a,i.pos-a);return new re(u,s.depth-o,i.depth-o)}replace(e,r,n){return vO(this.resolve(e),this.resolve(r),n)}nodeAt(e){for(let r=this;;){let{index:n,offset:s}=r.content.findIndex(e);if(r=r.maybeChild(n),!r)return null;if(s==e||r.isText)return r;e-=s+1}}childAfter(e){let{index:r,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(r),index:r,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:r,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(r),index:r,offset:n};let s=this.content.child(r-1);return{node:s,index:r-1,offset:n-s.nodeSize}}resolve(e){return Uu.resolveCached(this,e)}resolveNoCache(e){return Uu.resolve(this,e)}rangeHasMark(e,r,n){let s=!1;return r>e&&this.nodesBetween(e,r,i=>(n.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),m7(this.marks,e)}contentMatchAt(e){let r=this.type.contentMatch.matchFragment(this.content,0,e);if(!r)throw new Error("Called contentMatchAt on a node with invalid content");return r}canReplace(e,r,n=K.empty,s=0,i=n.childCount){let o=this.contentMatchAt(e).matchFragment(n,s,i),a=o&&o.matchFragment(this.content,r);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(n.child(l).marks))return!1;return!0}canReplaceWith(e,r,n,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,r);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Xe.none;for(let r=0;r<this.marks.length;r++){let n=this.marks[r];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!Xe.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(r=>r.type.name)}`);this.content.forEach(r=>r.check())}toJSON(){let e={type:this.type.name};for(let r in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(r=>r.toJSON())),e}static fromJSON(e,r){if(!r)throw new RangeError("Invalid input for Node.fromJSON");let n;if(r.marks){if(!Array.isArray(r.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=r.marks.map(e.markFromJSON)}if(r.type=="text"){if(typeof r.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(r.text,n)}let s=K.fromJSON(e,r.content),i=e.nodeType(r.type).create(r.attrs,s,n);return i.type.checkAttrs(i.attrs),i}}Pn.prototype.text=void 0;class O0 extends Pn{constructor(e,r,n,s){if(super(e,r,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):m7(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,r){return this.text.slice(e,r)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new O0(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new O0(this.type,this.attrs,e,this.marks)}cut(e=0,r=this.text.length){return e==0&&r==this.text.length?this:this.withText(this.text.slice(e,r))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function m7(t,e){for(let r=t.length-1;r>=0;r--)e=t[r].type.name+"("+e+")";return e}class Oo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,r){let n=new kO(e,r);if(n.next==null)return Oo.empty;let s=g7(n);n.next&&n.err("Unexpected trailing text");let i=AO(MO(s));return jO(i,n),i}matchType(e){for(let r=0;r<this.next.length;r++)if(this.next[r].type==e)return this.next[r].next;return null}matchFragment(e,r=0,n=e.childCount){let s=this;for(let i=r;s&&i<n;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:r}=this.next[e];if(!(r.isText||r.hasRequiredAttrs()))return r}return null}compatible(e){for(let r=0;r<this.next.length;r++)for(let n=0;n<e.next.length;n++)if(this.next[r].type==e.next[n].type)return!0;return!1}fillBefore(e,r=!1,n=0){let s=[this];function i(o,a){let l=o.matchFragment(e,n);if(l&&(!r||l.validEnd))return K.from(a.map(u=>u.createAndFill()));for(let u=0;u<o.next.length;u++){let{type:c,next:d}=o.next[u];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let h=i(d,a.concat(c));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let r=this.computeWrapping(e);return this.wrapCache.push(e,r),r}computeWrapping(e){let r=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in r)&&(!s.type||l.validEnd)&&(n.push({match:a.contentMatch,type:a,via:s}),r[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function r(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&r(n.next[s].next)}return r(this),e.map((n,s)=>{let i=s+(n.validEnd?"*":" ")+" ";for(let o=0;o<n.next.length;o++)i+=(o?", ":"")+n.next[o].type.name+"->"+e.indexOf(n.next[o].next);return i}).join(`
`)}}Oo.empty=new Oo(!0);class kO{constructor(e,r){this.string=e,this.nodeTypes=r,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function g7(t){let e=[];do e.push(SO(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function SO(t){let e=[];do e.push(TO(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function TO(t){let e=NO(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=CO(t,e);else break;return e}function Z4(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function CO(t,e){let r=Z4(t),n=r;return t.eat(",")&&(t.next!="}"?n=Z4(t):n=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:r,max:n,expr:e}}function EO(t,e){let r=t.nodeTypes,n=r[e];if(n)return[n];let s=[];for(let i in r){let o=r[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function NO(t){if(t.eat("(")){let e=g7(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=EO(t,t.next).map(r=>(t.inline==null?t.inline=r.isInline:t.inline!=r.isInline&&t.err("Mixing inline and block content"),{type:"name",value:r}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function MO(t){let e=[[]];return s(i(t,0),r()),e;function r(){return e.push([])-1}function n(o,a,l){let u={term:l,to:a};return e[o].push(u),u}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,u)=>l.concat(i(u,a)),[]);if(o.type=="seq")for(let l=0;;l++){let u=i(o.exprs[l],a);if(l==o.exprs.length-1)return u;s(u,a=r())}else if(o.type=="star"){let l=r();return n(a,l),s(i(o.expr,l),l),[n(l)]}else if(o.type=="plus"){let l=r();return s(i(o.expr,a),l),s(i(o.expr,l),l),[n(l)]}else{if(o.type=="opt")return[n(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let u=0;u<o.min;u++){let c=r();s(i(o.expr,l),c),l=c}if(o.max==-1)s(i(o.expr,l),l);else for(let u=o.min;u<o.max;u++){let c=r();n(l,c),s(i(o.expr,l),c),l=c}return[n(l)]}else{if(o.type=="name")return[n(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function v7(t,e){return e-t}function ex(t,e){let r=[];return n(e),r.sort(v7);function n(s){let i=t[s];if(i.length==1&&!i[0].term)return n(i[0].to);r.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&r.indexOf(l)==-1&&n(l)}}}function AO(t){let e=Object.create(null);return r(ex(t,0));function r(n){let s=[];n.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let u;for(let c=0;c<s.length;c++)s[c][0]==a&&(u=s[c][1]);ex(t,l).forEach(c=>{u||s.push([a,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let i=e[n.join(",")]=new Oo(n.indexOf(t.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(v7);i.next.push({type:s[o][0],next:e[a.join(",")]||r(a)})}return i}}function jO(t,e){for(let r=0,n=[t];r<n.length;r++){let s=n[r],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:u}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),n.indexOf(u)==-1&&n.push(u)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function y7(t){let e=Object.create(null);for(let r in t){let n=t[r];if(!n.hasDefault)return null;e[r]=n.default}return e}function x7(t,e){let r=Object.create(null);for(let n in t){let s=e&&e[n];if(s===void 0){let i=t[n];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+n)}r[n]=s}return r}function b7(t,e,r,n){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${r} of type ${s}`);for(let s in t){let i=t[s];i.validate&&i.validate(e[s])}}function w7(t,e){let r=Object.create(null);if(e)for(let n in e)r[n]=new _O(t,n,e[n]);return r}let tx=class k7{constructor(e,r,n){this.name=e,this.schema=r,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=w7(e,n.attrs),this.defaultAttrs=y7(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:x7(this.attrs,e)}create(e=null,r,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Pn(this,this.computeAttrs(e),K.from(r),Xe.setFrom(n))}createChecked(e=null,r,n){return r=K.from(r),this.checkContent(r),new Pn(this,this.computeAttrs(e),r,Xe.setFrom(n))}createAndFill(e=null,r,n){if(e=this.computeAttrs(e),r=K.from(r),r.size){let o=this.contentMatch.fillBefore(r);if(!o)return null;r=o.append(r)}let s=this.contentMatch.matchFragment(r),i=s&&s.fillBefore(K.empty,!0);return i?new Pn(this,e,r.append(i),Xe.setFrom(n)):null}validContent(e){let r=this.contentMatch.matchFragment(e);if(!r||!r.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){b7(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let r=0;r<e.length;r++)if(!this.allowsMarkType(e[r].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let r;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?r&&r.push(e[n]):r||(r=e.slice(0,n));return r?r.length?r:Xe.none:e}static compile(e,r){let n=Object.create(null);e.forEach((i,o)=>n[i]=new k7(i,r,o));let s=r.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function RO(t,e,r){let n=r.split("|");return s=>{let i=s===null?"null":typeof s;if(n.indexOf(i)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${t}, got ${i}`)}}class _O{constructor(e,r,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?RO(e,r,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class uf{constructor(e,r,n,s){this.name=e,this.rank=r,this.schema=n,this.spec=s,this.attrs=w7(e,s.attrs),this.excluded=null;let i=y7(this.attrs);this.instance=i?new Xe(this,i):null}create(e=null){return!e&&this.instance?this.instance:new Xe(this,x7(this.attrs,e))}static compile(e,r){let n=Object.create(null),s=0;return e.forEach((i,o)=>n[i]=new uf(i,s++,r,o)),n}removeFromSet(e){for(var r=0;r<e.length;r++)e[r].type==this&&(e=e.slice(0,r).concat(e.slice(r+1)),r--);return e}isInSet(e){for(let r=0;r<e.length;r++)if(e[r].type==this)return e[r]}checkAttrs(e){b7(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class S7{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let r=this.spec={};for(let s in e)r[s]=e[s];r.nodes=Zt.from(e.nodes),r.marks=Zt.from(e.marks||{}),this.nodes=tx.compile(this.spec.nodes,this),this.marks=uf.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=n[o]||(n[o]=Oo.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?rx(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:rx(this,o.split(" "))}this.nodeFromJSON=s=>Pn.fromJSON(this,s),this.markFromJSON=s=>Xe.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,r=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof tx){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(r,n,s)}text(e,r){let n=this.nodes.text;return new O0(n,n.defaultAttrs,e,Xe.setFrom(r))}mark(e,r){return typeof e=="string"&&(e=this.marks[e]),e.create(r)}nodeType(e){let r=this.nodes[e];if(!r)throw new RangeError("Unknown node type: "+e);return r}}function rx(t,e){let r=[];for(let n=0;n<e.length;n++){let s=e[n],i=t.marks[s],o=i;if(i)r.push(i);else for(let a in t.marks){let l=t.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&r.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return r}function OO(t){return t.tag!=null}function DO(t){return t.style!=null}class Ni{constructor(e,r){this.schema=e,this.rules=r,this.tags=[],this.styles=[];let n=this.matchedStyles=[];r.forEach(s=>{if(OO(s))this.tags.push(s);else if(DO(s)){let i=/[^=]*/.exec(s.style)[0];n.indexOf(i)<0&&n.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,r={}){let n=new sx(this,r,!1);return n.addAll(e,Xe.none,r.from,r.to),n.finish()}parseSlice(e,r={}){let n=new sx(this,r,!0);return n.addAll(e,Xe.none,r.from,r.to),re.maxOpen(n.finish())}matchTag(e,r,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(LO(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||r.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,r,n,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!n.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=r))){if(o.getAttrs){let l=o.getAttrs(r);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let r=[];function n(s){let i=s.priority==null?50:s.priority,o=0;for(;o<r.length;o++){let a=r[o];if((a.priority==null?50:a.priority)<i)break}r.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{n(o=ix(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{n(o=ix(o)),o.node||o.ignore||o.mark||(o.node=s)})}return r}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ni(e,Ni.schemaRules(e)))}}const T7={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},IO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},C7={ol:!0,ul:!0},Vu=1,C1=2,eu=4;function nx(t,e,r){return e!=null?(e?Vu:0)|(e==="full"?C1:0):t&&t.whitespace=="pre"?Vu|C1:r&~eu}class sd{constructor(e,r,n,s,i,o){this.type=e,this.attrs=r,this.marks=n,this.solid=s,this.options=o,this.content=[],this.activeMarks=Xe.none,this.match=i||(o&eu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let r=this.type.contentMatch.fillBefore(K.from(e));if(r)this.match=this.type.contentMatch.matchFragment(r);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Vu)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let i=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let r=K.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(K.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!T7.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class sx{constructor(e,r,n){this.parser=e,this.options=r,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=r.topNode,i,o=nx(null,r.preserveWhitespace,0)|(n?eu:0);s?i=new sd(s.type,s.attrs,Xe.none,!0,r.topMatch||s.type.contentMatch,o):n?i=new sd(null,null,Xe.none,!0,null,o):i=new sd(e.schema.topNodeType,null,Xe.none,!0,null,o),this.nodes=[i],this.find=r.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,r){e.nodeType==3?this.addTextNode(e,r):e.nodeType==1&&this.addElement(e,r)}addTextNode(e,r){let n=e.nodeValue,s=this.top,i=s.options&C1?"full":this.localPreserveWS||(s.options&Vu)>0,{schema:o}=this.parser;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i)if(i==="full")n=n.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(o.linebreakReplacement.create())){let a=n.split(/\r?\n|\r/);for(let l=0;l<a.length;l++)l&&this.insertNode(o.linebreakReplacement.create(),r,!0),a[l]&&this.insertNode(o.text(a[l]),r,!/\S/.test(a[l]));n=""}else n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let a=s.content[s.content.length-1],l=e.previousSibling;(!a||l&&l.nodeName=="BR"||a.isText&&/[ \t\r\n\u000c]$/.test(a.text))&&(n=n.slice(1))}n&&this.insertNode(o.text(n),r,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,r,n){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;C7.hasOwnProperty(o)&&this.parser.normalizeLists&&zO(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,n));e:if(l?l.ignore:IO.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,r);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let u,c=this.needsBlock;if(T7.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),u=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,r);break e}let d=l&&l.skip?r:this.readStyles(e,r);d&&this.addAll(e,d),u&&this.sync(i),this.needsBlock=c}else{let u=this.readStyles(e,r);u&&this.addElementByRule(e,l,u,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,r){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),r)}ignoreFallback(e,r){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),r,!0)}readStyles(e,r){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=n.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?r=r.filter(u=>!l.clearMark(u)):r=r.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return r}addElementByRule(e,r,n,s){let i,o;if(r.node)if(o=this.parser.schema.nodes[r.node],o.isLeaf)this.insertNode(o.create(r.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let l=this.enter(o,r.attrs||null,n,r.preserveWhitespace);l&&(i=!0,n=l)}else{let l=this.parser.schema.marks[r.mark];n=n.concat(l.create(r.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(r.getContent)this.findInside(e),r.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,n,!1));else{let l=e;typeof r.contentElement=="string"?l=e.querySelector(r.contentElement):typeof r.contentElement=="function"?l=r.contentElement(e):r.contentElement&&(l=r.contentElement),this.findAround(e,l,!0),this.addAll(l,n),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,r,n,s){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,r);this.findAtPoint(e,i)}findPlace(e,r,n){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],u=l.findWrapping(e);if(u&&(!s||s.length>u.length+a)&&(s=u,i=l,!u.length))break;if(l.solid){if(n)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)r=this.enterInner(s[o],null,r,!1);return r}insertNode(e,r,n){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(r=this.enterInner(i,null,r))}let s=this.findPlace(e,r,n);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=Xe.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):ox(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,r,n,s){let i=this.findPlace(e.create(r),n,!1);return i&&(i=this.enterInner(e,r,n,!0,s)),i}enterInner(e,r,n,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=nx(e,i,o.options);o.options&eu&&o.content.length==0&&(a|=eu);let l=Xe.none;return n=n.filter(u=>(o.type?o.type.allowsMarkType(u.type):ox(u.type,e))?(l=u.addToSet(l),!1):!0),this.nodes.push(new sd(e,r,l,s,null,a)),this.open++,n}closeExtra(e=!1){let r=this.nodes.length-1;if(r>this.open){for(;r>this.open;r--)this.nodes[r-1].content.push(this.nodes[r].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let r=this.open;r>=0;r--){if(this.nodes[r]==e)return this.open=r,!0;this.localPreserveWS&&(this.nodes[r].options|=Vu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let r=this.open;r>=0;r--){let n=this.nodes[r].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;r&&e++}return e}findAtPoint(e,r){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==r&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&(this.find[r].pos=this.currentPos)}findAround(e,r,n){if(e!=r&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&r.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&(this.find[r].pos=this.currentPos-(e.nodeValue.length-this.find[r].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let r=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let u=r[a];if(u==""){if(a==r.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let c=l>0||l==0&&s?this.nodes[l].type:n&&l>=i?n.node(l-i).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;l--}}return!0};return o(r.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let r=e.depth;r>=0;r--){let n=e.node(r).contentMatchAt(e.indexAfter(r)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let r in this.parser.schema.nodes){let n=this.parser.schema.nodes[r];if(n.isTextblock&&n.defaultAttrs)return n}}}function zO(t){for(let e=t.firstChild,r=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&C7.hasOwnProperty(n)&&r?(r.appendChild(e),e=r):n=="li"?r=e:n&&(r=null)}}function LO(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ix(t){let e={};for(let r in t)e[r]=t[r];return e}function ox(t,e){let r=e.schema.nodes;for(let n in r){let s=r[n];if(!s.allowsMarkType(t))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:u,next:c}=a.edge(l);if(u==e||i.indexOf(c)<0&&o(c))return!0}};if(o(s.contentMatch))return!0}}class Fo{constructor(e,r){this.nodes=e,this.marks=r}serializeFragment(e,r={},n){n||(n=jp(r).createDocumentFragment());let s=n,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let u=o.marks[l];if(!this.marks[u.type.name]){l++;continue}if(!u.eq(i[a][0])||u.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let u=o.marks[l++],c=this.serializeMark(u,o.isInline,r);c&&(i.push([u,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(o,r))}),n}serializeNodeInner(e,r){let{dom:n,contentDOM:s}=Ld(jp(r),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,r,s)}return n}serializeNode(e,r={}){let n=this.serializeNodeInner(e,r);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,r);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,r,n={}){let s=this.marks[e.type.name];return s&&Ld(jp(n),s(e,r),null,e.attrs)}static renderSpec(e,r,n=null,s){return Ld(e,r,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Fo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let r=ax(e.nodes);return r.text||(r.text=n=>n.text),r}static marksFromSchema(e){return ax(e.marks)}}function ax(t){let e={};for(let r in t){let n=t[r].spec.toDOM;n&&(e[r]=n)}return e}function jp(t){return t.document||window.document}const lx=new WeakMap;function PO(t){let e=lx.get(t);return e===void 0&&lx.set(t,e=$O(t)),e}function $O(t){let e=null;function r(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)r(n[s]);else for(let s in n)r(n[s])}return r(t),e}function Ld(t,e,r,n){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(i=PO(n))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(r=s.slice(0,o),s=s.slice(o+1));let a,l=r?t.createElementNS(r,s):t.createElement(s),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),u[d]):d=="style"&&l.style?l.style.cssText=u[d]:l.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=Ld(t,h,r,n);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const E7=65535,N7=Math.pow(2,16);function BO(t,e){return t+e*N7}function ux(t){return t&E7}function FO(t){return(t-(t&E7))/N7}const M7=1,A7=2,Pd=4,j7=8;class E1{constructor(e,r,n){this.pos=e,this.delInfo=r,this.recover=n}get deleted(){return(this.delInfo&j7)>0}get deletedBefore(){return(this.delInfo&(M7|Pd))>0}get deletedAfter(){return(this.delInfo&(A7|Pd))>0}get deletedAcross(){return(this.delInfo&Pd)>0}}class Kr{constructor(e,r=!1){if(this.ranges=e,this.inverted=r,!e.length&&Kr.empty)return Kr.empty}recover(e){let r=0,n=ux(e);if(!this.inverted)for(let s=0;s<n;s++)r+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+r+FO(e)}mapResult(e,r=1){return this._map(e,r,!1)}map(e,r=1){return this._map(e,r,!0)}_map(e,r,n){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let u=this.ranges[a+i],c=this.ranges[a+o],d=l+u;if(e<=d){let h=u?e==l?-1:e==d?1:r:r,p=l+s+(h<0?0:c);if(n)return p;let m=e==(r<0?l:d)?null:BO(a/3,e-l),y=e==l?A7:e==d?M7:Pd;return(r<0?e!=l:e!=d)&&(y|=j7),new E1(p,y,m)}s+=c-u}return n?e+s:new E1(e+s,0,null)}touches(e,r){let n=0,s=ux(r),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?n:0);if(l>e)break;let u=this.ranges[a+i],c=l+u;if(e<=c&&a==s*3)return!0;n+=this.ranges[a+o]-u}return!1}forEach(e){let r=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),u=this.ranges[s+r],c=this.ranges[s+n];e(a,a+u,l,l+c),i+=c-u}}invert(){return new Kr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Kr.empty:new Kr(e<0?[0,-e,0]:[0,0,e])}}Kr.empty=new Kr([]);class Wu{constructor(e,r,n=0,s=e?e.length:0){this.mirror=r,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||r)}get maps(){return this._maps}slice(e=0,r=this.maps.length){return new Wu(this._maps,this.mirror,e,r)}appendMap(e,r){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),r!=null&&this.setMirror(this._maps.length-1,r)}appendMapping(e){for(let r=0,n=this._maps.length;r<e._maps.length;r++){let s=e.getMirror(r);this.appendMap(e._maps[r],s!=null&&s<r?n+s:void 0)}}getMirror(e){if(this.mirror){for(let r=0;r<this.mirror.length;r++)if(this.mirror[r]==e)return this.mirror[r+(r%2?-1:1)]}}setMirror(e,r){this.mirror||(this.mirror=[]),this.mirror.push(e,r)}appendMappingInverted(e){for(let r=e.maps.length-1,n=this._maps.length+e._maps.length;r>=0;r--){let s=e.getMirror(r);this.appendMap(e._maps[r].invert(),s!=null&&s>r?n-s-1:void 0)}}invert(){let e=new Wu;return e.appendMappingInverted(this),e}map(e,r=1){if(this.mirror)return this._map(e,r,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,r);return e}mapResult(e,r=1){return this._map(e,r,!1)}_map(e,r,n){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,r);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return n?e:new E1(e,s,null)}}const Rp=Object.create(null);class pr{getMap(){return Kr.empty}merge(e){return null}static fromJSON(e,r){if(!r||!r.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Rp[r.stepType];if(!n)throw new RangeError(`No step type ${r.stepType} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Rp)throw new RangeError("Duplicate use of step JSON ID "+e);return Rp[e]=r,r.prototype.jsonID=e,r}}class Rt{constructor(e,r){this.doc=e,this.failed=r}static ok(e){return new Rt(e,null)}static fail(e){return new Rt(null,e)}static fromReplace(e,r,n,s){try{return Rt.ok(e.replace(r,n,s))}catch(i){if(i instanceof j0)return Rt.fail(i.message);throw i}}}function jv(t,e,r){let n=[];for(let s=0;s<t.childCount;s++){let i=t.child(s);i.content.size&&(i=i.copy(jv(i.content,e,i))),i.isInline&&(i=e(i,r,s)),n.push(i)}return K.fromArray(n)}class gi extends pr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),i=new re(jv(r.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),r.openStart,r.openEnd);return Rt.fromReplace(e,this.from,this.to,i)}invert(){return new In(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new gi(r.pos,n.pos,this.mark)}merge(e){return e instanceof gi&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gi(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gi(r.from,r.to,e.markFromJSON(r.mark))}}pr.jsonID("addMark",gi);class In extends pr{constructor(e,r,n){super(),this.from=e,this.to=r,this.mark=n}apply(e){let r=e.slice(this.from,this.to),n=new re(jv(r.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),r.openStart,r.openEnd);return Rt.fromReplace(e,this.from,this.to,n)}invert(){return new gi(this.from,this.to,this.mark)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deleted&&n.deleted||r.pos>=n.pos?null:new In(r.pos,n.pos,this.mark)}merge(e){return e instanceof In&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new In(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new In(r.from,r.to,e.markFromJSON(r.mark))}}pr.jsonID("removeMark",In);class vi extends pr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Rt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.addToSet(r.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(K.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);if(r){let n=this.mark.addToSet(r.marks);if(n.length==r.marks.length){for(let s=0;s<r.marks.length;s++)if(!r.marks[s].isInSet(n))return new vi(this.pos,r.marks[s]);return new vi(this.pos,this.mark)}}return new Do(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new vi(r.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vi(r.pos,e.markFromJSON(r.mark))}}pr.jsonID("addNodeMark",vi);class Do extends pr{constructor(e,r){super(),this.pos=e,this.mark=r}apply(e){let r=e.nodeAt(this.pos);if(!r)return Rt.fail("No node at mark step's position");let n=r.type.create(r.attrs,null,this.mark.removeFromSet(r.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new re(K.from(n),0,r.isLeaf?0:1))}invert(e){let r=e.nodeAt(this.pos);return!r||!this.mark.isInSet(r.marks)?this:new vi(this.pos,this.mark)}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Do(r.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Do(r.pos,e.markFromJSON(r.mark))}}pr.jsonID("removeNodeMark",Do);class Vt extends pr{constructor(e,r,n,s=!1){super(),this.from=e,this.to=r,this.slice=n,this.structure=s}apply(e){return this.structure&&N1(e,this.from,this.to)?Rt.fail("Structure replace would overwrite content"):Rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Kr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Vt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return r.deletedAcross&&n.deletedAcross?null:new Vt(r.pos,Math.max(r.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Vt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let r=this.slice.size+e.slice.size==0?re.empty:new re(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Vt(this.from,this.to+(e.to-e.from),r,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let r=this.slice.size+e.slice.size==0?re.empty:new re(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Vt(e.from,this.to,r,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Vt(r.from,r.to,re.fromJSON(e,r.slice),!!r.structure)}}pr.jsonID("replace",Vt);class qt extends pr{constructor(e,r,n,s,i,o,a=!1){super(),this.from=e,this.to=r,this.gapFrom=n,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(N1(e,this.from,this.gapFrom)||N1(e,this.gapTo,this.to)))return Rt.fail("Structure gap-replace would overwrite content");let r=e.slice(this.gapFrom,this.gapTo);if(r.openStart||r.openEnd)return Rt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,r.content);return n?Rt.fromReplace(e,this.from,this.to,n):Rt.fail("Content does not fit in gap")}getMap(){return new Kr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let r=this.gapTo-this.gapFrom;return new qt(this.from,this.from+this.slice.size+r,this.from+this.insert,this.from+this.insert+r,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let r=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?r.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return r.deletedAcross&&n.deletedAcross||s<r.pos||i>n.pos?null:new qt(r.pos,n.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,r){if(typeof r.from!="number"||typeof r.to!="number"||typeof r.gapFrom!="number"||typeof r.gapTo!="number"||typeof r.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qt(r.from,r.to,r.gapFrom,r.gapTo,re.fromJSON(e,r.slice),r.insert,!!r.structure)}}pr.jsonID("replaceAround",qt);function N1(t,e,r){let n=t.resolve(e),s=r-e,i=n.depth;for(;s>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,s--;if(s>0){let o=n.node(i).maybeChild(n.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function HO(t,e,r,n){let s=[],i=[],o,a;t.doc.nodesBetween(e,r,(l,u,c)=>{if(!l.isInline)return;let d=l.marks;if(!n.isInSet(d)&&c.type.allowsMarkType(n.type)){let h=Math.max(u,e),p=Math.min(u+l.nodeSize,r),m=n.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==h&&o.mark.eq(d[y])?o.to=p:s.push(o=new In(h,p,d[y])));a&&a.to==h?a.to=p:i.push(a=new gi(h,p,n))}}),s.forEach(l=>t.step(l)),i.forEach(l=>t.step(l))}function UO(t,e,r,n){let s=[],i=0;t.doc.nodesBetween(e,r,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(n instanceof uf){let u=o.marks,c;for(;c=n.isInSet(u);)(l||(l=[])).push(c),u=c.removeFromSet(u)}else n?n.isInSet(o.marks)&&(l=[n]):l=o.marks;if(l&&l.length){let u=Math.min(a+o.nodeSize,r);for(let c=0;c<l.length;c++){let d=l[c],h;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&d.eq(s[p].style)&&(h=m)}h?(h.to=u,h.step=i):s.push({style:d,from:Math.max(a,e),to:u,step:i})}}}),s.forEach(o=>t.step(new In(o.from,o.to,o.style)))}function Rv(t,e,r,n=r.contentMatch,s=!0){let i=t.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let u=i.child(l),c=a+u.nodeSize,d=n.matchType(u.type);if(!d)o.push(new Vt(a,c,re.empty));else{n=d;for(let h=0;h<u.marks.length;h++)r.allowsMarkType(u.marks[h].type)||t.step(new In(a,c,u.marks[h]));if(s&&u.isText&&r.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(u.text);)m||(m=new re(K.from(r.schema.text(" ",r.allowedMarks(u.marks))),0,0)),o.push(new Vt(a+h.index,a+h.index+h[0].length,m))}}a=c}if(!n.validEnd){let l=n.fillBefore(K.empty,!0);t.replace(a,a,new re(l,0,0))}for(let l=o.length-1;l>=0;l--)t.step(o[l])}function VO(t,e,r){return(e==0||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function al(t){let r=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth,s=0,i=0;;--n){let o=t.$from.node(n),a=t.$from.index(n)+s,l=t.$to.indexAfter(n)-i;if(n<t.depth&&o.canReplace(a,l,r))return n;if(n==0||o.type.spec.isolating||!VO(o,a,l))break;a&&(s=1),l<o.childCount&&(i=1)}return null}function WO(t,e,r){let{$from:n,$to:s,depth:i}=e,o=n.before(i+1),a=s.after(i+1),l=o,u=a,c=K.empty,d=0;for(let m=i,y=!1;m>r;m--)y||n.index(m)>0?(y=!0,c=K.from(n.node(m).copy(c)),d++):l--;let h=K.empty,p=0;for(let m=i,y=!1;m>r;m--)y||s.after(m+1)<s.end(m)?(y=!0,h=K.from(s.node(m).copy(h)),p++):u++;t.step(new qt(l,u,o,a,new re(c.append(h),d,p),c.size-d,!0))}function _v(t,e,r=null,n=t){let s=qO(t,e),i=s&&KO(n,e);return i?s.map(cx).concat({type:e,attrs:r}).concat(i.map(cx)):null}function cx(t){return{type:t,attrs:null}}function qO(t,e){let{parent:r,startIndex:n,endIndex:s}=t,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return r.canReplaceWith(n,s,o)?i:null}function KO(t,e){let{parent:r,startIndex:n,endIndex:s}=t,i=r.child(n),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let u=n;l&&u<s;u++)l=l.matchType(r.child(u).type);return!l||!l.validEnd?null:o}function GO(t,e,r){let n=K.empty;for(let o=r.length-1;o>=0;o--){if(n.size){let a=r[o].type.contentMatch.matchFragment(n);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=K.from(r[o].type.create(r[o].attrs,n))}let s=e.start,i=e.end;t.step(new qt(s,i,s,i,new re(n,0,0),r.length,!0))}function JO(t,e,r,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=t.steps.length;t.doc.nodesBetween(e,r,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(n,l)&&YO(t.doc,t.mapping.slice(i).map(a),n)){let u=null;if(n.schema.linebreakReplacement){let p=n.whitespace=="pre",m=!!n.contentMatch.matchType(n.schema.linebreakReplacement);p&&!m?u=!1:!p&&m&&(u=!0)}u===!1&&_7(t,o,a,i),Rv(t,t.mapping.slice(i).map(a,1),n,void 0,u===null);let c=t.mapping.slice(i),d=c.map(a,1),h=c.map(a+o.nodeSize,1);return t.step(new qt(d,h,d+1,h-1,new re(K.from(n.create(l,null,o.marks)),0,0),1,!0)),u===!0&&R7(t,o,a,i),!1}})}function R7(t,e,r,n){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=t.mapping.slice(n).map(r+1+i+o.index);t.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function _7(t,e,r,n){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=t.mapping.slice(n).map(r+1+i);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function YO(t,e,r){let n=t.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,r)}function XO(t,e,r,n,s){let i=t.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);let o=r.create(n,null,s||i.marks);if(i.isLeaf)return t.replaceWith(e,e+i.nodeSize,o);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);t.step(new qt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new re(K.from(o),0,0),1,!0))}function Ms(t,e,r=1,n){let s=t.resolve(e),i=s.depth-r,o=n&&n[n.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,c=r-2;u>i;u--,c--){let d=s.node(u),h=s.index(u);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),m=n&&n[c+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let y=n&&n[c]||d;if(!d.canReplace(h+1,d.childCount)||!y.type.validContent(p))return!1}let a=s.indexAfter(i),l=n&&n[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function QO(t,e,r=1,n){let s=t.doc.resolve(e),i=K.empty,o=K.empty;for(let a=s.depth,l=s.depth-r,u=r-1;a>l;a--,u--){i=K.from(s.node(a).copy(i));let c=n&&n[u];o=K.from(c?c.type.create(c.attrs,o):s.node(a).copy(o))}t.step(new Vt(e,e,new re(i.append(o),r,r),!0))}function Wi(t,e){let r=t.resolve(e),n=r.index();return O7(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function ZO(t,e){e.content.size||t.type.compatibleContent(e.type);let r=t.contentMatchAt(t.childCount),{linebreakReplacement:n}=t.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==n?t.type.schema.nodes.text:i.type;if(r=r.matchType(o),!r||!t.type.allowsMarks(i.marks))return!1}return r.validEnd}function O7(t,e){return!!(t&&e&&!t.isLeaf&&ZO(t,e))}function cf(t,e,r=-1){let n=t.resolve(e);for(let s=n.depth;;s--){let i,o,a=n.index(s);if(s==n.depth?(i=n.nodeBefore,o=n.nodeAfter):r>0?(i=n.node(s+1),a++,o=n.node(s).maybeChild(a)):(i=n.node(s).maybeChild(a-1),o=n.node(s+1)),i&&!i.isTextblock&&O7(i,o)&&n.node(s).canReplace(a,a+1))return e;if(s==0)break;e=r<0?n.before(s):n.after(s)}}function eD(t,e,r){let n=null,{linebreakReplacement:s}=t.doc.type.schema,i=t.doc.resolve(e-r),o=i.node().type;if(s&&o.inlineContent){let c=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);c&&!d?n=!1:!c&&d&&(n=!0)}let a=t.steps.length;if(n===!1){let c=t.doc.resolve(e+r);_7(t,c.node(),c.before(),a)}o.inlineContent&&Rv(t,e+r-1,o,i.node().contentMatchAt(i.index()),n==null);let l=t.mapping.slice(a),u=l.map(e-r);if(t.step(new Vt(u,l.map(e+r,-1),re.empty,!0)),n===!0){let c=t.doc.resolve(u);R7(t,c.node(),c.before(),t.steps.length)}return t}function tD(t,e,r){let n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let i=n.index(s);if(n.node(s).canReplaceWith(i,i,r))return n.before(s+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let i=n.indexAfter(s);if(n.node(s).canReplaceWith(i,i,r))return n.after(s+1);if(i<n.node(s).childCount)return null}return null}function D7(t,e,r){let n=t.resolve(e);if(!r.content.size)return e;let s=r.content;for(let i=0;i<r.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(r.openStart==0&&r.size?2:1);i++)for(let o=n.depth;o>=0;o--){let a=o==n.depth?0:n.pos<=(n.start(o+1)+n.end(o+1))/2?-1:1,l=n.index(o)+(a>0?1:0),u=n.node(o),c=!1;if(i==1)c=u.canReplace(l,l,s);else{let d=u.contentMatchAt(l).findWrapping(s.firstChild.type);c=d&&u.canReplaceWith(l,l,d[0])}if(c)return a==0?n.pos:a<0?n.before(o+1):n.after(o+1)}return null}function df(t,e,r=e,n=re.empty){if(e==r&&!n.size)return null;let s=t.resolve(e),i=t.resolve(r);return I7(s,i,n)?new Vt(e,r,n):new rD(s,i,n).fit()}function I7(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}class rD{constructor(e,r,n){this.$from=e,this.$to=r,this.unplaced=n,this.frontier=[],this.placed=K.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=K.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),r=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let i=this.placed,o=n.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new re(i,o,a);return e>-1?new qt(n.pos,e,this.$to.pos,this.$to.end(),l,r):l.size||n.pos!=this.$to.pos?new Vt(n.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let r=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let i=r.firstChild;if(r.childCount>1&&(s=0),i.type.spec.isolating&&s<=n){e=n;break}r=i.content}for(let r=1;r<=2;r++)for(let n=r==1?e:this.unplaced.openStart;n>=0;n--){let s,i=null;n?(i=_p(this.unplaced.content,n-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:u}=this.frontier[a],c,d=null;if(r==1&&(o?u.matchType(o.type)||(d=u.fillBefore(K.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:a,parent:i,inject:d};if(r==2&&o&&(c=u.findWrapping(o.type)))return{sliceDepth:n,frontierDepth:a,parent:i,wrap:c};if(i&&u.matchType(i.type))break}}}openMore(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=_p(e,r);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new re(e,r+1,Math.max(n,s.size+r>=e.size-n?r+1:0)),!0)}dropNode(){let{content:e,openStart:r,openEnd:n}=this.unplaced,s=_p(e,r);if(s.childCount<=1&&r>0){let i=e.size-r<=r+s.size;this.unplaced=new re(_l(e,r-1,1),r-1,i?r-1:n)}else this.unplaced=new re(_l(e,r,1),r,n)}placeNodes({sliceDepth:e,frontierDepth:r,parent:n,inject:s,wrap:i}){for(;this.depth>r;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let o=this.unplaced,a=n?n.content:o.content,l=o.openStart-e,u=0,c=[],{match:d,type:h}=this.frontier[r];if(s){for(let y=0;y<s.childCount;y++)c.push(s.child(y));d=d.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;u<a.childCount;){let y=a.child(u),x=d.matchType(y.type);if(!x)break;u++,(u>1||l==0||y.content.size)&&(d=x,c.push(z7(y.mark(h.allowedMarks(y.marks)),u==1?l:0,u==a.childCount?p:-1)))}let m=u==a.childCount;m||(p=-1),this.placed=Ol(this.placed,r,K.from(c)),this.frontier[r].match=d,m&&p<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=a;y<p;y++){let v=x.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),x=v.content}this.unplaced=m?e==0?re.empty:new re(_l(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new re(_l(o.content,e,u),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],r;if(!e.type.isTextblock||!Op(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(r=this.findCloseLevel(this.$to))&&r.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let r=Math.min(this.depth,e.depth);r>=0;r--){let{match:n,type:s}=this.frontier[r],i=r<e.depth&&e.end(r+1)==e.pos+(e.depth-(r+1)),o=Op(e,r,s,n,i);if(o){for(let a=r-1;a>=0;a--){let{match:l,type:u}=this.frontier[a],c=Op(e,a,u,l,!0);if(!c||c.childCount)continue e}return{depth:r,fit:o,move:i?e.doc.resolve(e.after(r+1)):e}}}}close(e){let r=this.findCloseLevel(e);if(!r)return null;for(;this.depth>r.depth;)this.closeFrontierNode();r.fit.childCount&&(this.placed=Ol(this.placed,r.depth,r.fit)),e=r.move;for(let n=r.depth+1;n<=e.depth;n++){let s=e.node(n),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,r=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Ol(this.placed,this.depth,K.from(e.create(r,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let r=this.frontier.pop().match.fillBefore(K.empty,!0);r.childCount&&(this.placed=Ol(this.placed,this.frontier.length,r))}}function _l(t,e,r){return e==0?t.cutByIndex(r,t.childCount):t.replaceChild(0,t.firstChild.copy(_l(t.firstChild.content,e-1,r)))}function Ol(t,e,r){return e==0?t.append(r):t.replaceChild(t.childCount-1,t.lastChild.copy(Ol(t.lastChild.content,e-1,r)))}function _p(t,e){for(let r=0;r<e;r++)t=t.firstChild.content;return t}function z7(t,e,r){if(e<=0)return t;let n=t.content;return e>1&&(n=n.replaceChild(0,z7(n.firstChild,e-1,n.childCount==1?r-1:0))),e>0&&(n=t.type.contentMatch.fillBefore(n).append(n),r<=0&&(n=n.append(t.type.contentMatch.matchFragment(n).fillBefore(K.empty,!0)))),t.copy(n)}function Op(t,e,r,n,s){let i=t.node(e),o=s?t.indexAfter(e):t.index(e);if(o==i.childCount&&!r.compatibleContent(i.type))return null;let a=n.fillBefore(i.content,!0,o);return a&&!nD(r,i.content,o)?a:null}function nD(t,e,r){for(let n=r;n<e.childCount;n++)if(!t.allowsMarks(e.child(n).marks))return!0;return!1}function sD(t){return t.spec.defining||t.spec.definingForContent}function iD(t,e,r,n){if(!n.size)return t.deleteRange(e,r);let s=t.doc.resolve(e),i=t.doc.resolve(r);if(I7(s,i,n))return t.step(new Vt(e,r,n));let o=P7(s,i);o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(h)>-1?a=h:s.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),u=[],c=n.openStart;for(let h=n.content,p=0;;p++){let m=h.firstChild;if(u.push(m),p==n.openStart)break;h=m.content}for(let h=c-1;h>=0;h--){let p=u[h],m=sD(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))c=h;else if(m||!p.type.isTextblock)break}for(let h=n.openStart;h>=0;h--){let p=(h+c+1)%(n.openStart+1),m=u[p];if(m)for(let y=0;y<o.length;y++){let x=o[(y+l)%o.length],v=!0;x<0&&(v=!1,x=-x);let w=s.node(x-1),k=s.index(x-1);if(w.canReplaceWith(k,k,m.type,m.marks))return t.replace(s.before(x),v?i.after(x):r,new re(L7(n.content,0,n.openStart,p),p,n.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,r,n),!(t.steps.length>d));h--){let p=o[h];p<0||(e=s.before(p),r=i.after(p))}}function L7(t,e,r,n,s){if(e<r){let i=t.firstChild;t=t.replaceChild(0,i.copy(L7(i.content,e+1,r,n,i)))}if(e>n){let i=s.contentMatchAt(0),o=i.fillBefore(t).append(t);t=o.append(i.matchFragment(o).fillBefore(K.empty,!0))}return t}function oD(t,e,r,n){if(!n.isInline&&e==r&&t.doc.resolve(e).parent.content.size){let s=tD(t.doc,e,n.type);s!=null&&(e=r=s)}t.replaceRange(e,r,new re(K.from(n),0,0))}function aD(t,e,r){let n=t.doc.resolve(e),s=t.doc.resolve(r),i=P7(n,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||n.node(a).type.contentMatch.validEnd)return t.delete(n.start(a),s.end(a));if(a>0&&(l||n.node(a-1).canReplace(n.index(a-1),s.indexAfter(a-1))))return t.delete(n.before(a),s.after(a))}for(let o=1;o<=n.depth&&o<=s.depth;o++)if(e-n.start(o)==n.depth-o&&r>n.end(o)&&s.end(o)-r!=s.depth-o&&n.start(o-1)==s.start(o-1)&&n.node(o-1).canReplace(n.index(o-1),s.index(o-1)))return t.delete(n.before(o),r);t.delete(e,r)}function P7(t,e){let r=[],n=Math.min(t.depth,e.depth);for(let s=n;s>=0;s--){let i=t.start(s);if(i<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&r.push(s)}return r}class Ra extends pr{constructor(e,r,n){super(),this.pos=e,this.attr=r,this.value=n}apply(e){let r=e.nodeAt(this.pos);if(!r)return Rt.fail("No node at attribute step's position");let n=Object.create(null);for(let i in r.attrs)n[i]=r.attrs[i];n[this.attr]=this.value;let s=r.type.create(n,null,r.marks);return Rt.fromReplace(e,this.pos,this.pos+1,new re(K.from(s),0,r.isLeaf?0:1))}getMap(){return Kr.empty}invert(e){return new Ra(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let r=e.mapResult(this.pos,1);return r.deletedAfter?null:new Ra(r.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.pos!="number"||typeof r.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ra(r.pos,r.attr,r.value)}}pr.jsonID("attr",Ra);class qu extends pr{constructor(e,r){super(),this.attr=e,this.value=r}apply(e){let r=Object.create(null);for(let s in e.attrs)r[s]=e.attrs[s];r[this.attr]=this.value;let n=e.type.create(r,e.content,e.marks);return Rt.ok(n)}getMap(){return Kr.empty}invert(e){return new qu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,r){if(typeof r.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new qu(r.attr,r.value)}}pr.jsonID("docAttr",qu);let Ha=class extends Error{};Ha=function t(e){let r=Error.call(this,e);return r.__proto__=t.prototype,r};Ha.prototype=Object.create(Error.prototype);Ha.prototype.constructor=Ha;Ha.prototype.name="TransformError";class $7{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Wu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let r=this.maybeStep(e);if(r.failed)throw new Ha(r.failed);return this}maybeStep(e){let r=e.apply(this.doc);return r.failed||this.addStep(e,r.doc),r}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,r=-1e9;for(let n=0;n<this.mapping.maps.length;n++){let s=this.mapping.maps[n];n&&(e=s.map(e,1),r=s.map(r,-1)),s.forEach((i,o,a,l)=>{e=Math.min(e,a),r=Math.max(r,l)})}return e==1e9?null:{from:e,to:r}}addStep(e,r){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=r}replace(e,r=e,n=re.empty){let s=df(this.doc,e,r,n);return s&&this.step(s),this}replaceWith(e,r,n){return this.replace(e,r,new re(K.from(n),0,0))}delete(e,r){return this.replace(e,r,re.empty)}insert(e,r){return this.replaceWith(e,e,r)}replaceRange(e,r,n){return iD(this,e,r,n),this}replaceRangeWith(e,r,n){return oD(this,e,r,n),this}deleteRange(e,r){return aD(this,e,r),this}lift(e,r){return WO(this,e,r),this}join(e,r=1){return eD(this,e,r),this}wrap(e,r){return GO(this,e,r),this}setBlockType(e,r=e,n,s=null){return JO(this,e,r,n,s),this}setNodeMarkup(e,r,n=null,s){return XO(this,e,r,n,s),this}setNodeAttribute(e,r,n){return this.step(new Ra(e,r,n)),this}setDocAttribute(e,r){return this.step(new qu(e,r)),this}addNodeMark(e,r){return this.step(new vi(e,r)),this}removeNodeMark(e,r){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(r instanceof Xe)r.isInSet(n.marks)&&this.step(new Do(e,r));else{let s=n.marks,i,o=[];for(;i=r.isInSet(s);)o.push(new Do(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,r=1,n){return QO(this,e,r,n),this}addMark(e,r,n){return HO(this,e,r,n),this}removeMark(e,r,n){return UO(this,e,r,n),this}clearIncompatible(e,r,n){return Rv(this,e,r,n),this}}const Dp=Object.create(null);class Re{constructor(e,r,n){this.$anchor=e,this.$head=r,this.ranges=n||[new lD(e.min(r),e.max(r))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let r=0;r<e.length;r++)if(e[r].$from.pos!=e[r].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,r=re.empty){let n=r.content.lastChild,s=null;for(let a=0;a<r.openEnd;a++)s=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:u}=o[a],c=e.mapping.slice(i);e.replaceRange(c.map(l.pos),c.map(u.pos),a?re.empty:r),a==0&&fx(e,i,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,r){let n=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(n),u=l.map(o.pos),c=l.map(a.pos);i?e.deleteRange(u,c):(e.replaceRangeWith(u,c,r),fx(e,n,r.isInline?-1:1))}}static findFrom(e,r,n=!1){let s=e.parent.inlineContent?new Te(e):sa(e.node(0),e.parent,e.pos,e.index(),r,n);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=r<0?sa(e.node(0),e.node(i),e.before(i+1),e.index(i),r,n):sa(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,r,n);if(o)return o}return null}static near(e,r=1){return this.findFrom(e,r)||this.findFrom(e,-r)||new Xr(e.node(0))}static atStart(e){return sa(e,e,0,0,1)||new Xr(e)}static atEnd(e){return sa(e,e,e.content.size,e.childCount,-1)||new Xr(e)}static fromJSON(e,r){if(!r||!r.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Dp[r.type];if(!n)throw new RangeError(`No selection type ${r.type} defined`);return n.fromJSON(e,r)}static jsonID(e,r){if(e in Dp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Dp[e]=r,r.prototype.jsonID=e,r}getBookmark(){return Te.between(this.$anchor,this.$head).getBookmark()}}Re.prototype.visible=!0;class lD{constructor(e,r){this.$from=e,this.$to=r}}let dx=!1;function hx(t){!dx&&!t.parent.inlineContent&&(dx=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Te extends Re{constructor(e,r=e){hx(e),hx(r),super(e,r)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,r){let n=e.resolve(r.map(this.head));if(!n.parent.inlineContent)return Re.near(n);let s=e.resolve(r.map(this.anchor));return new Te(s.parent.inlineContent?s:n,n)}replace(e,r=re.empty){if(super.replace(e,r),r==re.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof Te&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,r){if(typeof r.anchor!="number"||typeof r.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Te(e.resolve(r.anchor),e.resolve(r.head))}static create(e,r,n=r){let s=e.resolve(r);return new this(s,n==r?s:e.resolve(n))}static between(e,r,n){let s=e.pos-r.pos;if((!n||s)&&(n=s>=0?1:-1),!r.parent.inlineContent){let i=Re.findFrom(r,n,!0)||Re.findFrom(r,-n,!0);if(i)r=i.$head;else return Re.near(r,n)}return e.parent.inlineContent||(s==0?e=r:(e=(Re.findFrom(e,-n,!0)||Re.findFrom(e,n,!0)).$anchor,e.pos<r.pos!=s<0&&(e=r))),new Te(e,r)}}Re.jsonID("text",Te);class hf{constructor(e,r){this.anchor=e,this.head=r}map(e){return new hf(e.map(this.anchor),e.map(this.head))}resolve(e){return Te.between(e.resolve(this.anchor),e.resolve(this.head))}}class me extends Re{constructor(e){let r=e.nodeAfter,n=e.node(0).resolve(e.pos+r.nodeSize);super(e,n),this.node=r}map(e,r){let{deleted:n,pos:s}=r.mapResult(this.anchor),i=e.resolve(s);return n?Re.near(i):new me(i)}content(){return new re(K.from(this.node),0,0)}eq(e){return e instanceof me&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Ov(this.anchor)}static fromJSON(e,r){if(typeof r.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new me(e.resolve(r.anchor))}static create(e,r){return new me(e.resolve(r))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}me.prototype.visible=!1;Re.jsonID("node",me);class Ov{constructor(e){this.anchor=e}map(e){let{deleted:r,pos:n}=e.mapResult(this.anchor);return r?new hf(n,n):new Ov(n)}resolve(e){let r=e.resolve(this.anchor),n=r.nodeAfter;return n&&me.isSelectable(n)?new me(r):Re.near(r)}}class Xr extends Re{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,r=re.empty){if(r==re.empty){e.delete(0,e.doc.content.size);let n=Re.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,r)}toJSON(){return{type:"all"}}static fromJSON(e){return new Xr(e)}map(e){return new Xr(e)}eq(e){return e instanceof Xr}getBookmark(){return uD}}Re.jsonID("all",Xr);const uD={map(){return this},resolve(t){return new Xr(t)}};function sa(t,e,r,n,s,i=!1){if(e.inlineContent)return Te.create(t,r);for(let o=n-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&me.isSelectable(a))return me.create(t,r-(s<0?a.nodeSize:0))}else{let l=sa(t,a,r+s,s<0?a.childCount:0,s,i);if(l)return l}r+=a.nodeSize*s}return null}function fx(t,e,r){let n=t.steps.length-1;if(n<e)return;let s=t.steps[n];if(!(s instanceof Vt||s instanceof qt))return;let i=t.mapping.maps[n],o;i.forEach((a,l,u,c)=>{o==null&&(o=c)}),t.setSelection(Re.near(t.doc.resolve(o),r))}const px=1,id=2,mx=4;class cD extends $7{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|px)&~id,this.storedMarks=null,this}get selectionSet(){return(this.updated&px)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=id,this}ensureMarks(e){return Xe.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&id)>0}addStep(e,r){super.addStep(e,r),this.updated=this.updated&~id,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,r=!0){let n=this.selection;return r&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||Xe.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,r,n){let s=this.doc.type.schema;if(r==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=r),!e)return this.deleteRange(r,n);let i=this.storedMarks;if(!i){let o=this.doc.resolve(r);i=n==r?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(r,n,s.text(e,i)),!this.selection.empty&&this.selection.to==r+e.length&&this.setSelection(Re.near(this.selection.$to)),this}}setMeta(e,r){return this.meta[typeof e=="string"?e:e.key]=r,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mx,this}get scrolledIntoView(){return(this.updated&mx)>0}}function gx(t,e){return!e||!t?t:t.bind(e)}class Dl{constructor(e,r,n){this.name=e,this.init=gx(r.init,n),this.apply=gx(r.apply,n)}}const dD=[new Dl("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Dl("selection",{init(t,e){return t.selection||Re.atStart(e.doc)},apply(t){return t.selection}}),new Dl("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,r,n){return n.selection.$cursor?t.storedMarks:null}}),new Dl("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Ip{constructor(e,r){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=dD.slice(),r&&r.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new Dl(n.key,n.spec.state,n))})}}class ba{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,r=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=r){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let r=[e],n=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,u=s?s[o].state:this,c=l<r.length&&a.spec.appendTransaction.call(a,l?r.slice(l):r,u,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:n,n:r.length}:{state:this,n:0})}r.push(c),n=n.applyInner(c),i=!0}s&&(s[o]={state:n,n:r.length})}}if(!i)return{state:n,transactions:r}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let r=new ba(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let i=n[s];r[i.name]=i.apply(e,this[i.name],this,r)}return r}get tr(){return new cD(this)}static create(e){let r=new Ip(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new ba(r);for(let s=0;s<r.fields.length;s++)n[r.fields[s].name]=r.fields[s].init(e,n);return n}reconfigure(e){let r=new Ip(this.schema,e.plugins),n=r.fields,s=new ba(r);for(let i=0;i<n.length;i++){let o=n[i].name;s[o]=this.hasOwnProperty(o)?this[o]:n[i].init(e,s)}return s}toJSON(e){let r={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(r.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],i=s.spec.state;i&&i.toJSON&&(r[n]=i.toJSON.call(s,this[s.key]))}return r}static fromJSON(e,r,n){if(!r)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Ip(e.schema,e.plugins),i=new ba(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Pn.fromJSON(e.schema,r.doc);else if(o.name=="selection")i.selection=Re.fromJSON(i.doc,r.selection);else if(o.name=="storedMarks")r.storedMarks&&(i.storedMarks=r.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let a in n){let l=n[a],u=l.spec.state;if(l.key==o.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(r,a)){i[o.name]=u.fromJSON.call(l,e,r[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function B7(t,e,r){for(let n in t){let s=t[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=B7(s,e,{})),r[n]=s}return r}class vt{constructor(e){this.spec=e,this.props={},e.props&&B7(e.props,this,this.props),this.key=e.key?e.key.key:F7("plugin")}getState(e){return e[this.key]}}const zp=Object.create(null);function F7(t){return t in zp?t+"$"+ ++zp[t]:(zp[t]=0,t+"$")}class Bt{constructor(e="key"){this.key=F7(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Dv=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function H7(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("backward",t):r.parentOffset>0)?null:r}const U7=(t,e,r)=>{let n=H7(t,r);if(!n)return!1;let s=Iv(n);if(!s){let o=n.blockRange(),a=o&&al(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(Q7(t,s,e,-1))return!0;if(n.parent.content.size==0&&(Ua(i,"end")||me.isSelectable(i)))for(let o=n.depth;;o--){let a=df(t.doc,n.before(o),n.after(o),re.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=t.tr.step(a);l.setSelection(Ua(i,"end")?Re.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):me.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||n.node(o-1).childCount>1)break}return i.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},hD=(t,e,r)=>{let n=H7(t,r);if(!n)return!1;let s=Iv(n);return s?V7(t,s,e):!1},fD=(t,e,r)=>{let n=q7(t,r);if(!n)return!1;let s=zv(n);return s?V7(t,s,e):!1};function V7(t,e,r){let n=e.nodeBefore,s=n,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let c=a.firstChild;if(!c)return!1;a=c}let u=df(t.doc,i,l,re.empty);if(!u||u.from!=i||u instanceof Vt&&u.slice.size>=l-i)return!1;if(r){let c=t.tr.step(u);c.setSelection(Te.create(c.doc,i)),r(c.scrollIntoView())}return!0}function Ua(t,e,r=!1){for(let n=t;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(r&&n.childCount!=1)return!1}return!1}const W7=(t,e,r)=>{let{$head:n,empty:s}=t.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("backward",t):n.parentOffset>0)return!1;i=Iv(n)}let o=i&&i.nodeBefore;return!o||!me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function Iv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function q7(t,e){let{$cursor:r}=t.selection;return!r||(e?!e.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)?null:r}const K7=(t,e,r)=>{let n=q7(t,r);if(!n)return!1;let s=zv(n);if(!s)return!1;let i=s.nodeAfter;if(Q7(t,s,e,1))return!0;if(n.parent.content.size==0&&(Ua(i,"start")||me.isSelectable(i))){let o=df(t.doc,n.before(),n.after(),re.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Ua(i,"start")?Re.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):me.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==n.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},G7=(t,e,r)=>{let{$head:n,empty:s}=t.selection,i=n;if(!s)return!1;if(n.parent.isTextblock){if(r?!r.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)return!1;i=zv(n)}let o=i&&i.nodeAfter;return!o||!me.isSelectable(o)?!1:(e&&e(t.tr.setSelection(me.create(t.doc,i.pos)).scrollIntoView()),!0)};function zv(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let r=t.node(e);if(t.index(e)+1<r.childCount)return t.doc.resolve(t.after(e+1));if(r.type.spec.isolating)break}return null}const pD=(t,e)=>{let r=t.selection,n=r instanceof me,s;if(n){if(r.node.isTextblock||!Wi(t.doc,r.from))return!1;s=r.from}else if(s=cf(t.doc,r.from,-1),s==null)return!1;if(e){let i=t.tr.join(s);n&&i.setSelection(me.create(i.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},mD=(t,e)=>{let r=t.selection,n;if(r instanceof me){if(r.node.isTextblock||!Wi(t.doc,r.to))return!1;n=r.to}else if(n=cf(t.doc,r.to,1),n==null)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},gD=(t,e)=>{let{$from:r,$to:n}=t.selection,s=r.blockRange(n),i=s&&al(s);return i==null?!1:(e&&e(t.tr.lift(s,i).scrollIntoView()),!0)},J7=(t,e)=>{let{$head:r,$anchor:n}=t.selection;return!r.parent.type.spec.code||!r.sameParent(n)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Lv(t){for(let e=0;e<t.edgeCount;e++){let{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}const vD=(t,e)=>{let{$head:r,$anchor:n}=t.selection;if(!r.parent.type.spec.code||!r.sameParent(n))return!1;let s=r.node(-1),i=r.indexAfter(-1),o=Lv(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=r.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(Re.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Y7=(t,e)=>{let r=t.selection,{$from:n,$to:s}=r;if(r instanceof Xr||n.parent.inlineContent||s.parent.inlineContent)return!1;let i=Lv(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,a=t.tr.insert(o,i.createAndFill());a.setSelection(Te.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},X7=(t,e)=>{let{$cursor:r}=t.selection;if(!r||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){let i=r.before();if(Ms(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let n=r.blockRange(),s=n&&al(n);return s==null?!1:(e&&e(t.tr.lift(n,s).scrollIntoView()),!0)};function yD(t){return(e,r)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof me&&e.selection.node.isBlock)return!n.parentOffset||!Ms(e.doc,n.pos)?!1:(r&&r(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let i=[],o,a,l=!1,u=!1;for(let p=n.depth;;p--)if(n.node(p).isBlock){l=n.end(p)==n.pos+(n.depth-p),u=n.start(p)==n.pos-(n.depth-p),a=Lv(n.node(p-1).contentMatchAt(n.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let c=e.tr;(e.selection instanceof Te||e.selection instanceof Xr)&&c.deleteSelection();let d=c.mapping.map(n.pos),h=Ms(c.doc,d,i.length,i);if(h||(i[0]=a?{type:a}:null,h=Ms(c.doc,d,i.length,i)),!h)return!1;if(c.split(d,i.length,i),!l&&u&&n.node(o).type!=a){let p=c.mapping.map(n.before(o)),m=c.doc.resolve(p);a&&n.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&c.setNodeMarkup(c.mapping.map(n.before(o)),a)}return r&&r(c.scrollIntoView()),!0}}const xD=yD(),bD=(t,e)=>{let{$from:r,to:n}=t.selection,s,i=r.sharedDepth(n);return i==0?!1:(s=r.before(i),e&&e(t.tr.setSelection(me.create(t.doc,s))),!0)};function wD(t,e,r){let n=e.nodeBefore,s=e.nodeAfter,i=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(i-1,i)?(r&&r(t.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||Wi(t.doc,e.pos))?!1:(r&&r(t.tr.join(e.pos).scrollIntoView()),!0)}function Q7(t,e,r,n){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&wD(t,e,r))return!0;let u=!l&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(r){let p=e.pos+i.nodeSize,m=K.empty;for(let v=o.length-1;v>=0;v--)m=K.from(o[v].create(null,m));m=K.from(s.copy(m));let y=t.tr.step(new qt(e.pos-1,p,e.pos,p,new re(m,1,0),o.length,!0)),x=y.doc.resolve(p+2*o.length);x.nodeAfter&&x.nodeAfter.type==s.type&&Wi(y.doc,x.pos)&&y.join(x.pos),r(y.scrollIntoView())}return!0}let c=i.type.spec.isolating||n>0&&l?null:Re.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),h=d&&al(d);if(h!=null&&h>=e.depth)return r&&r(t.tr.lift(d,h).scrollIntoView()),!0;if(u&&Ua(i,"start",!0)&&Ua(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let y=i,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(p.canReplace(p.childCount,p.childCount,y.content)){if(r){let v=K.empty;for(let k=m.length-1;k>=0;k--)v=K.from(m[k].copy(v));let w=t.tr.step(new qt(e.pos-m.length,e.pos+i.nodeSize,e.pos+x,e.pos+i.nodeSize-x,new re(v,m.length,0),0,!0));r(w.scrollIntoView())}return!0}}return!1}function Z7(t){return function(e,r){let n=e.selection,s=t<0?n.$from:n.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(r&&r(e.tr.setSelection(Te.create(e.doc,t<0?s.start(i):s.end(i)))),!0):!1}}const kD=Z7(-1),SD=Z7(1);function TD(t,e=null){return function(r,n){let{$from:s,$to:i}=r.selection,o=s.blockRange(i),a=o&&_v(o,t,e);return a?(n&&n(r.tr.wrap(o,a).scrollIntoView()),!0):!1}}function vx(t,e=null){return function(r,n){let s=!1;for(let i=0;i<r.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=r.selection.ranges[i];r.doc.nodesBetween(o,a,(l,u)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)s=!0;else{let c=r.doc.resolve(u),d=c.index();s=c.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(n){let i=r.tr;for(let o=0;o<r.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=r.selection.ranges[o];i.setBlockType(a,l,t,e)}n(i.scrollIntoView())}return!0}}function Pv(...t){return function(e,r,n){for(let s=0;s<t.length;s++)if(t[s](e,r,n))return!0;return!1}}Pv(Dv,U7,W7);Pv(Dv,K7,G7);Pv(J7,Y7,X7,xD);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function CD(t,e=null){return function(r,n){let{$from:s,$to:i}=r.selection,o=s.blockRange(i);if(!o)return!1;let a=n?r.tr:null;return ED(a,o,t,e)?(n&&n(a.scrollIntoView()),!0):!1}}function ED(t,e,r,n=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(r)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new _0(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new _0(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=_v(i,r,n,e);return a?(t&&ND(t,e,a,s,r),!0):!1}function ND(t,e,r,n,s){let i=K.empty;for(let c=r.length-1;c>=0;c--)i=K.from(r[c].type.create(r[c].attrs,i));t.step(new qt(e.start-(n?2:0),e.end,e.start,e.end,new re(i,0,0),r.length,!0));let o=0;for(let c=0;c<r.length;c++)r[c].type==s&&(o=c+1);let a=r.length-o,l=e.start+r.length-(n?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,h=!0;c<d;c++,h=!1)!h&&Ms(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=u.child(c).nodeSize;return t}function MD(t){return function(e,r){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,o=>o.childCount>0&&o.firstChild.type==t);return i?r?n.node(i.depth-1).type==t?AD(e,r,t,i):jD(e,r,i):!0:!1}}function AD(t,e,r,n){let s=t.tr,i=n.end,o=n.$to.end(n.depth);i<o&&(s.step(new qt(i-1,o,i,o,new re(K.from(r.create(null,n.parent.copy())),1,0),1,!0)),n=new _0(s.doc.resolve(n.$from.pos),s.doc.resolve(o),n.depth));const a=al(n);if(a==null)return!1;s.lift(n,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return Wi(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function jD(t,e,r){let n=t.tr,s=r.parent;for(let p=r.end,m=r.endIndex-1,y=r.startIndex;m>y;m--)p-=s.child(m).nodeSize,n.delete(p-1,p+1);let i=n.doc.resolve(r.start),o=i.nodeAfter;if(n.mapping.map(r.end)!=r.start+i.nodeAfter.nodeSize)return!1;let a=r.startIndex==0,l=r.endIndex==s.childCount,u=i.node(-1),c=i.index(-1);if(!u.canReplace(c+(a?0:1),c+1,o.content.append(l?K.empty:K.from(s))))return!1;let d=i.pos,h=d+o.nodeSize;return n.step(new qt(d-(a?1:0),h+(l?1:0),d+1,h-1,new re((a?K.empty:K.from(s.copy(K.empty))).append(l?K.empty:K.from(s.copy(K.empty))),a?0:1,l?0:1),a?0:1)),e(n.scrollIntoView()),!0}function RD(t){return function(e,r){let{$from:n,$to:s}=e.selection,i=n.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=t)return!1;if(r){let u=l.lastChild&&l.lastChild.type==a.type,c=K.from(u?t.create():null),d=new re(K.from(t.create(null,K.from(a.type.create(null,c)))),u?3:1,0),h=i.start,p=i.end;r(e.tr.step(new qt(h-(u?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}const tr=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Va=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let M1=null;const xs=function(t,e,r){let n=M1||(M1=document.createRange());return n.setEnd(t,r??t.nodeValue.length),n.setStart(t,e||0),n},_D=function(){M1=null},Io=function(t,e,r,n){return r&&(yx(t,e,r,n,-1)||yx(t,e,r,n,1))},OD=/^(img|br|input|textarea|hr)$/i;function yx(t,e,r,n,s){for(var i;;){if(t==r&&e==n)return!0;if(e==(s<0?0:dn(t))){let o=t.parentNode;if(!o||o.nodeType!=1||mc(t)||OD.test(t.nodeName)||t.contentEditable=="false")return!1;e=tr(t)+(s<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(s<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((i=o.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=s;else return!1;else t=o,e=s<0?dn(t):0}else return!1}}function dn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function DD(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=dn(t)}else if(t.parentNode&&!mc(t))e=tr(t),t=t.parentNode;else return null}}function ID(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!mc(t))e=tr(t)+1,t=t.parentNode;else return null}}function zD(t,e,r){for(let n=e==0,s=e==dn(t);n||s;){if(t==r)return!0;let i=tr(t);if(t=t.parentNode,!t)return!1;n=n&&i==0,s=s&&i==dn(t)}}function mc(t){let e;for(let r=t;r&&!(e=r.pmViewDesc);r=r.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ff=function(t){return t.focusNode&&Io(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ao(t,e){let r=document.createEvent("Event");return r.initEvent("keydown",!0,!0),r.keyCode=t,r.key=r.code=e,r}function LD(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function PD(t,e,r){if(t.caretPositionFromPoint)try{let n=t.caretPositionFromPoint(e,r);if(n)return{node:n.offsetNode,offset:Math.min(dn(n.offsetNode),n.offset)}}catch{}if(t.caretRangeFromPoint){let n=t.caretRangeFromPoint(e,r);if(n)return{node:n.startContainer,offset:Math.min(dn(n.startContainer),n.startOffset)}}}const ss=typeof navigator<"u"?navigator:null,xx=typeof document<"u"?document:null,qi=ss&&ss.userAgent||"",A1=/Edge\/(\d+)/.exec(qi),e8=/MSIE \d/.exec(qi),j1=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qi),Lr=!!(e8||j1||A1),Mi=e8?document.documentMode:j1?+j1[1]:A1?+A1[1]:0,mn=!Lr&&/gecko\/(\d+)/i.test(qi);mn&&+(/Firefox\/(\d+)/.exec(qi)||[0,0])[1];const R1=!Lr&&/Chrome\/(\d+)/.exec(qi),nr=!!R1,t8=R1?+R1[1]:0,fr=!Lr&&!!ss&&/Apple Computer/.test(ss.vendor),Wa=fr&&(/Mobile\/\w+/.test(qi)||!!ss&&ss.maxTouchPoints>2),ln=Wa||(ss?/Mac/.test(ss.platform):!1),r8=ss?/Win/.test(ss.platform):!1,Ss=/Android \d/.test(qi),gc=!!xx&&"webkitFontSmoothing"in xx.documentElement.style,$D=gc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function BD(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function fs(t,e){return typeof t=="number"?t:t[e]}function FD(t){let e=t.getBoundingClientRect(),r=e.width/t.offsetWidth||1,n=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*r,top:e.top,bottom:e.top+t.clientHeight*n}}function bx(t,e,r){let n=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument;for(let o=r||t.dom;o;){if(o.nodeType!=1){o=Va(o);continue}let a=o,l=a==i.body,u=l?BD(i):FD(a),c=0,d=0;if(e.top<u.top+fs(n,"top")?d=-(u.top-e.top+fs(s,"top")):e.bottom>u.bottom-fs(n,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+fs(s,"top")-u.top:e.bottom-u.bottom+fs(s,"bottom")),e.left<u.left+fs(n,"left")?c=-(u.left-e.left+fs(s,"left")):e.right>u.right-fs(n,"right")&&(c=e.right-u.right+fs(s,"right")),c||d)if(l)i.defaultView.scrollBy(c,d);else{let p=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),c&&(a.scrollLeft+=c);let y=a.scrollLeft-p,x=a.scrollTop-m;e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:Va(o)}}function HD(t){let e=t.dom.getBoundingClientRect(),r=Math.max(0,e.top),n,s;for(let i=(e.left+e.right)/2,o=r+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(i,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=r-20){n=a,s=l.top;break}}return{refDOM:n,refTop:s,stack:n8(t.dom)}}function n8(t){let e=[],r=t.ownerDocument;for(let n=t;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),t!=r);n=Va(n));return e}function UD({refDOM:t,refTop:e,stack:r}){let n=t?t.getBoundingClientRect().top:0;s8(r,n==0?0:n-e)}function s8(t,e){for(let r=0;r<t.length;r++){let{dom:n,top:s,left:i}=t[r];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=i&&(n.scrollLeft=i)}}let Zo=null;function VD(t){if(t.setActive)return t.setActive();if(Zo)return t.focus(Zo);let e=n8(t);t.focus(Zo==null?{get preventScroll(){return Zo={preventScroll:!0},!0}}:void 0),Zo||(Zo=!1,s8(e,0))}function i8(t,e){let r,n=2e8,s,i=0,o=e.top,a=e.top,l,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let h;if(c.nodeType==1)h=c.getClientRects();else if(c.nodeType==3)h=xs(c).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<n){r=c,n=y,s=y&&r.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,c.nodeType==1&&y&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=c,u={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!r&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!r&&l&&(r=l,s=u,n=0),r&&r.nodeType==3?WD(r,s):!r||n&&r.nodeType==1?{node:t,offset:i}:i8(r,s)}function WD(t,e){let r=t.nodeValue.length,n=document.createRange(),s;for(let i=0;i<r;i++){n.setEnd(t,i+1),n.setStart(t,i);let o=Qs(n,1);if(o.top!=o.bottom&&$v(e,o)){s={node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)};break}}return n.detach(),s||{node:t,offset:0}}function $v(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function qD(t,e){let r=t.parentNode;return r&&/^li$/i.test(r.nodeName)&&e.left<t.getBoundingClientRect().left?r:t}function KD(t,e,r){let{node:n,offset:s}=i8(e,r),i=-1;if(n.nodeType==1&&!n.firstChild){let o=n.getBoundingClientRect();i=o.left!=o.right&&r.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(n,s,i)}function GD(t,e,r,n){let s=-1;for(let i=e,o=!1;i!=t.dom;){let a=t.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(a.dom.nodeName)&&(!o&&l.left>n.left||l.top>n.top?s=a.posBefore:(!o&&l.right<n.left||l.bottom<n.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?n.top<(l.top+l.bottom)/2:n.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,r,-1)}function o8(t,e,r){let n=t.childNodes.length;if(n&&r.top<r.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-r.top)/(r.bottom-r.top))-2)),i=s;;){let o=t.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let u=a[l];if($v(e,u))return o8(o,e,u)}}if((i=(i+1)%n)==s)break}return t}function JD(t,e){let r=t.dom.ownerDocument,n,s=0,i=PD(r,e.left,e.top);i&&({node:n,offset:s}=i);let o=(t.root.elementFromPoint?t.root:r).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let u=t.dom.getBoundingClientRect();if(!$v(e,u)||(o=o8(t.dom,e,u),!o))return null}if(fr)for(let u=o;n&&u;u=Va(u))u.draggable&&(n=void 0);if(o=qD(o,e),n){if(mn&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let c=n.childNodes[s],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let u;gc&&s&&n.nodeType==1&&(u=n.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,n==t.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(a=GD(t,n,s,e))}a==null&&(a=KD(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function wx(t){return t.top<t.bottom||t.left<t.right}function Qs(t,e){let r=t.getClientRects();if(r.length){let n=r[e<0?0:r.length-1];if(wx(n))return n}return Array.prototype.find.call(r,wx)||t.getBoundingClientRect()}const YD=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function a8(t,e,r){let{node:n,offset:s,atom:i}=t.docView.domFromPos(e,r<0?-1:1),o=gc||mn;if(n.nodeType==3)if(o&&(YD.test(n.nodeValue)||(r<0?!s:s==n.nodeValue.length))){let l=Qs(xs(n,s,s),r);if(mn&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let u=Qs(xs(n,s-1,s-1),-1);if(u.top==l.top){let c=Qs(xs(n,s,s+1),-1);if(c.top!=l.top)return Sl(c,c.left<u.left)}}return l}else{let l=s,u=s,c=r<0?1:-1;return r<0&&!s?(u++,c=-1):r>=0&&s==n.nodeValue.length?(l--,c=1):r<0?l--:u++,Sl(Qs(xs(n,l,u),c),c<0)}if(!t.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(r<0||s==dn(n))){let l=n.childNodes[s-1];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!1)}if(i==null&&s<dn(n)){let l=n.childNodes[s];if(l.nodeType==1)return Lp(l.getBoundingClientRect(),!0)}return Lp(n.getBoundingClientRect(),r>=0)}if(i==null&&s&&(r<0||s==dn(n))){let l=n.childNodes[s-1],u=l.nodeType==3?xs(l,dn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(u)return Sl(Qs(u,1),!1)}if(i==null&&s<dn(n)){let l=n.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let u=l?l.nodeType==3?xs(l,0,o?0:1):l.nodeType==1?l:null:null;if(u)return Sl(Qs(u,-1),!0)}return Sl(Qs(n.nodeType==3?xs(n):n,-r),r>=0)}function Sl(t,e){if(t.width==0)return t;let r=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:r,right:r}}function Lp(t,e){if(t.height==0)return t;let r=e?t.top:t.bottom;return{top:r,bottom:r,left:t.left,right:t.right}}function l8(t,e,r){let n=t.state,s=t.root.activeElement;n!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return r()}finally{n!=e&&t.updateState(n),s!=t.dom&&s&&s.focus()}}function XD(t,e,r){let n=e.selection,s=r=="up"?n.$from:n.$to;return l8(t,e,()=>{let{node:i}=t.docView.domFromPos(s.pos,r=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=a8(t,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=xs(a,0,a.nodeValue.length).getClientRects();else continue;for(let u=0;u<l.length;u++){let c=l[u];if(c.bottom>c.top+1&&(r=="up"?o.top-c.top>(c.bottom-o.top)*2:c.bottom-o.bottom>(o.bottom-c.top)*2))return!1}}return!0})}const QD=/[\u0590-\u08ac]/;function ZD(t,e,r){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,i=!s,o=s==n.parent.content.size,a=t.domSelection();return a?!QD.test(n.parent.textContent)||!a.modify?r=="left"||r=="backward"?i:o:l8(t,e,()=>{let{focusNode:l,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",r,"character");let p=n.depth?t.docView.domAfterPos(n.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),x=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&u==y;try{a.collapse(c,d),l&&(l!=c||u!=d)&&a.extend&&a.extend(l,u)}catch{}return h!=null&&(a.caretBidiLevel=h),x}):n.pos==n.start()||n.pos==n.end()}let kx=null,Sx=null,Tx=!1;function eI(t,e,r){return kx==e&&Sx==r?Tx:(kx=e,Sx=r,Tx=r=="up"||r=="down"?XD(t,e,r):ZD(t,e,r))}const gn=0,Cx=1,mo=2,is=3;class vc{constructor(e,r,n,s){this.parent=e,this.children=r,this.dom=n,this.contentDOM=s,this.dirty=gn,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,r,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let r=0;r<this.children.length;r++)e+=this.children[r].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let r=0,n=this.posAtStart;;r++){let s=this.children[r];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,r,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let i,o;if(e==this.contentDOM)i=e.childNodes[r-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[r];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=r>tr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(r==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&r==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,r=!1){for(let n=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!r||i.node))if(n&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))n=!1;else return i}}getDesc(e){let r=e.pmViewDesc;for(let n=r;n;n=n.parent)if(n==this)return r}posFromDOM(e,r,n){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,r,n)}return-1}descAt(e){for(let r=0,n=0;r<this.children.length;r++){let s=this.children[r],i=n+s.size;if(n==e&&i!=n){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-n-s.border);n=i}}domFromPos(e,r){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let i=0;n<this.children.length;n++){let o=this.children[n],a=i+o.size;if(a>e||o instanceof c8){s=e-i;break}i=a}if(s)return this.children[n].domFromPos(s-this.children[n].border,r);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof u8&&i.side>=0;n--);if(r<=0){let i,o=!0;for(;i=n?this.children[n-1]:null,!(!i||i.dom.parentNode==this.contentDOM);n--,o=!1);return i&&r&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,r):{node:this.contentDOM,offset:i?tr(i.dom)+1:0}}else{let i,o=!0;for(;i=n<this.children.length?this.children[n]:null,!(!i||i.dom.parentNode==this.contentDOM);n++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,r):{node:this.contentDOM,offset:i?tr(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,r,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:r,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=n,a=0;;a++){let l=this.children[a],u=o+l.size;if(s==-1&&e<=u){let c=o+l.border;if(e>=c&&r<=u-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,r,c);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=tr(h.dom)+1;break}e-=h.size}s==-1&&(s=0)}if(s>-1&&(u>r||a==this.children.length-1)){r=u;for(let c=a+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=tr(d.dom);break}r+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=u}return{node:this.contentDOM,from:e,to:r,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let r=this.children[e<0?0:this.children.length-1];return r.size==0||r.emptyChildAt(e)}domAfterPos(e){let{node:r,offset:n}=this.domFromPos(e,0);if(r.nodeType!=1||n==r.childNodes.length)throw new RangeError("No node after pos "+e);return r.childNodes[n]}setSelection(e,r,n,s=!1){let i=Math.min(e,r),o=Math.max(e,r);for(let p=0,m=0;p<this.children.length;p++){let y=this.children[p],x=m+y.size;if(i>m&&o<x)return y.setSelection(e-m-y.border,r-m-y.border,n,s);m=x}let a=this.domFromPos(e,e?-1:1),l=r==e?a:this.domFromPos(r,r?-1:1),u=n.root.getSelection(),c=n.domSelectionRange(),d=!1;if((mn||fr)&&e==r){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let y=p,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(a=l={node:x.parentNode,offset:tr(x)+1});break}let v=y.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let y=p.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(mn&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&fr)&&Io(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Io(l.node,l.offset,c.focusNode,c.focusOffset))return;let h=!1;if((u.extend||e==r)&&!(d&&mn)){u.collapse(a.node,a.offset);try{e!=r&&u.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>r){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,r){for(let n=0,s=0;s<this.children.length;s++){let i=this.children[s],o=n+i.size;if(n==o?e<=o&&r>=n:e<o&&r>n){let a=n+i.border,l=o-i.border;if(e>=a&&r<=l){this.dirty=e==n||r==o?mo:Cx,e==a&&r==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=is:i.markDirty(e-a,r-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?mo:is}n=o}this.dirty=mo}markParentsDirty(){let e=1;for(let r=this.parent;r;r=r.parent,e++){let n=e==1?mo:Cx;r.dirty<n&&(r.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class u8 extends vc{constructor(e,r,n,s){let i,o=r.type.toDOM;if(typeof o=="function"&&(o=o(n,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!r.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=r,this.widget=r,i=this}matchesWidget(e){return this.dirty==gn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let r=this.widget.spec.stopEvent;return r?r(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class tI extends vc{constructor(e,r,n,s){super(e,[],r,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,r){return e!=this.textDOM?this.posAtStart+(r?this.size:0):this.posAtStart+r}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class zo extends vc{constructor(e,r,n,s,i){super(e,[],n,s),this.mark=r,this.spec=i}static create(e,r,n,s){let i=s.nodeViews[r.type.name],o=i&&i(r,s,n);return(!o||!o.dom)&&(o=Fo.renderSpec(document,r.type.spec.toDOM(r,n),null,r.attrs)),new zo(e,r,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&is||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=is&&this.mark.eq(e)}markDirty(e,r){if(super.markDirty(e,r),this.dirty!=gn){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=gn}}slice(e,r,n){let s=zo.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;r<o&&(i=O1(i,r,o,n)),e>0&&(i=O1(i,0,e,n));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Ai extends vc{constructor(e,r,n,s,i,o,a,l,u){super(e,[],i,o),this.node=r,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=a}static create(e,r,n,s,i,o){let a=i.nodeViews[r.type.name],l,u=a&&a(r,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},n,s),c=u&&u.dom,d=u&&u.contentDOM;if(r.isText){if(!c)c=document.createTextNode(r.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Fo.renderSpec(document,r.type.spec.toDOM(r),null,r.attrs));!d&&!r.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),r.type.spec.draggable&&(c.draggable=!0));let h=c;return c=f8(c,n,r),u?l=new rI(e,r,n,s,c,d||null,h,u,i,o+1):r.isText?new pf(e,r,n,s,c,h,i):new Ai(e,r,n,s,c,d||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let r=this.children.length-1;r>=0;r--){let n=this.children[r];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>K.empty)}return e}matchesNode(e,r,n){return this.dirty==gn&&e.eq(this.node)&&D0(r,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,r){let n=this.node.inlineContent,s=r,i=e.composing?this.localCompositionInfo(e,r):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new sI(this,o&&o.node,e);aI(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?l.syncToMarks(u.spec.marks,n,e,c):u.type.side>=0&&!d&&l.syncToMarks(c==this.node.childCount?Xe.none:this.node.child(c).marks,n,e,c),l.placeWidget(u,e,s)},(u,c,d,h)=>{l.syncToMarks(u.marks,n,e,h);let p;l.findNodeMatch(u,c,d,h)||a&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(u,c,d,p,e)||l.updateNextNode(u,c,d,e,h,s)||l.addNode(u,c,d,e,s),s+=u.nodeSize}),l.syncToMarks([],n,e,0),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==mo)&&(o&&this.protectLocalComposition(e,o),d8(this.contentDOM,this.children,e),Wa&&lI(this.dom))}localCompositionInfo(e,r){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof Te)||n<r||s>r+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=uI(this.node.content,o,n-r,s-r);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:r,pos:n,text:s}){if(this.getDesc(r))return;let i=r;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new tI(this,i,r,s);e.input.compositionNodes.push(o),this.children=O1(this.children,n,n+s.length,e,o)}update(e,r,n,s){return this.dirty==is||!e.sameMarkup(this.node)?!1:(this.updateInner(e,r,n,s),!0)}updateInner(e,r,n,s){this.updateOuterDeco(r),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=gn}updateOuterDeco(e){if(D0(e,this.outerDeco))return;let r=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=h8(this.dom,this.nodeDOM,_1(this.outerDeco,this.node,r),_1(e,this.node,r)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Ex(t,e,r,n,s){f8(n,e,t);let i=new Ai(void 0,t,e,r,n,n,n,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class pf extends Ai{constructor(e,r,n,s,i,o,a){super(e,r,n,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,r,n,s){return this.dirty==is||this.dirty!=gn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(r),(this.dirty!=gn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=gn,!0)}inParent(){let e=this.parent.contentDOM;for(let r=this.nodeDOM;r;r=r.parentNode)if(r==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,r,n){return e==this.nodeDOM?this.posAtStart+Math.min(r,this.node.text.length):super.localPosFromDOM(e,r,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,r,n){let s=this.node.cut(e,r),i=document.createTextNode(s.text);return new pf(this.parent,s,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,r){super.markDirty(e,r),this.dom!=this.nodeDOM&&(e==0||r==this.nodeDOM.nodeValue.length)&&(this.dirty=is)}get domAtom(){return!1}isText(e){return this.node.text==e}}class c8 extends vc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==gn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class rI extends Ai{constructor(e,r,n,s,i,o,a,l,u,c){super(e,r,n,s,i,o,a,u,c),this.spec=l}update(e,r,n,s){if(this.dirty==is)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,r,n);return i&&this.updateInner(e,r,n,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,r,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,r,n,s){this.spec.setSelection?this.spec.setSelection(e,r,n.root):super.setSelection(e,r,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function d8(t,e,r){let n=t.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==t){for(;a!=n;)n=Nx(n),s=!0;n=n.nextSibling}else s=!0,t.insertBefore(a,n);if(o instanceof zo){let l=n?n.previousSibling:t.lastChild;d8(o.contentDOM,o.children,r),n=l?l.nextSibling:t.firstChild}}for(;n;)n=Nx(n),s=!0;s&&r.trackWrites==t&&(r.trackWrites=null)}const tu=function(t){t&&(this.nodeName=t)};tu.prototype=Object.create(null);const go=[new tu];function _1(t,e,r){if(t.length==0)return go;let n=r?go[0]:new tu,s=[n];for(let i=0;i<t.length;i++){let o=t[i].type.attrs;if(o){o.nodeName&&s.push(n=new tu(o.nodeName));for(let a in o){let l=o[a];l!=null&&(r&&s.length==1&&s.push(n=new tu(e.isInline?"span":"div")),a=="class"?n.class=(n.class?n.class+" ":"")+l:a=="style"?n.style=(n.style?n.style+";":"")+l:a!="nodeName"&&(n[a]=l))}}}return s}function h8(t,e,r,n){if(r==go&&n==go)return e;let s=e;for(let i=0;i<n.length;i++){let o=n[i],a=r[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=t&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=go[0]),s=l}nI(s,a||go[0],o)}return s}function nI(t,e,r){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in r)&&t.removeAttribute(n);for(let n in r)n!="class"&&n!="style"&&n!="nodeName"&&r[n]!=e[n]&&t.setAttribute(n,r[n]);if(e.class!=r.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=r.class?r.class.split(" ").filter(Boolean):[];for(let i=0;i<n.length;i++)s.indexOf(n[i])==-1&&t.classList.remove(n[i]);for(let i=0;i<s.length;i++)n.indexOf(s[i])==-1&&t.classList.add(s[i]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=r.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)t.style.removeProperty(s[1])}r.style&&(t.style.cssText+=r.style)}}function f8(t,e,r){return h8(t,t,go,_1(e,r,t.nodeType!=1))}function D0(t,e){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].type.eq(e[r].type))return!1;return!0}function Nx(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class sI{constructor(e,r,n){this.lock=r,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=iI(e.node.content,e)}destroyBetween(e,r){if(e!=r){for(let n=e;n<r;n++)this.top.children[n].destroy();this.top.children.splice(e,r-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,r,n,s){let i=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=gn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1,u=this.top.children.length;s<this.preMatch.index&&(u=Math.min(this.index+3,u));for(let c=this.index;c<u;c++){let d=this.top.children[c];if(d.matchesMark(e[o])&&!this.isLocked(d.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=zo.create(this.top,e[o],r,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}}findNodeMatch(e,r,n,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,r,n))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let u=this.top.children[a];if(u.matchesNode(e,r,n)&&!this.preMatch.matched.has(u)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,r,n,s,i){let o=this.top.children[s];return o.dirty==is&&o.dom==o.contentDOM&&(o.dirty=mo),o.update(e,r,n,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let r=e.parentNode;if(!r)return-1;if(r==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=r}}updateNextNode(e,r,n,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Ai){let u=this.preMatch.matched.get(l);if(u!=null&&u!=i)return!1;let c=l.dom,d,h=this.isLocked(c)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=is&&D0(r,l.outerDeco));if(!h&&l.update(e,r,n,s))return this.destroyBetween(this.index,a),l.dom!=c&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,r,n,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=mo,d.updateChildren(s,o+1),d.dirty=gn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,r,n,s,i,o){if(e.dirty||r.isAtom||!e.children.length||!e.node.content.eq(r.content)||!D0(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Ai.create(this.top,r,n,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,r,n,s,i){let o=Ai.create(this.top,e,r,n,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,r,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new u8(this.top,e,r,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],r=this.top;for(;e instanceof zo;)r=e,e=r.children[r.children.length-1];(!e||!(e instanceof pf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((fr||nr)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",r),this.addHackNode("BR",this.top))}addHackNode(e,r){if(r==this.top&&this.index<r.children.length&&r.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new c8(this.top,[],n,null);r!=this.top?r.children.push(s):r.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function iI(t,e){let r=e,n=r.children.length,s=t.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(n){let u=r.children[n-1];if(u instanceof zo)r=u,n=u.children.length;else{a=u,n--;break}}else{if(r==e)break e;n=r.parent.children.indexOf(r),r=r.parent}let l=a.node;if(l){if(l!=t.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function oI(t,e){return t.type.side-e.type.side}function aI(t,e,r,n){let s=e.locals(t),i=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);n(c,s,e.forChild(i,c),u),i+=c.nodeSize}return}let o=0,a=[],l=null;for(let u=0;;){let c,d;for(;o<s.length&&s[o].to==i;){let x=s[o++];x.widget&&(c?(d||(d=[c])).push(x):c=x)}if(c)if(d){d.sort(oI);for(let x=0;x<d.length;x++)r(d[x],u,!!l)}else r(c,u,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(u<t.childCount)p=u,h=t.child(u++);else break;for(let x=0;x<a.length;x++)a[x].to<=i&&a.splice(x--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+h.nodeSize;if(h.isText){let x=m;o<s.length&&s[o].from<x&&(x=s[o].from);for(let v=0;v<a.length;v++)a[v].to<x&&(x=a[v].to);x<m&&(l=h.cut(x-i),h=h.cut(0,x-i),m=x,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let y=h.isInline&&!h.isLeaf?a.filter(x=>!x.inline):a.slice();n(h,y,e.forChild(i,h),p),i=m}}function lI(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function uI(t,e,r,n){for(let s=0,i=0;s<t.childCount&&i<=n;){let o=t.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<t.childCount;){let u=t.child(s++);if(i+=u.nodeSize,!u.isText)break;l+=u.text}if(i>=r){if(i>=n&&l.slice(n-e.length-a,n-a)==e)return n-e.length;let u=a<n?l.lastIndexOf(e,n-a-1):-1;if(u>=0&&u+e.length+a>=r)return a+u;if(r==n&&l.length>=n+e.length-a&&l.slice(n-a,n-a+e.length)==e)return n}}return-1}function O1(t,e,r,n,s){let i=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],u=a,c=a+=l.size;u>=r||c<=e?i.push(l):(u<e&&i.push(l.slice(0,e-u,n)),s&&(i.push(s),s=void 0),c>r&&i.push(l.slice(r-u,l.size,n)))}return i}function Bv(t,e=null){let r=t.domSelectionRange(),n=t.state.doc;if(!r.focusNode)return null;let s=t.docView.nearestDesc(r.focusNode),i=s&&s.size==0,o=t.docView.posFromDOM(r.focusNode,r.focusOffset,1);if(o<0)return null;let a=n.resolve(o),l,u;if(ff(r)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&me.isSelectable(d)&&s.parent&&!(d.isInline&&zD(r.focusNode,r.focusOffset,s.dom))){let h=s.posBefore;u=new me(o==h?a:n.resolve(h))}}else{if(r instanceof t.dom.ownerDocument.defaultView.Selection&&r.rangeCount>1){let d=o,h=o;for(let p=0;p<r.rangeCount;p++){let m=r.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=h==t.state.selection.anchor?[h,d]:[d,h],a=n.resolve(o)}else l=t.docView.posFromDOM(r.anchorNode,r.anchorOffset,1);if(l<0)return null}let c=n.resolve(l);if(!u){let d=e=="pointer"||t.state.selection.head<a.pos&&!i?1:-1;u=Fv(t,c,a,d)}return u}function p8(t){return t.editable?t.hasFocus():g8(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function As(t,e=!1){let r=t.state.selection;if(m8(t,r),!!p8(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&nr){let n=t.domSelectionRange(),s=t.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Io(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)dI(t);else{let{anchor:n,head:s}=r,i,o;Mx&&!(r instanceof Te)&&(r.$from.parent.inlineContent||(i=Ax(t,r.from)),!r.empty&&!r.$from.parent.inlineContent&&(o=Ax(t,r.to))),t.docView.setSelection(n,s,t,e),Mx&&(i&&jx(i),o&&jx(o)),r.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&cI(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Mx=fr||nr&&t8<63;function Ax(t,e){let{node:r,offset:n}=t.docView.domFromPos(e,0),s=n<r.childNodes.length?r.childNodes[n]:null,i=n?r.childNodes[n-1]:null;if(fr&&s&&s.contentEditable=="false")return Pp(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Pp(s);if(i)return Pp(i)}}function Pp(t){return t.contentEditable="true",fr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function jx(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function cI(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let r=t.domSelectionRange(),n=r.anchorNode,s=r.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(r.anchorNode!=n||r.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!p8(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function dI(t){let e=t.domSelection();if(!e)return;let r=t.cursorWrapper.dom,n=r.nodeName=="IMG";n?e.collapse(r.parentNode,tr(r)+1):e.collapse(r,0),!n&&!t.state.selection.visible&&Lr&&Mi<=11&&(r.disabled=!0,r.disabled=!1)}function m8(t,e){if(e instanceof me){let r=t.docView.descAt(e.from);r!=t.lastSelectedViewDesc&&(Rx(t),r&&r.selectNode(),t.lastSelectedViewDesc=r)}else Rx(t)}function Rx(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Fv(t,e,r,n){return t.someProp("createSelectionBetween",s=>s(t,e,r))||Te.between(e,r,n)}function _x(t){return t.editable&&!t.hasFocus()?!1:g8(t)}function g8(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function hI(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),r=t.domSelectionRange();return Io(e.node,e.offset,r.anchorNode,r.anchorOffset)}function D1(t,e){let{$anchor:r,$head:n}=t.selection,s=e>0?r.max(n):r.min(n),i=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return i&&Re.findFrom(i,e)}function ni(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ox(t,e,r){let n=t.state.selection;if(n instanceof Te)if(r.indexOf("s")>-1){let{$head:s}=n,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=t.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return ni(t,new Te(n.$anchor,o))}else if(n.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=D1(t.state,e);return s&&s instanceof me?ni(t,s):!1}else if(!(ln&&r.indexOf("m")>-1)){let s=n.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?me.isSelectable(i)?ni(t,new me(e<0?t.state.doc.resolve(s.pos-i.nodeSize):s)):gc?ni(t,new Te(t.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(n instanceof me&&n.node.isInline)return ni(t,new Te(e>0?n.$to:n.$from));{let s=D1(t.state,e);return s?ni(t,s):!1}}}function I0(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ru(t,e){let r=t.pmViewDesc;return r&&r.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ea(t,e){return e<0?fI(t):pI(t)}function fI(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s,i,o=!1;for(mn&&r.nodeType==1&&n<I0(r)&&ru(r.childNodes[n],-1)&&(o=!0);;)if(n>0){if(r.nodeType!=1)break;{let a=r.childNodes[n-1];if(ru(a,-1))s=r,i=--n;else if(a.nodeType==3)r=a,n=r.nodeValue.length;else break}}else{if(v8(r))break;{let a=r.previousSibling;for(;a&&ru(a,-1);)s=r.parentNode,i=tr(a),a=a.previousSibling;if(a)r=a,n=I0(r);else{if(r=r.parentNode,r==t.dom)break;n=0}}}o?I1(t,r,n):s&&I1(t,s,i)}function pI(t){let e=t.domSelectionRange(),r=e.focusNode,n=e.focusOffset;if(!r)return;let s=I0(r),i,o;for(;;)if(n<s){if(r.nodeType!=1)break;let a=r.childNodes[n];if(ru(a,1))i=r,o=++n;else break}else{if(v8(r))break;{let a=r.nextSibling;for(;a&&ru(a,1);)i=a.parentNode,o=tr(a)+1,a=a.nextSibling;if(a)r=a,n=0,s=I0(r);else{if(r=r.parentNode,r==t.dom)break;n=s=0}}}i&&I1(t,i,o)}function v8(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function mI(t,e){for(;t&&e==t.childNodes.length&&!mc(t);)e=tr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let r=t.childNodes[e];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=0}}function gI(t,e){for(;t&&!e&&!mc(t);)e=tr(t),t=t.parentNode;for(;t&&e;){let r=t.childNodes[e-1];if(r.nodeType==3)return r;if(r.nodeType==1&&r.contentEditable=="false")break;t=r,e=t.childNodes.length}}function I1(t,e,r){if(e.nodeType!=3){let i,o;(o=mI(e,r))?(e=o,r=0):(i=gI(e,r))&&(e=i,r=i.nodeValue.length)}let n=t.domSelection();if(!n)return;if(ff(n)){let i=document.createRange();i.setEnd(e,r),i.setStart(e,r),n.removeAllRanges(),n.addRange(i)}else n.extend&&n.extend(e,r);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&As(t)},50)}function Dx(t,e){let r=t.state.doc.resolve(e);if(!(nr||r8)&&r.parent.inlineContent){let s=t.coordsAtPos(e);if(e>r.start()){let i=t.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<r.end()){let i=t.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Ix(t,e,r){let n=t.state.selection;if(n instanceof Te&&!n.empty||r.indexOf("s")>-1||ln&&r.indexOf("m")>-1)return!1;let{$from:s,$to:i}=n;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=D1(t.state,e);if(o&&o instanceof me)return ni(t,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=n instanceof Xr?Re.near(o,e):Re.findFrom(o,e);return a?ni(t,a):!1}return!1}function zx(t,e){if(!(t.state.selection instanceof Te))return!0;let{$head:r,$anchor:n,empty:s}=t.state.selection;if(!r.sameParent(n))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(i&&!i.isText){let o=t.state.tr;return e<0?o.delete(r.pos-i.nodeSize,r.pos):o.delete(r.pos,r.pos+i.nodeSize),t.dispatch(o),!0}return!1}function Lx(t,e,r){t.domObserver.stop(),e.contentEditable=r,t.domObserver.start()}function vI(t){if(!fr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(e&&e.nodeType==1&&r==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;Lx(t,n,"true"),setTimeout(()=>Lx(t,n,"false"),20)}return!1}function yI(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function xI(t,e){let r=e.keyCode,n=yI(e);if(r==8||ln&&r==72&&n=="c")return zx(t,-1)||ea(t,-1);if(r==46&&!e.shiftKey||ln&&r==68&&n=="c")return zx(t,1)||ea(t,1);if(r==13||r==27)return!0;if(r==37||ln&&r==66&&n=="c"){let s=r==37?Dx(t,t.state.selection.from)=="ltr"?-1:1:-1;return Ox(t,s,n)||ea(t,s)}else if(r==39||ln&&r==70&&n=="c"){let s=r==39?Dx(t,t.state.selection.from)=="ltr"?1:-1:1;return Ox(t,s,n)||ea(t,s)}else{if(r==38||ln&&r==80&&n=="c")return Ix(t,-1,n)||ea(t,-1);if(r==40||ln&&r==78&&n=="c")return vI(t)||Ix(t,1,n)||ea(t,1);if(n==(ln?"m":"c")&&(r==66||r==73||r==89||r==90))return!0}return!1}function Hv(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let r=[],{content:n,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,i--;let p=n.firstChild;r.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),n=p.content}let o=t.someProp("clipboardSerializer")||Fo.fromSchema(t.state.schema),a=S8(),l=a.createElement("div");l.appendChild(o.serializeFragment(n,{document:a}));let u=l.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=k8[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let m=a.createElement(c[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}u=l.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(r)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function y8(t,e,r,n,s){let i=s.parent.type.spec.code,o,a;if(!r&&!e)return null;let l=!!e&&(n||i||!r);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,i||n,t)}),i)return a=new re(K.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",h=>{a=h(a,t,!0)}),a;let d=t.someProp("clipboardTextParser",h=>h(e,s,n,t));if(d)a=d;else{let h=s.marks(),{schema:p}=t.state,m=Fo.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=o.appendChild(document.createElement("p"));y&&x.appendChild(m.serializeNode(p.text(y,h)))})}}else t.someProp("transformPastedHTML",d=>{r=d(r,t)}),o=SI(r),gc&&TI(o);let u=o&&o.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||Ni.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||c),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!bI.test(h.parentNode.nodeName)?{ignore:!0}:null}})),c)a=CI(Px(a,+c[1],+c[2]),c[4]);else if(a=re.maxOpen(wI(a.content,s),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=Px(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t,l)}),a}const bI=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function wI(t,e){if(t.childCount<2)return t;for(let r=e.depth;r>=0;r--){let s=e.node(r).contentMatchAt(e.index(r)),i,o=[];if(t.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),u;if(!l)return o=null;if(u=o.length&&i.length&&b8(l,i,a,o[o.length-1],0))o[o.length-1]=u;else{o.length&&(o[o.length-1]=w8(o[o.length-1],i.length));let c=x8(a,l);o.push(c),s=s.matchType(c.type),i=l}}),o)return K.from(o)}return t}function x8(t,e,r=0){for(let n=e.length-1;n>=r;n--)t=e[n].create(null,K.from(t));return t}function b8(t,e,r,n,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let i=b8(t,e,r,n.lastChild,s+1);if(i)return n.copy(n.content.replaceChild(n.childCount-1,i));if(n.contentMatchAt(n.childCount).matchType(s==t.length-1?r.type:t[s+1]))return n.copy(n.content.append(K.from(x8(r,t,s+1))))}}function w8(t,e){if(e==0)return t;let r=t.content.replaceChild(t.childCount-1,w8(t.lastChild,e-1)),n=t.contentMatchAt(t.childCount).fillBefore(K.empty,!0);return t.copy(r.append(n))}function z1(t,e,r,n,s,i){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(i=0),s<n-1&&(a=z1(a,e,r,n,s+1,i)),s>=r&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(K.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function Px(t,e,r){return e<t.openStart&&(t=new re(z1(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),r<t.openEnd&&(t=new re(z1(t.content,1,r,t.openEnd,0,0),t.openStart,r)),t}const k8={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let $x=null;function S8(){return $x||($x=document.implementation.createHTMLDocument("title"))}let $p=null;function kI(t){let e=window.trustedTypes;return e?($p||($p=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:r=>r})),$p.createHTML(t)):t}function SI(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let r=S8().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(t),s;if((s=n&&k8[n[1].toLowerCase()])&&(t=s.map(i=>"<"+i+">").join("")+t+s.map(i=>"</"+i+">").reverse().join("")),r.innerHTML=kI(t),s)for(let i=0;i<s.length;i++)r=r.querySelector(s[i])||r;return r}function TI(t){let e=t.querySelectorAll(nr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let r=0;r<e.length;r++){let n=e[r];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),n)}}function CI(t,e){if(!t.size)return t;let r=t.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return t}let{content:s,openStart:i,openEnd:o}=t;for(let a=n.length-2;a>=0;a-=2){let l=r.nodes[n[a]];if(!l||l.hasRequiredAttrs())break;s=K.from(l.create(n[a+1],s)),i++,o++}return new re(s,i,o)}const Sr={},Tr={},EI={touchstart:!0,touchmove:!0};class NI{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MI(t){for(let e in Sr){let r=Sr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=n=>{jI(t,n)&&!Uv(t,n)&&(t.editable||!(n.type in Tr))&&r(t,n)},EI[e]?{passive:!0}:void 0)}fr&&t.dom.addEventListener("input",()=>null),L1(t)}function yi(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function AI(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function L1(t){t.someProp("handleDOMEvents",e=>{for(let r in e)t.input.eventHandlers[r]||t.dom.addEventListener(r,t.input.eventHandlers[r]=n=>Uv(t,n))})}function Uv(t,e){return t.someProp("handleDOMEvents",r=>{let n=r[e.type];return n?n(t,e)||e.defaultPrevented:!1})}function jI(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let r=e.target;r!=t.dom;r=r.parentNode)if(!r||r.nodeType==11||r.pmViewDesc&&r.pmViewDesc.stopEvent(e))return!1;return!0}function RI(t,e){!Uv(t,e)&&Sr[e.type]&&(t.editable||!(e.type in Tr))&&Sr[e.type](t,e)}Tr.keydown=(t,e)=>{let r=e;if(t.input.shiftKey=r.keyCode==16||r.shiftKey,!C8(t,r)&&(t.input.lastKeyCode=r.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ss&&nr&&r.keyCode==13)))if(r.keyCode!=229&&t.domObserver.forceFlush(),Wa&&r.keyCode==13&&!r.ctrlKey&&!r.altKey&&!r.metaKey){let n=Date.now();t.input.lastIOSEnter=n,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==n&&(t.someProp("handleKeyDown",s=>s(t,ao(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",n=>n(t,r))||xI(t,r)?r.preventDefault():yi(t,"key")};Tr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Tr.keypress=(t,e)=>{let r=e;if(C8(t,r)||!r.charCode||r.ctrlKey&&!r.altKey||ln&&r.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,r))){r.preventDefault();return}let n=t.state.selection;if(!(n instanceof Te)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(r.charCode),i=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",o=>o(t,n.$from.pos,n.$to.pos,s,i))&&t.dispatch(i()),r.preventDefault()}};function mf(t){return{left:t.clientX,top:t.clientY}}function _I(t,e){let r=e.x-t.clientX,n=e.y-t.clientY;return r*r+n*n<100}function Vv(t,e,r,n,s){if(n==-1)return!1;let i=t.state.doc.resolve(n);for(let o=i.depth+1;o>0;o--)if(t.someProp(e,a=>o>i.depth?a(t,r,i.nodeAfter,i.before(o),s,!0):a(t,r,i.node(o),i.before(o),s,!1)))return!0;return!1}function _a(t,e,r){if(t.focused||t.focus(),t.state.selection.eq(e))return;let n=t.state.tr.setSelection(e);n.setMeta("pointer",!0),t.dispatch(n)}function OI(t,e){if(e==-1)return!1;let r=t.state.doc.resolve(e),n=r.nodeAfter;return n&&n.isAtom&&me.isSelectable(n)?(_a(t,new me(r)),!0):!1}function DI(t,e){if(e==-1)return!1;let r=t.state.selection,n,s;r instanceof me&&(n=r.node);let i=t.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(me.isSelectable(a)){n&&r.$from.depth>0&&o>=r.$from.depth&&i.before(r.$from.depth+1)==r.$from.pos?s=i.before(r.$from.depth):s=i.before(o);break}}return s!=null?(_a(t,me.create(t.state.doc,s)),!0):!1}function II(t,e,r,n,s){return Vv(t,"handleClickOn",e,r,n)||t.someProp("handleClick",i=>i(t,e,n))||(s?DI(t,r):OI(t,r))}function zI(t,e,r,n){return Vv(t,"handleDoubleClickOn",e,r,n)||t.someProp("handleDoubleClick",s=>s(t,e,n))}function LI(t,e,r,n){return Vv(t,"handleTripleClickOn",e,r,n)||t.someProp("handleTripleClick",s=>s(t,e,n))||PI(t,r,n)}function PI(t,e,r){if(r.button!=0)return!1;let n=t.state.doc;if(e==-1)return n.inlineContent?(_a(t,Te.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)_a(t,Te.create(n,a+1,a+1+o.content.size));else if(me.isSelectable(o))_a(t,me.create(n,a));else continue;return!0}}function Wv(t){return z0(t)}const T8=ln?"metaKey":"ctrlKey";Sr.mousedown=(t,e)=>{let r=e;t.input.shiftKey=r.shiftKey;let n=Wv(t),s=Date.now(),i="singleClick";s-t.input.lastClick.time<500&&_I(r,t.input.lastClick)&&!r[T8]&&t.input.lastClick.button==r.button&&(t.input.lastClick.type=="singleClick"?i="doubleClick":t.input.lastClick.type=="doubleClick"&&(i="tripleClick")),t.input.lastClick={time:s,x:r.clientX,y:r.clientY,type:i,button:r.button};let o=t.posAtCoords(mf(r));o&&(i=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $I(t,o,r,!!n)):(i=="doubleClick"?zI:LI)(t,o.pos,o.inside,r)?r.preventDefault():yi(t,"pointer"))};class $I{constructor(e,r,n,s){this.view=e,this.pos=r,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[T8],this.allowDefault=n.shiftKey;let i,o;if(r.inside>-1)i=e.state.doc.nodeAt(r.inside),o=r.inside;else{let c=e.state.doc.resolve(r.pos);i=c.parent,o=c.depth?c.before():0}const a=s?null:n.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.nodeDOM.nodeType==1?l.nodeDOM:null;let{selection:u}=e.state;(n.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||u instanceof me&&u.from<=o&&u.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yi(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>As(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let r=this.pos;this.view.state.doc!=this.startDoc&&(r=this.view.posAtCoords(mf(e))),this.updateAllowDefault(e),this.allowDefault||!r?yi(this.view,"pointer"):II(this.view,r.pos,r.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||fr&&this.mightDrag&&!this.mightDrag.node.isAtom||nr&&!this.view.state.selection.visible&&Math.min(Math.abs(r.pos-this.view.state.selection.from),Math.abs(r.pos-this.view.state.selection.to))<=2)?(_a(this.view,Re.near(this.view.state.doc.resolve(r.pos))),e.preventDefault()):yi(this.view,"pointer")}move(e){this.updateAllowDefault(e),yi(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Sr.touchstart=t=>{t.input.lastTouch=Date.now(),Wv(t),yi(t,"pointer")};Sr.touchmove=t=>{t.input.lastTouch=Date.now(),yi(t,"pointer")};Sr.contextmenu=t=>Wv(t);function C8(t,e){return t.composing?!0:fr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const BI=Ss?5e3:-1;Tr.compositionstart=Tr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,r=e.selection.$to;if(e.selection instanceof Te&&(e.storedMarks||!r.textOffset&&r.parentOffset&&r.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)||nr&&r8&&FI(t)))t.markCursor=t.state.storedMarks||r.marks(),z0(t,!0),t.markCursor=null;else if(z0(t,!e.selection.empty),mn&&e.selection.empty&&r.parentOffset&&!r.textOffset&&r.nodeBefore.marks.length){let n=t.domSelectionRange();for(let s=n.focusNode,i=n.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=t.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}t.input.composing=!0}E8(t,BI)};function FI(t){let{focusNode:e,focusOffset:r}=t.domSelectionRange();if(!e||e.nodeType!=1||r>=e.childNodes.length)return!1;let n=e.childNodes[r];return n.nodeType==1&&n.contentEditable=="false"}Tr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,E8(t,20))};function E8(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>z0(t),e))}function N8(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=UI());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function HI(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let r=DD(e.focusNode,e.focusOffset),n=ID(e.focusNode,e.focusOffset);if(r&&n&&r!=n){let s=n.pmViewDesc,i=t.domObserver.lastChangedTextNode;if(r==i||n==i)return i;if(!s||!s.isText(n.nodeValue))return n;if(t.input.compositionNode==n){let o=r.pmViewDesc;if(!(!o||!o.isText(r.nodeValue)))return n}}return r||n}function UI(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function z0(t,e=!1){if(!(Ss&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),N8(t),e||t.docView&&t.docView.dirty){let r=Bv(t),n=t.state.selection;return r&&!r.eq(n)?t.dispatch(t.state.tr.setSelection(r)):(t.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function VI(t,e){if(!t.dom.parentNode)return;let r=t.dom.parentNode.appendChild(document.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{r.parentNode&&r.parentNode.removeChild(r),t.focus()},50)}const Ku=Lr&&Mi<15||Wa&&$D<604;Sr.copy=Tr.cut=(t,e)=>{let r=e,n=t.state.selection,s=r.type=="cut";if(n.empty)return;let i=Ku?null:r.clipboardData,o=n.content(),{dom:a,text:l}=Hv(t,o);i?(r.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):VI(t,a),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function WI(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function qI(t,e){if(!t.dom.parentNode)return;let r=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,n=t.dom.parentNode.appendChild(document.createElement(r?"textarea":"div"));r||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),n.parentNode&&n.parentNode.removeChild(n),r?Gu(t,n.value,null,s,e):Gu(t,n.textContent,n.innerHTML,s,e)},50)}function Gu(t,e,r,n,s){let i=y8(t,e,r,n,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,s,i||re.empty)))return!0;if(!i)return!1;let o=WI(i),a=o?t.state.tr.replaceSelectionWith(o,n):t.state.tr.replaceSelection(i);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function M8(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let r=t.getData("text/uri-list");return r?r.replace(/\r?\n/g," "):""}Tr.paste=(t,e)=>{let r=e;if(t.composing&&!Ss)return;let n=Ku?null:r.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;n&&Gu(t,M8(n),n.getData("text/html"),s,r)?r.preventDefault():qI(t,r)};class A8{constructor(e,r,n){this.slice=e,this.move=r,this.node=n}}const KI=ln?"altKey":"ctrlKey";function j8(t,e){let r=t.someProp("dragCopies",n=>!n(e));return r??!e[KI]}Sr.dragstart=(t,e)=>{let r=e,n=t.input.mouseDown;if(n&&n.done(),!r.dataTransfer)return;let s=t.state.selection,i=s.empty?null:t.posAtCoords(mf(r)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof me?s.to-1:s.to))){if(n&&n.mightDrag)o=me.create(t.state.doc,n.mightDrag.pos);else if(r.target&&r.target.nodeType==1){let d=t.docView.nearestDesc(r.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=me.create(t.state.doc,d.posBefore))}}let a=(o||t.state.selection).content(),{dom:l,text:u,slice:c}=Hv(t,a);(!r.dataTransfer.files.length||!nr||t8>120)&&r.dataTransfer.clearData(),r.dataTransfer.setData(Ku?"Text":"text/html",l.innerHTML),r.dataTransfer.effectAllowed="copyMove",Ku||r.dataTransfer.setData("text/plain",u),t.dragging=new A8(c,j8(t,r),o)};Sr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Tr.dragover=Tr.dragenter=(t,e)=>e.preventDefault();Tr.drop=(t,e)=>{try{GI(t,e,t.dragging)}finally{t.dragging=null}};function GI(t,e,r){if(!e.dataTransfer)return;let n=t.posAtCoords(mf(e));if(!n)return;let s=t.state.doc.resolve(n.pos),i=r&&r.slice;i?t.someProp("transformPasted",p=>{i=p(i,t,!1)}):i=y8(t,M8(e.dataTransfer),Ku?null:e.dataTransfer.getData("text/html"),!1,s);let o=!!(r&&j8(t,e));if(t.someProp("handleDrop",p=>p(t,e,i||re.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let a=i?D7(t.state.doc,s.pos,i):s.pos;a==null&&(a=s.pos);let l=t.state.tr;if(o){let{node:p}=r;p?p.replace(l):l.deleteSelection()}let u=l.mapping.map(a),c=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,d=l.doc;if(c?l.replaceRangeWith(u,u,i.content.firstChild):l.replaceRange(u,u,i),l.doc.eq(d))return;let h=l.doc.resolve(u);if(c&&me.isSelectable(i.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new me(h));else{let p=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((m,y,x,v)=>p=v),l.setSelection(Fv(t,h,l.doc.resolve(p)))}t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}Sr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&As(t)},20))};Sr.blur=(t,e)=>{let r=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),r.relatedTarget&&t.dom.contains(r.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Sr.beforeinput=(t,e)=>{if(nr&&Ss&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:n}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=n||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",i=>i(t,ao(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Tr)Sr[t]=Tr[t];function Ju(t,e){if(t==e)return!0;for(let r in t)if(t[r]!==e[r])return!1;for(let r in e)if(!(r in t))return!1;return!0}class L0{constructor(e,r){this.toDOM=e,this.spec=r||To,this.side=this.spec.side||0}map(e,r,n,s){let{pos:i,deleted:o}=e.mapResult(r.from+s,this.side<0?-1:1);return o?null:new wr(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof L0&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ju(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ji{constructor(e,r){this.attrs=e,this.spec=r||To}map(e,r,n,s){let i=e.map(r.from+s,this.spec.inclusiveStart?-1:1)-n,o=e.map(r.to+s,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new wr(i,o,this)}valid(e,r){return r.from<r.to}eq(e){return this==e||e instanceof ji&&Ju(this.attrs,e.attrs)&&Ju(this.spec,e.spec)}static is(e){return e.type instanceof ji}destroy(){}}class qv{constructor(e,r){this.attrs=e,this.spec=r||To}map(e,r,n,s){let i=e.mapResult(r.from+s,1);if(i.deleted)return null;let o=e.mapResult(r.to+s,-1);return o.deleted||o.pos<=i.pos?null:new wr(i.pos-n,o.pos-n,this)}valid(e,r){let{index:n,offset:s}=e.content.findIndex(r.from),i;return s==r.from&&!(i=e.child(n)).isText&&s+i.nodeSize==r.to}eq(e){return this==e||e instanceof qv&&Ju(this.attrs,e.attrs)&&Ju(this.spec,e.spec)}destroy(){}}class wr{constructor(e,r,n){this.from=e,this.to=r,this.type=n}copy(e,r){return new wr(e,r,this.type)}eq(e,r=0){return this.type.eq(e.type)&&this.from+r==e.from&&this.to+r==e.to}map(e,r,n){return this.type.map(e,this,r,n)}static widget(e,r,n){return new wr(e,e,new L0(r,n))}static inline(e,r,n,s){return new wr(e,r,new ji(n,s))}static node(e,r,n,s){return new wr(e,r,new qv(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof ji}get widget(){return this.type instanceof L0}}const ia=[],To={};class ht{constructor(e,r){this.local=e.length?e:ia,this.children=r.length?r:ia}static create(e,r){return r.length?P0(r,e,0,To):cr}find(e,r,n){let s=[];return this.findInner(e??0,r??1e9,s,0,n),s}findInner(e,r,n,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=r&&a.to>=e&&(!i||i(a.spec))&&n.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<r&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,r-a,n,s+a,i)}}map(e,r,n){return this==cr||e.maps.length==0?this:this.mapInner(e,r,0,0,n||To)}mapInner(e,r,n,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,n,s);l&&l.type.valid(r,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?JI(this.children,o||[],e,r,n,s,i):o?new ht(o.sort(Co),ia):cr}add(e,r){return r.length?this==cr?ht.create(e,r):this.addInner(e,r,0):this}addInner(e,r,n){let s,i=0;e.forEach((a,l)=>{let u=l+n,c;if(c=_8(r,a,u)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,c,u+1):s.splice(i,0,l,l+a.nodeSize,P0(c,a,u+1,To)),i+=3}});let o=R8(i?O8(r):r,-n);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new ht(o.length?this.local.concat(o).sort(Co):this.local,s||this.children)}remove(e){return e.length==0||this==cr?this:this.removeInner(e,0)}removeInner(e,r){let n=this.children,s=this.local;for(let i=0;i<n.length;i+=3){let o,a=n[i]+r,l=n[i+1]+r;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>a&&d.to<l&&(e[c]=null,(o||(o=[])).push(d));if(!o)continue;n==this.children&&(n=this.children.slice());let u=n[i+2].removeInner(o,a+1);u!=cr?n[i+2]=u:(n.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,r)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new ht(s,n):cr}forChild(e,r){if(this==cr)return this;if(r.isLeaf)return ht.empty;let n,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(n=this.children[a+2]);break}let i=e+1,o=i+r.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof ji){let u=Math.max(i,l.from)-i,c=Math.min(o,l.to)-i;u<c&&(s||(s=[])).push(l.copy(u,c))}}if(s){let a=new ht(s.sort(Co),ia);return n?new ui([a,n]):a}return n||cr}eq(e){if(this==e)return!0;if(!(e instanceof ht)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let r=0;r<this.local.length;r++)if(!this.local[r].eq(e.local[r]))return!1;for(let r=0;r<this.children.length;r+=3)if(this.children[r]!=e.children[r]||this.children[r+1]!=e.children[r+1]||!this.children[r+2].eq(e.children[r+2]))return!1;return!0}locals(e){return Kv(this.localsInner(e))}localsInner(e){if(this==cr)return ia;if(e.inlineContent||!this.local.some(ji.is))return this.local;let r=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof ji||r.push(this.local[n]);return r}forEachSet(e){e(this)}}ht.empty=new ht([],[]);ht.removeOverlap=Kv;const cr=ht.empty;class ui{constructor(e){this.members=e}map(e,r){const n=this.members.map(s=>s.map(e,r,To));return ui.from(n)}forChild(e,r){if(r.isLeaf)return ht.empty;let n=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,r);i!=cr&&(i instanceof ui?n=n.concat(i.members):n.push(i))}return ui.from(n)}eq(e){if(!(e instanceof ui)||e.members.length!=this.members.length)return!1;for(let r=0;r<this.members.length;r++)if(!this.members[r].eq(e.members[r]))return!1;return!0}locals(e){let r,n=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!r)r=i;else{n&&(r=r.slice(),n=!1);for(let o=0;o<i.length;o++)r.push(i[o])}}return r?Kv(n?r:r.sort(Co)):ia}static from(e){switch(e.length){case 0:return cr;case 1:return e[0];default:return new ui(e.every(r=>r instanceof ht)?e:e.reduce((r,n)=>r.concat(n instanceof ht?n:n.members),[]))}}forEachSet(e){for(let r=0;r<this.members.length;r++)this.members[r].forEachSet(e)}}function JI(t,e,r,n,s,i,o){let a=t.slice();for(let u=0,c=i;u<r.maps.length;u++){let d=0;r.maps[u].forEach((h,p,m,y)=>{let x=y-m-(p-h);for(let v=0;v<a.length;v+=3){let w=a[v+1];if(w<0||h>w+c-d)continue;let k=a[v]+c-d;p>=k?a[v+1]=h<=k?-2:-1:h>=c&&x&&(a[v]+=x,a[v+1]+=x)}d+=x}),c=r.maps[u].map(c,-1)}let l=!1;for(let u=0;u<a.length;u+=3)if(a[u+1]<0){if(a[u+1]==-2){l=!0,a[u+1]=-1;continue}let c=r.map(t[u]+i),d=c-s;if(d<0||d>=n.content.size){l=!0;continue}let h=r.map(t[u+1]+i,-1),p=h-s,{index:m,offset:y}=n.content.findIndex(d),x=n.maybeChild(m);if(x&&y==d&&y+x.nodeSize==p){let v=a[u+2].mapInner(r,x,c+1,t[u]+i+1,o);v!=cr?(a[u]=d,a[u+1]=p,a[u+2]=v):(a[u+1]=-2,l=!0)}else l=!0}if(l){let u=YI(a,t,e,r,s,i,o),c=P0(u,n,0,o);e=c.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<c.children.length;d+=3){let p=c.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,c.children[d],c.children[d+1],c.children[d+2])}}return new ht(e.sort(Co),a)}function R8(t,e){if(!e||!t.length)return t;let r=[];for(let n=0;n<t.length;n++){let s=t[n];r.push(new wr(s.from+e,s.to+e,s.type))}return r}function YI(t,e,r,n,s,i,o){function a(l,u){for(let c=0;c<l.local.length;c++){let d=l.local[c].map(n,s,u);d?r.push(d):o.onRemove&&o.onRemove(l.local[c].spec)}for(let c=0;c<l.children.length;c+=3)a(l.children[c+2],l.children[c]+u+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+i+1);return r}function _8(t,e,r){if(e.isLeaf)return null;let n=r+e.nodeSize,s=null;for(let i=0,o;i<t.length;i++)(o=t[i])&&o.from>r&&o.to<n&&((s||(s=[])).push(o),t[i]=null);return s}function O8(t){let e=[];for(let r=0;r<t.length;r++)t[r]!=null&&e.push(t[r]);return e}function P0(t,e,r,n){let s=[],i=!1;e.forEach((a,l)=>{let u=_8(t,a,l+r);if(u){i=!0;let c=P0(u,a,r+l+1,n);c!=cr&&s.push(l,l+a.nodeSize,c)}});let o=R8(i?O8(t):t,-r).sort(Co);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(n.onRemove&&n.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new ht(o,s):cr}function Co(t,e){return t.from-e.from||t.to-e.to}function Kv(t){let e=t;for(let r=0;r<e.length-1;r++){let n=e[r];if(n.from!=n.to)for(let s=r+1;s<e.length;s++){let i=e[s];if(i.from==n.from){i.to!=n.to&&(e==t&&(e=t.slice()),e[s]=i.copy(i.from,n.to),Bx(e,s+1,i.copy(n.to,i.to)));continue}else{i.from<n.to&&(e==t&&(e=t.slice()),e[r]=n.copy(n.from,i.from),Bx(e,s,n.copy(i.from,n.to)));break}}}return e}function Bx(t,e,r){for(;e<t.length&&Co(r,t[e])>0;)e++;t.splice(e,0,r)}function Bp(t){let e=[];return t.someProp("decorations",r=>{let n=r(t.state);n&&n!=cr&&e.push(n)}),t.cursorWrapper&&e.push(ht.create(t.state.doc,[t.cursorWrapper.deco])),ui.from(e)}const XI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},QI=Lr&&Mi<=11;class ZI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ez{constructor(e,r){this.view=e,this.handleDOMChange=r,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ZI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);Lr&&Mi<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():fr&&e.composing&&n.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),QI&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let r=0;r<e.length;r++)this.queue.push(e[r]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(_x(this.view)){if(this.suppressingSelectionUpdates)return As(this.view);if(Lr&&Mi<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Io(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let r=new Set,n;for(let i=e.focusNode;i;i=Va(i))r.add(i);for(let i=e.anchorNode;i;i=Va(i))if(r.has(i)){n=i;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let r=this.pendingRecords();r.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&_x(e)&&!this.ignoreSelectionChange(n),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let c=0;c<r.length;c++){let d=this.registerMutation(r[c],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(l.some(c=>c.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let c of l)if(c.nodeName=="BR"&&c.parentNode){let d=c.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&c.parentNode.removeChild(c)}}else if(mn&&l.length){let c=l.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,h]=c;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of c){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||nz(e,d)!=p)&&h.remove()}}}let u=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ff(n)&&(u=Bv(e))&&u.eq(Re.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,As(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),tz(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,sz(e,l)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||As(e),this.currentSelection.set(n))}registerMutation(e,r){if(r.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];r.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Lr&&Mi<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:h}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let o=s&&s.parentNode==e.target?tr(s)+1:0,a=n.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?tr(i):e.target.childNodes.length,u=n.localPosFromDOM(e.target,l,1);return{from:a,to:u}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Fx=new WeakMap,Hx=!1;function tz(t){if(!Fx.has(t)&&(Fx.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=mn,Hx)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Hx=!0}}function Ux(t,e){let r=e.startContainer,n=e.startOffset,s=e.endContainer,i=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return Io(o.node,o.offset,s,i)&&([r,n,s,i]=[s,i,r,n]),{anchorNode:r,anchorOffset:n,focusNode:s,focusOffset:i}}function rz(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Ux(t,s)}let r;function n(s){s.preventDefault(),s.stopImmediatePropagation(),r=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0),r?Ux(t,r):null}function nz(t,e){for(let r=e.parentNode;r&&r!=t.dom;r=r.parentNode){let n=t.docView.nearestDesc(r,!0);if(n&&n.node.isBlock)return r}return null}function sz(t,e){var r;let{focusNode:n,focusOffset:s}=t.domSelectionRange();for(let i of e)if(((r=i.parentNode)===null||r===void 0?void 0:r.nodeName)=="TR"){let o=i.nextSibling;for(;o&&o.nodeName!="TD"&&o.nodeName!="TH";)o=o.nextSibling;if(o){let a=o;for(;;){let l=a.firstChild;if(!l||l.nodeType!=1||l.contentEditable=="false"||/^(BR|IMG)$/.test(l.nodeName))break;a=l}a.insertBefore(i,a.firstChild),n==i&&t.domSelection().collapse(i,s)}else i.parentNode.removeChild(i)}}function iz(t,e,r){let{node:n,fromOffset:s,toOffset:i,from:o,to:a}=t.docView.parseRange(e,r),l=t.domSelectionRange(),u,c=l.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:l.anchorOffset}],ff(l)||u.push({node:l.focusNode,offset:l.focusOffset})),nr&&t.input.lastKeyCode===8)for(let x=i;x>s;x--){let v=n.childNodes[x-1],w=v.pmViewDesc;if(v.nodeName=="BR"&&!w){i=x;break}if(!w||w.size)break}let d=t.state.doc,h=t.someProp("domParser")||Ni.fromSchema(t.state.schema),p=d.resolve(o),m=null,y=h.parse(n,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:oz,context:p});if(u&&u[0].pos!=null){let x=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=x),m={anchor:x+o,head:v+o}}return{doc:y,sel:m,from:o,to:a}}function oz(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(fr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let r=document.createElement("div");return r.appendChild(document.createElement("li")),{skip:r}}else if(t.parentNode.lastChild==t||fr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const az=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function lz(t,e,r,n,s){let i=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let N=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,_=Bv(t,N);if(_&&!t.state.selection.eq(_)){if(nr&&Ss&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",V=>V(t,ao(13,"Enter"))))return;let L=t.state.tr.setSelection(_);N=="pointer"?L.setMeta("pointer",!0):N=="key"&&L.scrollIntoView(),i&&L.setMeta("composition",i),t.dispatch(L)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(r);e=o.before(a+1),r=t.state.doc.resolve(r).after(a+1);let l=t.state.selection,u=iz(t,e,r),c=t.state.doc,d=c.slice(u.from,u.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let m=dz(d.content,u.doc.content,u.from,h,p);if(m&&t.input.domChangeCount++,(Wa&&t.input.lastIOSEnter>Date.now()-225||Ss)&&s.some(N=>N.nodeType==1&&!az.test(N.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",N=>N(t,ao(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(n&&l instanceof Te&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(u.sel){let N=Vx(t,t.state.doc,u.sel);if(N&&!N.eq(t.state.selection)){let _=t.state.tr.setSelection(N);i&&_.setMeta("composition",i),t.dispatch(_)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Te&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Lr&&Mi<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>u.from&&u.doc.textBetween(m.start-u.from-1,m.start-u.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=u.doc.resolveNoCache(m.start-u.from),x=u.doc.resolveNoCache(m.endB-u.from),v=c.resolve(m.start),w=y.sameParent(x)&&y.parent.inlineContent&&v.end()>=m.endA;if((Wa&&t.input.lastIOSEnter>Date.now()-225&&(!w||s.some(N=>N.nodeName=="DIV"||N.nodeName=="P"))||!w&&y.pos<u.doc.content.size&&(!y.sameParent(x)||!y.parent.inlineContent)&&y.pos<x.pos&&!/\S/.test(u.doc.textBetween(y.pos,x.pos,"","")))&&t.someProp("handleKeyDown",N=>N(t,ao(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&cz(c,m.start,m.endA,y,x)&&t.someProp("handleKeyDown",N=>N(t,ao(8,"Backspace")))){Ss&&nr&&t.domObserver.suppressSelectionUpdates();return}nr&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Ss&&!w&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==m.endA&&(m.endB-=2,x=u.doc.resolveNoCache(m.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(N){return N(t,ao(13,"Enter"))})},20));let k=m.start,E=m.endA,M=N=>{let _=N||t.state.tr.replace(k,E,u.doc.slice(m.start-u.from,m.endB-u.from));if(u.sel){let L=Vx(t,_.doc,u.sel);L&&!(nr&&t.composing&&L.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(L.head==k||L.head==_.mapping.map(E)-1)||Lr&&L.empty&&L.head==k)&&_.setSelection(L)}return i&&_.setMeta("composition",i),_.scrollIntoView()},j;if(w)if(y.pos==x.pos){Lr&&Mi<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>As(t),20));let N=M(t.state.tr.delete(k,E)),_=c.resolve(m.start).marksAcross(c.resolve(m.endA));_&&N.ensureMarks(_),t.dispatch(N)}else if(m.endA==m.endB&&(j=uz(y.parent.content.cut(y.parentOffset,x.parentOffset),v.parent.content.cut(v.parentOffset,m.endA-v.start())))){let N=M(t.state.tr);j.type=="add"?N.addMark(k,E,j.mark):N.removeMark(k,E,j.mark),t.dispatch(N)}else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let N=y.parent.textBetween(y.parentOffset,x.parentOffset),_=()=>M(t.state.tr.insertText(N,k,E));t.someProp("handleTextInput",L=>L(t,k,E,N,_))||t.dispatch(_())}else t.dispatch(M());else t.dispatch(M())}function Vx(t,e,r){return Math.max(r.anchor,r.head)>e.content.size?null:Fv(t,e.resolve(r.anchor),e.resolve(r.head))}function uz(t,e){let r=t.firstChild.marks,n=e.firstChild.marks,s=r,i=n,o,a,l;for(let c=0;c<n.length;c++)s=n[c].removeFromSet(s);for(let c=0;c<r.length;c++)i=r[c].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=c=>c.mark(a.addToSet(c.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=c=>c.mark(a.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(l(e.child(c)));if(K.from(u).eq(t))return{mark:a,type:o}}function cz(t,e,r,n,s){if(r-e<=s.pos-n.pos||Fp(n,!0,!1)<s.pos)return!1;let i=t.resolve(e);if(!n.parent.isTextblock){let a=i.nodeAfter;return a!=null&&r==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=t.resolve(Fp(i,!0,!0));return!o.parent.isTextblock||o.pos>r||Fp(o,!0,!1)<r?!1:n.parent.content.cut(n.parentOffset).eq(o.parent.content)}function Fp(t,e,r){let n=t.depth,s=e?t.end():t.pos;for(;n>0&&(e||t.indexAfter(n)==t.node(n).childCount);)n--,s++,e=!1;if(r){let i=t.node(n).maybeChild(t.indexAfter(n));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function dz(t,e,r,n,s){let i=t.findDiffStart(e,r);if(i==null)return null;let{a:o,b:a}=t.findDiffEnd(e,r+t.size,r+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));n-=o+l-i}if(o<i&&t.size<e.size){let l=n<=i&&n>=o?i-n:0;i-=l,i&&i<e.size&&Wx(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=n<=i&&n>=a?i-n:0;i-=l,i&&i<t.size&&Wx(t.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function Wx(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),r=t.charCodeAt(1);return e>=56320&&e<=57343&&r>=55296&&r<=56319}class D8{constructor(e,r){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new NI,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=r,this.state=r.state,this.directPlugins=r.plugins||[],this.directPlugins.forEach(Yx),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Gx(this),Kx(this),this.nodeViews=Jx(this),this.docView=Ex(this.state.doc,qx(this),Bp(this),this.dom,this),this.domObserver=new ez(this,(n,s,i,o)=>lz(this,n,s,i,o)),this.domObserver.start(),MI(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let r in e)this._props[r]=e[r];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&L1(this);let r=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Yx),this.directPlugins=e.plugins),this.updateStateInner(e.state,r)}setProps(e){let r={};for(let n in this._props)r[n]=this._props[n];r.state=this.state;for(let n in e)r[n]=e[n];this.update(r)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,r){var n;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(N8(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=r.plugins;if(a||this._props.plugins!=r.plugins||this._props.nodeViews!=r.nodeViews){let p=Jx(this);fz(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||r.handleDOMEvents!=this._props.handleDOMEvents)&&L1(this),this.editable=Gx(this),Kx(this);let l=Bp(this),u=qx(this),c=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,u,l);(d||!e.selection.eq(s.selection))&&(o=!0);let h=c=="preserve"&&o&&this.dom.style.overflowAnchor==null&&HD(this);if(o){this.domObserver.stop();let p=d&&(Lr||nr)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&hz(s.selection,e.selection);if(d){let m=nr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=HI(this)),(i||!this.docView.update(e.doc,u,l,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Ex(e.doc,u,l,this.dom,this)),m&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hI(this))?As(this,p):(m8(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():h&&UD(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",r=>r(this)))if(this.state.selection instanceof me){let r=this.docView.domAfterPos(this.state.selection.from);r.nodeType==1&&bx(this,r.getBoundingClientRect(),e)}else bx(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let r=0;r<this.directPlugins.length;r++){let n=this.directPlugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let r=0;r<this.state.plugins.length;r++){let n=this.state.plugins[r];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let r=0;r<this.pluginViews.length;r++){let n=this.pluginViews[r];n.update&&n.update(this,e)}}updateDraggedNode(e,r){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let i=n.from+(this.state.doc.content.size-r.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==n.node&&(s=i)}this.dragging=new A8(e.slice,e.move,s<0?void 0:me.create(this.state.doc,s))}someProp(e,r){let n=this._props&&this._props[e],s;if(n!=null&&(s=r?r(n):n))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=r?r(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=r?r(a):a))return s}}hasFocus(){if(Lr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&VD(this.dom),As(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let r=this.dom.parentNode;r;r=r.parentNode)if(r.nodeType==9||r.nodeType==11&&r.host)return r.getSelection||(Object.getPrototypeOf(r).getSelection=()=>r.ownerDocument.getSelection()),this._root=r}return e||document}updateRoot(){this._root=null}posAtCoords(e){return JD(this,e)}coordsAtPos(e,r=1){return a8(this,e,r)}domAtPos(e,r=0){return this.docView.domFromPos(e,r)}nodeDOM(e){let r=this.docView.descAt(e);return r?r.nodeDOM:null}posAtDOM(e,r,n=-1){let s=this.docView.posFromDOM(e,r,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,r){return eI(this,r||this.state,e)}pasteHTML(e,r){return Gu(this,"",e,!1,r||new ClipboardEvent("paste"))}pasteText(e,r){return Gu(this,e,null,!0,r||new ClipboardEvent("paste"))}serializeForClipboard(e){return Hv(this,e)}destroy(){this.docView&&(AI(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Bp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,_D())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return RI(this,e)}domSelectionRange(){let e=this.domSelection();return e?fr&&this.root.nodeType===11&&LD(this.dom.ownerDocument)==this.dom&&rz(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}D8.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function qx(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",r=>{if(typeof r=="function"&&(r=r(t.state)),r)for(let n in r)n=="class"?e.class+=" "+r[n]:n=="style"?e.style=(e.style?e.style+";":"")+r[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(r[n]))}),e.translate||(e.translate="no"),[wr.node(0,t.state.doc.content.size,e)]}function Kx(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:wr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Gx(t){return!t.someProp("editable",e=>e(t.state)===!1)}function hz(t,e){let r=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(r)!=e.$anchor.start(r)}function Jx(t){let e=Object.create(null);function r(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return t.someProp("nodeViews",r),t.someProp("markViews",r),e}function fz(t,e){let r=0,n=0;for(let s in t){if(t[s]!=e[s])return!0;r++}for(let s in e)n++;return r!=n}function Yx(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var $i={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},pz=typeof navigator<"u"&&/Mac/.test(navigator.platform),mz=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var rr=0;rr<10;rr++)$i[48+rr]=$i[96+rr]=String(rr);for(var rr=1;rr<=24;rr++)$i[rr+111]="F"+rr;for(var rr=65;rr<=90;rr++)$i[rr]=String.fromCharCode(rr+32),$0[rr]=String.fromCharCode(rr);for(var Hp in $i)$0.hasOwnProperty(Hp)||($0[Hp]=$i[Hp]);function gz(t){var e=pz&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||mz&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",r=!e&&t.key||(t.shiftKey?$0:$i)[t.keyCode]||t.key||"Unidentified";return r=="Esc"&&(r="Escape"),r=="Del"&&(r="Delete"),r=="Left"&&(r="ArrowLeft"),r=="Up"&&(r="ArrowUp"),r=="Right"&&(r="ArrowRight"),r=="Down"&&(r="ArrowDown"),r}const vz=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),yz=typeof navigator<"u"&&/Win/.test(navigator.platform);function xz(t){let e=t.split(/-(?!$)/),r=e[e.length-1];r=="Space"&&(r=" ");let n,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))vz?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return n&&(r="Alt-"+r),s&&(r="Ctrl-"+r),o&&(r="Meta-"+r),i&&(r="Shift-"+r),r}function bz(t){let e=Object.create(null);for(let r in t)e[xz(r)]=t[r];return e}function Up(t,e,r=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),r&&e.shiftKey&&(t="Shift-"+t),t}function wz(t){return new vt({props:{handleKeyDown:I8(t)}})}function I8(t){let e=bz(t);return function(r,n){let s=gz(n),i,o=e[Up(s,n)];if(o&&o(r.state,r.dispatch,r))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let a=e[Up(s,n,!1)];if(a&&a(r.state,r.dispatch,r))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(yz&&n.ctrlKey&&n.altKey)&&(i=$i[n.keyCode])&&i!=s){let a=e[Up(i,n)];if(a&&a(r.state,r.dispatch,r))return!0}}return!1}}var kz=Object.defineProperty,Gv=(t,e)=>{for(var r in e)kz(t,r,{get:e[r],enumerable:!0})};function gf(t){const{state:e,transaction:r}=t;let{selection:n}=r,{doc:s}=r,{storedMarks:i}=r;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return n},get doc(){return s},get tr(){return n=r.selection,s=r.doc,i=r.storedMarks,r}}}var vf=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:r}=this,{view:n}=e,{tr:s}=r,i=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([o,a])=>[o,(...u)=>{const c=a(...u)(i);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(s),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:r,editor:n,state:s}=this,{view:i}=n,o=[],a=!!t,l=t||s.tr,u=()=>(!a&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(r).map(([d,h])=>[d,(...m)=>{const y=this.buildProps(l,e),x=h(...m)(y);return o.push(x),c}])),run:u};return c}createCan(t){const{rawCommands:e,state:r}=this,n=!1,s=t||r.tr,i=this.buildProps(s,n);return{...Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>l(...u)({...i,dispatch:void 0})])),chain:()=>this.createChain(s,n)}}buildProps(t,e=!0){const{rawCommands:r,editor:n,state:s}=this,{view:i}=n,o={tr:t,editor:n,view:i,state:gf({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(r).map(([a,l])=>[a,(...u)=>l(...u)(o)]))}};return o}},z8={};Gv(z8,{blur:()=>Sz,clearContent:()=>Tz,clearNodes:()=>Cz,command:()=>Ez,createParagraphNear:()=>Nz,cut:()=>Mz,deleteCurrentNode:()=>Az,deleteNode:()=>jz,deleteRange:()=>Rz,deleteSelection:()=>_z,enter:()=>Oz,exitCode:()=>Dz,extendMarkRange:()=>Iz,first:()=>zz,focus:()=>Pz,forEach:()=>$z,insertContent:()=>Bz,insertContentAt:()=>Uz,joinBackward:()=>qz,joinDown:()=>Wz,joinForward:()=>Kz,joinItemBackward:()=>Gz,joinItemForward:()=>Jz,joinTextblockBackward:()=>Yz,joinTextblockForward:()=>Xz,joinUp:()=>Vz,keyboardShortcut:()=>Zz,lift:()=>eL,liftEmptyBlock:()=>tL,liftListItem:()=>rL,newlineInCode:()=>nL,resetAttributes:()=>sL,scrollIntoView:()=>iL,selectAll:()=>oL,selectNodeBackward:()=>aL,selectNodeForward:()=>lL,selectParentNode:()=>uL,selectTextblockEnd:()=>cL,selectTextblockStart:()=>dL,setContent:()=>hL,setMark:()=>_L,setMeta:()=>OL,setNode:()=>DL,setNodeSelection:()=>IL,setTextDirection:()=>zL,setTextSelection:()=>LL,sinkListItem:()=>PL,splitBlock:()=>$L,splitListItem:()=>BL,toggleList:()=>FL,toggleMark:()=>HL,toggleNode:()=>UL,toggleWrap:()=>VL,undoInputRule:()=>WL,unsetAllMarks:()=>qL,unsetMark:()=>KL,unsetTextDirection:()=>GL,updateAttributes:()=>JL,wrapIn:()=>YL,wrapInList:()=>XL});var Sz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var r;t.isDestroyed||(e.dom.blur(),(r=window==null?void 0:window.getSelection())==null||r.removeAllRanges())}),!0),Tz=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Cz=()=>({state:t,tr:e,dispatch:r})=>{const{selection:n}=e,{ranges:s}=n;return r&&s.forEach(({$from:i,$to:o})=>{t.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(l)),h=u.resolve(c.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const m=al(p);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,y)}(m||m===0)&&e.lift(p,m)})}),!0},Ez=t=>e=>t(e),Nz=()=>({state:t,dispatch:e})=>Y7(t,e),Mz=(t,e)=>({editor:r,tr:n})=>{const{state:s}=r,i=s.doc.slice(t.from,t.to);n.deleteRange(t.from,t.to);const o=n.mapping.map(e);return n.insert(o,i.content),n.setSelection(new Te(n.doc.resolve(Math.max(o-1,0)))),!0},Az=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,n=r.$anchor.node();if(n.content.size>0)return!1;const s=t.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===n.type){if(e){const a=s.before(i),l=s.after(i);t.delete(a,l).scrollIntoView()}return!0}return!1};function _t(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var jz=t=>({tr:e,state:r,dispatch:n})=>{const s=_t(t,r.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(n){const l=i.before(o),u=i.after(o);e.delete(l,u).scrollIntoView()}return!0}return!1},Rz=t=>({tr:e,dispatch:r})=>{const{from:n,to:s}=t;return r&&e.delete(n,s),!0},_z=()=>({state:t,dispatch:e})=>Dv(t,e),Oz=()=>({commands:t})=>t.keyboardShortcut("Enter"),Dz=()=>({state:t,dispatch:e})=>vD(t,e);function Jv(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function B0(t,e,r={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>r.strict?e[s]===t[s]:Jv(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function L8(t,e,r={}){return t.find(n=>n.type===e&&B0(Object.fromEntries(Object.keys(r).map(s=>[s,n.attrs[s]])),r))}function Xx(t,e,r={}){return!!L8(t,e,r)}function Yv(t,e,r){var n;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(c=>c.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(c=>c.type===e)||(r=r||((n=s.node.marks[0])==null?void 0:n.attrs),!L8([...s.node.marks],e,r)))return;let o=s.index,a=t.start()+s.offset,l=o+1,u=a+s.node.nodeSize;for(;o>0&&Xx([...t.parent.child(o-1).marks],e,r);)o-=1,a-=t.parent.child(o).nodeSize;for(;l<t.parent.childCount&&Xx([...t.parent.child(l).marks],e,r);)u+=t.parent.child(l).nodeSize,l+=1;return{from:a,to:u}}function Hs(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Iz=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const i=Hs(t,n.schema),{doc:o,selection:a}=r,{$from:l,from:u,to:c}=a;if(s){const d=Yv(l,i,e);if(d&&d.from<=u&&d.to>=c){const h=Te.create(o,d.from,d.to);r.setSelection(h)}}return!0},zz=t=>e=>{const r=typeof t=="function"?t(e):t;for(let n=0;n<r.length;n+=1)if(r[n](e))return!0;return!1};function P8(t){return t instanceof Te}function vo(t=0,e=0,r=0){return Math.min(Math.max(t,e),r)}function $8(t,e=null){if(!e)return null;const r=Re.atStart(t),n=Re.atEnd(t);if(e==="start"||e===!0)return r;if(e==="end")return n;const s=r.from,i=n.to;return e==="all"?Te.create(t,vo(0,s,i),vo(t.content.size,s,i)):Te.create(t,vo(e,s,i),vo(e,s,i))}function Qx(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function F0(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Lz(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Pz=(t=null,e={})=>({editor:r,view:n,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(F0()||Qx())&&n.dom.focus(),Lz()&&!F0()&&!Qx()&&n.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{r.isDestroyed||(n.focus(),e!=null&&e.scrollIntoView&&r.commands.scrollIntoView())})};try{if(n.hasFocus()&&t===null||t===!1)return!0}catch{return!1}if(i&&t===null&&!P8(r.state.selection))return o(),!0;const a=$8(s.doc,t)||r.state.selection,l=r.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},$z=(t,e)=>r=>t.every((n,s)=>e(n,{...r,index:s})),Bz=(t,e)=>({tr:r,commands:n})=>n.insertContentAt({from:r.selection.from,to:r.selection.to},t,e),B8=t=>{const e=t.childNodes;for(let r=e.length-1;r>=0;r-=1){const n=e[r];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?t.removeChild(n):n.nodeType===1&&B8(n)}return t};function od(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,r=new window.DOMParser().parseFromString(e,"text/html").body;return B8(r)}function Yu(t,e,r){if(t instanceof Pn||t instanceof K)return t;r={slice:!0,parseOptions:{},...r};const n=typeof t=="object"&&t!==null,s=typeof t=="string";if(n)try{if(Array.isArray(t)&&t.length>0)return K.fromArray(t.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(t);return r.errorOnInvalidContent&&o.check(),o}catch(i){if(r.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",i),Yu("",e,r)}if(s){if(r.errorOnInvalidContent){let o=!1,a="";const l=new S7({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(o=!0,a=typeof u=="string"?u:u.outerHTML,null)}]}})});if(r.slice?Ni.fromSchema(l).parseSlice(od(t),r.parseOptions):Ni.fromSchema(l).parse(od(t),r.parseOptions),r.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Ni.fromSchema(e);return r.slice?i.parseSlice(od(t),r.parseOptions).content:i.parse(od(t),r.parseOptions)}return Yu("",e,r)}function Fz(t,e,r){const n=t.steps.length-1;if(n<e)return;const s=t.steps[n];if(!(s instanceof Vt||s instanceof qt))return;const i=t.mapping.maps[n];let o=0;i.forEach((a,l,u,c)=>{o===0&&(o=c)}),t.setSelection(Re.near(t.doc.resolve(o),r))}var Hz=t=>!("type"in t),Uz=(t,e,r)=>({tr:n,dispatch:s,editor:i})=>{var o;if(s){r={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...r};let a;const l=x=>{i.emit("contentError",{editor:i,error:x,disableCollaboration:()=>{"collaboration"in i.storage&&typeof i.storage.collaboration=="object"&&i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...r.parseOptions};if(!r.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Yu(e,i.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(x){l(x)}try{a=Yu(e,i.schema,{parseOptions:u,errorOnInvalidContent:(o=r.errorOnInvalidContent)!=null?o:i.options.enableContentCheck})}catch(x){return l(x),!1}let{from:c,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},h=!0,p=!0;if((Hz(a)?a:[a]).forEach(x=>{x.check(),h=h?x.isText&&x.marks.length===0:!1,p=p?x.isBlock:!1}),c===d&&p){const{parent:x}=n.doc.resolve(c);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(c-=1,d+=1)}let y;if(h){if(Array.isArray(e))y=e.map(x=>x.text||"").join("");else if(e instanceof K){let x="";e.forEach(v=>{v.text&&(x+=v.text)}),y=x}else typeof e=="object"&&e&&e.text?y=e.text:y=e;n.insertText(y,c,d)}else{y=a;const x=n.doc.resolve(c),v=x.node(),w=x.parentOffset===0,k=v.isText||v.isTextblock,E=v.content.size>0;w&&k&&E&&(c=Math.max(0,c-1)),n.replaceWith(c,d,y)}r.updateSelection&&Fz(n,n.steps.length-1,-1),r.applyInputRules&&n.setMeta("applyInputRules",{from:c,text:y}),r.applyPasteRules&&n.setMeta("applyPasteRules",{from:c,text:y})}return!0},Vz=()=>({state:t,dispatch:e})=>pD(t,e),Wz=()=>({state:t,dispatch:e})=>mD(t,e),qz=()=>({state:t,dispatch:e})=>U7(t,e),Kz=()=>({state:t,dispatch:e})=>K7(t,e),Gz=()=>({state:t,dispatch:e,tr:r})=>{try{const n=cf(t.doc,t.selection.$from.pos,-1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Jz=()=>({state:t,dispatch:e,tr:r})=>{try{const n=cf(t.doc,t.selection.$from.pos,1);return n==null?!1:(r.join(n,2),e&&e(r),!0)}catch{return!1}},Yz=()=>({state:t,dispatch:e})=>hD(t,e),Xz=()=>({state:t,dispatch:e})=>fD(t,e);function F8(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Qz(t){const e=t.split(/-(?!$)/);let r=e[e.length-1];r==="Space"&&(r=" ");let n,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))F0()||F8()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return n&&(r=`Alt-${r}`),s&&(r=`Ctrl-${r}`),o&&(r=`Meta-${r}`),i&&(r=`Shift-${r}`),r}var Zz=t=>({editor:e,view:r,tr:n,dispatch:s})=>{const i=Qz(t).split(/-(?!$)/),o=i.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{r.someProp("handleKeyDown",u=>u(r,a))});return l==null||l.steps.forEach(u=>{const c=u.map(n.mapping);c&&s&&n.maybeStep(c)}),!0};function Bi(t,e,r={}){const{from:n,to:s,empty:i}=t.selection,o=e?_t(e,t.schema):null,a=[];t.doc.nodesBetween(n,s,(d,h)=>{if(d.isText)return;const p=Math.max(n,h),m=Math.min(s,h+d.nodeSize);a.push({node:d,from:p,to:m})});const l=s-n,u=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>B0(d.node.attrs,r,{strict:!1}));return i?!!u.length:u.reduce((d,h)=>d+h.to-h.from,0)>=l}var eL=(t,e={})=>({state:r,dispatch:n})=>{const s=_t(t,r.schema);return Bi(r,s,e)?gD(r,n):!1},tL=()=>({state:t,dispatch:e})=>X7(t,e),rL=t=>({state:e,dispatch:r})=>{const n=_t(t,e.schema);return MD(n)(e,r)},nL=()=>({state:t,dispatch:e})=>J7(t,e);function yf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Zx(t,e){const r=typeof e=="string"?[e]:e;return Object.keys(t).reduce((n,s)=>(r.includes(s)||(n[s]=t[s]),n),{})}var sL=(t,e)=>({tr:r,state:n,dispatch:s})=>{let i=null,o=null;const a=yf(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(i=_t(t,n.schema)),a==="mark"&&(o=Hs(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{n.doc.nodesBetween(u.$from.pos,u.$to.pos,(c,d)=>{i&&i===c.type&&(l=!0,s&&r.setNodeMarkup(d,void 0,Zx(c.attrs,e))),o&&c.marks.length&&c.marks.forEach(h=>{o===h.type&&(l=!0,s&&r.addMark(d,d+c.nodeSize,o.create(Zx(h.attrs,e))))})})}),l},iL=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),oL=()=>({tr:t,dispatch:e})=>{if(e){const r=new Xr(t.doc);t.setSelection(r)}return!0},aL=()=>({state:t,dispatch:e})=>W7(t,e),lL=()=>({state:t,dispatch:e})=>G7(t,e),uL=()=>({state:t,dispatch:e})=>bD(t,e),cL=()=>({state:t,dispatch:e})=>SD(t,e),dL=()=>({state:t,dispatch:e})=>kD(t,e);function P1(t,e,r={},n={}){return Yu(t,e,{slice:!1,parseOptions:r,errorOnInvalidContent:n.errorOnInvalidContent})}var hL=(t,{errorOnInvalidContent:e,emitUpdate:r=!0,parseOptions:n={}}={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{const{doc:l}=i;if(n.preserveWhitespace!=="full"){const u=P1(t,s.schema,n,{errorOnInvalidContent:e??s.options.enableContentCheck});return o&&i.replaceWith(0,l.content.size,u).setMeta("preventUpdate",!r),!0}return o&&i.setMeta("preventUpdate",!r),a.insertContentAt({from:0,to:l.content.size},t,{parseOptions:n,errorOnInvalidContent:e??s.options.enableContentCheck})};function H8(t,e){const r=Hs(e,t.schema),{from:n,to:s,empty:i}=t.selection,o=[];i?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(n,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===r.name);return a?{...a.attrs}:{}}function U8(t,e){const r=new $7(t);return e.forEach(n=>{n.steps.forEach(s=>{r.step(s)})}),r}function fL(t){for(let e=0;e<t.edgeCount;e+=1){const{type:r}=t.edge(e);if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function pL(t,e,r){const n=[];return t.nodesBetween(e.from,e.to,(s,i)=>{r(s)&&n.push({node:s,pos:i})}),n}function mL(t,e){for(let r=t.depth;r>0;r-=1){const n=t.node(r);if(e(n))return{pos:r>0?t.before(r):0,start:t.start(r),depth:r,node:n}}}function xf(t){return e=>mL(e.$from,t)}function pe(t,e,r){return t.config[e]===void 0&&t.parent?pe(t.parent,e,r):typeof t.config[e]=="function"?t.config[e].bind({...r,parent:t.parent?pe(t.parent,e,r):null}):t.config[e]}function Xv(t){return t.map(e=>{const r={name:e.name,options:e.options,storage:e.storage},n=pe(e,"addExtensions",r);return n?[e,...Xv(n())]:e}).flat(10)}function Qv(t,e){const r=Fo.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(r),s.innerHTML}function V8(t){return typeof t=="function"}function Ue(t,e=void 0,...r){return V8(t)?e?t.bind(e)(...r):t(...r):t}function gL(t={}){return Object.keys(t).length===0&&t.constructor===Object}function qa(t){const e=t.filter(s=>s.type==="extension"),r=t.filter(s=>s.type==="node"),n=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:r,markExtensions:n}}function W8(t){const e=[],{nodeExtensions:r,markExtensions:n}=qa(t),s=[...r,...n],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=pe(o,"addGlobalAttributes",a);if(!l)return;l().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([h,p])=>{e.push({type:d,name:h,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=pe(o,"addAttributes",a);if(!l)return;const u=l();Object.entries(u).forEach(([c,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:c,attribute:h})})}),e}function rt(...t){return t.filter(e=>!!e).reduce((e,r)=>{const n={...e};return Object.entries(r).forEach(([s,i])=>{if(!n[s]){n[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=n[s]?n[s].split(" "):[],u=a.filter(c=>!l.includes(c));n[s]=[...l,...u].join(" ")}else if(s==="style"){const a=i?i.split(";").map(c=>c.trim()).filter(Boolean):[],l=n[s]?n[s].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;l.forEach(c=>{const[d,h]=c.split(":").map(p=>p.trim());u.set(d,h)}),a.forEach(c=>{const[d,h]=c.split(":").map(p=>p.trim());u.set(d,h)}),n[s]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else n[s]=i}),n},{})}function Xu(t,e){return e.filter(r=>r.type===t.type.name).filter(r=>r.attribute.rendered).map(r=>r.attribute.renderHTML?r.attribute.renderHTML(t.attrs)||{}:{[r.name]:t.attrs[r.name]}).reduce((r,n)=>rt(r,n),{})}function vL(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function eb(t,e){return"style"in t?t:{...t,getAttrs:r=>{const n=t.getAttrs?t.getAttrs(r):t.attrs;if(n===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(r):vL(r.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...n,...s}}}}function tb(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>e==="attrs"&&gL(r)?!1:r!=null))}function rb(t){var e,r;const n={};return!((e=t==null?void 0:t.attribute)!=null&&e.isRequired)&&"default"in((t==null?void 0:t.attribute)||{})&&(n.default=t.attribute.default),((r=t==null?void 0:t.attribute)==null?void 0:r.validate)!==void 0&&(n.validate=t.attribute.validate),[t.name,n]}function yL(t,e){var r;const n=W8(t),{nodeExtensions:s,markExtensions:i}=qa(t),o=(r=s.find(u=>pe(u,"topNode")))==null?void 0:r.name,a=Object.fromEntries(s.map(u=>{const c=n.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((v,w)=>{const k=pe(w,"extendNodeSchema",d);return{...v,...k?k(u):{}}},{}),p=tb({...h,content:Ue(pe(u,"content",d)),marks:Ue(pe(u,"marks",d)),group:Ue(pe(u,"group",d)),inline:Ue(pe(u,"inline",d)),atom:Ue(pe(u,"atom",d)),selectable:Ue(pe(u,"selectable",d)),draggable:Ue(pe(u,"draggable",d)),code:Ue(pe(u,"code",d)),whitespace:Ue(pe(u,"whitespace",d)),linebreakReplacement:Ue(pe(u,"linebreakReplacement",d)),defining:Ue(pe(u,"defining",d)),isolating:Ue(pe(u,"isolating",d)),attrs:Object.fromEntries(c.map(rb))}),m=Ue(pe(u,"parseHTML",d));m&&(p.parseDOM=m.map(v=>eb(v,c)));const y=pe(u,"renderHTML",d);y&&(p.toDOM=v=>y({node:v,HTMLAttributes:Xu(v,c)}));const x=pe(u,"renderText",d);return x&&(p.toText=x),[u.name,p]})),l=Object.fromEntries(i.map(u=>{const c=n.filter(x=>x.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},h=t.reduce((x,v)=>{const w=pe(v,"extendMarkSchema",d);return{...x,...w?w(u):{}}},{}),p=tb({...h,inclusive:Ue(pe(u,"inclusive",d)),excludes:Ue(pe(u,"excludes",d)),group:Ue(pe(u,"group",d)),spanning:Ue(pe(u,"spanning",d)),code:Ue(pe(u,"code",d)),attrs:Object.fromEntries(c.map(rb))}),m=Ue(pe(u,"parseHTML",d));m&&(p.parseDOM=m.map(x=>eb(x,c)));const y=pe(u,"renderHTML",d);return y&&(p.toDOM=x=>y({mark:x,HTMLAttributes:Xu(x,c)})),[u.name,p]}));return new S7({topNode:o,nodes:a,marks:l})}function xL(t){const e=t.filter((r,n)=>t.indexOf(r)!==n);return Array.from(new Set(e))}function H0(t){return t.sort((r,n)=>{const s=pe(r,"priority")||100,i=pe(n,"priority")||100;return s>i?-1:s<i?1:0})}function q8(t){const e=H0(Xv(t)),r=xL(e.map(n=>n.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function K8(t,e,r){const{from:n,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=r||{};let a="";return t.nodesBetween(n,s,(l,u,c,d)=>{var h;l.isBlock&&u>n&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return c&&(a+=p({node:l,pos:u,parent:c,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)==null?void 0:h.slice(Math.max(n,u)-u,s-u))}),a}function bL(t,e){const r={from:0,to:t.content.size};return K8(t,r,e)}function G8(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,r])=>[e,r.spec.toText]))}function wL(t,e){const r=_t(e,t.schema),{from:n,to:s}=t.selection,i=[];t.doc.nodesBetween(n,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===r.name);return o?{...o.attrs}:{}}function J8(t,e){const r=yf(typeof e=="string"?e:e.name,t.schema);return r==="node"?wL(t,e):r==="mark"?H8(t,e):{}}function kL(t,e=JSON.stringify){const r={};return t.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(r,s)?!1:r[s]=!0})}function SL(t){const e=kL(t);return e.length===1?e:e.filter((r,n)=>!e.filter((i,o)=>o!==n).some(i=>r.oldRange.from>=i.oldRange.from&&r.oldRange.to<=i.oldRange.to&&r.newRange.from>=i.newRange.from&&r.newRange.to<=i.newRange.to))}function Y8(t){const{mapping:e,steps:r}=t,n=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=r[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const u=e.slice(i).map(a,-1),c=e.slice(i).map(l),d=e.invert().map(u,-1),h=e.invert().map(c);n.push({oldRange:{from:d,to:h},newRange:{from:u,to:c}})})}),SL(n)}function Zv(t,e,r){const n=[];return t===e?r.resolve(t).marks().forEach(s=>{const i=r.resolve(t),o=Yv(i,s.type);o&&n.push({mark:s,...o})}):r.nodesBetween(t,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||n.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),n}var TL=(t,e,r,n=20)=>{const s=t.doc.resolve(r);let i=n,o=null;for(;i>0&&o===null;){const a=s.node(i);(a==null?void 0:a.type.name)===e?o=a:i-=1}return[o,i]};function ad(t,e){return e.nodes[t]||e.marks[t]||null}function $d(t,e,r){return Object.fromEntries(Object.entries(r).filter(([n])=>{const s=t.find(i=>i.type===e&&i.name===n);return s?s.attribute.keepOnSplit:!1}))}var CL=(t,e=500)=>{let r="";const n=t.parentOffset;return t.parent.nodesBetween(Math.max(0,n-e),n,(s,i,o,a)=>{var l,u;const c=((u=(l=s.type.spec).toText)==null?void 0:u.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";r+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,n-i))}),r};function $1(t,e,r={}){const{empty:n,ranges:s}=t.selection,i=e?Hs(e,t.schema):null;if(n)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>B0(d.attrs,r,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:h})=>{const p=d.pos,m=h.pos;t.doc.nodesBetween(p,m,(y,x)=>{if(!y.isText&&!y.marks.length)return;const v=Math.max(p,x),w=Math.min(m,x+y.nodeSize),k=w-v;o+=k,a.push(...y.marks.map(E=>({mark:E,from:v,to:w})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>B0(d.mark.attrs,r,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),u=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+u:l)>=o}function EL(t,e,r={}){if(!e)return Bi(t,null,r)||$1(t,null,r);const n=yf(e,t.schema);return n==="node"?Bi(t,e,r):n==="mark"?$1(t,e,r):!1}var NL=(t,e)=>{const{$from:r,$to:n,$anchor:s}=t.selection;if(e){const i=xf(a=>a.type.name===e)(t.selection);if(!i)return!1;const o=t.doc.resolve(i.pos+1);return s.pos+1===o.end()}return!(n.parentOffset<n.parent.nodeSize-2||r.pos!==n.pos)},ML=t=>{const{$from:e,$to:r}=t.selection;return!(e.parentOffset>0||e.pos!==r.pos)};function nb(t,e){return Array.isArray(e)?e.some(r=>(typeof r=="string"?r:r.name)===t.name):e}function sb(t,e){const{nodeExtensions:r}=qa(e),n=r.find(o=>o.name===t);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},i=Ue(pe(n,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function bf(t,{checkChildren:e=!0,ignoreWhitespace:r=!1}={}){var n;if(r){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((n=t.text)!=null?n:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(i=>{s!==!1&&(bf(i,{ignoreWhitespace:r,checkChildren:e})||(s=!1))}),s}return!1}function X8(t){return t instanceof me}var Q8=class Z8{constructor(e){this.position=e}static fromJSON(e){return new Z8(e.position)}toJSON(){return{position:this.position}}};function AL(t,e){const r=e.mapping.mapResult(t.position);return{position:new Q8(r.pos),mapResult:r}}function jL(t){return new Q8(t)}function RL(t,e,r){var n;const{selection:s}=e;let i=null;if(P8(s)&&(i=s.$cursor),i){const a=(n=t.storedMarks)!=null?n:i.marks();return i.parent.type.allowsMarkType(r)&&(!!r.isInSet(a)||!a.some(u=>u.type.excludes(r)))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let u=a.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(r):!1;return t.doc.nodesBetween(a.pos,l.pos,(c,d,h)=>{if(u)return!1;if(c.isInline){const p=!h||h.type.allowsMarkType(r),m=!!r.isInSet(c.marks)||!c.marks.some(y=>y.type.excludes(r));u=p&&m}return!u}),u})}var _L=(t,e={})=>({tr:r,state:n,dispatch:s})=>{const{selection:i}=r,{empty:o,ranges:a}=i,l=Hs(t,n.schema);if(s)if(o){const u=H8(n,l);r.addStoredMark(l.create({...u,...e}))}else a.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;n.doc.nodesBetween(c,d,(h,p)=>{const m=Math.max(p,c),y=Math.min(p+h.nodeSize,d);h.marks.find(v=>v.type===l)?h.marks.forEach(v=>{l===v.type&&r.addMark(m,y,l.create({...v.attrs,...e}))}):r.addMark(m,y,l.create(e))})});return RL(n,r,l)},OL=(t,e)=>({tr:r})=>(r.setMeta(t,e),!0),DL=(t,e={})=>({state:r,dispatch:n,chain:s})=>{const i=_t(t,r.schema);let o;return r.selection.$anchor.sameParent(r.selection.$head)&&(o=r.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>vx(i,{...o,...e})(r)?!0:a.clearNodes()).command(({state:a})=>vx(i,{...o,...e})(a,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},IL=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,s=vo(t,0,n.content.size),i=me.create(n,s);e.setSelection(i)}return!0},zL=(t,e)=>({tr:r,state:n,dispatch:s})=>{const{selection:i}=n;let o,a;return typeof e=="number"?(o=e,a=e):e&&"from"in e&&"to"in e?(o=e.from,a=e.to):(o=i.from,a=i.to),s&&r.doc.nodesBetween(o,a,(l,u)=>{l.isText||r.setNodeMarkup(u,void 0,{...l.attrs,dir:t})}),!0},LL=t=>({tr:e,dispatch:r})=>{if(r){const{doc:n}=e,{from:s,to:i}=typeof t=="number"?{from:t,to:t}:t,o=Te.atStart(n).from,a=Te.atEnd(n).to,l=vo(s,o,a),u=vo(i,o,a),c=Te.create(n,l,u);e.setSelection(c)}return!0},PL=t=>({state:e,dispatch:r})=>{const n=_t(t,e.schema);return RD(n)(e,r)};function ib(t,e){const r=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(r){const n=r.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(n)}}var $L=({keepMarks:t=!0}={})=>({tr:e,state:r,dispatch:n,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,u=s.extensionManager.attributes,c=$d(u,a.node().type.name,a.node().attrs);if(i instanceof me&&i.node.isBlock)return!a.parentOffset||!Ms(o,a.pos)?!1:(n&&(t&&ib(r,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:fL(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:c}]:void 0,m=Ms(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&Ms(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:c}]:void 0),n){if(m&&(i instanceof Te&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const y=e.mapping.map(a.before()),x=e.doc.resolve(y);a.node(-1).canReplaceWith(x.index(),x.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}t&&ib(r,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},BL=(t,e={})=>({tr:r,state:n,dispatch:s,editor:i})=>{var o;const a=_t(t,n.schema),{$from:l,$to:u}=n.selection,c=n.selection.node;if(c&&c.isBlock||l.depth<2||!l.sameParent(u))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let v=K.empty;const w=l.index(-1)?1:l.index(-2)?2:3;for(let _=l.depth-w;_>=l.depth-3;_-=1)v=K.from(l.node(_).copy(v));const k=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,E={...$d(h,l.node().type.name,l.node().attrs),...e},M=((o=a.contentMatch.defaultType)==null?void 0:o.createAndFill(E))||void 0;v=v.append(K.from(a.createAndFill(null,M)||void 0));const j=l.before(l.depth-(w-1));r.replace(j,l.after(-k),new re(v,4-w,0));let N=-1;r.doc.nodesBetween(j,r.doc.content.size,(_,L)=>{if(N>-1)return!1;_.isTextblock&&_.content.size===0&&(N=L+1)}),N>-1&&r.setSelection(Te.near(r.doc.resolve(N))),r.scrollIntoView()}return!0}const p=u.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...$d(h,d.type.name,d.attrs),...e},y={...$d(h,l.node().type.name,l.node().attrs),...e};r.delete(l.pos,u.pos);const x=p?[{type:a,attrs:m},{type:p,attrs:y}]:[{type:a,attrs:m}];if(!Ms(r.doc,l.pos,2))return!1;if(s){const{selection:v,storedMarks:w}=n,{splittableMarks:k}=i.extensionManager,E=w||v.$to.parentOffset&&v.$from.marks();if(r.split(l.pos,2,x).scrollIntoView(),!E||!s)return!0;const M=E.filter(j=>k.includes(j.type.name));r.ensureMarks(M)}return!0},Vp=(t,e)=>{const r=xf(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(Math.max(0,r.pos-1)).before(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Wi(t.doc,r.pos)&&t.join(r.pos),!0},Wp=(t,e)=>{const r=xf(o=>o.type===e)(t.selection);if(!r)return!0;const n=t.doc.resolve(r.start).after(r.depth);if(n===void 0)return!0;const s=t.doc.nodeAt(n);return r.node.type===(s==null?void 0:s.type)&&Wi(t.doc,n)&&t.join(n),!0},FL=(t,e,r,n={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:u,can:c})=>{const{extensions:d,splittableMarks:h}=s.extensionManager,p=_t(t,o.schema),m=_t(e,o.schema),{selection:y,storedMarks:x}=o,{$from:v,$to:w}=y,k=v.blockRange(w),E=x||y.$to.parentOffset&&y.$from.marks();if(!k)return!1;const M=xf(j=>sb(j.type.name,d))(y);if(k.depth>=1&&M&&k.depth-M.depth<=1){if(M.node.type===p)return u.liftListItem(m);if(sb(M.node.type.name,d)&&p.validContent(M.node.content)&&a)return l().command(()=>(i.setNodeMarkup(M.pos,p),!0)).command(()=>Vp(i,p)).command(()=>Wp(i,p)).run()}return!r||!E||!a?l().command(()=>c().wrapInList(p,n)?!0:u.clearNodes()).wrapInList(p,n).command(()=>Vp(i,p)).command(()=>Wp(i,p)).run():l().command(()=>{const j=c().wrapInList(p,n),N=E.filter(_=>h.includes(_.type.name));return i.ensureMarks(N),j?!0:u.clearNodes()}).wrapInList(p,n).command(()=>Vp(i,p)).command(()=>Wp(i,p)).run()},HL=(t,e={},r={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:i=!1}=r,o=Hs(t,n.schema);return $1(n,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},UL=(t,e,r={})=>({state:n,commands:s})=>{const i=_t(t,n.schema),o=_t(e,n.schema),a=Bi(n,i,r);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...r})},VL=(t,e={})=>({state:r,commands:n})=>{const s=_t(t,r.schema);return Bi(r,s,e)?n.lift(s):n.wrapIn(s,e)},WL=()=>({state:t,dispatch:e})=>{const r=t.plugins;for(let n=0;n<r.length;n+=1){const s=r[n];let i;if(s.spec.isInputRules&&(i=s.getState(t))){if(e){const o=t.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,t.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},qL=()=>({tr:t,dispatch:e})=>{const{selection:r}=t,{empty:n,ranges:s}=r;return n||e&&s.forEach(i=>{t.removeMark(i.$from.pos,i.$to.pos)}),!0},KL=(t,e={})=>({tr:r,state:n,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=r,l=Hs(t,n.schema),{$from:u,empty:c,ranges:d}=a;if(!s)return!0;if(c&&o){let{from:h,to:p}=a;const m=(i=u.marks().find(x=>x.type===l))==null?void 0:i.attrs,y=Yv(u,l,m);y&&(h=y.from,p=y.to),r.removeMark(h,p,l)}else d.forEach(h=>{r.removeMark(h.$from.pos,h.$to.pos,l)});return r.removeStoredMark(l),!0},GL=t=>({tr:e,state:r,dispatch:n})=>{const{selection:s}=r;let i,o;return typeof t=="number"?(i=t,o=t):t&&"from"in t&&"to"in t?(i=t.from,o=t.to):(i=s.from,o=s.to),n&&e.doc.nodesBetween(i,o,(a,l)=>{if(a.isText)return;const u={...a.attrs};delete u.dir,e.setNodeMarkup(l,void 0,u)}),!0},JL=(t,e={})=>({tr:r,state:n,dispatch:s})=>{let i=null,o=null;const a=yf(typeof t=="string"?t:t.name,n.schema);if(!a)return!1;a==="node"&&(i=_t(t,n.schema)),a==="mark"&&(o=Hs(t,n.schema));let l=!1;return r.selection.ranges.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;let h,p,m,y;r.selection.empty?n.doc.nodesBetween(c,d,(x,v)=>{i&&i===x.type&&(l=!0,m=Math.max(v,c),y=Math.min(v+x.nodeSize,d),h=v,p=x)}):n.doc.nodesBetween(c,d,(x,v)=>{v<c&&i&&i===x.type&&(l=!0,m=Math.max(v,c),y=Math.min(v+x.nodeSize,d),h=v,p=x),v>=c&&v<=d&&(i&&i===x.type&&(l=!0,s&&r.setNodeMarkup(v,void 0,{...x.attrs,...e})),o&&x.marks.length&&x.marks.forEach(w=>{if(o===w.type&&(l=!0,s)){const k=Math.max(v,c),E=Math.min(v+x.nodeSize,d);r.addMark(k,E,o.create({...w.attrs,...e}))}}))}),p&&(h!==void 0&&s&&r.setNodeMarkup(h,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(x=>{o===x.type&&s&&r.addMark(m,y,o.create({...x.attrs,...e}))}))}),l},YL=(t,e={})=>({state:r,dispatch:n})=>{const s=_t(t,r.schema);return TD(s,e)(r,n)},XL=(t,e={})=>({state:r,dispatch:n})=>{const s=_t(t,r.schema);return CD(s,e)(r,n)},QL=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const r=this.callbacks[t];return r&&r.forEach(n=>n.apply(this,e)),this}off(t,e){const r=this.callbacks[t];return r&&(e?this.callbacks[t]=r.filter(n=>n!==e):delete this.callbacks[t]),this}once(t,e){const r=(...n)=>{this.off(t,r),e.apply(this,n)};return this.on(t,r)}removeAllListeners(){this.callbacks={}}},ll=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},ZL=(t,e)=>{if(Jv(e))return e.exec(t);const r=e(t);if(!r)return null;const n=[r.text];return n.index=r.index,n.input=t,n.data=r.data,r.replaceWith&&(r.text.includes(r.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(r.replaceWith)),n};function ld(t){var e;const{editor:r,from:n,to:s,text:i,rules:o,plugin:a}=t,{view:l}=r;if(l.composing)return!1;const u=l.state.doc.resolve(n);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(h=>h.type.spec.code))return!1;let c=!1;const d=CL(u)+i;return o.forEach(h=>{if(c)return;const p=ZL(d,h.find);if(!p)return;const m=l.state.tr,y=gf({state:l.state,transaction:m}),x={from:n-(p[0].length-i.length),to:s},{commands:v,chain:w,can:k}=new vf({editor:r,state:y});h.handler({state:y,range:x,match:p,commands:v,chain:w,can:k})===null||!m.steps.length||(h.undoable&&m.setMeta(a,{transform:m,from:n,to:s,text:i}),l.dispatch(m),c=!0)}),c}function eP(t){const{editor:e,rules:r}=t,n=new vt({state:{init(){return null},apply(s,i,o){const a=s.getMeta(n);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:c}=l;typeof c=="string"?c=c:c=Qv(K.from(c),o.schema);const{from:d}=l,h=d+c.length;ld({editor:e,from:d,to:h,text:c,rules:r,plugin:n})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return ld({editor:e,from:i,to:o,text:a,rules:r,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&ld({editor:e,from:i.pos,to:i.pos,text:"",rules:r,plugin:n})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?ld({editor:e,from:o.pos,to:o.pos,text:`
`,rules:r,plugin:n}):!1}},isInputRules:!0});return n}function tP(t){return Object.prototype.toString.call(t).slice(8,-1)}function ud(t){return tP(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function ek(t,e){const r={...t};return ud(t)&&ud(e)&&Object.keys(e).forEach(n=>{ud(e[n])&&ud(t[n])?r[n]=ek(t[n],e[n]):r[n]=e[n]}),r}var ey=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ue(pe(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ue(pe(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>ek(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},ds=class tk extends ey{constructor(){super(...arguments),this.type="mark"}static create(e={}){const r=typeof e=="function"?e():e;return new tk(r)}static handleExit({editor:e,mark:r}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(u=>(u==null?void 0:u.type.name)===r.name))return!1;const l=o.find(u=>(u==null?void 0:u.type.name)===r.name);return l&&n.removeStoredMark(l),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function rP(t){return typeof t=="number"}var nP=class{constructor(t){this.find=t.find,this.handler=t.handler}},sP=(t,e,r)=>{if(Jv(e))return[...t.matchAll(e)];const n=e(t,r);return n?n.map(s=>{const i=[s.text];return i.index=s.index,i.input=t,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function iP(t){const{editor:e,state:r,from:n,to:s,rule:i,pasteEvent:o,dropEvent:a}=t,{commands:l,chain:u,can:c}=new vf({editor:e,state:r}),d=[];return r.doc.nodesBetween(n,s,(p,m)=>{var y,x,v,w,k;if((x=(y=p.type)==null?void 0:y.spec)!=null&&x.code||!(p.isText||p.isTextblock||p.isInline))return;const E=(k=(w=(v=p.content)==null?void 0:v.size)!=null?w:p.nodeSize)!=null?k:0,M=Math.max(n,m),j=Math.min(s,m+E);if(M>=j)return;const N=p.isText?p.text||"":p.textBetween(M-m,j-m,void 0,"");sP(N,i.find,o).forEach(L=>{if(L.index===void 0)return;const V=M+L.index+1,ee=V+L[0].length,P={from:r.tr.mapping.map(V),to:r.tr.mapping.map(ee)},D=i.handler({state:r,range:P,match:L,commands:l,chain:u,can:c,pasteEvent:o,dropEvent:a});d.push(D)})}),d.every(p=>p!==null)}var cd=null,oP=t=>{var e;const r=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=r.clipboardData)==null||e.setData("text/html",t),r};function aP(t){const{editor:e,rules:r}=t;let n=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:c,from:d,to:h,rule:p,pasteEvt:m})=>{const y=c.tr,x=gf({state:c,transaction:y});if(!(!iP({editor:e,state:x,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return r.map(c=>new vt({view(d){const h=m=>{var y;n=(y=d.dom.parentElement)!=null&&y.contains(m.target)?d.dom.parentElement:null,n&&(cd=e)},p=()=>{cd&&(cd=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=n===d.dom.parentElement,a=h,!i){const p=cd;p!=null&&p.isEditable&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var p;const m=(p=h.clipboardData)==null?void 0:p.getData("text/html");return o=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!s,x=m.getMeta("uiEvent")==="drop"&&!i,v=m.getMeta("applyPasteRules"),w=!!v;if(!y&&!x&&!w)return;if(w){let{text:M}=v;typeof M=="string"?M=M:M=Qv(K.from(M),p.schema);const{from:j}=v,N=j+M.length,_=oP(M);return l({rule:c,state:p,from:j,to:{b:N},pasteEvt:_})}const k=h.doc.content.findDiffStart(p.doc.content),E=h.doc.content.findDiffEnd(p.doc.content);if(!(!rP(k)||!E||k===E.b))return l({rule:c,state:p,from:k,to:E,pasteEvt:o})}}))}var wf=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=q8(t),this.schema=yL(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ad(e.name,this.schema)},n=pe(e,"addCommands",r);return n?{...t,...n()}:t},{})}get plugins(){const{editor:t}=this;return H0([...this.extensions].reverse()).flatMap(n=>{const s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ad(n.name,this.schema)},i=[],o=pe(n,"addKeyboardShortcuts",s);let a={};if(n.type==="mark"&&pe(n,"exitable",s)&&(a.ArrowRight=()=>ds.handleExit({editor:t,mark:n})),o){const h=Object.fromEntries(Object.entries(o()).map(([p,m])=>[p,()=>m({editor:t})]));a={...a,...h}}const l=wz(a);i.push(l);const u=pe(n,"addInputRules",s);if(nb(n,t.options.enableInputRules)&&u){const h=u();if(h&&h.length){const p=eP({editor:t,rules:h}),m=Array.isArray(p)?p:[p];i.push(...m)}}const c=pe(n,"addPasteRules",s);if(nb(n,t.options.enablePasteRules)&&c){const h=c();if(h&&h.length){const p=aP({editor:t,rules:h});i.push(...p)}}const d=pe(n,"addProseMirrorPlugins",s);if(d){const h=d();i.push(...h)}return i})}get attributes(){return W8(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=qa(this.extensions);return Object.fromEntries(e.filter(r=>!!pe(r,"addNodeView")).map(r=>{const n=this.attributes.filter(l=>l.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:_t(r.name,this.schema)},i=pe(r,"addNodeView",s);if(!i)return[];const o=i();if(!o)return[];const a=(l,u,c,d,h)=>{const p=Xu(l,n);return o({node:l,view:u,getPos:c,decorations:d,innerDecorations:h,editor:t,extension:r,HTMLAttributes:p})};return[r.name,a]}))}dispatchTransaction(t){const{editor:e}=this;return H0([...this.extensions].reverse()).reduceRight((n,s)=>{const i={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:ad(s.name,this.schema)},o=pe(s,"dispatchTransaction",i);return o?a=>{o.call(i,{transaction:a,next:n})}:n},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=qa(this.extensions);return Object.fromEntries(e.filter(r=>!!pe(r,"addMarkView")).map(r=>{const n=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Hs(r.name,this.schema)},i=pe(r,"addMarkView",s);if(!i)return[];const o=(a,l,u)=>{const c=Xu(a,n);return i()({mark:a,view:l,inline:u,editor:t,extension:r,HTMLAttributes:c,updateAttributes:d=>{kP(a,t,d)}})};return[r.name,o]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var r;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:ad(e.name,this.schema)};e.type==="mark"&&((r=Ue(pe(e,"keepOnSplit",n)))==null||r)&&this.splittableMarks.push(e.name);const s=pe(e,"onBeforeCreate",n),i=pe(e,"onCreate",n),o=pe(e,"onUpdate",n),a=pe(e,"onSelectionUpdate",n),l=pe(e,"onTransaction",n),u=pe(e,"onFocus",n),c=pe(e,"onBlur",n),d=pe(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};wf.resolve=q8;wf.sort=H0;wf.flatten=Xv;var lP={};Gv(lP,{ClipboardTextSerializer:()=>nk,Commands:()=>sk,Delete:()=>ik,Drop:()=>ok,Editable:()=>ak,FocusEvents:()=>uk,Keymap:()=>ck,Paste:()=>dk,Tabindex:()=>hk,TextDirection:()=>fk,focusEventsPluginKey:()=>lk});var qe=class rk extends ey{constructor(){super(...arguments),this.type="extension"}static create(e={}){const r=typeof e=="function"?e():e;return new rk(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}},nk=qe.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new vt({key:new Bt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:r}=t,{doc:n,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(c=>c.$from.pos)),a=Math.max(...i.map(c=>c.$to.pos)),l=G8(r);return K8(n,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),sk=qe.create({name:"commands",addCommands(){return{...z8}}}),ik=qe.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var r,n,s;const i=()=>{var o,a,l,u;if((u=(l=(a=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:a.filterTransaction)==null?void 0:l.call(a,t))!=null?u:t.getMeta("y-sync$"))return;const c=U8(t.before,[t,...e]);Y8(c).forEach(p=>{c.mapping.mapResult(p.oldRange.from).deletedAfter&&c.mapping.mapResult(p.oldRange.to).deletedBefore&&c.before.nodesBetween(p.oldRange.from,p.oldRange.to,(m,y)=>{const x=y+m.nodeSize-2,v=p.oldRange.from<=y&&x<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:m,from:y,to:x,newFrom:c.mapping.map(y),newTo:c.mapping.map(x),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:c})})});const h=c.mapping;c.steps.forEach((p,m)=>{var y,x;if(p instanceof In){const v=h.slice(m).map(p.from,-1),w=h.slice(m).map(p.to),k=h.invert().map(v,-1),E=h.invert().map(w),M=(y=c.doc.nodeAt(v-1))==null?void 0:y.marks.some(N=>N.eq(p.mark)),j=(x=c.doc.nodeAt(w))==null?void 0:x.marks.some(N=>N.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:k,to:E},newRange:{from:v,to:w},partial:!!(j||M),editor:this.editor,transaction:t,combinedTransform:c})}})};(s=(n=(r=this.editor.options.coreExtensionOptions)==null?void 0:r.delete)==null?void 0:n.async)==null||s?setTimeout(i,0):i()}}),ok=qe.create({name:"drop",addProseMirrorPlugins(){return[new vt({key:new Bt("tiptapDrop"),props:{handleDrop:(t,e,r,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:r,moved:n})}}})]}}),ak=qe.create({name:"editable",addProseMirrorPlugins(){return[new vt({key:new Bt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),lk=new Bt("focusEvents"),uk=qe.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new vt({key:lk,props:{handleDOMEvents:{focus:(e,r)=>{t.isFocused=!0;const n=t.state.tr.setMeta("focus",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,r)=>{t.isFocused=!1;const n=t.state.tr.setMeta("blur",{event:r}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),ck=qe.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:u}=a,{empty:c,$anchor:d}=l,{pos:h,parent:p}=d,m=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,y=m.parent.type.spec.isolating,x=d.pos-d.parentOffset,v=y&&m.parent.childCount===1?x===d.pos:Re.atStart(u).from===h;return!c||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},i={...n,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return F0()||F8()?i:s},addProseMirrorPlugins(){return[new vt({key:new Bt("clearDocument"),appendTransaction:(t,e,r)=>{if(t.some(y=>y.getMeta("composition")))return;const n=t.some(y=>y.docChanged)&&!e.doc.eq(r.doc),s=t.some(y=>y.getMeta("preventClearDocument"));if(!n||s)return;const{empty:i,from:o,to:a}=e.selection,l=Re.atStart(e.doc).from,u=Re.atEnd(e.doc).to;if(i||!(o===l&&a===u)||!bf(r.doc))return;const h=r.tr,p=gf({state:r,transaction:h}),{commands:m}=new vf({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),dk=qe.create({name:"paste",addProseMirrorPlugins(){return[new vt({key:new Bt("tiptapPaste"),props:{handlePaste:(t,e,r)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:r})}}})]}}),hk=qe.create({name:"tabindex",addProseMirrorPlugins(){return[new vt({key:new Bt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),fk=qe.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=qa(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const r=e.getAttribute("dir");return r&&(r==="ltr"||r==="rtl"||r==="auto")?r:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new vt({key:new Bt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),uP=class Il{constructor(e,r,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=r,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let r=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}r=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:r,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),r=this.resolvedPos.doc.resolve(e);return new Il(r,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Il(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Il(e,this.editor)}get children(){const e=[];return this.node.content.forEach((r,n)=>{const s=r.isBlock&&!r.isTextblock,i=r.isAtom&&!r.isText,o=r.isInline,a=this.pos+n+(i?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(a);if(!s&&!o&&l.depth<=this.depth)return;const u=new Il(l,this.editor,s,s||o?r:null);s&&(u.actualDepth=this.depth+1),e.push(u)}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,r={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===e)if(Object.keys(r).length>0){const i=s.node.attrs,o=Object.keys(r);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==r[l])break}}else n=s;s=s.parent}return n}querySelector(e,r={}){return this.querySelectorAll(e,r,!0)[0]||null}querySelectorAll(e,r={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(r);return this.children.forEach(o=>{n&&s.length>0||(o.node.type.name===e&&i.every(l=>r[l]===o.node.attrs[l])&&s.push(o),!(n&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,r,n))))}),s}setAttribute(e){const{tr:r}=this.editor.state;r.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(r)}},cP=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function dP(t,e,r){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var hP=class extends QL{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:AL,createMappablePosition:jL},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:s,moved:i})=>this.options.onDrop(n,s,i)),this.on("paste",({event:n,slice:s})=>this.options.onPaste(n,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),r=$8(e,this.options.autofocus);this.editorState=ba.create({doc:e,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=dP(cP,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const r=V8(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let r=e;if([].concat(t).forEach(s=>{const i=typeof s=="string"?`${s}$`:s.key;r=r.filter(o=>!o.key.startsWith(i))}),e.length===r.length)return;const n=this.state.reconfigure({plugins:r});return this.view.updateState(n),n}createExtensionManager(){var t,e;const n=[...this.options.enableCoreExtensions?[ak,nk.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),sk,uk,ck,hk,ok,dk,ik,fk.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new wf(n,this)}createCommandManager(){this.commandManager=new vf({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=P1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),t=P1(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:r}=this.options,n=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=r?this.extensionManager.dispatchTransaction(n):n;this.editorView=new D8(t,{...e,attributes:{role:"textbox",...e==null?void 0:e.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.prependClass(),this.injectCSS();const o=this.view.dom;o.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(u=>{var c;return(c=this.capturedTransaction)==null?void 0:c.step(u)});return}const{state:e,transactions:r}=this.state.applyTransaction(t),n=!this.state.selection.eq(e.selection),s=r.includes(t),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:r.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:t});const o=r.findLast(u=>u.getMeta("focus")||u.getMeta("blur")),a=o==null?void 0:o.getMeta("focus"),l=o==null?void 0:o.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:o}),l&&this.emit("blur",{editor:this,event:l.event,transaction:o}),!(t.getMeta("preventUpdate")||!r.some(u=>u.docChanged)||i.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:r.slice(1)})}getAttributes(t){return J8(this.state,t)}isActive(t,e){const r=typeof t=="string"?t:null,n=typeof t=="string"?e:t;return EL(this.state,r,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Qv(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:r={}}=t||{};return bL(this.state.doc,{blockSeparator:e,textSerializers:{...G8(this.schema),...r}})}get isEmpty(){return bf(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelector(t,e))||null}$nodes(t,e){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new uP(e,this)}get $doc(){return this.$pos(0)}};function Ka(t){return new ll({find:t.find,handler:({state:e,range:r,match:n})=>{const s=Ue(t.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:i}=e,o=n[n.length-1],a=n[0];if(o){const l=a.search(/\S/),u=r.from+a.indexOf(o),c=u+o.length;if(Zv(r.from,r.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===t.type&&y!==p.mark.type)).filter(p=>p.to>u).length)return null;c<r.to&&i.delete(c,r.to),u>r.from&&i.delete(r.from+l,u);const h=r.from+l+o.length;i.addMark(r.from+l,h,t.type.create(s||{})),i.removeStoredMark(t.type)}},undoable:t.undoable})}function pk(t){return new ll({find:t.find,handler:({state:e,range:r,match:n})=>{const s=Ue(t.getAttributes,void 0,n)||{},{tr:i}=e,o=r.from;let a=r.to;const l=t.type.create(s);if(n[1]){const u=n[0].lastIndexOf(n[1]);let c=o+u;c>a?c=a:a=c+n[1].length;const d=n[0][n[0].length-1];i.insertText(d,o+n[0].length-1),i.replaceWith(c,a,l)}else if(n[0]){const u=t.type.isInline?o:o-1;i.insert(u,t.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()},undoable:t.undoable})}function B1(t){return new ll({find:t.find,handler:({state:e,range:r,match:n})=>{const s=e.doc.resolve(r.from),i=Ue(t.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(r.from,r.to).setBlockType(r.from,r.from,t.type,i)},undoable:t.undoable})}function Ga(t){return new ll({find:t.find,handler:({state:e,range:r,match:n,chain:s})=>{const i=Ue(t.getAttributes,void 0,n)||{},o=e.tr.delete(r.from,r.to),l=o.doc.resolve(r.from).blockRange(),u=l&&_v(l,t.type,i);if(!u)return null;if(o.wrap(l,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:p}=t.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(x=>p.includes(x.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const c=o.doc.resolve(r.from-1).nodeBefore;c&&c.type===t.type&&Wi(o.doc,r.from-1)&&(!t.joinPredicate||t.joinPredicate(n,c))&&o.join(r.from-1)},undoable:t.undoable})}var fP=t=>"touches"in t,pP=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.lastEditableState=void 0,this.handleMap=new Map,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.clientX-this.startX,u=a.clientY-this.startY;this.handleResize(l,u)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const l=a.touches[0];if(!l)return;const u=l.clientX-this.startX,c=l.clientY-this.startY;this.handleResize(u,c)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,l=this.element.offsetHeight;this.onCommit(a,l),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,r,n,s,i,o;this.node=t.node,this.editor=t.editor,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(r=t.options)!=null&&r.max&&(this.maxSize=t.options.max),(n=t==null?void 0:t.options)!=null&&n.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(i=t.options)!=null&&i.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),(o=t.options)!=null&&o.createCustomHandle&&(this.createCustomHandle=t.options.createCustomHandle),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles(),this.editor.on("update",this.handleEditorUpdate.bind(this))}get dom(){return this.container}get contentDOM(){var t;return(t=this.contentElement)!=null?t:null}handleEditorUpdate(){const t=this.editor.isEditable;t!==this.lastEditableState&&(this.lastEditableState=t,t?t&&this.handleMap.size===0&&this.attachHandles():this.removeHandles())}update(t,e,r){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,r):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.editor.off("update",this.handleEditorUpdate.bind(this)),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const r=e.includes("top"),n=e.includes("bottom"),s=e.includes("left"),i=e.includes("right");r&&(t.style.top="0"),n&&(t.style.bottom="0"),s&&(t.style.left="0"),i&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{let e;this.createCustomHandle?e=this.createCustomHandle(t):e=this.createHandle(t),e instanceof HTMLElement||(console.warn(`[ResizableNodeView] createCustomHandle("${t}") did not return an HTMLElement. Falling back to default handle.`),e=this.createHandle(t)),this.createCustomHandle||this.positionHandle(e,t),e.addEventListener("mousedown",r=>this.handleResizeStart(r,t)),e.addEventListener("touchstart",r=>this.handleResizeStart(r,t)),this.handleMap.set(t,e),this.wrapper.appendChild(e)})}removeHandles(){this.handleMap.forEach(t=>t.remove()),this.handleMap.clear()}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,fP(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const r=this.preserveAspectRatio||this.isShiftKeyPressed,{width:n,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),i=this.applyConstraints(n,s,r);this.element.style.width=`${i.width}px`,this.element.style.height=`${i.height}px`,this.onResize&&this.onResize(i.width,i.height)}calculateNewDimensions(t,e,r){let n=this.startWidth,s=this.startHeight;const i=t.includes("right"),o=t.includes("left"),a=t.includes("bottom"),l=t.includes("top");return i?n=this.startWidth+e:o&&(n=this.startWidth-e),a?s=this.startHeight+r:l&&(s=this.startHeight-r),(t==="right"||t==="left")&&(n=this.startWidth+(i?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(a?r:-r)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(n,s,t):{width:n,height:s}}applyConstraints(t,e,r){var n,s,i,o;if(!r){let u=Math.max(this.minSize.width,t),c=Math.max(this.minSize.height,e);return(n=this.maxSize)!=null&&n.width&&(u=Math.min(this.maxSize.width,u)),(s=this.maxSize)!=null&&s.height&&(c=Math.min(this.maxSize.height,c)),{width:u,height:c}}let a=t,l=e;return a<this.minSize.width&&(a=this.minSize.width,l=a/this.aspectRatio),l<this.minSize.height&&(l=this.minSize.height,a=l*this.aspectRatio),(i=this.maxSize)!=null&&i.width&&a>this.maxSize.width&&(a=this.maxSize.width,l=a/this.aspectRatio),(o=this.maxSize)!=null&&o.height&&l>this.maxSize.height&&(l=this.maxSize.height,a=l*this.aspectRatio),{width:a,height:l}}applyAspectRatio(t,e,r){const n=r==="left"||r==="right",s=r==="top"||r==="bottom";return n?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function mP(t,e){const{selection:r}=t,{$from:n}=r;if(r instanceof me){const i=n.index();return n.parent.canReplaceWith(i,i+1,e)}let s=n.depth;for(;s>=0;){const i=n.index(s);if(n.node(s).contentMatchAt(i).matchType(e))return!0;s-=1}return!1}var gP={};Gv(gP,{createAtomBlockMarkdownSpec:()=>vP,createBlockMarkdownSpec:()=>yP,createInlineMarkdownSpec:()=>wP,parseAttributes:()=>ty,parseIndentedBlocks:()=>F1,renderNestedMarkdownContent:()=>ny,serializeAttributes:()=>ry});function ty(t){if(!(t!=null&&t.trim()))return{};const e={},r=[],n=t.replace(/["']([^"']*)["']/g,u=>(r.push(u),`__QUOTED_${r.length-1}__`)),s=n.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const u=s.map(c=>c.trim().slice(1));e.class=u.join(" ")}const i=n.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(e.id=i[1]);const o=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(n.matchAll(o)).forEach(([,u,c])=>{var d;const h=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),p=r[h];p&&(e[u]=p.slice(1,-1))});const l=n.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return l&&l.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(e[c]=!0)}),e}function ry(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(n=>e.push(`.${n}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([r,n])=>{r==="class"||r==="id"||(n===!0?e.push(r):n!==!1&&n!=null&&e.push(`${r}="${String(n)}"`))}),e.join(" ")}function vP(t){const{nodeName:e,name:r,parseAttributes:n=ty,serializeAttributes:s=ry,defaultAttributes:i={},requiredAttributes:o=[],allowedAttributes:a}=t,l=r||e,u=c=>{if(!a)return c;const d={};return a.forEach(h=>{h in c&&(d[h]=c[h])}),d};return{parseMarkdown:(c,d)=>{const h={...i,...c.attributes};return d.createNode(e,h,[])},markdownTokenizer:{name:e,level:"block",start(c){var d;const h=new RegExp(`^:::${l}(?:\\s|$)`,"m"),p=(d=c.match(h))==null?void 0:d.index;return p!==void 0?p:-1},tokenize(c,d,h){const p=new RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),m=c.match(p);if(!m)return;const y=m[1]||"",x=n(y);if(!o.find(w=>!(w in x)))return{type:e,raw:m[0],attributes:x}}},renderMarkdown:c=>{const d=u(c.attrs||{}),h=s(d),p=h?` {${h}}`:"";return`:::${l}${p} :::`}}}function yP(t){const{nodeName:e,name:r,getContent:n,parseAttributes:s=ty,serializeAttributes:i=ry,defaultAttributes:o={},content:a="block",allowedAttributes:l}=t,u=r||e,c=d=>{if(!l)return d;const h={};return l.forEach(p=>{p in d&&(h[p]=d[p])}),h};return{parseMarkdown:(d,h)=>{let p;if(n){const y=n(d);p=typeof y=="string"?[{type:"text",text:y}]:y}else a==="block"?p=h.parseChildren(d.tokens||[]):p=h.parseInline(d.tokens||[]);const m={...o,...d.attributes};return h.createNode(e,m,p)},markdownTokenizer:{name:e,level:"block",start(d){var h;const p=new RegExp(`^:::${u}`,"m"),m=(h=d.match(p))==null?void 0:h.index;return m!==void 0?m:-1},tokenize(d,h,p){var m;const y=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),x=d.match(y);if(!x)return;const[v,w=""]=x,k=s(w);let E=1;const M=v.length;let j="";const N=/^:::([\w-]*)(\s.*)?/gm,_=d.slice(M);for(N.lastIndex=0;;){const L=N.exec(_);if(L===null)break;const V=L.index,ee=L[1];if(!((m=L[2])!=null&&m.endsWith(":::"))){if(ee)E+=1;else if(E-=1,E===0){const P=_.slice(0,V);j=P.trim();const D=d.slice(0,M+V+L[0].length);let B=[];if(j)if(a==="block")for(B=p.blockTokens(P),B.forEach(I=>{I.text&&(!I.tokens||I.tokens.length===0)&&(I.tokens=p.inlineTokens(I.text))});B.length>0;){const I=B[B.length-1];if(I.type==="paragraph"&&(!I.text||I.text.trim()===""))B.pop();else break}else B=p.inlineTokens(j);return{type:e,raw:D,attributes:k,content:j,tokens:B}}}}}},renderMarkdown:(d,h)=>{const p=c(d.attrs||{}),m=i(p),y=m?` {${m}}`:"",x=h.renderChildren(d.content||[],`

`);return`:::${u}${y}

${x}

:::`}}}function xP(t){if(!t.trim())return{};const e={},r=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let n=r.exec(t);for(;n!==null;){const[,s,i,o]=n;e[s]=i||o,n=r.exec(t)}return e}function bP(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,r])=>`${e}="${r}"`).join(" ")}function wP(t){const{nodeName:e,name:r,getContent:n,parseAttributes:s=xP,serializeAttributes:i=bP,defaultAttributes:o={},selfClosing:a=!1,allowedAttributes:l}=t,u=r||e,c=h=>{if(!l)return h;const p={};return l.forEach(m=>{const y=typeof m=="string"?m:m.name,x=typeof m=="string"?void 0:m.skipIfDefault;if(y in h){const v=h[y];if(x!==void 0&&v===x)return;p[y]=v}}),p},d=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(h,p)=>{const m={...o,...h.attributes};if(a)return p.createNode(e,m);const y=n?n(h):h.content||"";return y?p.createNode(e,m,[p.createTextNode(y)]):p.createNode(e,m,[])},markdownTokenizer:{name:e,level:"inline",start(h){const p=a?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),m=h.match(p),y=m==null?void 0:m.index;return y!==void 0?y:-1},tokenize(h,p,m){const y=a?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),x=h.match(y);if(!x)return;let v="",w="";if(a){const[,E]=x;w=E}else{const[,E,M]=x;w=E,v=M||""}const k=s(w.trim());return{type:e,raw:x[0],content:v.trim(),attributes:k}}},renderMarkdown:h=>{let p="";n?p=n(h):h.content&&h.content.length>0&&(p=h.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const m=c(h.attrs||{}),y=i(m),x=y?` ${y}`:"";return a?`[${u}${x}]`:`[${u}${x}]${p}[/${u}]`}}}function F1(t,e,r){var n,s,i,o;const a=t.split(`
`),l=[];let u="",c=0;const d=e.baseIndentSize||2;for(;c<a.length;){const h=a[c],p=h.match(e.itemPattern);if(!p){if(l.length>0)break;if(h.trim()===""){c+=1,u=`${u}${h}
`;continue}else return}const m=e.extractItemData(p),{indentLevel:y,mainContent:x}=m;u=`${u}${h}
`;const v=[x];for(c+=1;c<a.length;){const M=a[c];if(M.trim()===""){const N=a.slice(c+1).findIndex(V=>V.trim()!=="");if(N===-1)break;if((((s=(n=a[c+1+N].match(/^(\s*)/))==null?void 0:n[1])==null?void 0:s.length)||0)>y){v.push(M),u=`${u}${M}
`,c+=1;continue}else break}if((((o=(i=M.match(/^(\s*)/))==null?void 0:i[1])==null?void 0:o.length)||0)>y)v.push(M),u=`${u}${M}
`,c+=1;else break}let w;const k=v.slice(1);if(k.length>0){const M=k.map(j=>j.slice(y+d)).join(`
`);M.trim()&&(e.customNestedParser?w=e.customNestedParser(M):w=r.blockTokens(M))}const E=e.createToken(m,w);l.push(E)}if(l.length!==0)return{items:l,raw:u}}function ny(t,e,r,n){if(!t||!Array.isArray(t.content))return"";const s=typeof r=="function"?r(n):r,[i,...o]=t.content,a=e.renderChildren([i]),l=[`${s}${a}`];return o&&o.length>0&&o.forEach(u=>{const c=e.renderChildren([u]);if(c){const d=c.split(`
`).map(h=>h?e.indent(h):"").join(`
`);l.push(d)}}),l.join(`
`)}function kP(t,e,r={}){const{state:n}=e,{doc:s,tr:i}=n,o=t;s.descendants((a,l)=>{const u=i.mapping.map(l),c=i.mapping.map(l)+a.nodeSize;let d=null;if(a.marks.forEach(p=>{if(p!==o)return!1;d=p}),!d)return;let h=!1;if(Object.keys(r).forEach(p=>{r[p]!==d.attrs[p]&&(h=!0)}),h){const p=t.type.create({...t.attrs,...r});i.removeMark(u,c,t.type),i.addMark(u,c,p)}}),i.docChanged&&e.view.dispatch(i)}var mr=class mk extends ey{constructor(){super(...arguments),this.type="node"}static create(e={}){const r=typeof e=="function"?e():e;return new mk(r)}configure(e){return super.configure(e)}extend(e){const r=typeof e=="function"?e():e;return super.extend(r)}};function Lo(t){return new nP({find:t.find,handler:({state:e,range:r,match:n,pasteEvent:s})=>{const i=Ue(t.getAttributes,void 0,n,s);if(i===!1||i===null)return null;const{tr:o}=e,a=n[n.length-1],l=n[0];let u=r.to;if(a){const c=l.search(/\S/),d=r.from+l.indexOf(a),h=d+a.length;if(Zv(r.from,r.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>d).length)return null;h<r.to&&o.delete(h,r.to),d>r.from&&o.delete(r.from+c,d),u=r.from+c+a.length,o.addMark(r.from+c,u,t.type.create(i||{})),o.removeStoredMark(t.type)}}})}const{getOwnPropertyNames:SP,getOwnPropertySymbols:TP}=Object,{hasOwnProperty:CP}=Object.prototype;function qp(t,e){return function(n,s,i){return t(n,s,i)&&e(n,s,i)}}function dd(t){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,s);const{cache:i}=s,o=i.get(r),a=i.get(n);if(o&&a)return o===n&&a===r;i.set(r,n),i.set(n,r);const l=t(r,n,s);return i.delete(r),i.delete(n),l}}function EP(t){return t!=null?t[Symbol.toStringTag]:void 0}function ob(t){return SP(t).concat(TP(t))}const NP=Object.hasOwn||((t,e)=>CP.call(t,e));function Ho(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const MP="__v",AP="__o",jP="_owner",{getOwnPropertyDescriptor:ab,keys:lb}=Object;function RP(t,e){return t.byteLength===e.byteLength&&U0(new Uint8Array(t),new Uint8Array(e))}function _P(t,e,r){let n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function OP(t,e){return t.byteLength===e.byteLength&&U0(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function DP(t,e){return Ho(t.getTime(),e.getTime())}function IP(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function zP(t,e){return t===e}function ub(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.entries();let o,a,l=0;for(;(o=i.next())&&!o.done;){const u=e.entries();let c=!1,d=0;for(;(a=u.next())&&!a.done;){if(s[d]){d++;continue}const h=o.value,p=a.value;if(r.equals(h[0],p[0],l,d,t,e,r)&&r.equals(h[1],p[1],h[0],p[0],t,e,r)){c=s[d]=!0;break}d++}if(!c)return!1;l++}return!0}const LP=Ho;function PP(t,e,r){const n=lb(t);let s=n.length;if(lb(e).length!==s)return!1;for(;s-- >0;)if(!gk(t,e,r,n[s]))return!1;return!0}function Tl(t,e,r){const n=ob(t);let s=n.length;if(ob(e).length!==s)return!1;let i,o,a;for(;s-- >0;)if(i=n[s],!gk(t,e,r,i)||(o=ab(t,i),a=ab(e,i),(o||a)&&(!o||!a||o.configurable!==a.configurable||o.enumerable!==a.enumerable||o.writable!==a.writable)))return!1;return!0}function $P(t,e){return Ho(t.valueOf(),e.valueOf())}function BP(t,e){return t.source===e.source&&t.flags===e.flags}function cb(t,e,r){const n=t.size;if(n!==e.size)return!1;if(!n)return!0;const s=new Array(n),i=t.values();let o,a;for(;(o=i.next())&&!o.done;){const l=e.values();let u=!1,c=0;for(;(a=l.next())&&!a.done;){if(!s[c]&&r.equals(o.value,a.value,o.value,a.value,t,e,r)){u=s[c]=!0;break}c++}if(!u)return!1}return!0}function U0(t,e){let r=t.byteLength;if(e.byteLength!==r||t.byteOffset!==e.byteOffset)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function FP(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function gk(t,e,r,n){return(n===jP||n===AP||n===MP)&&(t.$$typeof||e.$$typeof)?!0:NP(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}const HP="[object ArrayBuffer]",UP="[object Arguments]",VP="[object Boolean]",WP="[object DataView]",qP="[object Date]",KP="[object Error]",GP="[object Map]",JP="[object Number]",YP="[object Object]",XP="[object RegExp]",QP="[object Set]",ZP="[object String]",e$={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},t$="[object URL]",r$=Object.prototype.toString;function n$({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:a,areObjectsEqual:l,arePrimitiveWrappersEqual:u,areRegExpsEqual:c,areSetsEqual:d,areTypedArraysEqual:h,areUrlsEqual:p,unknownTagComparators:m}){return function(x,v,w){if(x===v)return!0;if(x==null||v==null)return!1;const k=typeof x;if(k!==typeof v)return!1;if(k!=="object")return k==="number"?a(x,v,w):k==="function"?i(x,v,w):!1;const E=x.constructor;if(E!==v.constructor)return!1;if(E===Object)return l(x,v,w);if(Array.isArray(x))return e(x,v,w);if(E===Date)return n(x,v,w);if(E===RegExp)return c(x,v,w);if(E===Map)return o(x,v,w);if(E===Set)return d(x,v,w);const M=r$.call(x);if(M===qP)return n(x,v,w);if(M===XP)return c(x,v,w);if(M===GP)return o(x,v,w);if(M===QP)return d(x,v,w);if(M===YP)return typeof x.then!="function"&&typeof v.then!="function"&&l(x,v,w);if(M===t$)return p(x,v,w);if(M===KP)return s(x,v,w);if(M===UP)return l(x,v,w);if(e$[M])return h(x,v,w);if(M===HP)return t(x,v,w);if(M===WP)return r(x,v,w);if(M===VP||M===JP||M===ZP)return u(x,v,w);if(m){let j=m[M];if(!j){const N=EP(x);N&&(j=m[N])}if(j)return j(x,v,w)}return!1}}function s$({circular:t,createCustomConfig:e,strict:r}){let n={areArrayBuffersEqual:RP,areArraysEqual:r?Tl:_P,areDataViewsEqual:OP,areDatesEqual:DP,areErrorsEqual:IP,areFunctionsEqual:zP,areMapsEqual:r?qp(ub,Tl):ub,areNumbersEqual:LP,areObjectsEqual:r?Tl:PP,arePrimitiveWrappersEqual:$P,areRegExpsEqual:BP,areSetsEqual:r?qp(cb,Tl):cb,areTypedArraysEqual:r?qp(U0,Tl):U0,areUrlsEqual:FP,unknownTagComparators:void 0};if(e&&(n=Object.assign({},n,e(n))),t){const s=dd(n.areArraysEqual),i=dd(n.areMapsEqual),o=dd(n.areObjectsEqual),a=dd(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:a})}return n}function i$(t){return function(e,r,n,s,i,o,a){return t(e,r,a)}}function o$({circular:t,comparator:e,createState:r,equals:n,strict:s}){if(r)return function(a,l){const{cache:u=t?new WeakMap:void 0,meta:c}=r();return e(a,l,{cache:u,equals:n,meta:c,strict:s})};if(t)return function(a,l){return e(a,l,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(a,l){return e(a,l,i)}}const a$=Ki();Ki({strict:!0});Ki({circular:!0});Ki({circular:!0,strict:!0});Ki({createInternalComparator:()=>Ho});Ki({strict:!0,createInternalComparator:()=>Ho});Ki({circular:!0,createInternalComparator:()=>Ho});Ki({circular:!0,createInternalComparator:()=>Ho,strict:!0});function Ki(t={}){const{circular:e=!1,createInternalComparator:r,createState:n,strict:s=!1}=t,i=s$(t),o=n$(i),a=r?r(o):i$(o);return o$({circular:e,comparator:o,createState:n,equals:a,strict:s})}var vk={exports:{}},yk={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=T,l$=Av;function u$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var c$=typeof Object.is=="function"?Object.is:u$,d$=l$.useSyncExternalStore,h$=kf.useRef,f$=kf.useEffect,p$=kf.useMemo,m$=kf.useDebugValue;yk.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=h$(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=p$(function(){function l(p){if(!u){if(u=!0,c=p,p=n(p),s!==void 0&&o.hasValue){var m=o.value;if(s(m,p))return d=m}return d=p}if(m=d,c$(c,p))return m;var y=n(p);return s!==void 0&&s(m,y)?(c=p,m):(c=p,d=y)}var u=!1,c,d,h=r===void 0?null:r;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,r,n,s]);var a=d$(t,i[0],i[1]);return f$(function(){o.hasValue=!0,o.value=a},[a]),m$(a),a};vk.exports=yk;var g$=vk.exports,v$=(...t)=>e=>{t.forEach(r=>{typeof r=="function"?r(e):r&&(r.current=e)})},y$=({contentComponent:t})=>{const e=Av.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return f.jsx(f.Fragment,{children:Object.values(e)})};function x$(){const t=new Set;let e={};return{subscribe(r){return t.add(r),()=>{t.delete(r)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(r,n){e={...e,[r]:ST.createPortal(n.reactElement,n.element,r)},t.forEach(s=>s())},removeRenderer(r){const n={...e};delete n[r],e=n,t.forEach(s=>s())}}}var b$=class extends Ve.Component{constructor(t){var e;super(t),this.editorContentRef=Ve.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const r=this.editorContentRef.current;r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r}),e.contentComponent=x$(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const r=document.createElement("div");r.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:r})}catch{}}}render(){const{editor:t,innerRef:e,...r}=this.props;return f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:v$(e,this.editorContentRef),...r}),(t==null?void 0:t.contentComponent)&&f.jsx(y$,{contentComponent:t.contentComponent})]})}},w$=T.forwardRef((t,e)=>{const r=Ve.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Ve.createElement(b$,{key:r,innerRef:e,...t})}),xk=Ve.memo(w$),k$=typeof window<"u"?T.useLayoutEffect:T.useEffect,S$=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},r=this.editor;return r.on("transaction",e),()=>{r.off("transaction",e)}}}};function T$(t){var e;const[r]=T.useState(()=>new S$(t.editor)),n=g$.useSyncExternalStoreWithSelector(r.subscribe,r.getSnapshot,r.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:a$);return k$(()=>r.watch(t.editor),[t.editor,r]),T.useDebugValue(n),n}var C$=!1,H1=typeof window>"u",E$=H1||!!(typeof window<"u"&&window.next),N$=class bk{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(r=>r())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?H1||E$?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onBeforeCreate)==null?void 0:i.call(s,...n)},onBlur:(...n)=>{var s,i;return(i=(s=this.options.current).onBlur)==null?void 0:i.call(s,...n)},onCreate:(...n)=>{var s,i;return(i=(s=this.options.current).onCreate)==null?void 0:i.call(s,...n)},onDestroy:(...n)=>{var s,i;return(i=(s=this.options.current).onDestroy)==null?void 0:i.call(s,...n)},onFocus:(...n)=>{var s,i;return(i=(s=this.options.current).onFocus)==null?void 0:i.call(s,...n)},onSelectionUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onSelectionUpdate)==null?void 0:i.call(s,...n)},onTransaction:(...n)=>{var s,i;return(i=(s=this.options.current).onTransaction)==null?void 0:i.call(s,...n)},onUpdate:(...n)=>{var s,i;return(i=(s=this.options.current).onUpdate)==null?void 0:i.call(s,...n)},onContentError:(...n)=>{var s,i;return(i=(s=this.options.current).onContentError)==null?void 0:i.call(s,...n)},onDrop:(...n)=>{var s,i;return(i=(s=this.options.current).onDrop)==null?void 0:i.call(s,...n)},onPaste:(...n)=>{var s,i;return(i=(s=this.options.current).onPaste)==null?void 0:i.call(s,...n)},onDelete:(...n)=>{var s,i;return(i=(s=this.options.current).onDelete)==null?void 0:i.call(s,...n)}};return new hP(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,r){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&r.extensions?e.extensions.length!==r.extensions.length?!1:e.extensions.every((s,i)=>{var o;return s===((o=r.extensions)==null?void 0:o[i])}):e[n]===r[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?bk.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,s)=>n===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,r=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){r&&r.setOptions(this.options.current);return}r&&!r.isDestroyed&&(r.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function M$(t={},e=[]){const r=T.useRef(t);r.current=t;const[n]=T.useState(()=>new N$(r)),s=Av.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return T.useDebugValue(s),T.useEffect(n.onRender(e)),T$({editor:s,selector:({transactionNumber:i})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&i===0?0:i+1}),s}var wk=T.createContext({editor:null});wk.Consumer;var A$=T.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),j$=()=>T.useContext(A$);Ve.forwardRef((t,e)=>{const{onDragStart:r}=j$(),n=t.as||"div";return f.jsx(n,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:r,style:{whiteSpace:"normal",...t.style}})});Ve.createContext({markViewContentRef:()=>{}});var sy=T.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});sy.displayName="TiptapContext";var R$=()=>T.useContext(sy);function kk({editor:t,instance:e,children:r}){const n=t??e;if(!n)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const s=T.useMemo(()=>({editor:n}),[n]),i=T.useMemo(()=>({editor:n}),[n]);return f.jsx(wk.Provider,{value:i,children:f.jsx(sy.Provider,{value:s,children:r})})}kk.displayName="Tiptap";function Sk({...t}){const{editor:e}=R$();return f.jsx(xk,{editor:e,...t})}Sk.displayName="Tiptap.Content";Object.assign(kk,{Content:Sk});var V0=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:r,...n}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,n,r]},_$=/^\s*>\s$/,O$=mr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return V0("blockquote",{...rt(this.options.HTMLAttributes,t),children:V0("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const r=">",n=[];return t.content.forEach(s=>{const a=e.renderChildren([s]).split(`
`).map(l=>l.trim()===""?r:`${r} ${l}`);n.push(a.join(`
`))}),n.join(`
${r}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ga({find:_$,type:this.type})]}}),D$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,I$=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,z$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,L$=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,P$=ds.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return V0("strong",{...rt(this.options.HTMLAttributes,t),children:V0("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ka({find:D$,type:this.type}),Ka({find:z$,type:this.type})]},addPasteRules(){return[Lo({find:I$,type:this.type}),Lo({find:L$,type:this.type})]}}),$$=/(^|[^`])`([^`]+)`(?!`)$/,B$=/(^|[^`])`([^`]+)`(?!`)/g,F$=ds.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",rt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ka({find:$$,type:this.type})]},addPasteRules(){return[Lo({find:B$,type:this.type})]}}),Kp=4,H$=/^```([a-z]+)?[\s\n]$/,U$=/^~~~([a-z]+)?[\s\n]$/,V$=mr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Kp,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:r}=this.options;if(!r)return null;const i=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(o=>o.startsWith(r)).map(o=>o.replace(r,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",rt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var r;return((r=t.raw)==null?void 0:r.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var r;let n="";const s=((r=t.attrs)==null?void 0:r.language)||"";return t.content?n=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):n=`\`\`\`${s}

\`\`\``,n},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,r=e.pos===1;return!t||e.parent.type.name!==this.name?!1:r||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Kp,{state:n}=t,{selection:s}=n,{$from:i,empty:o}=s;if(i.parent.type!==this.type)return!1;const a=" ".repeat(r);return o?t.commands.insertContent(a):t.commands.command(({tr:l})=>{const{from:u,to:c}=s,p=n.doc.textBetween(u,c,`
`,`
`).split(`
`).map(m=>a+m).join(`
`);return l.replaceWith(u,c,n.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const r=(e=this.options.tabSize)!=null?e:Kp,{state:n}=t,{selection:s}=n,{$from:i,empty:o}=s;return i.parent.type!==this.type?!1:o?t.commands.command(({tr:a})=>{var l;const{pos:u}=i,c=i.start(),d=i.end(),p=n.doc.textBetween(c,d,`
`,`
`).split(`
`);let m=0,y=0;const x=u-c;for(let j=0;j<p.length;j+=1){if(y+p[j].length>=x){m=j;break}y+=p[j].length+1}const w=((l=p[m].match(/^ */))==null?void 0:l[0])||"",k=Math.min(w.length,r);if(k===0)return!0;let E=c;for(let j=0;j<m;j+=1)E+=p[j].length+1;return a.delete(E,E+k),u-E<=k&&a.setSelection(Te.create(a.doc,E)),!0}):t.commands.command(({tr:a})=>{const{from:l,to:u}=s,h=n.doc.textBetween(l,u,`
`,`
`).split(`
`).map(p=>{var m;const y=((m=p.match(/^ */))==null?void 0:m[0])||"",x=Math.min(y.length,r);return p.slice(x)}).join(`
`);return a.replaceWith(l,u,n.schema.text(h)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:r}=e,{$from:n,empty:s}=r;if(!s||n.parent.type!==this.type)return!1;const i=n.parentOffset===n.parent.nodeSize-2,o=n.parent.textContent.endsWith(`

`);return!i||!o?!1:t.chain().command(({tr:a})=>(a.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:r,doc:n}=e,{$from:s,empty:i}=r;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:n.nodeAt(a)?t.commands.command(({tr:u})=>(u.setSelection(Re.near(n.resolve(a))),!0)):t.commands.exitCode()}}},addInputRules(){return[B1({find:H$,type:this.type,getAttributes:t=>({language:t[1]})}),B1({find:U$,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new vt({key:new Bt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const r=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,i=s==null?void 0:s.mode;if(!r||!i)return!1;const{tr:o,schema:a}=t.state,l=a.text(r.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Te.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),W$=mr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),q$=mr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",rt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:r,editor:n})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:i}=r;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=n.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&l&&o){const d=l.filter(h=>a.includes(h.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),K$=mr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,rt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var r;const n=(r=t.attrs)!=null&&r.level?parseInt(t.attrs.level,10):1,s="#".repeat(n);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>B1({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),G$=mr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",rt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!mP(e,e.schema.nodes[this.name]))return!1;const{selection:r}=e,{$to:n}=r,s=t();return X8(r)?s.insertContentAt(n.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:i,tr:o,dispatch:a})=>{if(a){const{$to:l}=o.selection,u=l.end();if(l.nodeAfter)l.nodeAfter.isTextblock?o.setSelection(Te.create(o.doc,l.pos+1)):l.nodeAfter.isBlock?o.setSelection(me.create(o.doc,l.pos)):o.setSelection(Te.create(o.doc,l.pos));else{const c=i.schema.nodes[this.options.nextNodeType]||l.parent.type.contentMatch.defaultType,d=c==null?void 0:c.create();d&&(o.insert(u,d),o.setSelection(Te.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[pk({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),J$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Y$=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,X$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Q$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Z$=ds.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ka({find:J$,type:this.type}),Ka({find:X$,type:this.type})]},addPasteRules(){return[Lo({find:Y$,type:this.type}),Lo({find:Q$,type:this.type})]}});const eB="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",tB="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",U1="numeric",V1="ascii",W1="alpha",nu="asciinumeric",zl="alphanumeric",q1="domain",Tk="emoji",rB="scheme",nB="slashscheme",Gp="whitespace";function sB(t,e){return t in e||(e[t]=[]),e[t]}function yo(t,e,r){e[U1]&&(e[nu]=!0,e[zl]=!0),e[V1]&&(e[nu]=!0,e[W1]=!0),e[nu]&&(e[zl]=!0),e[W1]&&(e[zl]=!0),e[zl]&&(e[q1]=!0),e[Tk]&&(e[q1]=!0);for(const n in e){const s=sB(n,r);s.indexOf(t)<0&&s.push(t)}}function iB(t,e){const r={};for(const n in e)e[n].indexOf(t)>=0&&(r[n]=!0);return r}function _r(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}_r.groups={};_r.prototype={accepts(){return!!this.t},go(t){const e=this,r=e.j[t];if(r)return r;for(let n=0;n<e.jr.length;n++){const s=e.jr[n][0],i=e.jr[n][1];if(i&&s.test(t))return i}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,r,n){for(let s=0;s<t.length;s++)this.tt(t[s],e,r,n)},tr(t,e,r,n){n=n||_r.groups;let s;return e&&e.j?s=e:(s=new _r(e),r&&n&&yo(e,r,n)),this.jr.push([t,s]),s},ts(t,e,r,n){let s=this;const i=t.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(t[o]);return s.tt(t[i-1],e,r,n)},tt(t,e,r,n){n=n||_r.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const i=e;let o,a=s.go(t);if(a?(o=new _r,Object.assign(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new _r,i){if(n)if(o.t&&typeof o.t=="string"){const l=Object.assign(iB(o.t,n),r);yo(i,l,n)}else r&&yo(i,r,n);o.t=i}return s.j[t]=o,o}};const je=(t,e,r,n,s)=>t.ta(e,r,n,s),wt=(t,e,r,n,s)=>t.tr(e,r,n,s),db=(t,e,r,n,s)=>t.ts(e,r,n,s),J=(t,e,r,n,s)=>t.tt(e,r,n,s),gs="WORD",K1="UWORD",Ck="ASCIINUMERICAL",Ek="ALPHANUMERICAL",Qu="LOCALHOST",G1="TLD",J1="UTLD",Bd="SCHEME",oa="SLASH_SCHEME",iy="NUM",Y1="WS",oy="NL",su="OPENBRACE",iu="CLOSEBRACE",W0="OPENBRACKET",q0="CLOSEBRACKET",K0="OPENPAREN",G0="CLOSEPAREN",J0="OPENANGLEBRACKET",Y0="CLOSEANGLEBRACKET",X0="FULLWIDTHLEFTPAREN",Q0="FULLWIDTHRIGHTPAREN",Z0="LEFTCORNERBRACKET",eh="RIGHTCORNERBRACKET",th="LEFTWHITECORNERBRACKET",rh="RIGHTWHITECORNERBRACKET",nh="FULLWIDTHLESSTHAN",sh="FULLWIDTHGREATERTHAN",ih="AMPERSAND",oh="APOSTROPHE",ah="ASTERISK",si="AT",lh="BACKSLASH",uh="BACKTICK",ch="CARET",ci="COLON",ay="COMMA",dh="DOLLAR",Kn="DOT",hh="EQUALS",ly="EXCLAMATION",on="HYPHEN",ou="PERCENT",fh="PIPE",ph="PLUS",mh="POUND",au="QUERY",uy="QUOTE",Nk="FULLWIDTHMIDDLEDOT",cy="SEMI",Gn="SLASH",lu="TILDE",gh="UNDERSCORE",Mk="EMOJI",vh="SYM";var Ak=Object.freeze({__proto__:null,ALPHANUMERICAL:Ek,AMPERSAND:ih,APOSTROPHE:oh,ASCIINUMERICAL:Ck,ASTERISK:ah,AT:si,BACKSLASH:lh,BACKTICK:uh,CARET:ch,CLOSEANGLEBRACKET:Y0,CLOSEBRACE:iu,CLOSEBRACKET:q0,CLOSEPAREN:G0,COLON:ci,COMMA:ay,DOLLAR:dh,DOT:Kn,EMOJI:Mk,EQUALS:hh,EXCLAMATION:ly,FULLWIDTHGREATERTHAN:sh,FULLWIDTHLEFTPAREN:X0,FULLWIDTHLESSTHAN:nh,FULLWIDTHMIDDLEDOT:Nk,FULLWIDTHRIGHTPAREN:Q0,HYPHEN:on,LEFTCORNERBRACKET:Z0,LEFTWHITECORNERBRACKET:th,LOCALHOST:Qu,NL:oy,NUM:iy,OPENANGLEBRACKET:J0,OPENBRACE:su,OPENBRACKET:W0,OPENPAREN:K0,PERCENT:ou,PIPE:fh,PLUS:ph,POUND:mh,QUERY:au,QUOTE:uy,RIGHTCORNERBRACKET:eh,RIGHTWHITECORNERBRACKET:rh,SCHEME:Bd,SEMI:cy,SLASH:Gn,SLASH_SCHEME:oa,SYM:vh,TILDE:lu,TLD:G1,UNDERSCORE:gh,UTLD:J1,UWORD:K1,WORD:gs,WS:Y1});const ps=/[a-z]/,Cl=new RegExp("\\p{L}","u"),Jp=new RegExp("\\p{Emoji}","u"),ms=/\d/,Yp=/\s/,hb="\r",Xp=`
`,oB="",aB="",Qp="";let hd=null,fd=null;function lB(t=[]){const e={};_r.groups=e;const r=new _r;hd==null&&(hd=fb(eB)),fd==null&&(fd=fb(tB)),J(r,"'",oh),J(r,"{",su),J(r,"}",iu),J(r,"[",W0),J(r,"]",q0),J(r,"(",K0),J(r,")",G0),J(r,"<",J0),J(r,">",Y0),J(r,"",X0),J(r,"",Q0),J(r,"",Z0),J(r,"",eh),J(r,"",th),J(r,"",rh),J(r,"",nh),J(r,"",sh),J(r,"&",ih),J(r,"*",ah),J(r,"@",si),J(r,"`",uh),J(r,"^",ch),J(r,":",ci),J(r,",",ay),J(r,"$",dh),J(r,".",Kn),J(r,"=",hh),J(r,"!",ly),J(r,"-",on),J(r,"%",ou),J(r,"|",fh),J(r,"+",ph),J(r,"#",mh),J(r,"?",au),J(r,'"',uy),J(r,"/",Gn),J(r,";",cy),J(r,"~",lu),J(r,"_",gh),J(r,"\\",lh),J(r,"",Nk);const n=wt(r,ms,iy,{[U1]:!0});wt(n,ms,n);const s=wt(n,ps,Ck,{[nu]:!0}),i=wt(n,Cl,Ek,{[zl]:!0}),o=wt(r,ps,gs,{[V1]:!0});wt(o,ms,s),wt(o,ps,o),wt(s,ms,s),wt(s,ps,s);const a=wt(r,Cl,K1,{[W1]:!0});wt(a,ps),wt(a,ms,i),wt(a,Cl,a),wt(i,ms,i),wt(i,ps),wt(i,Cl,i);const l=J(r,Xp,oy,{[Gp]:!0}),u=J(r,hb,Y1,{[Gp]:!0}),c=wt(r,Yp,Y1,{[Gp]:!0});J(r,Qp,c),J(u,Xp,l),J(u,Qp,c),wt(u,Yp,c),J(c,hb),J(c,Xp),wt(c,Yp,c),J(c,Qp,c);const d=wt(r,Jp,Mk,{[Tk]:!0});J(d,"#"),wt(d,Jp,d),J(d,oB,d);const h=J(d,aB);J(h,"#"),wt(h,Jp,d);const p=[[ps,o],[ms,s]],m=[[ps,null],[Cl,a],[ms,i]];for(let y=0;y<hd.length;y++)Ys(r,hd[y],G1,gs,p);for(let y=0;y<fd.length;y++)Ys(r,fd[y],J1,K1,m);yo(G1,{tld:!0,ascii:!0},e),yo(J1,{utld:!0,alpha:!0},e),Ys(r,"file",Bd,gs,p),Ys(r,"mailto",Bd,gs,p),Ys(r,"http",oa,gs,p),Ys(r,"https",oa,gs,p),Ys(r,"ftp",oa,gs,p),Ys(r,"ftps",oa,gs,p),yo(Bd,{scheme:!0,ascii:!0},e),yo(oa,{slashscheme:!0,ascii:!0},e),t=t.sort((y,x)=>y[0]>x[0]?1:-1);for(let y=0;y<t.length;y++){const x=t[y][0],w=t[y][1]?{[rB]:!0}:{[nB]:!0};x.indexOf("-")>=0?w[q1]=!0:ps.test(x)?ms.test(x)?w[nu]=!0:w[V1]=!0:w[U1]=!0,db(r,x,x,w)}return db(r,"localhost",Qu,{ascii:!0}),r.jd=new _r(vh),{start:r,tokens:Object.assign({groups:e},Ak)}}function jk(t,e){const r=uB(e.replace(/[A-Z]/g,a=>a.toLowerCase())),n=r.length,s=[];let i=0,o=0;for(;o<n;){let a=t,l=null,u=0,c=null,d=-1,h=-1;for(;o<n&&(l=a.go(r[o]));)a=l,a.accepts()?(d=0,h=0,c=a):d>=0&&(d+=r[o].length,h++),u+=r[o].length,i+=r[o].length,o++;i-=d,o-=h,u-=d,s.push({t:c.t,v:e.slice(i-u,i),s:i-u,e:i})}return s}function uB(t){const e=[],r=t.length;let n=0;for(;n<r;){let s=t.charCodeAt(n),i,o=s<55296||s>56319||n+1===r||(i=t.charCodeAt(n+1))<56320||i>57343?t[n]:t.slice(n,n+2);e.push(o),n+=o.length}return e}function Ys(t,e,r,n,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];t.j[l]?i=t.j[l]:(i=new _r(n),i.jr=s.slice(),t.j[l]=i),t=i}return i=new _r(r),i.jr=s.slice(),t.j[e[o-1]]=i,i}function fb(t){const e=[],r=[];let n=0,s="0123456789";for(;n<t.length;){let i=0;for(;s.indexOf(t[n+i])>=0;)i++;if(i>0){e.push(r.join(""));for(let o=parseInt(t.substring(n,n+i),10);o>0;o--)r.pop();n+=i}else r.push(t[n]),n++}return e}const Zu={defaultProtocol:"http",events:null,format:pb,formatHref:pb,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function dy(t,e=null){let r=Object.assign({},Zu);t&&(r=Object.assign(r,t instanceof dy?t.o:t));const n=r.ignoreTags,s=[];for(let i=0;i<n.length;i++)s.push(n[i].toUpperCase());this.o=r,e&&(this.defaultRender=e),this.ignoreTags=s}dy.prototype={o:Zu,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,r){const n=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:Zu[t],typeof s=="function"&&n&&(s=s(e,r))):typeof s=="function"&&n&&(s=s(e,r.t,r)),s)},getObj(t,e,r){let n=this.o[t];return typeof n=="function"&&e!=null&&(n=n(e,r.t,r)),n},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function pb(t){return t}function Rk(t,e){this.t="token",this.v=t,this.tk=e}Rk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),r=t.get("truncate",e,this),n=t.get("format",e,this);return r&&n.length>r?n.substring(0,r)+"":n},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Zu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,r=this.toHref(t.get("defaultProtocol")),n=t.get("formatHref",r,this),s=t.get("tagName",r,e),i=this.toFormattedString(t),o={},a=t.get("className",r,e),l=t.get("target",r,e),u=t.get("rel",r,e),c=t.getObj("attributes",r,e),d=t.getObj("events",r,e);return o.href=n,a&&(o.class=a),l&&(o.target=l),u&&(o.rel=u),c&&Object.assign(o,c),{tagName:s,attributes:o,content:i,eventListeners:d}}};function Sf(t,e){class r extends Rk{constructor(s,i){super(s,i),this.t=t}}for(const n in e)r.prototype[n]=e[n];return r.t=t,r}const mb=Sf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),gb=Sf("text"),cB=Sf("nl"),pd=Sf("url",{isLink:!0,toHref(t=Zu.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Qu&&t[1].t===ci}}),sn=t=>new _r(t);function dB({groups:t}){const e=t.domain.concat([ih,ah,si,lh,uh,ch,dh,hh,on,iy,ou,fh,ph,mh,Gn,vh,lu,gh]),r=[oh,ci,ay,Kn,ly,ou,au,uy,cy,J0,Y0,su,iu,q0,W0,K0,G0,X0,Q0,Z0,eh,th,rh,nh,sh],n=[ih,oh,ah,lh,uh,ch,dh,hh,on,su,iu,ou,fh,ph,mh,au,Gn,vh,lu,gh],s=sn(),i=J(s,lu);je(i,n,i),je(i,t.domain,i);const o=sn(),a=sn(),l=sn();je(s,t.domain,o),je(s,t.scheme,a),je(s,t.slashscheme,l),je(o,n,i),je(o,t.domain,o);const u=J(o,si);J(i,si,u),J(a,si,u),J(l,si,u);const c=J(i,Kn);je(c,n,i),je(c,t.domain,i);const d=sn();je(u,t.domain,d),je(d,t.domain,d);const h=J(d,Kn);je(h,t.domain,d);const p=sn(mb);je(h,t.tld,p),je(h,t.utld,p),J(u,Qu,p);const m=J(d,on);J(m,on,m),je(m,t.domain,d),je(p,t.domain,d),J(p,Kn,h),J(p,on,m);const y=J(p,ci);je(y,t.numeric,mb);const x=J(o,on),v=J(o,Kn);J(x,on,x),je(x,t.domain,o),je(v,n,i),je(v,t.domain,o);const w=sn(pd);je(v,t.tld,w),je(v,t.utld,w),je(w,t.domain,o),je(w,n,i),J(w,Kn,v),J(w,on,x),J(w,si,u);const k=J(w,ci),E=sn(pd);je(k,t.numeric,E);const M=sn(pd),j=sn();je(M,e,M),je(M,r,j),je(j,e,M),je(j,r,j),J(w,Gn,M),J(E,Gn,M);const N=J(a,ci),_=J(l,ci),L=J(_,Gn),V=J(L,Gn);je(a,t.domain,o),J(a,Kn,v),J(a,on,x),je(l,t.domain,o),J(l,Kn,v),J(l,on,x),je(N,t.domain,M),J(N,Gn,M),J(N,au,M),je(V,t.domain,M),je(V,e,M),J(V,Gn,M);const ee=[[su,iu],[W0,q0],[K0,G0],[J0,Y0],[X0,Q0],[Z0,eh],[th,rh],[nh,sh]];for(let P=0;P<ee.length;P++){const[D,B]=ee[P],I=J(M,D);J(j,D,I),J(I,B,M);const H=sn(pd);je(I,e,H);const Z=sn();je(I,r),je(H,e,H),je(H,r,Z),je(Z,e,H),je(Z,r,Z),J(H,B,M),J(Z,B,M)}return J(s,Qu,w),J(s,oy,cB),{start:s,tokens:Ak}}function hB(t,e,r){let n=r.length,s=0,i=[],o=[];for(;s<n;){let a=t,l=null,u=null,c=0,d=null,h=-1;for(;s<n&&!(l=a.go(r[s].t));)o.push(r[s++]);for(;s<n&&(u=l||a.go(r[s].t));)l=null,a=u,a.accepts()?(h=0,d=a):h>=0&&h++,s++,c++;if(h<0)s-=c,s<n&&(o.push(r[s]),s++);else{o.length>0&&(i.push(Zp(gb,e,o)),o=[]),s-=h,c-=h;const p=d.t,m=r.slice(s-c,s);i.push(Zp(p,e,m))}}return o.length>0&&i.push(Zp(gb,e,o)),i}function Zp(t,e,r){const n=r[0].s,s=r[r.length-1].e,i=e.slice(n,s);return new t(i,r)}const fB=typeof console<"u"&&console&&console.warn||(()=>{}),pB="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",st={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function mB(){return _r.groups={},st.scanner=null,st.parser=null,st.tokenQueue=[],st.pluginQueue=[],st.customSchemes=[],st.initialized=!1,st}function vb(t,e=!1){if(st.initialized&&fB(`linkifyjs: already initialized - will not register custom scheme "${t}" ${pB}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);st.customSchemes.push([t,e])}function gB(){st.scanner=lB(st.customSchemes);for(let t=0;t<st.tokenQueue.length;t++)st.tokenQueue[t][1]({scanner:st.scanner});st.parser=dB(st.scanner.tokens);for(let t=0;t<st.pluginQueue.length;t++)st.pluginQueue[t][1]({scanner:st.scanner,parser:st.parser});return st.initialized=!0,st}function hy(t){return st.initialized||gB(),hB(st.parser.start,t,jk(st.scanner.start,t))}hy.scan=jk;function _k(t,e=null,r=null){if(e&&typeof e=="object"){if(r)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);r=e,e=null}const n=new dy(r),s=hy(t),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&n.check(a)&&i.push(a.toFormattedObject(n))}return i}var fy="[\0- -\u2029]",vB=new RegExp(fy),yB=new RegExp(`${fy}$`),xB=new RegExp(fy,"g");function bB(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function wB(t){return new vt({key:new Bt("autolink"),appendTransaction:(e,r,n)=>{const s=e.some(u=>u.docChanged)&&!r.doc.eq(n.doc),i=e.some(u=>u.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=n,a=U8(r.doc,[...e]);if(Y8(a).forEach(({newRange:u})=>{const c=pL(n.doc,u,p=>p.isTextblock);let d,h;if(c.length>1)d=c[0],h=n.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const p=n.doc.textBetween(u.from,u.to," "," ");if(!yB.test(p))return;d=c[0],h=n.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&h){const p=h.split(vB).filter(Boolean);if(p.length<=0)return!1;const m=p[p.length-1],y=d.pos+h.lastIndexOf(m);if(!m)return!1;const x=hy(m).map(v=>v.toObject(t.defaultProtocol));if(!bB(x))return!1;x.filter(v=>v.isLink).map(v=>({...v,from:y+v.start+1,to:y+v.end+1})).filter(v=>n.schema.marks.code?!n.doc.rangeHasMark(v.from,v.to,n.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{Zv(v.from,v.to,n.doc).some(w=>w.mark.type===t.type)||o.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!o.steps.length)return o}})}function kB(t){return new vt({key:new Bt("handleClickLink"),props:{handleClick:(e,r,n)=>{var s,i;if(n.button!==0||!e.editable)return!1;let o=null;if(n.target instanceof HTMLAnchorElement)o=n.target;else{const l=n.target;if(!l)return!1;const u=t.editor.view.dom;o=l.closest("a"),o&&!u.contains(o)&&(o=null)}if(!o)return!1;let a=!1;if(t.enableClickSelection&&(a=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const l=J8(e.state,t.type.name),u=(s=o.href)!=null?s:l.href,c=(i=o.target)!=null?i:l.target;u&&(window.open(u,c),a=!0)}return a}}})}function SB(t){return new vt({key:new Bt("handlePasteLink"),props:{handlePaste:(e,r,n)=>{const{shouldAutoLink:s}=t,{state:i}=e,{selection:o}=i,{empty:a}=o;if(a)return!1;let l="";n.content.forEach(c=>{l+=c.textContent});const u=_k(l,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!u||s!==void 0&&!s(u.value)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function eo(t,e){const r=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&r.push(s)}),!t||t.replace(xB,"").match(new RegExp(`^(?:(?:${r.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var TB=ds.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){vb(t);return}vb(t.scheme,t.optionalSlashes)})},onDestroy(){mB()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!eo(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),r=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||r&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class},title:{default:null}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:r=>!!eo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!eo(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",rt(this.options.HTMLAttributes,t),0]:["a",rt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var r,n,s,i;const o=(n=(r=t.attrs)==null?void 0:r.href)!=null?n:"",a=(i=(s=t.attrs)==null?void 0:s.title)!=null?i:"",l=e.renderChildren(t);return a?`[${l}](${o} "${a}")`:`[${l}](${o})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:r}=t;return this.options.isAllowedUri(r,{defaultValidate:n=>!!eo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:r}=t||{};return r&&!this.options.isAllowedUri(r,{defaultValidate:n=>!!eo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Lo({find:t=>{const e=[];if(t){const{protocols:r,defaultProtocol:n}=this.options,s=_k(t).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!eo(o,r),protocols:r,defaultProtocol:n}));s.length&&s.forEach(i=>{this.options.shouldAutoLink(i.value)&&e.push({text:i.value,data:{href:i.href},index:i.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:r}=this.options;return this.options.autolink&&t.push(wB({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!eo(s,e),protocols:e,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink})),t.push(kB({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(SB({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),CB=Object.defineProperty,EB=(t,e)=>{for(var r in e)CB(t,r,{get:e[r],enumerable:!0})},NB="listItem",yb="textStyle",xb=/^\s*([-+*])\s$/,Ok=mr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",rt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NB,this.editor.getAttributes(yb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ga({find:xb,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ga({find:xb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(yb),editor:this.editor})),[t]}}),Dk=mr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",rt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let r=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))r=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(r=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const o=t.tokens.slice(1),a=e.parseChildren(o);r.push(...a)}}else r=e.parseChildren(t.tokens)}return r.length===0&&(r=[{type:"paragraph",content:[]}]),{type:"listItem",content:r}},renderMarkdown:(t,e,r)=>ny(t,e,n=>{var s,i;return n.parentType==="bulletList"?"- ":n.parentType==="orderedList"?`${(((i=(s=n.meta)==null?void 0:s.parentAttrs)==null?void 0:i.start)||1)+n.index}. `:"- "},r),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),MB={};EB(MB,{findListItemPos:()=>yc,getNextListDepth:()=>py,handleBackspace:()=>X1,handleDelete:()=>Q1,hasListBefore:()=>Ik,hasListItemAfter:()=>AB,hasListItemBefore:()=>zk,listItemHasSubList:()=>Lk,nextListIsDeeper:()=>Pk,nextListIsHigher:()=>$k});var yc=(t,e)=>{const{$from:r}=e.selection,n=_t(t,e.schema);let s=null,i=r.depth,o=r.pos,a=null;for(;i>0&&a===null;)s=r.node(i),s.type===n?a=i:(i-=1,o-=1);return a===null?null:{$pos:e.doc.resolve(o),depth:a}},py=(t,e)=>{const r=yc(t,e);if(!r)return!1;const[,n]=TL(e,t,r.$pos.pos+4);return n},Ik=(t,e,r)=>{const{$anchor:n}=t.selection,s=Math.max(0,n.pos-2),i=t.doc.resolve(s).node();return!(!i||!r.includes(i.type.name))},zk=(t,e)=>{var r;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-2);return!(s.index()===0||((r=s.nodeBefore)==null?void 0:r.type.name)!==t)},Lk=(t,e,r)=>{if(!r)return!1;const n=_t(t,e.schema);let s=!1;return r.descendants(i=>{i.type===n&&(s=!0)}),s},X1=(t,e,r)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Bi(t.state,e)&&Ik(t.state,e,r)){const{$anchor:a}=t.state.selection,l=t.state.doc.resolve(a.before()-1),u=[];l.node().descendants((h,p)=>{h.type.name===e&&u.push({node:h,pos:p})});const c=u.at(-1);if(!c)return!1;const d=t.state.doc.resolve(l.start()+c.pos+1);return t.chain().cut({from:a.start()-1,to:a.end()+1},d.end()).joinForward().run()}if(!Bi(t.state,e)||!ML(t.state))return!1;const n=yc(e,t.state);if(!n)return!1;const i=t.state.doc.resolve(n.$pos.pos-2).node(n.depth),o=Lk(e,t.state,i);return zk(e,t.state)&&!o?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},Pk=(t,e)=>{const r=py(t,e),n=yc(t,e);return!n||!r?!1:r>n.depth},$k=(t,e)=>{const r=py(t,e),n=yc(t,e);return!n||!r?!1:r<n.depth},Q1=(t,e)=>{if(!Bi(t.state,e)||!NL(t.state,e))return!1;const{selection:r}=t.state,{$from:n,$to:s}=r;return!r.empty&&n.sameParent(s)?!1:Pk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():$k(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},AB=(t,e)=>{var r;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-n.parentOffset-2);return!(s.index()===s.parent.childCount-1||((r=s.nodeAfter)==null?void 0:r.type.name)!==t)},Bk=qe.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&Q1(t,r)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r})=>{t.state.schema.nodes[r]!==void 0&&Q1(t,r)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&X1(t,r,n)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:r,wrapperNames:n})=>{t.state.schema.nodes[r]!==void 0&&X1(t,r,n)&&(e=!0)}),e}}}}),bb=/^(\s*)(\d+)\.\s+(.*)$/,jB=/^\s/;function RB(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r],i=s.match(bb);if(!i)break;const[,o,a,l]=i,u=o.length;let c=l,d=r+1;const h=[s];for(;d<t.length;){const p=t[d];if(p.match(bb))break;if(p.trim()==="")h.push(p),c+=`
`,d+=1;else if(p.match(jB))h.push(p),c+=`
${p.slice(u+2)}`,d+=1;else break}e.push({indent:u,number:parseInt(a,10),content:c.trim(),raw:h.join(`
`)}),n=d,r=d}return[e,n]}function Fk(t,e,r){var n;const s=[];let i=0;for(;i<t.length;){const o=t[i];if(o.indent===e){const a=o.content.split(`
`),l=((n=a[0])==null?void 0:n.trim())||"",u=[];l&&u.push({type:"paragraph",raw:l,tokens:r.inlineTokens(l)});const c=a.slice(1).join(`
`).trim();if(c){const p=r.blockTokens(c);u.push(...p)}let d=i+1;const h=[];for(;d<t.length&&t[d].indent>e;)h.push(t[d]),d+=1;if(h.length>0){const p=Math.min(...h.map(y=>y.indent)),m=Fk(h,p,r);u.push({type:"list",ordered:!0,start:h[0].number,items:m,raw:h.map(y=>y.raw).join(`
`)})}s.push({type:"list_item",raw:o.raw,tokens:u}),i=d}else i+=1}return s}function _B(t,e){return t.map(r=>{if(r.type!=="list_item")return e.parseChildren([r])[0];const n=[];return r.tokens&&r.tokens.length>0&&r.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")n.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const i=e.parseChildren([s]);n.push({type:"paragraph",content:i})}else{const i=e.parseChildren([s]);i.length>0&&n.push(...i)}}),{type:"listItem",content:n}})}var OB="listItem",wb="textStyle",kb=/^(\d+)\.\s$/,Hk=mr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...r}=t;return e===1?["ol",rt(this.options.HTMLAttributes,r),0]:["ol",rt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const r=t.start||1,n=t.items?_B(t.items,e):[];return r!==1?{type:"orderedList",attrs:{start:r},content:n}:{type:"orderedList",content:n}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),r=e==null?void 0:e.index;return r!==void 0?r:-1},tokenize:(t,e,r)=>{var n;const s=t.split(`
`),[i,o]=RB(s);if(i.length===0)return;const a=Fk(i,0,r);return a.length===0?void 0:{type:"list",ordered:!0,start:((n=i[0])==null?void 0:n.number)||1,items:a,raw:s.slice(0,o).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(OB,this.editor.getAttributes(wb)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ga({find:kb,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ga({find:kb,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(wb)}),joinPredicate:(e,r)=>r.childCount+r.attrs.start===+e[1],editor:this.editor})),[t]}}),DB=/^\s*(\[([( |x])?\])\s$/,IB=mr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",rt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const r=[];if(t.tokens&&t.tokens.length>0?r.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?r.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):r.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const n=e.parseChildren(t.nestedTokens);r.push(...n)}return e.createNode("taskItem",{checked:t.checked||!1},r)},renderMarkdown:(t,e)=>{var r;const s=`- [${(r=t.attrs)!=null&&r.checked?"x":" "}] `;return ny(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:r,editor:n})=>{const s=document.createElement("li"),i=document.createElement("label"),o=document.createElement("span"),a=document.createElement("input"),l=document.createElement("div"),u=d=>{var h,p;a.ariaLabel=((p=(h=this.options.a11y)==null?void 0:h.checkboxLabel)==null?void 0:p.call(h,d,a.checked))||`Task item checkbox for ${d.textContent||"empty task item"}`};u(t),i.contentEditable="false",a.type="checkbox",a.addEventListener("mousedown",d=>d.preventDefault()),a.addEventListener("change",d=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){a.checked=!a.checked;return}const{checked:h}=d.target;n.isEditable&&typeof r=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:p})=>{const m=r();if(typeof m!="number")return!1;const y=p.doc.nodeAt(m);return p.setNodeMarkup(m,void 0,{...y==null?void 0:y.attrs,checked:h}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,h)||(a.checked=!a.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([d,h])=>{s.setAttribute(d,h)}),s.dataset.checked=t.attrs.checked,a.checked=t.attrs.checked,i.append(a,o),s.append(i,l),Object.entries(e).forEach(([d,h])=>{s.setAttribute(d,h)});let c=new Set(Object.keys(e));return{dom:s,contentDOM:l,update:d=>{if(d.type!==this.type)return!1;s.dataset.checked=d.attrs.checked,a.checked=d.attrs.checked,u(d);const h=n.extensionManager.attributes,p=Xu(d,h),m=new Set(Object.keys(p)),y=this.options.HTMLAttributes;return c.forEach(x=>{m.has(x)||(x in y?s.setAttribute(x,y[x]):s.removeAttribute(x))}),Object.entries(p).forEach(([x,v])=>{v==null?x in y?s.setAttribute(x,y[x]):s.removeAttribute(x):s.setAttribute(x,v)}),c=m,!0}}}},addInputRules(){return[Ga({find:DB,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),zB=mr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",rt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const r=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return r!==void 0?r:-1},tokenize(t,e,r){const n=i=>{const o=F1(i,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:a=>({indentLevel:a[1].length,mainContent:a[4],checked:a[3].toLowerCase()==="x"}),createToken:(a,l)=>({type:"taskItem",raw:"",mainContent:a.mainContent,indentLevel:a.indentLevel,checked:a.checked,text:a.mainContent,tokens:r.inlineTokens(a.mainContent),nestedTokens:l}),customNestedParser:n},r);return o?[{type:"taskList",raw:o.raw,items:o.items}]:r.blockTokens(i)},s=F1(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:i=>({indentLevel:i[1].length,mainContent:i[4],checked:i[3].toLowerCase()==="x"}),createToken:(i,o)=>({type:"taskItem",raw:"",mainContent:i.mainContent,indentLevel:i.indentLevel,checked:i.checked,text:i.mainContent,tokens:r.inlineTokens(i.mainContent),nestedTokens:o}),customNestedParser:n},r);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});qe.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(Ok.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(Dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(Bk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(Hk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(IB.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(zB.configure(this.options.taskList)),t}});var Sb="&nbsp;",LB="",PB=mr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",rt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const r=t.tokens||[];if(r.length===1&&r[0].type==="image")return e.parseChildren([r[0]]);const n=e.parseInline(r);return n.length===1&&n[0].type==="text"&&(n[0].text===Sb||n[0].text===LB)?e.createNode("paragraph",void 0,[]):e.createNode("paragraph",void 0,n)},renderMarkdown:(t,e)=>{if(!t)return"";const r=Array.isArray(t.content)?t.content:[];return r.length===0?Sb:e.renderChildren(r)},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),$B=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,BB=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,FB=ds.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",rt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ka({find:$B,type:this.type})]},addPasteRules(){return[Lo({find:BB,type:this.type})]}}),HB=mr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),Uk=ds.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",rt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,r){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const i=s[2].trim();return{type:"underline",raw:s[0],text:i,tokens:r.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),UB=Uk;function VB(t={}){return new vt({view(e){return new WB(e,t)}})}class WB{constructor(e,r){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=r.width)!==null&&n!==void 0?n:1,this.color=r.color===!1?void 0:r.color||"black",this.class=r.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:r})=>this.editorView.dom.removeEventListener(e,r))}update(e,r){this.cursorPos!=null&&r.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),r=!e.parent.inlineContent,n,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(r){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let m=p.getBoundingClientRect(),y=d?m.bottom:m.top;d&&h&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*a;n={left:m.left,right:m.right,top:y-x,bottom:y+x}}}}if(!n){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;n={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",r),this.element.classList.toggle("prosemirror-dropcursor-inline",!r);let u,c;if(!l||l==document.body&&getComputedStyle(l).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,p=d.height/l.offsetHeight;u=d.left-l.scrollLeft*h,c=d.top-l.scrollTop*p}this.element.style.left=(n.left-u)/o+"px",this.element.style.top=(n.top-c)/a+"px",this.element.style.width=(n.right-n.left)/o+"px",this.element.style.height=(n.bottom-n.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let r=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=r&&r.inside>=0&&this.editorView.state.doc.nodeAt(r.inside),s=n&&n.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,r,e):s;if(r&&!i){let o=r.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=D7(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Tt extends Re{constructor(e){super(e,e)}map(e,r){let n=e.resolve(r.map(this.head));return Tt.valid(n)?new Tt(n):Re.near(n)}content(){return re.empty}eq(e){return e instanceof Tt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,r){if(typeof r.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Tt(e.resolve(r.pos))}getBookmark(){return new my(this.anchor)}static valid(e){let r=e.parent;if(r.isTextblock||!qB(e)||!KB(e))return!1;let n=r.type.spec.allowGapCursor;if(n!=null)return n;let s=r.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,r,n=!1){e:for(;;){if(!n&&Tt.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(r>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(r>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=r;let l=e.doc.resolve(s);if(Tt.valid(l))return l}for(;;){let o=r>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!me.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*r),n=!1;continue e}break}i=o,s+=r;let a=e.doc.resolve(s);if(Tt.valid(a))return a}return null}}}Tt.prototype.visible=!1;Tt.findFrom=Tt.findGapCursorFrom;Re.jsonID("gapcursor",Tt);class my{constructor(e){this.pos=e}map(e){return new my(e.map(this.pos))}resolve(e){let r=e.resolve(this.pos);return Tt.valid(r)?new Tt(r):Re.near(r)}}function Vk(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function qB(t){for(let e=t.depth;e>=0;e--){let r=t.index(e),n=t.node(e);if(r==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Vk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function KB(t){for(let e=t.depth;e>=0;e--){let r=t.indexAfter(e),n=t.node(e);if(r==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(r);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Vk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function GB(){return new vt({props:{decorations:QB,createSelectionBetween(t,e,r){return e.pos==r.pos&&Tt.valid(r)?new Tt(r):null},handleClick:YB,handleKeyDown:JB,handleDOMEvents:{beforeinput:XB}}})}const JB=I8({ArrowLeft:md("horiz",-1),ArrowRight:md("horiz",1),ArrowUp:md("vert",-1),ArrowDown:md("vert",1)});function md(t,e){const r=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,i){let o=n.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Te){if(!i.endOfTextblock(r)||a.depth==0)return!1;l=!1,a=n.doc.resolve(e>0?a.after():a.before())}let u=Tt.findGapCursorFrom(a,e,l);return u?(s&&s(n.tr.setSelection(new Tt(u))),!0):!1}}function YB(t,e,r){if(!t||!t.editable)return!1;let n=t.state.doc.resolve(e);if(!Tt.valid(n))return!1;let s=t.posAtCoords({left:r.clientX,top:r.clientY});return s&&s.inside>-1&&me.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Tt(n))),!0)}function XB(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Tt))return!1;let{$from:r}=t.state.selection,n=r.parent.contentMatchAt(r.index()).findWrapping(t.state.schema.nodes.text);if(!n)return!1;let s=K.empty;for(let o=n.length-1;o>=0;o--)s=K.from(n[o].createAndFill(null,s));let i=t.state.tr.replace(r.pos,r.pos,new re(s,0,0));return i.setSelection(Te.near(i.doc.resolve(r.pos+1))),t.dispatch(i),!1}function QB(t){if(!(t.selection instanceof Tt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ht.create(t.doc,[wr.widget(t.selection.head,e,{key:"gapcursor"})])}var yh=200,Kt=function(){};Kt.prototype.append=function(e){return e.length?(e=Kt.from(e),!this.length&&e||e.length<yh&&this.leafAppend(e)||this.length<yh&&e.leafPrepend(this)||this.appendInner(e)):this};Kt.prototype.prepend=function(e){return e.length?Kt.from(e).append(this):this};Kt.prototype.appendInner=function(e){return new ZB(this,e)};Kt.prototype.slice=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=this.length),e>=r?Kt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,r))};Kt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Kt.prototype.forEach=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length),r<=n?this.forEachInner(e,r,n,0):this.forEachInvertedInner(e,r,n,0)};Kt.prototype.map=function(e,r,n){r===void 0&&(r=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},r,n),s};Kt.from=function(e){return e instanceof Kt?e:e&&e.length?new Wk(e):Kt.empty};var Wk=function(t){function e(n){t.call(this),this.values=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var r={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=yh)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=yh)return new e(s.flatten().concat(this.values))},r.length.get=function(){return this.values.length},r.depth.get=function(){return 0},Object.defineProperties(e.prototype,r),e}(Kt);Kt.empty=new Wk([]);var ZB=function(t){function e(r,n){t.call(this),this.left=r,this.right=n,this.length=r.length+n.length,this.depth=Math.max(r.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(n,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(n,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(n,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(n,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(n,s):n>=i?this.right.slice(n-i,s-i):this.left.slice(n,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e}(Kt);const eF=500;class Dn{constructor(e,r){this.items=e,this.eventCount=r}popEvent(e,r){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,i;r&&(s=this.remapping(n,this.items.length),i=s.maps.length);let o=e.tr,a,l,u=[],c=[];return this.items.forEach((d,h)=>{if(!d.step){s||(s=this.remapping(n,h+1),i=s.maps.length),i--,c.push(d);return}if(s){c.push(new Jn(d.map));let p=d.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],u.push(new Jn(m,void 0,void 0,u.length+c.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new Dn(this.items.slice(0,n).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,r,n,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),h=new Jn(e.mapping.maps[c],d,r),p;(p=l&&l.merge(h))&&(h=p,c?i.pop():a=a.slice(0,a.length-1)),i.push(h),r&&(o++,r=void 0),s||(l=h)}let u=o-n.depth;return u>rF&&(a=tF(a,u),o-=u),new Dn(a.append(i),o)}remapping(e,r){let n=new Wu;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,o)},e,r),n}addMaps(e){return this.eventCount==0?this:new Dn(this.items.append(e.map(r=>new Jn(r))),this.eventCount)}rebased(e,r){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-r),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let l=r;this.items.forEach(h=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(h.step){let y=e.steps[p].invert(e.docs[p]),x=h.selection&&h.selection.map(i.slice(l+1,p));x&&a++,n.push(new Jn(m,y,x))}else n.push(new Jn(m))},s);let u=[];for(let h=r;h<o;h++)u.push(new Jn(i.maps[h]));let c=this.items.slice(0,s).append(u).append(n),d=new Dn(c,a);return d.emptyItemCount()>eF&&(d=d.compress(this.items.length-n.length)),d}emptyItemCount(){let e=0;return this.items.forEach(r=>{r.step||e++}),e}compress(e=this.items.length){let r=this.remapping(0,e),n=r.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(r.slice(n)),u=l&&l.getMap();if(n--,u&&r.appendMap(u,n),l){let c=o.selection&&o.selection.map(r.slice(n));c&&i++;let d=new Jn(u.invert(),l,c),h,p=s.length-1;(h=s.length&&s[p].merge(d))?s[p]=h:s.push(d)}}else o.map&&n--},this.items.length,0),new Dn(Kt.from(s.reverse()),i)}}Dn.empty=new Dn(Kt.empty,0);function tF(t,e){let r;return t.forEach((n,s)=>{if(n.selection&&e--==0)return r=s,!1}),t.slice(r)}class Jn{constructor(e,r,n,s){this.map=e,this.step=r,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let r=e.step.merge(this.step);if(r)return new Jn(r.getMap().invert(),r,this.selection)}}}class ii{constructor(e,r,n,s,i){this.done=e,this.undone=r,this.prevRanges=n,this.prevTime=s,this.prevComposition=i}}const rF=20;function nF(t,e,r,n){let s=r.getMeta(Eo),i;if(s)return s.historyState;r.getMeta(oF)&&(t=new ii(t.done,t.undone,null,0,-1));let o=r.getMeta("appendedTransaction");if(r.steps.length==0)return t;if(o&&o.getMeta(Eo))return o.getMeta(Eo).redo?new ii(t.done.addTransform(r,void 0,n,Fd(e)),t.undone,Tb(r.mapping.maps),t.prevTime,t.prevComposition):new ii(t.done,t.undone.addTransform(r,void 0,n,Fd(e)),null,t.prevTime,t.prevComposition);if(r.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=r.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(r.time||0)-n.newGroupDelay||!sF(r,t.prevRanges)),u=o?em(t.prevRanges,r.mapping):Tb(r.mapping.maps);return new ii(t.done.addTransform(r,l?e.selection.getBookmark():void 0,n,Fd(e)),Dn.empty,u,r.time,a??t.prevComposition)}else return(i=r.getMeta("rebased"))?new ii(t.done.rebased(r,i),t.undone.rebased(r,i),em(t.prevRanges,r.mapping),t.prevTime,t.prevComposition):new ii(t.done.addMaps(r.mapping.maps),t.undone.addMaps(r.mapping.maps),em(t.prevRanges,r.mapping),t.prevTime,t.prevComposition)}function sF(t,e){if(!e)return!1;if(!t.docChanged)return!0;let r=!1;return t.mapping.maps[0].forEach((n,s)=>{for(let i=0;i<e.length;i+=2)n<=e[i+1]&&s>=e[i]&&(r=!0)}),r}function Tb(t){let e=[];for(let r=t.length-1;r>=0&&e.length==0;r--)t[r].forEach((n,s,i,o)=>e.push(i,o));return e}function em(t,e){if(!t)return null;let r=[];for(let n=0;n<t.length;n+=2){let s=e.map(t[n],1),i=e.map(t[n+1],-1);s<=i&&r.push(s,i)}return r}function iF(t,e,r){let n=Fd(e),s=Eo.get(e).spec.config,i=(r?t.undone:t.done).popEvent(e,n);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(r?t.done:t.undone).addTransform(i.transform,e.selection.getBookmark(),s,n),l=new ii(r?a:i.remaining,r?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Eo,{redo:r,historyState:l})}let tm=!1,Cb=null;function Fd(t){let e=t.plugins;if(Cb!=e){tm=!1,Cb=e;for(let r=0;r<e.length;r++)if(e[r].spec.historyPreserveItems){tm=!0;break}}return tm}const Eo=new Bt("history"),oF=new Bt("closeHistory");function aF(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new vt({key:Eo,state:{init(){return new ii(Dn.empty,Dn.empty,null,0,-1)},apply(e,r,n){return nF(r,n,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,r){let n=r.inputType,s=n=="historyUndo"?Kk:n=="historyRedo"?Gk:null;return!s||!e.editable?!1:(r.preventDefault(),s(e.state,e.dispatch))}}}})}function qk(t,e){return(r,n)=>{let s=Eo.getState(r);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(n){let i=iF(s,r,t);i&&n(e?i.scrollIntoView():i)}return!0}}const Kk=qk(!1,!0),Gk=qk(!0,!0);qe.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,r=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(r)}},addProseMirrorPlugins(){let t=!1;return[new vt({key:new Bt("characterCount"),appendTransaction:(e,r,n)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const i=this.storage.characters({node:n.doc});if(i>s){const o=i-s,a=0,l=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=n.tr.deleteRange(a,l);return t=!0,u}t=!0},filterTransaction:(e,r)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const s=this.storage.characters({node:r.doc}),i=this.storage.characters({node:e.doc});if(i<=n||s>n&&i>n&&i<=s)return!0;if(s>n&&i>n&&i>s||!e.getMeta("paste"))return!1;const a=e.selection.$head.pos,l=i-n,u=a-l,c=a;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>n)}})]}});var lF=qe.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[VB(this.options)]}});qe.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new vt({key:new Bt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:r,isFocused:n}=this.editor,{anchor:s}=e,i=[];if(!r||!n)return ht.create(t,[]);let o=0;this.options.mode==="deepest"&&t.descendants((l,u)=>{if(l.isText)return;if(!(s>=u&&s<=u+l.nodeSize-1))return!1;o+=1});let a=0;return t.descendants((l,u)=>{if(l.isText||!(s>=u&&s<=u+l.nodeSize-1))return!1;if(a+=1,this.options.mode==="deepest"&&o-a>0||this.options.mode==="shallowest"&&a>1)return this.options.mode==="deepest";i.push(wr.node(u,u+l.nodeSize,{class:this.options.className}))}),ht.create(t,i)}}})]}});var uF=qe.create({name:"gapCursor",addProseMirrorPlugins(){return[GB()]},extendNodeSchema(t){var e;const r={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ue(pe(t,"allowGapCursor",r)))!=null?e:null}}}),Eb="placeholder";function cF(t){return t.replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").replace(/^[0-9-]+/,"").replace(/^-+/,"").toLowerCase()}qe.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",dataAttribute:Eb,placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){const t=this.options.dataAttribute?`data-${cF(this.options.dataAttribute)}`:`data-${Eb}`;return[new vt({key:new Bt("placeholder"),props:{decorations:({doc:e,selection:r})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=r,i=[];if(!n)return null;const o=this.editor.isEmpty;return e.descendants((a,l)=>{const u=s>=l&&s<=l+a.nodeSize,c=!a.isLeaf&&bf(a);if((u||!this.options.showOnlyCurrent)&&c){const d=[this.options.emptyNodeClass];o&&d.push(this.options.emptyEditorClass);const h=wr.node(l,l+a.nodeSize,{class:d.join(" "),[t]:typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:l,hasAnchor:u}):this.options.placeholder});i.push(h)}return this.options.includeChildren}),ht.create(e,i)}}})]}});qe.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new vt({key:new Bt("selection"),props:{decorations(r){return r.selection.empty||t.isFocused||!t.isEditable||X8(r.selection)||t.view.dragging?null:ht.create(r.doc,[wr.inline(r.selection.from,r.selection.to,{class:e.className})])}}})]}});function Nb({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var dF=qe.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Bt(this.name),r=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",n=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(r).includes(s.name));return[new vt({key:e,appendTransaction:(s,i,o)=>{const{doc:a,tr:l,schema:u}=o,c=e.getState(o),d=a.content.size,h=u.nodes[r];if(c)return l.insert(d,h.create())},state:{init:(s,i)=>{const o=i.tr.doc.lastChild;return!Nb({node:o,types:n})},apply:(s,i)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return i;const o=s.doc.lastChild;return!Nb({node:o,types:n})}}})]}}),hF=qe.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Kk(t,e),redo:()=>({state:t,dispatch:e})=>Gk(t,e)}},addProseMirrorPlugins(){return[aF(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),fF=qe.create({name:"starterKit",addExtensions(){var t,e,r,n;const s=[];return this.options.bold!==!1&&s.push(P$.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(O$.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(Ok.configure(this.options.bulletList)),this.options.code!==!1&&s.push(F$.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(V$.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(W$.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(lF.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(uF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(q$.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(K$.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(hF.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(G$.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(Z$.configure(this.options.italic)),this.options.listItem!==!1&&s.push(Dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(Bk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(TB.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(Hk.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(PB.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(FB.configure(this.options.strike)),this.options.text!==!1&&s.push(HB.configure(this.options.text)),this.options.underline!==!1&&s.push(Uk.configure((r=this.options)==null?void 0:r.underline)),this.options.trailingNode!==!1&&s.push(dF.configure((n=this.options)==null?void 0:n.trailingNode)),s}}),pF=fF,mF=qe.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(r=>e.updateAttributes(r,{textAlign:t})).some(r=>r):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).some(e=>e),toggleTextAlign:t=>({editor:e,commands:r})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?r.unsetTextAlign():r.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),gF=mF,vF=20,Jk=(t,e=0)=>{const r=[];return!t.children.length||e>vF||Array.from(t.children).forEach(n=>{n.tagName==="SPAN"?r.push(n):n.children.length&&r.push(...Jk(n,e+1))}),r},yF=t=>{if(!t.children.length)return;const e=Jk(t);e&&e.forEach(r=>{var n,s;const i=r.getAttribute("style"),o=(s=(n=r.parentElement)==null?void 0:n.closest("span"))==null?void 0:s.getAttribute("style");r.setAttribute("style",`${o};${i}`)})},Yk=ds.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&yF(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",rt(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(r,n)=>{if(r.isTextblock)return!0;r.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||t.removeMark(n,n+r.nodeSize,this.type)}),!0}}}}),xF=qe.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(s=>s.trim()).filter(Boolean);for(let s=n.length-1;s>=0;s-=1){const i=n[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="background-color")return a.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),Xk=qe.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const r=t.getAttribute("style");if(r){const n=r.split(";").map(s=>s.trim()).filter(Boolean);for(let s=n.length-1;s>=0;s-=1){const i=n[s].split(":");if(i.length>=2){const o=i[0].trim().toLowerCase(),a=i.slice(1).join(":").trim();if(o==="color")return a.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),bF=qe.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),wF=qe.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),kF=qe.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});qe.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push(xF.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(Xk.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(bF.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(wF.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(kF.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(Yk.configure(this.options.textStyle)),t}});var SF=Xk,TF=ds.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),CF=TF,EF=ds.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",rt(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),NF=EF,MF=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,AF=mr.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",rt(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,r,n,s,i,o;const a=(r=(e=t.attrs)==null?void 0:e.src)!=null?r:"",l=(s=(n=t.attrs)==null?void 0:n.alt)!=null?s:"",u=(o=(i=t.attrs)==null?void 0:i.title)!=null?o:"";return u?`![${l}](${a} "${u}")`:`![${l}](${a})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u")return null;const{directions:t,minWidth:e,minHeight:r,alwaysPreserveAspectRatio:n}=this.options.resize;return({node:s,getPos:i,HTMLAttributes:o,editor:a})=>{const l=document.createElement("img");Object.entries(o).forEach(([d,h])=>{if(h!=null)switch(d){case"width":case"height":break;default:l.setAttribute(d,h);break}}),l.src=o.src;const u=new pP({element:l,editor:a,node:s,getPos:i,onResize:(d,h)=>{l.style.width=`${d}px`,l.style.height=`${h}px`},onCommit:(d,h)=>{const p=i();p!==void 0&&this.editor.chain().setNodeSelection(p).updateAttributes(this.name,{width:d,height:h}).run()},onUpdate:(d,h,p)=>d.type===s.type,options:{directions:t,min:{width:e,height:r},preserveAspectRatio:n===!0}}),c=u.dom;return c.style.visibility="hidden",c.style.pointerEvents="none",l.onload=()=>{c.style.visibility="",c.style.pointerEvents=""},u}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[pk({find:MF,type:this.type,getAttributes:t=>{const[,,e,r,n]=t;return{src:r,alt:e,title:n}}})]}}),jF=AF,RF=mr.create({name:"blockMath",group:"block",atom:!0,addOptions(){return{onClick:void 0,katexOptions:void 0}},addAttributes(){return{latex:{default:"",parseHTML:t=>t.getAttribute("data-latex"),renderHTML:t=>({"data-latex":t.latex})}}},addCommands(){return{insertBlockMath:t=>({commands:e,editor:r})=>{const{latex:n,pos:s}=t;return n?e.insertContentAt(s??r.state.selection.from,{type:this.name,attrs:{latex:n}}):!1},deleteBlockMath:t=>({editor:e,tr:r})=>{var n;const s=(n=t==null?void 0:t.pos)!=null?n:e.state.selection.$from.pos,i=e.state.doc.nodeAt(s);return!i||i.type.name!==this.name?!1:(r.delete(s,s+i.nodeSize),!0)},updateBlockMath:t=>({editor:e,tr:r})=>{const n=t==null?void 0:t.latex;let s=t==null?void 0:t.pos;s===void 0&&(s=e.state.selection.$from.pos);const i=e.state.doc.nodeAt(s);return!i||i.type.name!==this.name?!1:(r.setNodeMarkup(s,this.type,{...i.attrs,latex:n||i.attrs.latex}),!0)}}},parseHTML(){return[{tag:'div[data-type="block-math"]'}]},renderHTML({HTMLAttributes:t}){return["div",rt(t,{"data-type":"block-math"})]},parseMarkdown:t=>({type:"blockMath",attrs:{latex:t.latex}}),renderMarkdown:t=>{var e;return["$$",((e=t.attrs)==null?void 0:e.latex)||"","$$"].join(`
`)},markdownTokenizer:{name:"blockMath",level:"block",start:t=>t.indexOf("$$"),tokenize:t=>{const e=t.match(/^\$\$([^$]+)\$\$/);if(!e)return;const[r,n]=e;return{type:"blockMath",raw:r,latex:n.trim()}}},addInputRules(){return[new ll({find:/^\$\$\$([^$]+)\$\$\$$/,handler:({state:t,range:e,match:r})=>{const[,n]=r,{tr:s}=t,i=e.from,o=e.to;s.replaceWith(i,o,this.type.create({latex:n}))}})]},addNodeView(){const{katexOptions:t}=this.options;return({node:e,getPos:r})=>{const n=document.createElement("div"),s=document.createElement("div");n.className="tiptap-mathematics-render",this.editor.isEditable&&n.classList.add("tiptap-mathematics-render--editable"),s.className="block-math-inner",n.dataset.type="block-math",n.setAttribute("data-latex",e.attrs.latex),n.appendChild(s);function i(){try{S0.render(e.attrs.latex,s,t),n.classList.remove("block-math-error")}catch{n.textContent=e.attrs.latex,n.classList.add("block-math-error")}}const o=a=>{a.preventDefault(),a.stopPropagation();const l=r();l!=null&&this.options.onClick&&this.options.onClick(e,l)};return this.options.onClick&&n.addEventListener("click",o),i(),{dom:n,destroy(){n.removeEventListener("click",o)}}}}}),_F=mr.create({name:"inlineMath",group:"inline",inline:!0,atom:!0,addOptions(){return{onClick:void 0,katexOptions:void 0}},addAttributes(){return{latex:{default:"",parseHTML:t=>t.getAttribute("data-latex"),renderHTML:t=>({"data-latex":t.latex})}}},addCommands(){return{insertInlineMath:t=>({editor:e,tr:r})=>{var n;const s=t.latex,i=(n=t==null?void 0:t.pos)!=null?n:e.state.selection.from;return s?(r.replaceWith(i,i,this.type.create({latex:s})),!0):!1},deleteInlineMath:t=>({editor:e,tr:r})=>{var n;const s=(n=t==null?void 0:t.pos)!=null?n:e.state.selection.$from.pos,i=e.state.doc.nodeAt(s);return!i||i.type.name!==this.name?!1:(r.delete(s,s+i.nodeSize),!0)},updateInlineMath:t=>({editor:e,tr:r})=>{const n=t==null?void 0:t.latex;let s=t==null?void 0:t.pos;s===void 0&&(s=e.state.selection.$from.pos);const i=e.state.doc.nodeAt(s);return!i||i.type.name!==this.name?!1:(r.setNodeMarkup(s,this.type,{...i.attrs,latex:n}),!0)}}},parseHTML(){return[{tag:'span[data-type="inline-math"]'}]},renderHTML({HTMLAttributes:t}){return["span",rt(t,{"data-type":"inline-math"})]},parseMarkdown:t=>({type:"inlineMath",attrs:{latex:t.latex}}),renderMarkdown:t=>{var e;return`$${((e=t.attrs)==null?void 0:e.latex)||""}$`},markdownTokenizer:{name:"inlineMath",level:"inline",start:t=>t.indexOf("$"),tokenize:t=>{const e=t.match(/^\$([^$]+)\$(?!\$)/);if(!e)return;const[r,n]=e;return{type:"inlineMath",raw:r,latex:n.trim()}}},addInputRules(){return[new ll({find:/(^|[^$])(\$\$([^$\n]+?)\$\$)(?!\$)/,handler:({state:t,range:e,match:r})=>{const n=r[3],{tr:s}=t,i=e.from,o=e.to;s.replaceWith(i,o,this.type.create({latex:n}))}})]},addNodeView(){const{katexOptions:t}=this.options;return({node:e,getPos:r})=>{const n=document.createElement("span");n.className="tiptap-mathematics-render",this.editor.isEditable&&n.classList.add("tiptap-mathematics-render--editable"),n.dataset.type="inline-math",n.setAttribute("data-latex",e.attrs.latex);function s(){try{S0.render(e.attrs.latex,n,t),n.classList.remove("inline-math-error")}catch{n.textContent=e.attrs.latex,n.classList.add("inline-math-error")}}const i=o=>{o.preventDefault(),o.stopPropagation();const a=r();a!=null&&this.options.onClick&&this.options.onClick(e,a)};return this.options.onClick&&n.addEventListener("click",i),s(),{dom:n,destroy(){n.removeEventListener("click",i)}}}}}),OF=qe.create({name:"Mathematics",addOptions(){return{inlineOptions:void 0,blockOptions:void 0,katexOptions:void 0}},addExtensions(){return[RF.configure({...this.options.blockOptions,katexOptions:this.options.katexOptions}),_F.configure({...this.options.inlineOptions,katexOptions:this.options.katexOptions})]}}),DF=OF;const IF=["#FFFFFF","#6C5DD3","#00E0FF","#FF49DB","#FFD700","#8E8EA0","#FF4444","#44FF44"],zF=({editor:t,minimal:e})=>{if(!t)return null;const r=({onClick:n,isActive:s,disabled:i,children:o,title:a})=>f.jsx("button",{onClick:n,disabled:i,title:a,className:`p-1.5 rounded-lg transition-colors ${s?"bg-gaming-primary text-white":"text-gaming-textMuted hover:text-white hover:bg-gaming-card/50"} ${i?"opacity-50 cursor-not-allowed":""}`,children:o});return f.jsxs("div",{className:"flex flex-wrap gap-1 p-2 bg-gaming-card/30 border-b border-white/5",children:[f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().undo().run(),disabled:!t.can().undo(),title:"",children:f.jsx(RE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().redo().run(),disabled:!t.can().redo(),title:"",children:f.jsx(TE,{size:16})})]}),f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"",children:f.jsx(lE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"",children:f.jsx(gE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),title:"",children:f.jsx(jE,{size:16})}),!e&&f.jsx(r,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),title:"",children:f.jsx(NE,{size:16})})]}),f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().toggleSubscript().run(),isActive:t.isActive("subscript"),title:"  (HO)",children:f.jsx(ME,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleSuperscript().run(),isActive:t.isActive("superscript"),title:"  (x)",children:f.jsx(AE,{size:16})})]}),!e&&f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().toggleHeading({level:1}).run(),isActive:t.isActive("heading",{level:1}),title:" 1",children:f.jsx(fE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleHeading({level:2}).run(),isActive:t.isActive("heading",{level:2}),title:" 2",children:f.jsx(pE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleHeading({level:3}).run(),isActive:t.isActive("heading",{level:3}),title:" 3",children:f.jsx(mE,{size:16})})]}),!e&&f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:" ",children:f.jsx(fw,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:" ",children:f.jsx(bE,{size:16})})]}),!e&&f.jsxs("div",{className:"flex gap-0.5 border-r border-white/10 pr-2 mr-1",children:[f.jsx(r,{onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),title:"  ",children:f.jsx(nE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),title:" ",children:f.jsx(rE,{size:16})}),f.jsx(r,{onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),title:"  ",children:f.jsx(sE,{size:16})})]}),f.jsx("div",{className:"flex gap-0.5 items-center border-r border-white/10 pr-2 mr-1",children:f.jsx(r,{onClick:()=>{const n=prompt("  LaTeX (: x^2 + y^2 = r^2):","x^2 + y^2 = r^2");n&&t.chain().focus().insertContent(`$${n}$`).run()},title:"  (LaTeX)",children:f.jsx(EE,{size:16})})}),f.jsx("div",{className:"flex gap-0.5 items-center pl-1",children:f.jsxs("div",{className:"flex items-center gap-1 bg-gaming-bg/50 rounded-lg p-1",children:[f.jsx(kE,{size:14,className:"text-gaming-textMuted ml-1"}),IF.map(n=>f.jsx("button",{onClick:()=>t.chain().focus().setColor(n).run(),className:`w-4 h-4 rounded-full border border-white/10 hover:scale-110 transition-transform ${t.isActive("textStyle",{color:n})?"ring-2 ring-white":""}`,style:{backgroundColor:n},title:n},n))]})})]})},xh=({content:t,onChange:e,placeholder:r,minHeight:n="200px",minimal:s=!1,className:i=""})=>{const o=Ve.useRef(null),a=async d=>{if(d)try{const h=d.name.split(".").pop(),m=`${`${Date.now()}_${Math.random().toString(36).substring(2)}.${h}`}`,{error:y}=await pi.storage.from("images").upload(m,d);if(y)throw y;const{data:x}=pi.storage.from("images").getPublicUrl(m);c&&c.chain().focus().setImage({src:x.publicUrl}).run()}catch(h){console.error("Error uploading image:",h),alert("  ")}},l=d=>{const h=(d.clipboardData||d.originalEvent.clipboardData).items;for(const p of h)if(p.kind==="file"&&p.type.startsWith("image/")){d.preventDefault();const m=p.getAsFile();a(m);return}},u=Ve.useMemo(()=>[pF,UB,CF,NF,Yk,SF,gF.configure({types:["heading","paragraph"]}),jF.configure({inline:!0,allowBase64:!0}),DF.configure({katexOptions:{throwOnError:!1}})],[]),c=M$({extensions:u,content:t,onUpdate:({editor:d})=>{e(d.getHTML())},editorProps:{attributes:{class:`prose prose-invert max-w-none focus:outline-none px-4 py-3 text-white ${s?"text-sm":""}`,style:`min-height: ${n}`},handlePaste:(d,h)=>{l(h);const p=(h.clipboardData||h.originalEvent.clipboardData).items;for(const m of p)if(m.kind==="file"&&m.type.startsWith("image/"))return!0;return!1}}});return T.useEffect(()=>{if(c&&t!==c.getHTML()){if(c.getText()===""&&t==="")return;c.commands.setContent(t)}},[t,c]),f.jsxs("div",{className:`bg-gaming-bg/50 border border-white/10 rounded-xl overflow-hidden focus-within:border-gaming-primary/50 transition-colors ${i}`,children:[f.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/*",onChange:d=>a(d.target.files[0])}),f.jsx(zF,{editor:c,minimal:s}),f.jsx(xk,{editor:c,style:{minHeight:n}})]})},LF=({data:t,onChange:e,lang:r})=>{const[n,s]=T.useState(!1),i=(l,u)=>{e({...t,[l]:u})},o=async()=>{s(!0);try{const l=await Ut(t.bodyTj||"","tj","ru");i("bodyRu",l)}finally{s(!1)}},a=async()=>{s(!0);try{const l=await Ut(t.bodyRu||"","ru","tj");i("bodyTj",l)}finally{s(!1)}};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h4",{className:"text-lg font-semibold text-gaming-accent flex items-center gap-2",children:[f.jsx(xn,{size:20}),r==="ru"?" ":" "]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:r==="ru"?" (RU)":" (RU)"}),f.jsx(xh,{content:t.bodyRu||"",onChange:l=>i("bodyRu",l),placeholder:r==="ru"?"  ...":"   ..."})]}),f.jsx("button",{type:"button",onClick:o,disabled:n,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:n?f.jsx(It,{size:16,className:"animate-spin"}):f.jsx(er,{size:16,className:"rotate-180"})})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:r==="ru"?" (TJ)":" (TJ)"}),f.jsx(xh,{content:t.bodyTj||"",onChange:l=>i("bodyTj",l),placeholder:"   ..."})]}),f.jsx("button",{type:"button",onClick:a,disabled:n,className:"mt-7 flex items-center gap-1 px-3 py-3 h-fit bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:n?f.jsx(It,{size:16,className:"animate-spin"}):f.jsx(er,{size:16})})]}),f.jsxs("div",{className:"flex justify-between text-xs text-gaming-textMuted",children:[f.jsxs("span",{children:["RU: ",(t.bodyRu||"").length," ",r==="ru"?"":""]}),f.jsxs("span",{children:["TJ: ",(t.bodyTj||"").length," ",r==="ru"?"":""]})]})]})},Mb=[{id:"multiple_choice",icon:fw,label:{ru:"4  ",tj:"4  "}},{id:"matching",icon:iE,label:{ru:"",tj:""}},{id:"numeric",icon:hE,label:{ru:" ",tj:" "}}],PF=["","","","","","","","","","","","","","","","","C","%","","",""],$F=({data:t,onChange:e,lang:r})=>{const n=t.questions||[],[s,i]=T.useState({}),o=(P="multiple_choice")=>{let D={id:`q_${Date.now()}`,type:P,textRu:"",textTj:"",image:null};P==="multiple_choice"?(D.options=[{id:`opt_${Date.now()}_1`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_2`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_3`,textRu:"",textTj:"",image:null},{id:`opt_${Date.now()}_4`,textRu:"",textTj:"",image:null}],D.correctId=null):P==="matching"?(D.leftItems=[{id:"A",textRu:"",textTj:"",image:null},{id:"B",textRu:"",textTj:"",image:null},{id:"C",textRu:"",textTj:"",image:null},{id:"D",textRu:"",textTj:"",image:null}],D.rightItems=[{id:"1",textRu:"",textTj:"",image:null},{id:"2",textRu:"",textTj:"",image:null},{id:"3",textRu:"",textTj:"",image:null},{id:"4",textRu:"",textTj:"",image:null},{id:"5",textRu:"",textTj:"",image:null}],D.correctMatches={A:"",B:"",C:"",D:""}):P==="numeric"&&(D.digits=["","","",""],D.unit=""),e({...t,questions:[...n,D]})},a=(P,D,B)=>{const I=[...n];I[P]={...I[P],[D]:B},e({...t,questions:I})},l=P=>{const D=n.filter((B,I)=>I!==P);e({...t,questions:D})},u=(P,D,B,I)=>{const H=[...n];H[P].options[D]={...H[P].options[D],[B]:I},e({...t,questions:H})},c=(P,D)=>{const B=[...n];B[P].correctId=D,e({...t,questions:B})},d=(P,D,B,I)=>{const H=[...n];H[P].leftItems[D]={...H[P].leftItems[D],[B]:I},e({...t,questions:H})},h=(P,D,B,I)=>{const H=[...n];H[P].rightItems[D]={...H[P].rightItems[D],[B]:I},e({...t,questions:H})},p=(P,D,B)=>{const I=[...n];I[P].correctMatches={...I[P].correctMatches,[D]:B},e({...t,questions:I})},m=(P,D,B)=>{if(B.length>1&&(B=B.slice(-1)),B&&!/^\d$/.test(B))return;const I=[...n];I[P].digits[D]=B,e({...t,questions:I})},y=(P,D)=>{const B=[...n];B[P].unit=D,e({...t,questions:B})},x=async P=>{const D=`q_${P}`;i(B=>({...B,[D]:!0}));try{const B=await Ut(n[P].textRu,"ru","tj");a(P,"textTj",B)}finally{i(B=>({...B,[D]:!1}))}},v=async P=>{const D=`q_${P}`;i(B=>({...B,[D]:!0}));try{const B=await Ut(n[P].textTj,"tj","ru");a(P,"textRu",B)}finally{i(B=>({...B,[D]:!1}))}},w=async(P,D)=>{const B=`opt_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].options[D],H=await Ut(I.textRu,"ru","tj");u(P,D,"textTj",H)}finally{i(I=>({...I,[B]:!1}))}},k=async(P,D)=>{const B=`opt_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].options[D],H=await Ut(I.textTj,"tj","ru");u(P,D,"textRu",H)}finally{i(I=>({...I,[B]:!1}))}},E=async(P,D)=>{const B=`left_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].leftItems[D],H=await Ut(I.textRu,"ru","tj");d(P,D,"textTj",H)}finally{i(I=>({...I,[B]:!1}))}},M=async(P,D)=>{const B=`left_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].leftItems[D],H=await Ut(I.textTj,"tj","ru");d(P,D,"textRu",H)}finally{i(I=>({...I,[B]:!1}))}},j=async(P,D)=>{const B=`right_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].rightItems[D],H=await Ut(I.textRu,"ru","tj");h(P,D,"textTj",H)}finally{i(I=>({...I,[B]:!1}))}},N=async(P,D)=>{const B=`right_${P}_${D}`;i(I=>({...I,[B]:!0}));try{const I=n[P].rightItems[D],H=await Ut(I.textTj,"tj","ru");h(P,D,"textRu",H)}finally{i(I=>({...I,[B]:!1}))}},[_,L]=T.useState(!1),V=(P,D)=>{const B=P.clipboardData.items;for(let I=0;I<B.length;I++)if(B[I].type.indexOf("image")!==-1){const H=B[I].getAsFile(),Z=new FileReader;Z.onload=q=>{D(q.target.result)},Z.readAsDataURL(H),P.preventDefault()}},ee=({image:P,onUpload:D,onRemove:B,size:I="md"})=>{const H=Ve.useRef(null),[Z,q]=T.useState(!1),ue=async ne=>{const $=ne.target.files[0];if($){q(!0);try{const U=$.name.split(".").pop(),ie=`${`${Date.now()}_${Math.random().toString(36).substring(2)}.${U}`}`,{error:_e}=await pi.storage.from("images").upload(ie,$);if(_e){console.error(" :",_e),alert(r==="ru"?"  ":"   ");return}const{data:Ee}=pi.storage.from("images").getPublicUrl(ie);D(Ee.publicUrl)}catch(U){console.error("Upload error:",U),alert("Upload failed")}finally{q(!1)}}};return P?f.jsxs("div",{className:`relative group ${I==="sm"?"w-10 h-10":"w-full h-32"} bg-gaming-card/50 rounded-lg border border-white/10 overflow-hidden`,children:[f.jsx("img",{src:P,alt:"Uploaded",className:"w-full h-full object-cover"}),f.jsx("button",{onClick:B,className:"absolute top-1 right-1 p-1 bg-red-500/80 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",title:"",children:f.jsx(Di,{size:12})})]}):f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"file",ref:H,className:"hidden",accept:"image/*",onChange:ue,disabled:Z}),f.jsxs("button",{onClick:()=>{var ne;return(ne=H.current)==null?void 0:ne.click()},disabled:Z,className:`flex items-center justify-center ${I==="sm"?"w-10 h-10":"w-full h-10"} bg-gaming-bg/30 border border-white/10 rounded-lg hover:bg-gaming-bg/50 hover:border-gaming-primary/50 transition-all text-gaming-textMuted hover:text-gaming-primary relative`,title:" ",children:[Z?f.jsx(It,{size:I==="sm"?14:16,className:"animate-spin text-gaming-primary"}):f.jsx(ev,{size:I==="sm"?16:18}),I!=="sm"&&!Z&&f.jsx("span",{className:"ml-2 text-sm",children:r==="ru"?" ":"  "})]})]})};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("h4",{className:"text-lg font-semibold text-gaming-pink flex items-center gap-2",children:[f.jsx(Nu,{size:20}),r==="ru"?" ":" "]}),f.jsxs("div",{className:"relative",children:[f.jsxs("button",{onClick:()=>L(!_),className:"flex items-center gap-2 px-3 py-2 bg-gaming-pink/20 text-gaming-pink rounded-xl hover:bg-gaming-pink/30 transition-colors text-sm",children:[f.jsx(f0,{size:16}),r==="ru"?" ":"  ",f.jsx(jd,{size:14})]}),_&&f.jsx("div",{className:"absolute right-0 top-full mt-2 bg-gaming-card border border-white/10 rounded-xl shadow-xl z-10 min-w-[200px] overflow-hidden",children:Mb.map(P=>{const D=P.icon;return f.jsxs("button",{onClick:()=>{o(P.id),L(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-white/5 transition-colors text-left",children:[f.jsx(D,{size:18,className:"text-gaming-pink"}),f.jsx("span",{className:"text-sm",children:P.label[r]})]},P.id)})})]})]}),n.length===0?f.jsxs("div",{className:"text-center py-8 text-gaming-textMuted",children:[f.jsx(Nu,{size:32,className:"mx-auto mb-2 opacity-30"}),f.jsx("p",{children:r==="ru"?" .  !":" .   !"})]}):f.jsx("div",{className:"space-y-6",children:n.map((P,D)=>{var B;return f.jsxs("div",{className:"bg-gaming-bg/30 rounded-xl p-4 border border-white/5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"text-sm text-gaming-textMuted",children:[r==="ru"?"":""," #",D+1]}),f.jsx("span",{className:"text-xs px-2 py-1 bg-gaming-pink/20 text-gaming-pink rounded-full",children:((B=Mb.find(I=>I.id===P.type))==null?void 0:B.label[r])||P.type})]}),f.jsx("button",{onClick:()=>l(D),className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:f.jsx(Mu,{size:16})})]}),f.jsx("div",{className:"mb-4",children:f.jsx(ee,{image:P.image,onUpload:I=>a(D,"image",I),onRemove:()=>a(D,"image",null),size:"lg"})}),f.jsxs("div",{className:"mb-3",children:[f.jsx("label",{className:"text-xs text-gaming-textMuted mb-1 block ml-1",children:r==="ru"?"  (RU)":"  (RU)"}),f.jsxs("div",{className:"flex gap-2 items-start",children:[f.jsx("div",{className:"flex-1",children:f.jsx(xh,{content:P.textRu,onChange:I=>a(D,"textRu",I),placeholder:r==="ru"?"  ...":"   ...",minimal:!0,minHeight:"100px"})}),f.jsx("button",{onClick:()=>v(D),disabled:s[`q_${D}`],className:"mt-2 px-2 py-2 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",title:" TJ -> RU",children:s[`q_${D}`]?f.jsx(It,{size:14,className:"animate-spin"}):f.jsx(er,{size:14,className:"rotate-180"})})]})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"text-xs text-gaming-textMuted mb-1 block ml-1",children:r==="ru"?"  (TJ)":"  (TJ)"}),f.jsxs("div",{className:"flex gap-2 items-start",children:[f.jsx("div",{className:"flex-1",children:f.jsx(xh,{content:P.textTj,onChange:I=>a(D,"textTj",I),placeholder:r==="ru"?"  ...":"   ...",minimal:!0,minHeight:"100px"})}),f.jsx("button",{onClick:()=>x(D),disabled:s[`q_${D}`],className:"mt-2 px-2 py-2 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",title:" RU -> TJ",children:s[`q_${D}`]?f.jsx(It,{size:14,className:"animate-spin"}):f.jsx(er,{size:14})})]})]}),P.type==="multiple_choice"&&f.jsxs("div",{className:"space-y-2 ml-4",children:[f.jsx("span",{className:"text-xs text-gaming-textMuted",children:r==="ru"?"  (   )":" (  )"}),P.options.map((I,H)=>f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>c(D,I.id),className:`p-1.5 rounded-lg transition-colors ${P.correctId===I.id?"bg-green-500/20 text-green-400":"bg-gaming-card/50 text-gaming-textMuted hover:text-white"}`,children:f.jsx(Nn,{size:14})}),f.jsxs("span",{className:"text-gaming-textMuted text-sm w-6",children:[String.fromCharCode(65+H),")"]}),f.jsx("input",{type:"text",value:I.textRu,onChange:Z=>u(D,H,"textRu",Z.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50",onPaste:Z=>V(Z,q=>u(D,H,"image",q))}),f.jsx("button",{onClick:()=>k(D,H),disabled:s[`opt_${D}_${H}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`opt_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12,className:"rotate-180"})}),f.jsx("input",{type:"text",value:I.textTj,onChange:Z=>u(D,H,"textTj",Z.target.value),placeholder:"TJ",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50",onPaste:Z=>V(Z,q=>u(D,H,"image",q))}),f.jsx("button",{onClick:()=>w(D,H),disabled:s[`opt_${D}_${H}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`opt_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12})}),f.jsx(ee,{image:I.image,onUpload:Z=>u(D,H,"image",Z),onRemove:()=>u(D,H,"image",null),size:"sm"})]},I.id))]}),P.type==="matching"&&f.jsxs("div",{className:"space-y-4 ml-4",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("span",{className:"text-xs text-gaming-textMuted block mb-2",children:r==="ru"?"  (A, B, C, D)":" "}),P.leftItems.map((I,H)=>f.jsxs("div",{className:"p-2 sm:p-3 bg-white/5 rounded-xl border border-white/5 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-gaming-pink font-bold w-6",children:[I.id,")"]}),f.jsx("input",{type:"text",value:I.textRu,onChange:Z=>d(D,H,"textRu",Z.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-pink/50",onPaste:Z=>V(Z,q=>d(D,H,"image",q))}),f.jsx("button",{onClick:()=>M(D,H),disabled:s[`left_${D}_${H}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`left_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12,className:"rotate-180"})})]}),f.jsxs("div",{className:"pl-8 flex gap-2",children:[f.jsx("input",{type:"text",value:I.textTj,onChange:Z=>d(D,H,"textTj",Z.target.value),placeholder:"TJ",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white/70 placeholder-white/20 focus:outline-none focus:border-gaming-accent/50",onPaste:Z=>V(Z,q=>d(D,H,"image",q))}),f.jsx("button",{onClick:()=>E(D,H),disabled:s[`left_${D}_${H}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`left_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12})}),f.jsx(ee,{image:I.image,onUpload:Z=>d(D,H,"image",Z),onRemove:()=>d(D,H,"image",null),size:"sm"})]})]},I.id))]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("span",{className:"text-xs text-gaming-textMuted block mb-2",children:r==="ru"?"  (1-5)":" "}),P.rightItems.map((I,H)=>f.jsxs("div",{className:"p-2 sm:p-3 bg-white/5 rounded-xl border border-white/5 space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"text-gaming-accent font-bold w-6",children:[I.id,")"]}),f.jsx("input",{type:"text",value:I.textRu,onChange:Z=>h(D,H,"textRu",Z.target.value),placeholder:"RU",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50",onPaste:Z=>V(Z,q=>h(D,H,"image",q))}),f.jsx("button",{onClick:()=>N(D,H),disabled:s[`right_${D}_${H}`],className:"p-1.5 bg-gaming-primary/20 text-gaming-primary rounded-lg hover:bg-gaming-primary/30 transition-colors disabled:opacity-50",children:s[`right_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12,className:"rotate-180"})})]}),f.jsxs("div",{className:"pl-8 flex gap-2",children:[f.jsx("input",{type:"text",value:I.textTj,onChange:Z=>h(D,H,"textTj",Z.target.value),placeholder:"TJ",className:"w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-2 py-1.5 text-sm text-white/70 placeholder-white/20 focus:outline-none focus:border-gaming-accent/50",onPaste:Z=>V(Z,q=>h(D,H,"image",q))}),f.jsx("button",{onClick:()=>j(D,H),disabled:s[`right_${D}_${H}`],className:"p-1.5 bg-gaming-accent/20 text-gaming-accent rounded-lg hover:bg-gaming-accent/30 transition-colors disabled:opacity-50",children:s[`right_${D}_${H}`]?f.jsx(It,{size:12,className:"animate-spin"}):f.jsx(er,{size:12})}),f.jsx(ee,{image:I.image,onUpload:Z=>h(D,H,"image",Z),onRemove:()=>h(D,H,"image",null),size:"sm"})]})]},I.id))]})]}),f.jsxs("div",{className:"bg-gaming-card/30 rounded-xl p-4 border border-white/10",children:[f.jsx("span",{className:"text-sm font-semibold text-white block mb-4",children:r==="ru"?"  :":"  :"}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"border-separate border-spacing-2 mx-auto",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"w-8"}),P.rightItems.map(I=>f.jsx("th",{className:"text-center font-bold text-gaming-accent text-sm pb-2",children:I.id},I.id))]})}),f.jsx("tbody",{children:P.leftItems.map(I=>f.jsxs("tr",{children:[f.jsx("td",{className:"text-center font-bold text-gaming-pink text-sm pr-2",children:I.id}),P.rightItems.map(H=>{const Z=P.correctMatches[I.id]===H.id;return f.jsx("td",{className:"text-center p-0.5",children:f.jsx("button",{onClick:()=>p(D,I.id,H.id),className:`w-8 h-8 rounded-full border transition-all flex items-center justify-center
                                                                                ${Z?"bg-gaming-primary border-gaming-primary shadow-[0_0_8px_rgba(var(--gaming-primary-rgb),0.4)]":"bg-white/5 border-white/20 hover:border-white/40"}`,children:Z&&f.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})},H.id)})]},I.id))})]})}),f.jsx("p",{className:"text-[10px] text-gaming-textMuted mt-4 text-center",children:r==="ru"?"*       ":"*         "})]})]}),P.type==="numeric"&&f.jsxs("div",{className:"space-y-4 ml-4",children:[f.jsx("span",{className:"text-xs text-gaming-textMuted",children:r==="ru"?"   ( 4 ):":"  ( 4 ):"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"flex gap-2",children:P.digits.map((I,H)=>f.jsx("input",{type:"text",value:I,onChange:Z=>m(D,H,Z.target.value),maxLength:1,className:"w-12 h-12 text-center text-2xl font-bold bg-gaming-bg/50 border-2 border-white/20 rounded-lg text-white focus:outline-none focus:border-gaming-primary transition-colors",placeholder:"0"},H))}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-gaming-textMuted text-sm",children:r==="ru"?":":":"}),f.jsx("select",{value:P.unit||"",onChange:I=>y(D,I.target.value),className:"bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-white",children:PF.map(I=>f.jsx("option",{value:I,children:I||(r==="ru"?"( )":"( )")},I))})]})]}),f.jsxs("div",{className:"bg-gaming-card/30 rounded-lg p-3 text-sm",children:[f.jsx("span",{className:"text-gaming-textMuted",children:r==="ru"?": ":": "}),f.jsxs("span",{className:"text-gaming-primary font-bold",children:[P.digits.filter(I=>I).join("")||""," ",P.unit]})]})]})]},P.id)})})]})},BF=(t,e=1600,r=.7)=>new Promise((n,s)=>{const i=new FileReader;i.readAsDataURL(t),i.onload=o=>{const a=new Image;a.src=o.target.result,a.onload=()=>{const l=document.createElement("canvas");let u=a.width,c=a.height;u>c?u>e&&(c=Math.round(c*e/u),u=e):c>e&&(u=Math.round(u*e/c),c=e),l.width=u,l.height=c,l.getContext("2d").drawImage(a,0,0,u,c);const h=l.toDataURL("image/jpeg",r);n(h)},a.onerror=l=>s(l)},i.onerror=o=>s(o)}),FF=({slide:t,index:e,onUpdate:r,onDelete:n,lang:s,editLang:i})=>{const{attributes:o,listeners:a,setNodeRef:l,transform:u,transition:c}=lf({id:t.id}),d={transform:Pi.Transform.toString(u),transition:c},h=i==="ru"?"captionRu":"captionTj",p=i==="ru"?s==="ru"?" (RU)":" (RU)":s==="ru"?" (TJ)":" (TJ)";return f.jsx("div",{ref:l,style:d,className:"bg-gaming-bg/30 rounded-xl p-4 border border-white/5",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{...o,...a,className:"mt-2 cursor-grab text-gaming-textMuted hover:text-white",children:f.jsx(Fh,{size:18})}),f.jsxs("div",{className:"flex-1 space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("span",{className:"text-sm text-gaming-textMuted",children:[""," #",e+1]}),f.jsx("div",{className:"flex items-center gap-1",children:f.jsx("button",{onClick:()=>n(t.id),className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:f.jsx(Mu,{size:16})})})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(ev,{size:16,className:"text-gaming-textMuted"}),f.jsx("input",{type:"url",value:t.imageUrl||"",onChange:m=>r(t.id,"imageUrl",m.target.value),placeholder:s==="ru"?"URL ":"URL ",className:"flex-1 bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-white/30 focus:outline-none focus:border-gaming-gold/50"})]}),t.imageUrl&&f.jsx("div",{className:"w-full h-32 rounded-lg overflow-hidden bg-gaming-card/50",children:f.jsx("img",{src:t.imageUrl,alt:`Slide ${e+1}`,className:"w-full h-full object-contain",onError:m=>{m.target.style.display="none"}})}),f.jsx("input",{type:"text",value:t[h]||"",onChange:m=>r(t.id,h,m.target.value),placeholder:p,className:`w-full bg-gaming-bg/50 border border-white/10 rounded-lg px-3 py-2 text-sm text-white placeholder-white/30 focus:outline-none transition-colors ${i==="ru"?"focus:border-gaming-primary/50":"focus:border-gaming-accent/50"}`})]})]})})},HF=({slidesRu:t=[],slidesTj:e=[],onChange:r,lang:n})=>{const[s,i]=T.useState("ru"),[o,a]=T.useState(!1),l=Ve.useRef(null),u=s==="ru"?t:e,c=s==="ru"?"slidesRu":"slidesTj",d=I6(E0(sf),E0(nf,{coordinateGetter:n7})),h=()=>{const v={id:`slide_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,imageUrl:"",captionRu:"",captionTj:""};r(c,[...u,v])},p=async v=>{const w=Array.from(v.target.files);if(w.length!==0){a(!0);try{const k=await Promise.all(w.map(async E=>{const M=await BF(E);return{id:`slide_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,imageUrl:M,captionRu:"",captionTj:""}}));r(c,[...u,...k])}catch(k){console.error("Error compressing images:",k),alert(n==="ru"?"   ":"   ")}finally{a(!1),l.current&&(l.current.value="")}}},m=(v,w,k)=>{const E=u.map(M=>M.id===v?{...M,[w]:k}:M);r(c,E)},y=v=>{r(c,u.filter(w=>w.id!==v))},x=v=>{if(active.id!==over.id){const w=u.findIndex(E=>E.id===active.id),k=u.findIndex(E=>E.id===over.id);r(c,ja(u,w,k))}};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 bg-white/5 p-4 rounded-2xl border border-white/10",children:[f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("h4",{className:"text-lg font-semibold text-gaming-gold flex items-center gap-2",children:[f.jsx(fi,{size:20}),n==="ru"?" ":" "]}),f.jsxs("div",{className:"flex p-1 bg-black/30 rounded-xl border border-white/5 w-fit",children:[f.jsxs("button",{onClick:()=>i("ru"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${s==="ru"?"bg-gaming-primary text-white shadow-lg":"text-gaming-textMuted hover:text-white"}`,children:[f.jsx(Xm,{size:14}),""]}),f.jsxs("button",{onClick:()=>i("tj"),className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold transition-all ${s==="tj"?"bg-gaming-accent text-white shadow-lg":"text-gaming-textMuted hover:text-white"}`,children:[f.jsx(Xm,{size:14}),""]})]})]}),f.jsxs("div",{className:"flex gap-2 items-center self-end sm:self-center",children:[f.jsx("input",{type:"file",ref:l,onChange:p,multiple:!0,accept:"image/*",className:"hidden"}),f.jsxs("button",{onClick:()=>{var v;return(v=l.current)==null?void 0:v.click()},disabled:o,className:"flex items-center gap-2 px-3 py-2 bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors text-sm",children:[o?f.jsx(It,{size:16,className:"animate-spin"}):f.jsx(ev,{size:16}),n==="ru"?"":""]}),f.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-3 py-2 bg-gaming-gold/20 text-gaming-gold rounded-xl hover:bg-gaming-gold/30 transition-colors text-sm",children:[f.jsx(f0,{size:16}),n==="ru"?"":""]})]})]}),u.length===0?f.jsxs("div",{className:"text-center py-12 bg-gaming-bg/20 rounded-2xl border border-dashed border-white/10",children:[f.jsx(fi,{size:48,className:"mx-auto mb-3 opacity-20 text-gaming-gold"}),f.jsx("p",{className:"text-gaming-textMuted",children:n==="ru"?`  (${s==="ru"?"RU":"TJ"}) `:`  (${s==="ru"?"RU":"TJ"})  `}),f.jsx("button",{onClick:h,className:"mt-4 px-4 py-2 text-sm text-gaming-gold hover:underline",children:n==="ru"?"  ":"  "})]}):f.jsx(Q6,{sensors:d,collisionDetection:$6,onDragEnd:x,children:f.jsx(zd,{items:u.map(v=>v.id),strategy:Id,children:f.jsx("div",{className:"space-y-3",children:u.map((v,w)=>f.jsx(FF,{slide:v,index:w,lang:n,editLang:s,onUpdate:m,onDelete:y},v.id))})})})]})},UF=[{id:"video",icon:Au,label:{ru:"",tj:""}},{id:"text",icon:xn,label:{ru:"",tj:""}},{id:"test",icon:Nu,label:{ru:"",tj:""}},{id:"slides",icon:fi,label:{ru:"",tj:""}}],VF=({lesson:t,onSave:e,onClose:r,lang:n,isSaving:s})=>{const[i,o]=T.useState("video"),[a,l]=T.useState(t.content||{video:{url:"",descriptionRu:"",descriptionTj:""},text:{bodyRu:"",bodyTj:""},test:{questions:[]},slidesRu:[],slidesTj:[]}),u=h=>{o(h)},c=(h,p)=>{l(m=>({...m,[h]:p}))},d=()=>{e({...t,content:a})};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/70 backdrop-blur-sm sm:p-4",children:f.jsxs("div",{className:"w-full max-w-4xl h-[90vh] sm:h-auto sm:max-h-[90vh] bg-gaming-card/95 backdrop-blur-xl rounded-t-3xl sm:rounded-3xl border border-white/10 overflow-hidden flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-white/10 shrink-0",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:n==="ru"?"":""}),f.jsx("p",{className:"text-gaming-textMuted mt-1 text-sm sm:text-base truncate max-w-[200px] sm:max-w-md",children:n==="tj"&&t.titleTj||t.title})]}),f.jsx("button",{onClick:r,disabled:s,className:"p-2 text-gaming-textMuted hover:text-white transition-colors disabled:opacity-50",children:f.jsx(Di,{size:24})})]}),f.jsx("div",{className:"flex gap-2 px-4 sm:px-6 py-3 sm:py-4 border-b border-white/5 overflow-x-auto shrink-0 no-scrollbar",children:UF.map(h=>{const p=h.icon,m=i===h.id;return f.jsxs("button",{onClick:()=>u(h.id),disabled:s,className:`flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl whitespace-nowrap transition-all text-sm sm:text-base ${m?"bg-gaming-primary text-white":"bg-gaming-bg/50 text-gaming-textMuted hover:text-white"} ${s?"opacity-50 cursor-not-allowed":""}`,children:[f.jsx(p,{size:16,className:"sm:w-[18px] sm:h-[18px]"}),h.label[n]]},h.id)})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 pointer-events-auto",children:[s&&f.jsx("div",{className:"absolute inset-0 bg-black/20 z-10 flex items-center justify-center",children:f.jsx(It,{size:40,className:"animate-spin text-gaming-primary"})}),i==="video"&&f.jsx(aO,{data:a.video||{},onChange:h=>c("video",h),lang:n}),i==="text"&&f.jsx(LF,{data:a.text||{},onChange:h=>c("text",h),lang:n}),i==="test"&&f.jsx($F,{data:a.test||{questions:[]},onChange:h=>c("test",h),lang:n}),i==="slides"&&f.jsx(HF,{slidesRu:a.slidesRu||[],slidesTj:a.slidesTj||[],onChange:(h,p)=>l(m=>({...m,[h]:p})),lang:n})]}),f.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 sm:p-6 border-t border-white/10 shrink-0 bg-gaming-card/95",children:[f.jsx("button",{onClick:r,disabled:s,className:"px-4 sm:px-6 py-2 sm:py-3 text-sm sm:text-base text-gaming-textMuted hover:text-white transition-colors disabled:opacity-50",children:n==="ru"?"":""}),f.jsxs("button",{onClick:d,disabled:s,className:"flex items-center gap-2 px-4 sm:px-6 py-2 sm:py-3 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors active:scale-95 text-sm sm:text-base disabled:opacity-70 disabled:active:scale-100",children:[s?f.jsx(It,{size:18,className:"animate-spin"}):f.jsx(Rd,{size:18}),n==="ru"?s?"...":"":s?" ...":" "]})]})]})})};function WF(t,e){const[r,n]=T.useState(t);return T.useEffect(()=>{const s=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(s)}},[t,e]),r}const Z1=[{id:"video",icon:Au,label:{ru:"",tj:""}},{id:"text",icon:xn,label:{ru:"",tj:""}},{id:"test",icon:Nu,label:{ru:"",tj:""}},{id:"presentation",icon:fi,label:{ru:"",tj:""}}],Ab="donishmand_creator_syllabus",qF=({section:t,sectionIndex:e,children:r,lang:n,onDelete:s})=>{const{attributes:i,listeners:o,setNodeRef:a,transform:l,transition:u,isDragging:c}=lf({id:t.id}),d={transform:Pi.Transform.toString(l),transition:u,opacity:c?.5:1};return f.jsx("div",{ref:a,style:d,className:"bg-gaming-bg/30 rounded-2xl border border-white/5 overflow-hidden",children:f.jsxs("div",{className:"flex items-center p-4",children:[f.jsx("div",{...i,...o,className:"cursor-grab mr-3 text-gaming-textMuted hover:text-white",children:f.jsx(Fh,{size:18})}),r]})})},KF=({topic:t,topicIndex:e,sectionIndex:r,children:n})=>{const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:u}=lf({id:t.id}),c={transform:Pi.Transform.toString(a),transition:l,opacity:u?.5:1};return f.jsx("div",{ref:o,style:c,className:"bg-gaming-card/40 rounded-xl border border-white/5 overflow-hidden",children:f.jsxs("div",{className:"flex items-center p-3",children:[f.jsx("div",{...s,...i,className:"cursor-grab mr-2 text-gaming-textMuted hover:text-white",children:f.jsx(Fh,{size:16})}),n]})})},GF=({lesson:t,lessonIndex:e,sectionIndex:r,topicIndex:n,lang:s,onDelete:i,onEdit:o,getLessonIcon:a})=>{var x;const{attributes:l,listeners:u,setNodeRef:c,transform:d,transition:h,isDragging:p}=lf({id:t.id}),m=a(t.type),y={transform:Pi.Transform.toString(d),transition:h,opacity:p?.5:1};return f.jsxs("div",{ref:c,style:y,className:"flex items-center justify-between gap-3 p-2 bg-gaming-bg/30 rounded-lg border border-white/5",children:[f.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-2 cursor-pointer group hover:bg-white/5 p-1 rounded-md transition-colors",onClick:()=>o(t),title:s==="ru"?"  ":"   ",children:[f.jsx("div",{...l,...u,className:"cursor-grab text-gaming-textMuted hover:text-white shrink-0",onClick:v=>v.stopPropagation(),children:f.jsx(Fh,{size:14})}),f.jsx(m,{size:14,className:"text-gaming-pink shrink-0"}),f.jsxs("span",{className:"text-sm truncate block group-hover:text-gaming-primary transition-colors",children:[r+1,".",n+1,".",e+1,". ",s==="tj"&&t.titleTj||t.title]}),f.jsx("span",{className:"text-xs px-2 py-0.5 bg-gaming-card/50 rounded-full text-gaming-textMuted shrink-0 hidden xs:inline-block",children:((x=Z1.find(v=>v.id===t.type))==null?void 0:x.label[s])||t.type})]}),f.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[f.jsx("button",{onClick:v=>{v.preventDefault(),v.stopPropagation(),o(t,"move")},className:"p-1 text-gaming-textMuted hover:text-gaming-accent transition-colors",title:s==="ru"?"":"",children:f.jsx(uw,{size:14})}),f.jsx("button",{onClick:v=>{v.stopPropagation(),i(t.id)},className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",title:s==="ru"?"":" ",children:f.jsx(Mu,{size:14})})]})]})},JF=({item:t,itemType:e,syllabus:r,onMove:n,onClose:s,lang:i})=>{const[o,a]=T.useState(t.fromSectionId||""),[l,u]=T.useState(t.fromTopicId||""),c=r.sections||[],d=c.find(m=>m.id===o),h=(d==null?void 0:d.topics)||[],p=()=>{e==="topic"?o&&o!==t.fromSectionId&&n(o):e==="lesson"&&o&&l&&(o!==t.fromSectionId||l!==t.fromTopicId)&&n(o,l)};return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"w-full max-w-md bg-gaming-card/95 backdrop-blur-xl rounded-2xl border border-white/10 p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4",children:i==="ru"?" ":" "}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:i==="ru"?"":""}),f.jsxs("select",{value:o,onChange:m=>{a(m.target.value),u("")},className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none",children:[f.jsx("option",{value:"",children:i==="ru"?" ...":"  ..."}),c.map(m=>f.jsx("option",{value:m.id,children:i==="tj"&&m.titleTj||m.title},m.id))]})]}),e==="lesson"&&f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:i==="ru"?"":""}),f.jsxs("select",{value:l,onChange:m=>u(m.target.value),disabled:!o,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none disabled:opacity-50",children:[f.jsx("option",{value:"",children:i==="ru"?" ...":"  ..."}),h.map(m=>f.jsx("option",{value:m.id,children:i==="tj"&&m.titleTj||m.title},m.id))]})]}),f.jsxs("div",{className:"flex gap-3 mt-6",children:[f.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80",disabled:e==="topic"?!o:!o||!l,children:i==="ru"?"":""}),f.jsx("button",{onClick:s,className:"px-4 py-2 text-gaming-textMuted hover:text-white",children:i==="ru"?"":""})]})]})})},YF=({lang:t,t:e})=>{const r=el(),[n,s]=T.useState(Qm[0]),[i,o]=T.useState(()=>{const F=localStorage.getItem(Ab);if(F)try{return JSON.parse(F)}catch{return{..._o}}return{..._o}}),[a,l]=T.useState("saved"),u=WF(i,2e3);T.useEffect(()=>{if(!u)return;(async()=>{l("saving");try{u[n]&&await po.saveStructure(n,u[n]),l("saved")}catch(ae){console.error(" -:",ae),l("error")}})()},[u,n]);const[c,d]=T.useState({}),[h,p]=T.useState({}),[m,y]=T.useState(!1),[x,v]=T.useState(null),[w,k]=T.useState(null),[E,M]=T.useState(""),[j,N]=T.useState(""),[_,L]=T.useState(""),[V,ee]=T.useState(""),[P,D]=T.useState(""),[B,I]=T.useState(""),[H,Z]=T.useState("video"),[q,ue]=T.useState(null),[ne,$]=T.useState(null),[U,fe]=T.useState(null),ie=I6(E0(sf,{activationConstraint:{distance:8}}),E0(nf,{coordinateGetter:n7})),[_e,Ee]=T.useState(null),[Ge,yt]=T.useState(null);T.useEffect(()=>{localStorage.setItem(Ab,JSON.stringify(i))},[i]);const ze=i[n]||{sections:[]},ge=F=>d(ae=>({...ae,[F]:!ae[F]})),He=F=>p(ae=>({...ae,[F]:!ae[F]})),Nt=F=>{const{active:ae,over:Ce}=F;if(!Ce||ae.id===Ce.id)return;const ke=ae.id,ce=Ce.id,xe=ke.startsWith("sec_"),Me=ke.startsWith("top_"),Pe=ke.startsWith("les_");if(xe){o(de=>{const Ye=de[n].sections,Ie=Ye.findIndex(ut=>ut.id===ke),Ae=Ye.findIndex(ut=>ut.id===ce);return{...de,[n]:{...de[n],sections:ja(Ye,Ie,Ae)}}});return}if(Me){o(de=>{const Ie=de[n].sections.map(Ae=>{const ut=Ae.topics.map(Ke=>Ke.id);if(ut.includes(ke)&&ut.includes(ce)){const Ke=Ae.topics.findIndex(ar=>ar.id===ke),Mr=Ae.topics.findIndex(ar=>ar.id===ce);return{...Ae,topics:ja(Ae.topics,Ke,Mr)}}return Ae});return{...de,[n]:{...de[n],sections:Ie}}});return}Pe&&o(de=>{const Ie=de[n].sections.map(Ae=>({...Ae,topics:Ae.topics.map(ut=>{const Ke=ut.lessons.map(Mr=>Mr.id);if(Ke.includes(ke)&&Ke.includes(ce)){const Mr=ut.lessons.findIndex(Hr=>Hr.id===ke),ar=ut.lessons.findIndex(Hr=>Hr.id===ce);return{...ut,lessons:ja(ut.lessons,Mr,ar)}}return ut})}));return{...de,[n]:{...de[n],sections:Ie}}})},Gt=()=>{if(!E.trim())return;const F={id:`sec_${Date.now()}`,title:E.trim(),titleTj:j.trim()||autoTranslate(E.trim(),"ru","tj"),topics:[]};o(ae=>{var Ce;return{...ae,[n]:{...ae[n],sections:[...((Ce=ae[n])==null?void 0:Ce.sections)||[],F]}}}),M(""),N(""),y(!1)},Jt=F=>{if(!_.trim())return;const ae={id:`top_${Date.now()}`,title:_.trim(),titleTj:V.trim()||autoTranslate(_.trim(),"ru","tj"),lessons:[]};o(Ce=>({...Ce,[n]:{...Ce[n],sections:Ce[n].sections.map(ke=>ke.id===F?{...ke,topics:[...ke.topics,ae]}:ke)}})),L(""),ee(""),v(null)},Br=(F,ae)=>{if(!P.trim())return;const Ce={id:`les_${Date.now()}`,title:P.trim(),titleTj:B.trim()||autoTranslate(P.trim(),"ru","tj"),type:H,content:{}};o(ke=>({...ke,[n]:{...ke[n],sections:ke[n].sections.map(ce=>ce.id===F?{...ce,topics:ce.topics.map(xe=>xe.id===ae?{...xe,lessons:[...xe.lessons,Ce]}:xe)}:ce)}})),D(""),I(""),Z("video"),k(null)},gr=F=>{o(ae=>({...ae,[n]:{...ae[n],sections:ae[n].sections.filter(Ce=>Ce.id!==F)}}))},Sn=(F,ae)=>{o(Ce=>({...Ce,[n]:{...Ce[n],sections:Ce[n].sections.map(ke=>ke.id===F?{...ke,topics:ke.topics.filter(ce=>ce.id!==ae)}:ke)}}))},rn=(F,ae,Ce)=>{o(ke=>({...ke,[n]:{...ke[n],sections:ke[n].sections.map(ce=>ce.id===F?{...ce,topics:ce.topics.map(xe=>xe.id===ae?{...xe,lessons:xe.lessons.filter(Me=>Me.id!==Ce)}:xe)}:ce)}}))},or=(F,ae,Ce)=>{o(ke=>{const ce={...ke},xe={...ce[n]};let Me=[...xe.sections],Pe=null;return Me=Me.map((de,Ye)=>{if(de.id===ae){const Ie=de.topics.findIndex(Ae=>Ae.id===F);if(Ie!==-1)return Pe=de.topics[Ie],{...de,topics:de.topics.filter(Ae=>Ae.id!==F)}}return de}),Pe?(Me=Me.map(de=>de.id===Ce?{...de,topics:[...de.topics,Pe]}:de),xe.sections=Me,ce[n]=xe,ce):ke}),fe(null)},Fr=(F,ae,Ce,ke,ce)=>{o(xe=>{const Me={...xe},Pe={...Me[n]};let de=[...Pe.sections],Ye=null;return de=de.map(Ie=>({...Ie,topics:Ie.topics.map(Ae=>{if(Ie.id===ae&&Ae.id===Ce){const ut=Ae.lessons.findIndex(Ke=>Ke.id===F);if(ut!==-1)return Ye=Ae.lessons[ut],{...Ae,lessons:Ae.lessons.filter(Ke=>Ke.id!==F)}}return Ae})})),Ye?(de=de.map(Ie=>({...Ie,topics:Ie.topics.map(Ae=>Ie.id===ke&&Ae.id===ce?{...Ae,lessons:[...Ae.lessons,Ye]}:Ae)})),Pe.sections=de,Me[n]=Pe,Me):xe}),fe(null)};T.useEffect(()=>{(async()=>{try{l("saving");const ae=await po.getStructure(n);ae&&o(Ce=>({...Ce,[n]:ae})),l("saved")}catch(ae){console.error("  :",ae)}})()},[n]);const[Us,Fn]=T.useState(!1),Gi=async(F,ae,Ce)=>{Fn(!0);try{let ke=F;if(!F.content){const ce=await po.getLesson(F.id);ce&&ce.content&&(ke={...F,content:ce.content},o(xe=>({...xe,[n]:{...xe[n],sections:xe[n].sections.map(Me=>Me.id===ae?{...Me,topics:Me.topics.map(Pe=>Pe.id===Ce?{...Pe,lessons:Pe.lessons.map(de=>de.id===F.id?ke:de)}:Pe)}:Me)}})))}ue(ke),$({sectionId:ae,topicId:Ce})}catch(ke){console.error("  :",ke),alert("   ")}finally{Fn(!1)}},[Vs,Ji]=T.useState(!1),Uo=async F=>{Ji(!0);try{const{sectionId:ae,topicId:Ce}=ne;await po.saveLesson(F,n),o(ke=>({...ke,[n]:{...ke[n],sections:ke[n].sections.map(ce=>ce.id===ae?{...ce,topics:ce.topics.map(xe=>xe.id===Ce?{...xe,lessons:xe.lessons.map(Me=>Me.id===F.id?F:Me)}:xe)}:ce)}})),ue(null),$(null)}catch(ae){console.error("  :",ae),alert(t==="ru"?"  ":"   ")}finally{Ji(!1)}},[Hn,xt]=T.useState({section:!1,topic:!1,lesson:!1}),Oe=async()=>{xt(F=>({...F,section:!0}));try{const F=await Ut(E,"ru","tj");N(F)}finally{xt(F=>({...F,section:!1}))}},Je=async()=>{xt(F=>({...F,topic:!0}));try{const F=await Ut(_,"ru","tj");ee(F)}finally{xt(F=>({...F,topic:!1}))}},lt=async()=>{xt(F=>({...F,lesson:!0}));try{const F=await Ut(P,"ru","tj");I(F)}finally{xt(F=>({...F,lesson:!1}))}},nn=async()=>{xt(F=>({...F,section:!0}));try{const F=await Ut(j,"tj","ru");M(F)}finally{xt(F=>({...F,section:!1}))}},Un=async()=>{xt(F=>({...F,topic:!0}));try{const F=await Ut(V,"tj","ru");L(F)}finally{xt(F=>({...F,topic:!1}))}},Vn=async()=>{xt(F=>({...F,lesson:!0}));try{const F=await Ut(B,"tj","ru");D(F)}finally{xt(F=>({...F,lesson:!1}))}},vr=(F,ae,Ce,ke,ce,xe,Me=" (RU)",Pe=" (TJ)")=>f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx("input",{type:"text",value:F,onChange:de=>ae(de.target.value),placeholder:Me,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-primary/50 transition-colors"}),f.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"RU"})]}),f.jsx("button",{type:"button",onClick:xe,className:"flex items-center gap-1 px-3 py-3 bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors text-sm",title:" TJ -> RU",children:f.jsx(er,{size:16,className:"rotate-180"})})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx("input",{type:"text",value:Ce,onChange:de=>ke(de.target.value),placeholder:Pe,className:"w-full bg-gaming-bg/50 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/30 focus:outline-none focus:border-gaming-accent/50 transition-colors"}),f.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-white/30 font-medium",children:"TJ"})]}),f.jsx("button",{type:"button",onClick:ce,className:"flex items-center gap-1 px-3 py-3 bg-gaming-accent/20 text-gaming-accent rounded-xl hover:bg-gaming-accent/30 transition-colors text-sm",title:" RU -> TJ",children:f.jsx(er,{size:16})})]})]}),Tn=F=>{const ae=Z1.find(Ce=>Ce.id===F);return ae?ae.icon:xn};return f.jsxs("div",{className:"min-h-screen bg-gaming-bg font-sans text-white p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6 sm:mb-8",children:[f.jsxs("button",{onClick:()=>r("/"),className:"flex items-center gap-2 text-gaming-textMuted hover:text-white transition-colors self-start",children:[f.jsx(Bh,{size:20}),t==="ru"?"":""]}),f.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-gaming-card/50 border border-white/5 text-sm font-medium",children:[a==="saved"&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-gaming-accent",children:""}),f.jsx("span",{className:"text-gaming-textMuted",children:t==="ru"?" ":"  "})]}),a==="saving"&&f.jsxs(f.Fragment,{children:[f.jsx(It,{size:16,className:"text-gaming-primary animate-spin"}),f.jsx("span",{className:"text-white",children:t==="ru"?"...":" ..."})]}),a==="error"&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-red-500",children:""}),f.jsx("span",{className:"text-red-400",children:t==="ru"?" ":""})]})]})]}),f.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 flex items-center gap-3",children:[f.jsx(dE,{className:"text-gaming-primary",size:32}),t==="ru"?" ":" "]}),f.jsx("p",{className:"text-gaming-textMuted text-base sm:text-lg mb-6 sm:mb-8",children:t==="ru"?" ,   .   .":",     .    ."}),f.jsxs("div",{className:"mb-6 sm:mb-8",children:[f.jsx("label",{className:"block text-sm text-gaming-textMuted mb-2",children:t==="ru"?" ":"  "}),f.jsxs("div",{className:"relative",children:[f.jsx("select",{value:n,onChange:F=>s(F.target.value),className:"w-full sm:max-w-md bg-gaming-card/60 backdrop-blur-xl border border-white/10 rounded-xl px-4 py-3 text-white appearance-none cursor-pointer focus:outline-none focus:border-gaming-primary/50 transition-colors",children:Qm.map(F=>{var ae;return f.jsx("option",{value:F,className:"bg-gaming-card text-white",children:((ae=Hh[F])==null?void 0:ae[t])||F},F)})}),f.jsx(jd,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gaming-textMuted pointer-events-none",size:20})]})]}),f.jsxs("div",{className:"bg-gaming-card/40 backdrop-blur-xl border border-white/5 rounded-3xl p-4 sm:p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[f.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[f.jsx(vE,{className:"text-gaming-primary",size:24}),t==="ru"?"":""]}),f.jsxs("button",{onClick:()=>y(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-gaming-primary/20 text-gaming-primary rounded-xl hover:bg-gaming-primary/30 transition-colors active:scale-95 w-full sm:w-auto",children:[f.jsx(cE,{size:18}),t==="ru"?" ":"  "]})]}),m&&f.jsxs("div",{className:"mb-6 p-4 bg-gaming-bg/50 rounded-2xl border border-gaming-primary/30",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-gaming-primary",children:t==="ru"?" ":" "}),vr(E,M,j,N,Oe,nn),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsxs("button",{onClick:Gt,className:"flex items-center gap-2 px-4 py-2 bg-gaming-primary text-white rounded-xl hover:bg-gaming-primary/80 transition-colors active:scale-95",children:[f.jsx(Rd,{size:16}),t==="ru"?"":" "]}),f.jsx("button",{onClick:()=>{y(!1),M(""),N("")},className:"px-4 py-2 text-gaming-textMuted hover:text-white transition-colors",children:t==="ru"?"":" "})]})]}),ze.sections.length===0?f.jsxs("div",{className:"text-center py-12 text-gaming-textMuted",children:[f.jsx(Zg,{size:48,className:"mx-auto mb-4 opacity-30"}),f.jsx("p",{children:t==="ru"?"  .  !":"  .   !"})]}):f.jsx(Q6,{sensors:ie,collisionDetection:$6,onDragEnd:Nt,children:f.jsx(zd,{items:ze.sections.map(F=>F.id),strategy:Id,children:f.jsx("div",{className:"space-y-4",children:ze.sections.map((F,ae)=>{var Ce,ke;return f.jsx(qF,{section:F,sectionIndex:ae,lang:t,onDelete:gr,children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>ge(F.id),children:[f.jsxs("div",{className:"flex items-center gap-3",children:[c[F.id]?f.jsx(jd,{size:20,className:"text-gaming-primary"}):f.jsx(Oi,{size:20,className:"text-gaming-textMuted"}),f.jsxs("span",{className:"text-lg font-semibold",children:[ae+1,". ",t==="tj"&&F.titleTj||F.title]}),f.jsxs("span",{className:"text-sm text-gaming-textMuted",children:["(",((Ce=F.topics)==null?void 0:Ce.length)||0," ",t==="ru"?"":"",")"]})]}),f.jsx("button",{onClick:ce=>{ce.stopPropagation(),gr(F.id)},className:"p-2 text-gaming-textMuted hover:text-red-400 transition-colors",children:f.jsx(Mu,{size:18})})]}),c[F.id]&&f.jsxs("div",{className:"mt-4 ml-8",children:[f.jsxs("button",{onClick:()=>v(F.id),className:"flex items-center gap-2 px-3 py-2 mb-4 text-sm text-gaming-accent hover:bg-gaming-accent/10 rounded-lg transition-colors",children:[f.jsx(f0,{size:16}),t==="ru"?" ":"  "]}),x===F.id&&f.jsxs("div",{className:"mb-4 p-4 bg-gaming-card/50 rounded-xl border border-gaming-accent/30",children:[f.jsx("h4",{className:"text-md font-semibold mb-3 text-gaming-accent",children:t==="ru"?" ":" "}),vr(_,L,V,ee,Je,Un),f.jsxs("div",{className:"flex gap-3 mt-4",children:[f.jsxs("button",{onClick:()=>Jt(F.id),className:"flex items-center gap-2 px-3 py-2 bg-gaming-accent text-white rounded-lg hover:bg-gaming-accent/80 transition-colors active:scale-95 text-sm",children:[f.jsx(Rd,{size:14}),t==="ru"?"":" "]}),f.jsx("button",{onClick:()=>{v(null),L(""),ee("")},className:"px-3 py-2 text-gaming-textMuted hover:text-white transition-colors text-sm",children:t==="ru"?"":" "})]})]}),((ke=F.topics)==null?void 0:ke.length)===0?f.jsx("p",{className:"text-sm text-gaming-textMuted",children:t==="ru"?" ":" "}):f.jsx(zd,{items:F.topics.map(ce=>ce.id),strategy:Id,children:f.jsx("div",{className:"space-y-3",children:F.topics.map((ce,xe)=>{var Me,Pe;return f.jsx(KF,{topic:ce,topicIndex:xe,sectionIndex:ae,children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>He(ce.id),children:[f.jsxs("div",{className:"flex items-center gap-2",children:[h[ce.id]?f.jsx(jd,{size:16,className:"text-gaming-accent"}):f.jsx(Oi,{size:16,className:"text-gaming-textMuted"}),f.jsxs("span",{className:"font-medium",children:[ae+1,".",xe+1,". ",t==="tj"&&ce.titleTj||ce.title]}),f.jsxs("span",{className:"text-xs text-gaming-textMuted",children:["(",((Me=ce.lessons)==null?void 0:Me.length)||0," ",t==="ru"?"":"",")"]})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{onClick:de=>{de.stopPropagation(),fe({type:"topic",id:ce.id,fromSectionId:F.id})},className:"p-1 text-gaming-textMuted hover:text-gaming-accent transition-colors",title:t==="ru"?"":"",children:f.jsx(uw,{size:14})}),f.jsx("button",{onClick:de=>{de.stopPropagation(),Sn(F.id,ce.id)},className:"p-1 text-gaming-textMuted hover:text-red-400 transition-colors",children:f.jsx(Mu,{size:16})})]})]}),h[ce.id]&&f.jsxs("div",{className:"mt-3 ml-6",children:[f.jsxs("button",{onClick:()=>k({sectionId:F.id,topicId:ce.id}),className:"flex items-center gap-2 px-2 py-1 mb-3 text-xs text-gaming-pink hover:bg-gaming-pink/10 rounded-lg transition-colors",children:[f.jsx(f0,{size:14}),t==="ru"?" ":"  "]}),(w==null?void 0:w.sectionId)===F.id&&(w==null?void 0:w.topicId)===ce.id&&f.jsxs("div",{className:"mb-3 p-3 bg-gaming-bg/50 rounded-lg border border-gaming-pink/30",children:[f.jsx("h5",{className:"text-sm font-semibold mb-3 text-gaming-pink",children:t==="ru"?" ":" "}),vr(P,D,B,I,lt,Vn),f.jsxs("div",{className:"mt-3",children:[f.jsx("label",{className:"block text-xs text-gaming-textMuted mb-2",children:t==="ru"?" ":" "}),f.jsx("div",{className:"flex flex-wrap gap-2",children:Z1.map(de=>{const Ye=de.icon,Ie=H===de.id;return f.jsxs("button",{onClick:()=>Z(de.id),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-xs transition-colors ${Ie?"bg-gaming-pink text-white":"bg-gaming-card/50 text-gaming-textMuted hover:text-white"}`,children:[f.jsx(Ye,{size:14}),de.label[t]]},de.id)})})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsxs("button",{onClick:()=>Br(F.id,ce.id),className:"flex items-center gap-2 px-3 py-2 bg-gaming-pink text-white rounded-lg hover:bg-gaming-pink/80 transition-colors active:scale-95 text-xs",children:[f.jsx(Rd,{size:12}),t==="ru"?"":" "]}),f.jsx("button",{onClick:()=>{k(null),D(""),I("")},className:"px-3 py-2 text-gaming-textMuted hover:text-white transition-colors text-xs",children:t==="ru"?"":" "})]})]}),((Pe=ce.lessons)==null?void 0:Pe.length)===0?f.jsx("p",{className:"text-xs text-gaming-textMuted",children:t==="ru"?" ":" "}):f.jsx(zd,{items:ce.lessons.map(de=>de.id),strategy:Id,children:f.jsx("div",{className:"space-y-2",children:ce.lessons.map((de,Ye)=>f.jsx(GF,{lesson:de,lessonIndex:Ye,sectionIndex:ae,topicIndex:xe,lang:t,onDelete:Ie=>rn(F.id,ce.id,Ie),onEdit:(Ie,Ae)=>{Ae==="move"?fe({type:"lesson",id:de.id,fromSectionId:F.id,fromTopicId:ce.id}):Gi(Ie,F.id,ce.id)},getLessonIcon:Tn},de.id))})})]})]})},ce.id)})})})]})]})},F.id)})})})})]}),q&&f.jsx(VF,{lesson:q,onSave:Uo,onClose:()=>{Vs||(ue(null),$(null))},lang:t,isSaving:Vs}),U&&f.jsx(JF,{item:U,itemType:U.type,syllabus:i[n]||{sections:[]},onMove:(F,ae)=>{U.type==="topic"&&or(U.id,U.fromSectionId,F),U.type==="lesson"&&Fr(U.id,U.fromSectionId,U.fromTopicId,F,ae)},onClose:()=>fe(null),lang:t}),"        "]})},XF=({lang:t,t:e})=>f.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center px-4 py-12 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-gaming-pink/5 rounded-full blur-[100px] pointer-events-none"}),f.jsx("div",{className:"absolute top-1/4 right-1/4 w-[300px] h-[300px] bg-gaming-primary/10 rounded-full blur-[80px] pointer-events-none animate-pulse-slow"}),f.jsxs("div",{className:"relative z-10 text-center max-w-2xl mx-auto",children:[f.jsx("div",{className:"inline-flex items-center justify-center p-4 bg-gaming-card/50 backdrop-blur-md rounded-3xl border border-gaming-pink/20 shadow-lg shadow-gaming-pink/10 mb-8 animate-float",children:f.jsx(lw,{size:64,className:"text-gaming-pink"})}),f.jsx("h1",{className:"text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-gaming-primary via-gaming-pink to-gaming-accent mb-4 drop-shadow-2xl",children:"404"}),f.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white mb-6",children:e.errorTitle}),f.jsx("p",{className:"text-lg text-gaming-textMuted mb-10 leading-relaxed",children:e.errorSubtitle}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[f.jsxs(At,{to:"/",className:"group relative bg-gaming-primary hover:bg-gaming-primary/90 text-white px-8 py-3 rounded-xl font-bold transition-all active:scale-95 shadow-lg shadow-gaming-primary/25 flex items-center justify-center gap-2 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),f.jsx(hw,{size:20}),f.jsx("span",{children:e.errorHome})]}),f.jsxs("button",{onClick:()=>window.history.back(),className:"group bg-transparent hover:bg-white/5 text-white border border-white/10 px-8 py-3 rounded-xl font-bold transition-all active:scale-95 flex items-center justify-center gap-2 backdrop-blur-sm",children:[f.jsx(oE,{size:20,className:"group-hover:-translate-x-1 transition-transform"}),f.jsx("span",{children:e.errorBack})]})]})]})]});function QF(){const[t,e]=T.useState("tj"),[r,n]=T.useState("student"),s=IE[t],i=$s();return Ve.useEffect(()=>{window.scrollTo(0,0)},[i.pathname]),f.jsxs("div",{className:"min-h-screen bg-gaming-bg font-sans text-white selection:bg-gaming-pink/30 selection:text-white overflow-hidden flex flex-col",children:[f.jsx(_E,{lang:t,setLang:e,t:s}),f.jsx("main",{className:"flex-grow pt-24",children:f.jsxs(bC,{children:[f.jsx(Xs,{path:"/",element:f.jsx(PE,{lang:t,t:s,setLang:e,userRole:r,setUserRole:n})}),f.jsx(Xs,{path:"/subject/:subjectId",element:f.jsx(vA,{lang:t,t:s,userRole:r})}),f.jsx(Xs,{path:"/subject/:subjectId/section/:sectionId",element:f.jsx(yA,{lang:t,t:s,userRole:r})}),f.jsx(Xs,{path:"/subject/:subjectId/section/:sectionId/topic/:topicId",element:f.jsx(xA,{lang:t,t:s,userRole:r})}),f.jsx(Xs,{path:"/lesson/:lessonId",element:f.jsx(kR,{lang:t,t:s,userRole:r})}),f.jsx(Xs,{path:"/creator",element:f.jsx(YF,{lang:t,t:s})}),f.jsx(Xs,{path:"*",element:f.jsx(XF,{lang:t,t:s})})]})}),f.jsx(OE,{t:s})]})}function ZF(){return f.jsx(VC,{basename:"/Donishmand_platform/",children:f.jsx(QF,{})})}rm.createRoot(document.getElementById("root")).render(f.jsx(Ve.StrictMode,{children:f.jsx(ZF,{})}));
